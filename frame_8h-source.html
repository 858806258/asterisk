<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (24 May 2007)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Thu May 24 22:26:42 2007</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Finclude_2F.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Finclude_2Fasterisk_2F.html">asterisk</a></div>
<h1>frame.h</h1><a href="frame_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Asterisk -- An open source telephony toolkit.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright (C) 1999 - 2005, Digium, Inc.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Mark Spencer &lt;markster@digium.com&gt;</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * See http://www.asterisk.org for more information about</span>
<a name="l00009"></a>00009 <span class="comment"> * the Asterisk project. Please do not directly contact</span>
<a name="l00010"></a>00010 <span class="comment"> * any of the maintainers of this project for assistance;</span>
<a name="l00011"></a>00011 <span class="comment"> * the project provides a web site, mailing lists and IRC</span>
<a name="l00012"></a>00012 <span class="comment"> * channels for your use.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * This program is free software, distributed under the terms of</span>
<a name="l00015"></a>00015 <span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span>
<a name="l00016"></a>00016 <span class="comment"> * at the top of the source tree.</span>
<a name="l00017"></a>00017 <span class="comment"> */</span>
<a name="l00018"></a>00018 <span class="comment"></span>
<a name="l00019"></a>00019 <span class="comment">/*! \file</span>
<a name="l00020"></a>00020 <span class="comment"> * \brief Asterisk internal frame definitions.</span>
<a name="l00021"></a>00021 <span class="comment"> * \arg For an explanation of frames, see \ref Def_Frame</span>
<a name="l00022"></a>00022 <span class="comment"> * \arg Frames are send of Asterisk channels, see \ref Def_Channel</span>
<a name="l00023"></a>00023 <span class="comment"> */</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="preprocessor">#ifndef _ASTERISK_FRAME_H</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="preprocessor">#define _ASTERISK_FRAME_H</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span>
<a name="l00028"></a>00028 <span class="preprocessor">#if defined(__cplusplus) || defined(c_plusplus)</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
<a name="l00030"></a>00030 <span class="preprocessor">#endif</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;sys/time.h&gt;</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="preprocessor">#include "<a class="code" href="compiler_8h.html">asterisk/compiler.h</a>"</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include "<a class="code" href="endian_8h.html">asterisk/endian.h</a>"</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include "<a class="code" href="linkedlists_8h.html">asterisk/linkedlists.h</a>"</span>
<a name="l00038"></a>00038 
<a name="l00039"></a><a class="code" href="structast__codec__pref.html">00039</a> <span class="keyword">struct </span><a class="code" href="structast__codec__pref.html">ast_codec_pref</a> {
<a name="l00040"></a><a class="code" href="structast__codec__pref.html#6d2f03f1137d7e94d7e21e919018353a">00040</a>    <span class="keywordtype">char</span> <a class="code" href="structast__codec__pref.html#6d2f03f1137d7e94d7e21e919018353a">order</a>[32];
<a name="l00041"></a><a class="code" href="structast__codec__pref.html#8eb9be1f513faf031cb30a78e4c54d04">00041</a>    <span class="keywordtype">char</span> <a class="code" href="structast__codec__pref.html#8eb9be1f513faf031cb30a78e4c54d04">framing</a>[32];
<a name="l00042"></a>00042 };
<a name="l00043"></a>00043 <span class="comment"></span>
<a name="l00044"></a>00044 <span class="comment">/*! \page Def_Frame AST Multimedia and signalling frames</span>
<a name="l00045"></a>00045 <span class="comment">   \section Def_AstFrame What is an ast_frame ?</span>
<a name="l00046"></a>00046 <span class="comment">   A frame of data read used to communicate between </span>
<a name="l00047"></a>00047 <span class="comment">   between channels and applications.</span>
<a name="l00048"></a>00048 <span class="comment">   Frames are divided into frame types and subclasses.</span>
<a name="l00049"></a>00049 <span class="comment"></span>
<a name="l00050"></a>00050 <span class="comment">   \par Frame types </span>
<a name="l00051"></a>00051 <span class="comment">   \arg \b VOICE: Voice data, subclass is codec (AST_FORMAT_*)</span>
<a name="l00052"></a>00052 <span class="comment">   \arg \b VIDEO: Video data, subclass is codec (AST_FORMAT_*)</span>
<a name="l00053"></a>00053 <span class="comment">   \arg \b DTMF:  A DTMF digit, subclass is the digit</span>
<a name="l00054"></a>00054 <span class="comment">   \arg \b IMAGE: Image transport, mostly used in IAX</span>
<a name="l00055"></a>00055 <span class="comment">   \arg \b TEXT:  Text messages and character by character (real time text)</span>
<a name="l00056"></a>00056 <span class="comment">   \arg \b HTML:  URL's and web pages</span>
<a name="l00057"></a>00057 <span class="comment">   \arg \b MODEM: Modulated data encodings, such as T.38 and V.150</span>
<a name="l00058"></a>00058 <span class="comment">   \arg \b IAX:   Private frame type for the IAX protocol</span>
<a name="l00059"></a>00059 <span class="comment">   \arg \b CNG:   Comfort noice frames</span>
<a name="l00060"></a>00060 <span class="comment">   \arg \b CONTROL:  A control frame, subclass defined as AST_CONTROL_</span>
<a name="l00061"></a>00061 <span class="comment">   \arg \b NULL:  Empty, useless frame</span>
<a name="l00062"></a>00062 <span class="comment"></span>
<a name="l00063"></a>00063 <span class="comment">   \par Files</span>
<a name="l00064"></a>00064 <span class="comment">   \arg frame.h   Definitions</span>
<a name="l00065"></a>00065 <span class="comment">   \arg frame.c   Function library</span>
<a name="l00066"></a>00066 <span class="comment">   \arg \ref Def_Channel Asterisk channels</span>
<a name="l00067"></a>00067 <span class="comment">   \section Def_ControlFrame Control Frames</span>
<a name="l00068"></a>00068 <span class="comment">   Control frames send signalling information between channels</span>
<a name="l00069"></a>00069 <span class="comment">   and devices. They are prefixed with AST_CONTROL_, like AST_CONTROL_FRAME_HANGUP</span>
<a name="l00070"></a>00070 <span class="comment">   \arg \b HANGUP The other end has hungup</span>
<a name="l00071"></a>00071 <span class="comment">   \arg \b RING   Local ring</span>
<a name="l00072"></a>00072 <span class="comment">   \arg \b RINGING   The other end is ringing</span>
<a name="l00073"></a>00073 <span class="comment">   \arg \b ANSWER The other end has answered</span>
<a name="l00074"></a>00074 <span class="comment">   \arg \b BUSY   Remote end is busy</span>
<a name="l00075"></a>00075 <span class="comment">   \arg \b TAKEOFFHOOK  Make it go off hook (what's "it" ? )</span>
<a name="l00076"></a>00076 <span class="comment">   \arg \b OFFHOOK   Line is off hook</span>
<a name="l00077"></a>00077 <span class="comment">   \arg \b CONGESTION   Congestion (circuit is busy, not available)</span>
<a name="l00078"></a>00078 <span class="comment">   \arg \b FLASH  Other end sends flash hook</span>
<a name="l00079"></a>00079 <span class="comment">   \arg \b WINK   Other end sends wink</span>
<a name="l00080"></a>00080 <span class="comment">   \arg \b OPTION Send low-level option</span>
<a name="l00081"></a>00081 <span class="comment">   \arg \b RADIO_KEY Key radio (see app_rpt.c)</span>
<a name="l00082"></a>00082 <span class="comment">   \arg \b RADIO_UNKEY  Un-key radio (see app_rpt.c)</span>
<a name="l00083"></a>00083 <span class="comment">   \arg \b PROGRESS  Other end indicates call progress</span>
<a name="l00084"></a>00084 <span class="comment">   \arg \b PROCEEDING   Indicates proceeding</span>
<a name="l00085"></a>00085 <span class="comment">   \arg \b HOLD   Call is placed on hold</span>
<a name="l00086"></a>00086 <span class="comment">   \arg \b UNHOLD Call is back from hold</span>
<a name="l00087"></a>00087 <span class="comment">   \arg \b VIDUPDATE Video update requested</span>
<a name="l00088"></a>00088 <span class="comment"></span>
<a name="l00089"></a>00089 <span class="comment">*/</span>
<a name="l00090"></a>00090 <span class="comment"></span>
<a name="l00091"></a>00091 <span class="comment">/*!</span>
<a name="l00092"></a>00092 <span class="comment"> * \brief Frame types </span>
<a name="l00093"></a>00093 <span class="comment"> *</span>
<a name="l00094"></a>00094 <span class="comment"> * \note It is important that the values of each frame type are never changed,</span>
<a name="l00095"></a>00095 <span class="comment"> *       because it will break backwards compatability with older versions.</span>
<a name="l00096"></a>00096 <span class="comment"> *       This is because these constants are transmitted directly over IAX2.</span>
<a name="l00097"></a>00097 <span class="comment"> */</span>
<a name="l00098"></a><a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f92">00098</a> <span class="keyword">enum</span> <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f92">ast_frame_type</a> {<span class="comment"></span>
<a name="l00099"></a>00099 <span class="comment">   /*! DTMF end event, subclass is the digit */</span>
<a name="l00100"></a>00100    <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f927fc7453b6ac78761e7a4e46b3fcfa557">AST_FRAME_DTMF_END</a> = 1,<span class="comment"></span>
<a name="l00101"></a>00101 <span class="comment">   /*! Voice data, subclass is AST_FORMAT_* */</span>
<a name="l00102"></a>00102    <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f9264fc4720a7b3982e2d4bf246fe3d9924">AST_FRAME_VOICE</a>,<span class="comment"></span>
<a name="l00103"></a>00103 <span class="comment">   /*! Video frame, maybe?? :) */</span>
<a name="l00104"></a>00104    <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f92f3104666df07b461099e43be37983393">AST_FRAME_VIDEO</a>,<span class="comment"></span>
<a name="l00105"></a>00105 <span class="comment">   /*! A control frame, subclass is AST_CONTROL_* */</span>
<a name="l00106"></a>00106    <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f92d7fbcef5adafabe47c2e42258e4f019e">AST_FRAME_CONTROL</a>,<span class="comment"></span>
<a name="l00107"></a>00107 <span class="comment">   /*! An empty, useless frame */</span>
<a name="l00108"></a>00108    <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f92eaf38b643259d44fcc0a869ab36609b1">AST_FRAME_NULL</a>,<span class="comment"></span>
<a name="l00109"></a>00109 <span class="comment">   /*! Inter Asterisk Exchange private frame type */</span>
<a name="l00110"></a>00110    <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f92bf1d9c403ffb2c4b26845d97d1bce16e">AST_FRAME_IAX</a>,<span class="comment"></span>
<a name="l00111"></a>00111 <span class="comment">   /*! Text messages */</span>
<a name="l00112"></a>00112    <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f92696800d27feca415d5c80113fb740f44">AST_FRAME_TEXT</a>,<span class="comment"></span>
<a name="l00113"></a>00113 <span class="comment">   /*! Image Frames */</span>
<a name="l00114"></a>00114    <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f927e5b7994ea6aabfce7d738e4c8278e1e">AST_FRAME_IMAGE</a>,<span class="comment"></span>
<a name="l00115"></a>00115 <span class="comment">   /*! HTML Frame */</span>
<a name="l00116"></a>00116    <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f92a9ac2233f0025ec1b3d23e720cee92be">AST_FRAME_HTML</a>,<span class="comment"></span>
<a name="l00117"></a>00117 <span class="comment">   /*! Comfort Noise frame (subclass is level of CNG in -dBov), </span>
<a name="l00118"></a>00118 <span class="comment">       body may include zero or more 8-bit quantization coefficients */</span>
<a name="l00119"></a>00119    <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f9223556e0be95cdd997b0f01e84b1a5a0f">AST_FRAME_CNG</a>,<span class="comment"></span>
<a name="l00120"></a>00120 <span class="comment">   /*! Modem-over-IP data streams */</span>
<a name="l00121"></a>00121    <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f9258a9185f9370d3f1076917c963b0de50">AST_FRAME_MODEM</a>,  <span class="comment"></span>
<a name="l00122"></a>00122 <span class="comment">   /*! DTMF begin event, subclass is the digit */</span>
<a name="l00123"></a>00123    <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f923c709a87ba681b04d6a6285d6d0af892">AST_FRAME_DTMF_BEGIN</a>,
<a name="l00124"></a>00124 };
<a name="l00125"></a><a class="code" href="frame_8h.html#41e7a80287a24ece13159c2d8b1b9375">00125</a> <span class="preprocessor">#define AST_FRAME_DTMF AST_FRAME_DTMF_END</span>
<a name="l00126"></a>00126 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00127"></a>00127 <span class="comment">/*! \brief Data structure associated with a single frame of data</span>
<a name="l00128"></a>00128 <span class="comment"> */</span>
<a name="l00129"></a><a class="code" href="structast__frame.html">00129</a> <span class="keyword">struct </span><a class="code" href="structast__frame.html">ast_frame</a> {<span class="comment"></span>
<a name="l00130"></a>00130 <span class="comment">   /*! Kind of frame */</span>
<a name="l00131"></a><a class="code" href="structast__frame.html#9574009b02f8256934a1a25cbac10e1d">00131</a>    <span class="keyword">enum</span> <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f92">ast_frame_type</a> <a class="code" href="structast__frame.html#9574009b02f8256934a1a25cbac10e1d">frametype</a>;            <span class="comment"></span>
<a name="l00132"></a>00132 <span class="comment">   /*! Subclass, frame dependent */</span>
<a name="l00133"></a><a class="code" href="structast__frame.html#c00578b472e008b51fd24237785fa428">00133</a>    <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#c00578b472e008b51fd24237785fa428">subclass</a>;           <span class="comment"></span>
<a name="l00134"></a>00134 <span class="comment">   /*! Length of data */</span>
<a name="l00135"></a><a class="code" href="structast__frame.html#106553e2afb20bec4268dd6bd02c952d">00135</a>    <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#106553e2afb20bec4268dd6bd02c952d">datalen</a>;            <span class="comment"></span>
<a name="l00136"></a>00136 <span class="comment">   /*! Number of 8khz samples in this frame */</span>
<a name="l00137"></a><a class="code" href="structast__frame.html#6ef9161b900632671022358216c7dfe7">00137</a>    <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#6ef9161b900632671022358216c7dfe7">samples</a>;            <span class="comment"></span>
<a name="l00138"></a>00138 <span class="comment">   /*! Was the data malloc'd?  i.e. should we free it when we discard the frame? */</span>
<a name="l00139"></a><a class="code" href="structast__frame.html#21ad8fb6783b76b648f5178a208fb3d4">00139</a>    <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#21ad8fb6783b76b648f5178a208fb3d4">mallocd</a>;            <span class="comment"></span>
<a name="l00140"></a>00140 <span class="comment">   /*! The number of bytes allocated for a malloc'd frame header */</span>
<a name="l00141"></a><a class="code" href="structast__frame.html#3a8d0b14f2c3d81531d25e8f120fff7e">00141</a>    size_t <a class="code" href="structast__frame.html#3a8d0b14f2c3d81531d25e8f120fff7e">mallocd_hdr_len</a>;<span class="comment"></span>
<a name="l00142"></a>00142 <span class="comment">   /*! How many bytes exist _before_ "data" that can be used if needed */</span>
<a name="l00143"></a><a class="code" href="structast__frame.html#7a86c157ee9713c34fbd7a1ee40f0c5a">00143</a>    <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#7a86c157ee9713c34fbd7a1ee40f0c5a">offset</a>;          <span class="comment"></span>
<a name="l00144"></a>00144 <span class="comment">   /*! Optional source of frame for debugging */</span>
<a name="l00145"></a><a class="code" href="structast__frame.html#25d902c24283ab8cfbac54dfa101ad31">00145</a>    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structast__frame.html#25d902c24283ab8cfbac54dfa101ad31">src</a>;           <span class="comment"></span>
<a name="l00146"></a>00146 <span class="comment">   /*! Pointer to actual data */</span>
<a name="l00147"></a><a class="code" href="structast__frame.html#8d777f385d3dfec8815d20f7496026dc">00147</a>    <span class="keywordtype">void</span> *<a class="code" href="structast__frame.html#8d777f385d3dfec8815d20f7496026dc">data</a>;    <span class="comment"></span>
<a name="l00148"></a>00148 <span class="comment">   /*! Global delivery time */</span>      
<a name="l00149"></a><a class="code" href="structast__frame.html#7108537956afa2a526f96cc9da7b0c36">00149</a>    <span class="keyword">struct </span>timeval delivery;<span class="comment"></span>
<a name="l00150"></a>00150 <span class="comment">   /*! For placing in a linked list */</span>
<a name="l00151"></a>00151    <a class="code" href="structast__frame.html#9c22f2b90826a41b9a5c0ccdecf7635e">AST_LIST_ENTRY</a>(<a class="code" href="structast__frame.html">ast_frame</a>) frame_list;<span class="comment"></span>
<a name="l00152"></a>00152 <span class="comment">   /*! Timing data flag */</span>
<a name="l00153"></a><a class="code" href="structast__frame.html#138bb3d6497bbfe1604b93aef03d5f09">00153</a>    <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#138bb3d6497bbfe1604b93aef03d5f09">has_timing_info</a>;<span class="comment"></span>
<a name="l00154"></a>00154 <span class="comment">   /*! Timestamp in milliseconds */</span>
<a name="l00155"></a><a class="code" href="structast__frame.html#4d682ec4eed27c53849758bc13b6e179">00155</a>    <span class="keywordtype">long</span> <a class="code" href="structast__frame.html#4d682ec4eed27c53849758bc13b6e179">ts</a>;<span class="comment"></span>
<a name="l00156"></a>00156 <span class="comment">   /*! Length in milliseconds */</span>
<a name="l00157"></a><a class="code" href="structast__frame.html#f5a8e923f8cd24b56b3bab32358cc58a">00157</a>    <span class="keywordtype">long</span> <a class="code" href="structast__frame.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>;<span class="comment"></span>
<a name="l00158"></a>00158 <span class="comment">   /*! Sequence number */</span>
<a name="l00159"></a><a class="code" href="structast__frame.html#d8d8c9e3082c9d3cc78d718b0d250891">00159</a>    <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#d8d8c9e3082c9d3cc78d718b0d250891">seqno</a>;
<a name="l00160"></a>00160 };
<a name="l00161"></a>00161 <span class="comment"></span>
<a name="l00162"></a>00162 <span class="comment">/*!</span>
<a name="l00163"></a>00163 <span class="comment"> * Set the various field of a frame to point to a buffer.</span>
<a name="l00164"></a>00164 <span class="comment"> * Typically you set the base address of the buffer, the offset as</span>
<a name="l00165"></a>00165 <span class="comment"> * AST_FRIENDLY_OFFSET, and the datalen as the amount of bytes queued.</span>
<a name="l00166"></a>00166 <span class="comment"> * The remaining things (to be done manually) is set the number of</span>
<a name="l00167"></a>00167 <span class="comment"> * samples, which cannot be derived from the datalen unless you know</span>
<a name="l00168"></a>00168 <span class="comment"> * the number of bits per sample.</span>
<a name="l00169"></a>00169 <span class="comment"> */</span>
<a name="l00170"></a><a class="code" href="frame_8h.html#c564825682734d6486426d62403e1d49">00170</a> #define  <a class="code" href="frame_8h.html#c564825682734d6486426d62403e1d49">AST_FRAME_SET_BUFFER</a>(fr, _base, _ofs, _datalen) \
<a name="l00171"></a>00171    {              \
<a name="l00172"></a>00172    (fr)-&gt;<a class="code" href="structast__frame.html#8d777f385d3dfec8815d20f7496026dc">data</a> = (<span class="keywordtype">char</span> *)_base + (_ofs);   \
<a name="l00173"></a>00173    (fr)-&gt;offset = (_ofs);        \
<a name="l00174"></a>00174    (fr)-&gt;datalen = (_datalen);      \
<a name="l00175"></a>00175    }
<a name="l00176"></a>00176 <span class="comment"></span>
<a name="l00177"></a>00177 <span class="comment">/*! Queueing a null frame is fairly common, so we declare a global null frame object</span>
<a name="l00178"></a>00178 <span class="comment">    for this purpose instead of having to declare one on the stack */</span>
<a name="l00179"></a>00179 <span class="keyword">extern</span> <span class="keyword">struct</span> <a class="code" href="structast__frame.html">ast_frame</a> <a class="code" href="frame_8c.html#8bfe1415e256ff41d93a3ce9396e815f">ast_null_frame</a>;
<a name="l00180"></a>00180 
<a name="l00181"></a><a class="code" href="frame_8h.html#2d81423482d14a11460b216109864d5b">00181</a> #define <a class="code" href="frame_8h.html#2d81423482d14a11460b216109864d5b">AST_FRIENDLY_OFFSET</a>   64 <span class="comment">/*! It's polite for a a new frame to</span>
<a name="l00182"></a>00182 <span class="comment">                 have this number of bytes for additional</span>
<a name="l00183"></a>00183 <span class="comment">                 headers.  */</span>
<a name="l00184"></a><a class="code" href="frame_8h.html#c56e1e73a66ee18799fd111f7a5c1f42">00184</a> #define <a class="code" href="frame_8h.html#c56e1e73a66ee18799fd111f7a5c1f42">AST_MIN_OFFSET</a>     32 <span class="comment">/*! Make sure we keep at least this much handy */</span>
<a name="l00185"></a>00185 <span class="comment"></span>
<a name="l00186"></a>00186 <span class="comment">/*! Need the header be free'd? */</span>
<a name="l00187"></a><a class="code" href="frame_8h.html#df4f73015193c13b65bda224d8c683f8">00187</a> #define <a class="code" href="frame_8h.html#df4f73015193c13b65bda224d8c683f8">AST_MALLOCD_HDR</a>    (1 &lt;&lt; 0)<span class="comment"></span>
<a name="l00188"></a>00188 <span class="comment">/*! Need the data be free'd? */</span>
<a name="l00189"></a><a class="code" href="frame_8h.html#8cd7ea973e577911ae6e6ca3a106d6f9">00189</a> <span class="preprocessor">#define AST_MALLOCD_DATA   (1 &lt;&lt; 1)</span>
<a name="l00190"></a>00190 <span class="preprocessor"></span><span class="comment">/*! Need the source be free'd? (haha!) */</span>
<a name="l00191"></a><a class="code" href="frame_8h.html#9731628346dabba4a94b98f9a2d56ca3">00191</a> <span class="preprocessor">#define AST_MALLOCD_SRC    (1 &lt;&lt; 2)</span>
<a name="l00192"></a>00192 <span class="preprocessor"></span>
<a name="l00193"></a>00193 <span class="comment">/* MODEM subclasses */</span><span class="comment"></span>
<a name="l00194"></a>00194 <span class="comment">/*! T.38 Fax-over-IP */</span>
<a name="l00195"></a><a class="code" href="frame_8h.html#a79b4778f48da6e8e1df7ff28cb938bf">00195</a> <span class="preprocessor">#define AST_MODEM_T38      1</span>
<a name="l00196"></a>00196 <span class="preprocessor"></span><span class="comment">/*! V.150 Modem-over-IP */</span>
<a name="l00197"></a><a class="code" href="frame_8h.html#db920555b222d6ba3de6a15928327ea1">00197</a> <span class="preprocessor">#define AST_MODEM_V150     2</span>
<a name="l00198"></a>00198 <span class="preprocessor"></span>
<a name="l00199"></a>00199 <span class="comment">/* HTML subclasses */</span><span class="comment"></span>
<a name="l00200"></a>00200 <span class="comment">/*! Sending a URL */</span>
<a name="l00201"></a><a class="code" href="frame_8h.html#5049521fc1c798b9ff0afb2b34eca0b4">00201</a> <span class="preprocessor">#define AST_HTML_URL    1</span>
<a name="l00202"></a>00202 <span class="preprocessor"></span><span class="comment">/*! Data frame */</span>
<a name="l00203"></a><a class="code" href="frame_8h.html#e579cf30d6c5f3a137da0ddf2686dcb2">00203</a> <span class="preprocessor">#define AST_HTML_DATA      2</span>
<a name="l00204"></a>00204 <span class="preprocessor"></span><span class="comment">/*! Beginning frame */</span>
<a name="l00205"></a><a class="code" href="frame_8h.html#e9c27bfb1a657332e7bebe62ba8af8c9">00205</a> <span class="preprocessor">#define AST_HTML_BEGIN     4</span>
<a name="l00206"></a>00206 <span class="preprocessor"></span><span class="comment">/*! End frame */</span>
<a name="l00207"></a><a class="code" href="frame_8h.html#738a26f4bd01de7b854f961a489da234">00207</a> <span class="preprocessor">#define AST_HTML_END    8</span>
<a name="l00208"></a>00208 <span class="preprocessor"></span><span class="comment">/*! Load is complete */</span>
<a name="l00209"></a><a class="code" href="frame_8h.html#beae0923db0369c4cddff4b9d0a8ef5d">00209</a> <span class="preprocessor">#define AST_HTML_LDCOMPLETE   16</span>
<a name="l00210"></a>00210 <span class="preprocessor"></span><span class="comment">/*! Peer is unable to support HTML */</span>
<a name="l00211"></a><a class="code" href="frame_8h.html#6157ac84bc5785739165bf75cb6b066d">00211</a> <span class="preprocessor">#define AST_HTML_NOSUPPORT 17</span>
<a name="l00212"></a>00212 <span class="preprocessor"></span><span class="comment">/*! Send URL, and track */</span>
<a name="l00213"></a><a class="code" href="frame_8h.html#2ef4d535e539e6a40d770f21f552815f">00213</a> <span class="preprocessor">#define AST_HTML_LINKURL   18</span>
<a name="l00214"></a>00214 <span class="preprocessor"></span><span class="comment">/*! No more HTML linkage */</span>
<a name="l00215"></a><a class="code" href="frame_8h.html#2e6faa061c057a4d0eaf31e1dcfd1140">00215</a> <span class="preprocessor">#define AST_HTML_UNLINK    19</span>
<a name="l00216"></a>00216 <span class="preprocessor"></span><span class="comment">/*! Reject link request */</span>
<a name="l00217"></a><a class="code" href="frame_8h.html#d85b1d44d8ecb029d8c3d9603ce2712e">00217</a> <span class="preprocessor">#define AST_HTML_LINKREJECT   20</span>
<a name="l00218"></a>00218 <span class="preprocessor"></span>
<a name="l00219"></a>00219 <span class="comment">/* Data formats for capabilities and frames alike */</span><span class="comment"></span>
<a name="l00220"></a>00220 <span class="comment">/*! G.723.1 compression */</span>
<a name="l00221"></a><a class="code" href="frame_8h.html#0b4ea457c95753454e021c511a5daecc">00221</a> <span class="preprocessor">#define AST_FORMAT_G723_1  (1 &lt;&lt; 0)</span>
<a name="l00222"></a>00222 <span class="preprocessor"></span><span class="comment">/*! GSM compression */</span>
<a name="l00223"></a><a class="code" href="frame_8h.html#9864508932a19f37d9afbbc7cabd5990">00223</a> <span class="preprocessor">#define AST_FORMAT_GSM     (1 &lt;&lt; 1)</span>
<a name="l00224"></a>00224 <span class="preprocessor"></span><span class="comment">/*! Raw mu-law data (G.711) */</span>
<a name="l00225"></a><a class="code" href="frame_8h.html#a71706b2c864525ec1c9fcf925ae3802">00225</a> <span class="preprocessor">#define AST_FORMAT_ULAW    (1 &lt;&lt; 2)</span>
<a name="l00226"></a>00226 <span class="preprocessor"></span><span class="comment">/*! Raw A-law data (G.711) */</span>
<a name="l00227"></a><a class="code" href="frame_8h.html#edc237300fef31677662db961c07484b">00227</a> <span class="preprocessor">#define AST_FORMAT_ALAW    (1 &lt;&lt; 3)</span>
<a name="l00228"></a>00228 <span class="preprocessor"></span><span class="comment">/*! ADPCM (G.726, 32kbps, AAL2 codeword packing) */</span>
<a name="l00229"></a><a class="code" href="frame_8h.html#3c0408e35d11793967a2e178f93256cd">00229</a> <span class="preprocessor">#define AST_FORMAT_G726_AAL2  (1 &lt;&lt; 4)</span>
<a name="l00230"></a>00230 <span class="preprocessor"></span><span class="comment">/*! ADPCM (IMA) */</span>
<a name="l00231"></a><a class="code" href="frame_8h.html#b1048e305f2ee62aebab30899c88f8ce">00231</a> <span class="preprocessor">#define AST_FORMAT_ADPCM   (1 &lt;&lt; 5)</span>
<a name="l00232"></a>00232 <span class="preprocessor"></span><span class="comment">/*! Raw 16-bit Signed Linear (8000 Hz) PCM */</span>
<a name="l00233"></a><a class="code" href="frame_8h.html#ce4d062ff9a85be84b636e7ec67a068b">00233</a> <span class="preprocessor">#define AST_FORMAT_SLINEAR (1 &lt;&lt; 6)</span>
<a name="l00234"></a>00234 <span class="preprocessor"></span><span class="comment">/*! LPC10, 180 samples/frame */</span>
<a name="l00235"></a><a class="code" href="frame_8h.html#87eb67578117e5f22d34386b7c989e08">00235</a> <span class="preprocessor">#define AST_FORMAT_LPC10   (1 &lt;&lt; 7)</span>
<a name="l00236"></a>00236 <span class="preprocessor"></span><span class="comment">/*! G.729A audio */</span>
<a name="l00237"></a><a class="code" href="frame_8h.html#66b369abf91a6c6519ca7cad6c657ae7">00237</a> <span class="preprocessor">#define AST_FORMAT_G729A   (1 &lt;&lt; 8)</span>
<a name="l00238"></a>00238 <span class="preprocessor"></span><span class="comment">/*! SpeeX Free Compression */</span>
<a name="l00239"></a><a class="code" href="frame_8h.html#a4f3a9e622d8cbe3fe3eed2a35923d8c">00239</a> <span class="preprocessor">#define AST_FORMAT_SPEEX   (1 &lt;&lt; 9)</span>
<a name="l00240"></a>00240 <span class="preprocessor"></span><span class="comment">/*! iLBC Free Compression */</span>
<a name="l00241"></a><a class="code" href="frame_8h.html#c2f4d8d1a79322d795824fd91fb2706c">00241</a> <span class="preprocessor">#define AST_FORMAT_ILBC    (1 &lt;&lt; 10)</span>
<a name="l00242"></a>00242 <span class="preprocessor"></span><span class="comment">/*! ADPCM (G.726, 32kbps, RFC3551 codeword packing) */</span>
<a name="l00243"></a><a class="code" href="frame_8h.html#a594899d5bea5f591eda7e20b5e2c161">00243</a> <span class="preprocessor">#define AST_FORMAT_G726    (1 &lt;&lt; 11)</span>
<a name="l00244"></a>00244 <span class="preprocessor"></span><span class="comment">/*! G.722 */</span>
<a name="l00245"></a><a class="code" href="frame_8h.html#b418abcb13f17e85f68a691f34e99e1a">00245</a> <span class="preprocessor">#define AST_FORMAT_G722    (1 &lt;&lt; 12)</span>
<a name="l00246"></a>00246 <span class="preprocessor"></span><span class="comment">/*! Maximum audio format */</span>
<a name="l00247"></a><a class="code" href="frame_8h.html#165e3a55e2cf1a685ccaab3e4ecab88c">00247</a> <span class="preprocessor">#define AST_FORMAT_MAX_AUDIO  (1 &lt;&lt; 15)</span>
<a name="l00248"></a>00248 <span class="preprocessor"></span><span class="comment">/*! Maximum audio mask */</span>
<a name="l00249"></a><a class="code" href="frame_8h.html#71a0a9732267760506de172c34d7a625">00249</a> <span class="preprocessor">#define AST_FORMAT_AUDIO_MASK   ((1 &lt;&lt; 16)-1)</span>
<a name="l00250"></a>00250 <span class="preprocessor"></span><span class="comment">/*! JPEG Images */</span>
<a name="l00251"></a><a class="code" href="frame_8h.html#c938a69bcdf2ac558a48e761b31ccc7b">00251</a> <span class="preprocessor">#define AST_FORMAT_JPEG    (1 &lt;&lt; 16)</span>
<a name="l00252"></a>00252 <span class="preprocessor"></span><span class="comment">/*! PNG Images */</span>
<a name="l00253"></a><a class="code" href="frame_8h.html#8143185ce3d3ff36da69fbdbe22c152d">00253</a> <span class="preprocessor">#define AST_FORMAT_PNG     (1 &lt;&lt; 17)</span>
<a name="l00254"></a>00254 <span class="preprocessor"></span><span class="comment">/*! H.261 Video */</span>
<a name="l00255"></a><a class="code" href="frame_8h.html#cb4e0559e389687ebc884fa05fbed4c4">00255</a> <span class="preprocessor">#define AST_FORMAT_H261    (1 &lt;&lt; 18)</span>
<a name="l00256"></a>00256 <span class="preprocessor"></span><span class="comment">/*! H.263 Video */</span>
<a name="l00257"></a><a class="code" href="frame_8h.html#117dee0e1ceeee1a0db603fe212feea0">00257</a> <span class="preprocessor">#define AST_FORMAT_H263    (1 &lt;&lt; 19)</span>
<a name="l00258"></a>00258 <span class="preprocessor"></span><span class="comment">/*! H.263+ Video */</span>
<a name="l00259"></a><a class="code" href="frame_8h.html#92b0b91625ab6273ff0aa040d104f797">00259</a> <span class="preprocessor">#define AST_FORMAT_H263_PLUS  (1 &lt;&lt; 20)</span>
<a name="l00260"></a>00260 <span class="preprocessor"></span><span class="comment">/*! H.264 Video */</span>
<a name="l00261"></a><a class="code" href="frame_8h.html#d8c642c1411004051cc43b202aebdc64">00261</a> <span class="preprocessor">#define AST_FORMAT_H264    (1 &lt;&lt; 21)</span>
<a name="l00262"></a>00262 <span class="preprocessor"></span><span class="comment">/*! MPEG4 Video */</span>
<a name="l00263"></a><a class="code" href="frame_8h.html#c1fa6f71617728144288a2542a4994d4">00263</a> <span class="preprocessor">#define AST_FORMAT_MP4_VIDEO  (1 &lt;&lt; 22)</span>
<a name="l00264"></a>00264 <span class="preprocessor"></span><span class="comment">/*! Maximum video format */</span>
<a name="l00265"></a><a class="code" href="frame_8h.html#c3eeac0a86246d4b2b2c9ea6881d56b4">00265</a> <span class="preprocessor">#define AST_FORMAT_MAX_VIDEO  (1 &lt;&lt; 24)</span>
<a name="l00266"></a><a class="code" href="frame_8h.html#1d77bc03d9b7e7ec73ac3d49ff1d0360">00266</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_FORMAT_VIDEO_MASK   (((1 &lt;&lt; 25)-1) &amp; ~(AST_FORMAT_AUDIO_MASK))</span>
<a name="l00267"></a>00267 <span class="preprocessor"></span><span class="comment">/*! T.140 Text format - ITU T.140, RFC 4351*/</span>
<a name="l00268"></a><a class="code" href="frame_8h.html#e6ebe929c12bba52018c17fa9fdf2265">00268</a> <span class="preprocessor">#define AST_FORMAT_T140    (1 &lt;&lt; 25)</span>
<a name="l00269"></a>00269 <span class="preprocessor"></span><span class="comment">/*! Maximum text mask */</span>
<a name="l00270"></a><a class="code" href="frame_8h.html#ca0664a2b9a5933974c9f7f9dbe4347a">00270</a> <span class="preprocessor">#define AST_FORMAT_MAX_TEXT   (1 &lt;&lt; 26)</span>
<a name="l00271"></a><a class="code" href="frame_8h.html#dd3aa8954987a10a8e400f853cda70b8">00271</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_FORMAT_TEXT_MASK   (((1 &lt;&lt; 27)-1) &amp; ~(AST_FORMAT_AUDIO_MASK) &amp; ~(AST_FORMAT_VIDEO_MASK))</span>
<a name="l00272"></a>00272 <span class="preprocessor"></span>
<a name="l00273"></a><a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389">00273</a> <span class="keyword">enum</span> <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389">ast_control_frame_type</a> {
<a name="l00274"></a>00274    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f3896a1de835fbf024ef925569eb775de67f">AST_CONTROL_HANGUP</a> = 1,    <span class="comment">/*!&lt; Other end has hungup */</span>
<a name="l00275"></a>00275    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f38963abb30bf566711b5ed8c9c64ac58f8e">AST_CONTROL_RING</a> = 2,      <span class="comment">/*!&lt; Local ring */</span>
<a name="l00276"></a>00276    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f3895749da867c771f2391b19ce9e08f0149">AST_CONTROL_RINGING</a> = 3,   <span class="comment">/*!&lt; Remote end is ringing */</span>
<a name="l00277"></a>00277    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389edaaffc26d24394cd2557ddb1db10f64">AST_CONTROL_ANSWER</a> = 4,    <span class="comment">/*!&lt; Remote end has answered */</span>
<a name="l00278"></a>00278    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f3898c0ff5febeb7ff9d8880e2bc7f1d6ca1">AST_CONTROL_BUSY</a> = 5,      <span class="comment">/*!&lt; Remote end is busy */</span>
<a name="l00279"></a>00279    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f3899c443151ff3f9c3801534eaaf6cdb1f9">AST_CONTROL_TAKEOFFHOOK</a> = 6,  <span class="comment">/*!&lt; Make it go off hook */</span>
<a name="l00280"></a>00280    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389dca4e33b1ad1492acbc6c1b05fd892dd">AST_CONTROL_OFFHOOK</a> = 7,   <span class="comment">/*!&lt; Line is off hook */</span>
<a name="l00281"></a>00281    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389fafe5e503d0d74218854b57e66282419">AST_CONTROL_CONGESTION</a> = 8,   <span class="comment">/*!&lt; Congestion (circuits busy) */</span>
<a name="l00282"></a>00282    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f3899da5863316de5e07e562d773bb39e94a">AST_CONTROL_FLASH</a> = 9,     <span class="comment">/*!&lt; Flash hook */</span>
<a name="l00283"></a>00283    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f38908ddef6dbb9a89f543bc45b1d8e25368">AST_CONTROL_WINK</a> = 10,     <span class="comment">/*!&lt; Wink */</span>
<a name="l00284"></a>00284    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389e18699f69d7f0d792d74b5a50732765f">AST_CONTROL_OPTION</a> = 11,   <span class="comment">/*!&lt; Set a low-level option */</span>
<a name="l00285"></a>00285    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f38952daef298b8264b06a78e1782cff0d5f">AST_CONTROL_RADIO_KEY</a> = 12,   <span class="comment">/*!&lt; Key Radio */</span>
<a name="l00286"></a>00286    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f3897800219228c17aeb7b64ad99ba6c9537">AST_CONTROL_RADIO_UNKEY</a> = 13, <span class="comment">/*!&lt; Un-Key Radio */</span>
<a name="l00287"></a>00287    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389ba3a8e0de0c6348205ffdc9e446af14f">AST_CONTROL_PROGRESS</a> = 14, <span class="comment">/*!&lt; Indicate PROGRESS */</span>
<a name="l00288"></a>00288    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389e3f77da12f7cbd7a9abfd7c8ce7bfb2b">AST_CONTROL_PROCEEDING</a> = 15,  <span class="comment">/*!&lt; Indicate CALL PROCEEDING */</span>
<a name="l00289"></a>00289    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389dcaa1b03a8c60073c53c1b662418697f">AST_CONTROL_HOLD</a> = 16,     <span class="comment">/*!&lt; Indicate call is placed on hold */</span>
<a name="l00290"></a>00290    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389582c81bc89b064f8093864a6c023a823">AST_CONTROL_UNHOLD</a> = 17,   <span class="comment">/*!&lt; Indicate call is left from hold */</span>
<a name="l00291"></a>00291    <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f3897e8f2fe3be94657a962aa673f0c449e5">AST_CONTROL_VIDUPDATE</a> = 18,   <span class="comment">/*!&lt; Indicate video frame update */</span>
<a name="l00292"></a>00292 };
<a name="l00293"></a>00293 
<a name="l00294"></a><a class="code" href="frame_8h.html#7ae0c97d2c7012da804f40caaf047042">00294</a> <span class="preprocessor">#define AST_SMOOTHER_FLAG_G729      (1 &lt;&lt; 0)</span>
<a name="l00295"></a><a class="code" href="frame_8h.html#64fae9839fa3fe2cb6d7da31bf917812">00295</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_SMOOTHER_FLAG_BE     (1 &lt;&lt; 1)</span>
<a name="l00296"></a>00296 <span class="preprocessor"></span>
<a name="l00297"></a>00297 <span class="comment">/* Option identifiers and flags */</span>
<a name="l00298"></a><a class="code" href="frame_8h.html#40fdb73aaab11ca6d798133d215ff1bd">00298</a> <span class="preprocessor">#define AST_OPTION_FLAG_REQUEST     0</span>
<a name="l00299"></a><a class="code" href="frame_8h.html#8872f8e2ffce50a72d53555af353f5f0">00299</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_OPTION_FLAG_ACCEPT      1</span>
<a name="l00300"></a><a class="code" href="frame_8h.html#11008181d7fcadfc2ef8bb39088fca3d">00300</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_OPTION_FLAG_REJECT      2</span>
<a name="l00301"></a><a class="code" href="frame_8h.html#acf951220249d1c9b0b907a0a76c56aa">00301</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_OPTION_FLAG_QUERY    4</span>
<a name="l00302"></a><a class="code" href="frame_8h.html#5cbfc6d3ca794f0f8643b98d41d1d783">00302</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_OPTION_FLAG_ANSWER      5</span>
<a name="l00303"></a><a class="code" href="frame_8h.html#7243eaa4fdcd781eb4bb74225f0441c8">00303</a> <span class="preprocessor"></span><span class="preprocessor">#define AST_OPTION_FLAG_WTF      6</span>
<a name="l00304"></a>00304 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00305"></a>00305 <span class="comment">/*! Verify touchtones by muting audio transmission </span>
<a name="l00306"></a>00306 <span class="comment">   (and reception) and verify the tone is still present */</span>
<a name="l00307"></a><a class="code" href="frame_8h.html#630726ea2d32f7b92717d9e789c6e9b0">00307</a> <span class="preprocessor">#define AST_OPTION_TONE_VERIFY      1     </span>
<a name="l00308"></a>00308 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00309"></a>00309 <span class="comment">/*! Put a compatible channel into TDD (TTY for the hearing-impared) mode */</span>
<a name="l00310"></a><a class="code" href="frame_8h.html#a96563f3c16f6dce5bc0b35335a419fc">00310</a> <span class="preprocessor">#define  AST_OPTION_TDD       2</span>
<a name="l00311"></a>00311 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00312"></a>00312 <span class="comment">/*! Relax the parameters for DTMF reception (mainly for radio use) */</span>
<a name="l00313"></a><a class="code" href="frame_8h.html#2ae22e11656b025dd52a85e79c929cf8">00313</a> <span class="preprocessor">#define  AST_OPTION_RELAXDTMF    3</span>
<a name="l00314"></a>00314 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00315"></a>00315 <span class="comment">/*! Set (or clear) Audio (Not-Clear) Mode */</span>
<a name="l00316"></a><a class="code" href="frame_8h.html#030796ea6e1fa7a6b68386abc6bc0c7f">00316</a> <span class="preprocessor">#define  AST_OPTION_AUDIO_MODE      4</span>
<a name="l00317"></a>00317 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00318"></a>00318 <span class="comment">/*! Set channel transmit gain </span>
<a name="l00319"></a>00319 <span class="comment"> * Option data is a single signed char</span>
<a name="l00320"></a>00320 <span class="comment">   representing number of decibels (dB)</span>
<a name="l00321"></a>00321 <span class="comment">   to set gain to (on top of any gain</span>
<a name="l00322"></a>00322 <span class="comment">   specified in channel driver)</span>
<a name="l00323"></a>00323 <span class="comment">*/</span>
<a name="l00324"></a><a class="code" href="frame_8h.html#e0d6775117f66a2453b41249cdca7ce9">00324</a> <span class="preprocessor">#define AST_OPTION_TXGAIN     5</span>
<a name="l00325"></a>00325 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00326"></a>00326 <span class="comment">/*! Set channel receive gain</span>
<a name="l00327"></a>00327 <span class="comment"> * Option data is a single signed char</span>
<a name="l00328"></a>00328 <span class="comment">   representing number of decibels (dB)</span>
<a name="l00329"></a>00329 <span class="comment">   to set gain to (on top of any gain</span>
<a name="l00330"></a>00330 <span class="comment">   specified in channel driver)</span>
<a name="l00331"></a>00331 <span class="comment">*/</span>
<a name="l00332"></a><a class="code" href="frame_8h.html#b79d59235f14a8e488195fe7200f0d1d">00332</a> <span class="preprocessor">#define AST_OPTION_RXGAIN     6</span>
<a name="l00333"></a>00333 <span class="preprocessor"></span>
<a name="l00334"></a>00334 <span class="comment">/* set channel into "Operator Services" mode */</span>
<a name="l00335"></a><a class="code" href="frame_8h.html#a48c739ac9e23381f72ea824787508e0">00335</a> <span class="preprocessor">#define  AST_OPTION_OPRMODE      7</span>
<a name="l00336"></a>00336 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00337"></a>00337 <span class="comment">/*! Explicitly enable or disable echo cancelation for the given channel */</span>
<a name="l00338"></a><a class="code" href="frame_8h.html#56bf7f95f00422064a226e90107977f5">00338</a> <span class="preprocessor">#define  AST_OPTION_ECHOCAN      8</span>
<a name="l00339"></a>00339 <span class="preprocessor"></span>
<a name="l00340"></a><a class="code" href="structoprmode.html">00340</a> <span class="keyword">struct </span><a class="code" href="structoprmode.html">oprmode</a> {
<a name="l00341"></a><a class="code" href="structoprmode.html#f8fe68b4c4cba197efa9c8bbd45f144e">00341</a>    <span class="keyword">struct </span><a class="code" href="structast__channel.html">ast_channel</a> *peer;
<a name="l00342"></a><a class="code" href="structoprmode.html#15d61712450a686a7f365adf4fef581f">00342</a>    <span class="keywordtype">int</span> mode;
<a name="l00343"></a>00343 } ;
<a name="l00344"></a>00344 
<a name="l00345"></a><a class="code" href="structast__option__header.html">00345</a> <span class="keyword">struct </span><a class="code" href="structast__option__header.html">ast_option_header</a> {
<a name="l00346"></a>00346    <span class="comment">/* Always keep in network byte order */</span>
<a name="l00347"></a>00347 <span class="preprocessor">#if __BYTE_ORDER == __BIG_ENDIAN</span>
<a name="l00348"></a><a class="code" href="structast__option__header.html#327a6c4304ad5938eaf0efb6cc3e53dc">00348</a> <span class="preprocessor"></span>        uint16_t flag:3;
<a name="l00349"></a><a class="code" href="structast__option__header.html#ef3e30e070f70244fd6578d88a6b77ac">00349</a>         uint16_t option:13;
<a name="l00350"></a>00350 <span class="preprocessor">#else</span>
<a name="l00351"></a>00351 <span class="preprocessor"></span><span class="preprocessor">#if __BYTE_ORDER == __LITTLE_ENDIAN</span>
<a name="l00352"></a>00352 <span class="preprocessor"></span>        uint16_t option:13;
<a name="l00353"></a>00353         uint16_t flag:3;
<a name="l00354"></a>00354 <span class="preprocessor">#else</span>
<a name="l00355"></a>00355 <span class="preprocessor"></span><span class="preprocessor">#error Byte order not defined</span>
<a name="l00356"></a>00356 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00357"></a>00357 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00358"></a><a class="code" href="structast__option__header.html#59a6c49cfff82ce638c44fec9cd91ddb">00358</a> <span class="preprocessor"></span>      uint8_t <a class="code" href="structast__frame.html#8d777f385d3dfec8815d20f7496026dc">data</a>[0];
<a name="l00359"></a>00359 };
<a name="l00360"></a>00360 
<a name="l00361"></a>00361 <span class="comment"></span>
<a name="l00362"></a>00362 <span class="comment">/*! \brief Definition of supported media formats (codecs) */</span>
<a name="l00363"></a><a class="code" href="structast__format__list.html">00363</a> <span class="keyword">struct </span><a class="code" href="structast__format__list.html">ast_format_list</a> {
<a name="l00364"></a><a class="code" href="structast__format__list.html#46cf0e59759c9b7f1112ca4b174343ef">00364</a>    <span class="keywordtype">int</span> visible;   <span class="comment">/*!&lt; Can we see this entry */</span>
<a name="l00365"></a><a class="code" href="structast__format__list.html#cc411e6c13670e52124629b8ac83f7d0">00365</a>    <span class="keywordtype">int</span> bits;   <span class="comment">/*!&lt; bitmask value */</span>
<a name="l00366"></a><a class="code" href="structast__format__list.html#b068931cc450442b63f5b3d276ea4297">00366</a>    <span class="keywordtype">char</span> *<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>; <span class="comment">/*!&lt; short name */</span>
<a name="l00367"></a><a class="code" href="structast__format__list.html#1dee80c7d5ab2c1c90aa8d2f7dd47256">00367</a>    <span class="keywordtype">char</span> *<a class="code" href="chan__gtalk_8c.html#45c085ae9b1d6f46cf9e03f75b76fd83">desc</a>; <span class="comment">/*!&lt; Description */</span>
<a name="l00368"></a><a class="code" href="structast__format__list.html#90a9232f0579decb34c81669949f239f">00368</a>    <span class="keywordtype">int</span> fr_len; <span class="comment">/*!&lt; Single frame length in bytes */</span>
<a name="l00369"></a><a class="code" href="structast__format__list.html#dd6de444202ef87460ccd8ed5c308dd8">00369</a>    <span class="keywordtype">int</span> min_ms; <span class="comment">/*!&lt; Min value */</span>
<a name="l00370"></a><a class="code" href="structast__format__list.html#8d081f23e40f6fb47bd856a7857b7ec0">00370</a>    <span class="keywordtype">int</span> max_ms; <span class="comment">/*!&lt; Max value */</span>
<a name="l00371"></a><a class="code" href="structast__format__list.html#75b4e1ddacd18acfd2d5901fd80bb299">00371</a>    <span class="keywordtype">int</span> inc_ms; <span class="comment">/*!&lt; Increment */</span>
<a name="l00372"></a><a class="code" href="structast__format__list.html#516605418c61473f1ecc5ae9b19ca4d4">00372</a>    <span class="keywordtype">int</span> def_ms; <span class="comment">/*!&lt; Default value */</span>
<a name="l00373"></a><a class="code" href="structast__format__list.html#4e5868d676cb634aa75b125a0f741abf">00373</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> flags;  <span class="comment">/*!&lt; Smoother flags */</span>
<a name="l00374"></a><a class="code" href="structast__format__list.html#d3a40eff8a9e72559e0f508db3469592">00374</a>    <span class="keywordtype">int</span> cur_ms; <span class="comment">/*!&lt; Current value */</span>
<a name="l00375"></a>00375 };
<a name="l00376"></a>00376 
<a name="l00377"></a>00377 <span class="comment"></span>
<a name="l00378"></a>00378 <span class="comment">/*! \brief  Requests a frame to be allocated </span>
<a name="l00379"></a>00379 <span class="comment"> * </span>
<a name="l00380"></a>00380 <span class="comment"> * \param source </span>
<a name="l00381"></a>00381 <span class="comment"> * Request a frame be allocated.  source is an optional source of the frame, </span>
<a name="l00382"></a>00382 <span class="comment"> * len is the requested length, or "0" if the caller will supply the buffer </span>
<a name="l00383"></a>00383 <span class="comment"> */</span>
<a name="l00384"></a>00384 <span class="preprocessor">#if 0 </span><span class="comment">/* Unimplemented */</span>
<a name="l00385"></a>00385 <span class="keyword">struct </span><a class="code" href="structast__frame.html">ast_frame</a> *ast_fralloc(<span class="keywordtype">char</span> *source, <span class="keywordtype">int</span> len);
<a name="l00386"></a>00386 <span class="preprocessor">#endif</span>
<a name="l00387"></a>00387 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00388"></a>00388 <span class="comment">/*!  </span>
<a name="l00389"></a>00389 <span class="comment"> * \brief Frees a frame </span>
<a name="l00390"></a>00390 <span class="comment"> * </span>
<a name="l00391"></a>00391 <span class="comment"> * \param fr Frame to free</span>
<a name="l00392"></a>00392 <span class="comment"> * \param cache Whether to consider this frame for frame caching</span>
<a name="l00393"></a>00393 <span class="comment"> */</span>
<a name="l00394"></a>00394 <span class="keywordtype">void</span> <a class="code" href="frame_8c.html#d7b97c92bb20dfea00aa12e7ecbeac89">ast_frame_free</a>(<span class="keyword">struct</span> <a class="code" href="structast__frame.html">ast_frame</a> *fr, <span class="keywordtype">int</span> cache);
<a name="l00395"></a>00395 
<a name="l00396"></a><a class="code" href="frame_8h.html#506c759ec4950e7f7465e8f090a6252b">00396</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="compiler_8h.html#d6e1cac5f0d5de2f2f07206a3054f97f">force_inline</a> <a class="code" href="frame_8h.html#506c759ec4950e7f7465e8f090a6252b">ast_frfree</a>(<span class="keyword">struct</span> <a class="code" href="structast__frame.html">ast_frame</a> *fr)
<a name="l00397"></a>00397 {
<a name="l00398"></a>00398    <a class="code" href="frame_8c.html#d7b97c92bb20dfea00aa12e7ecbeac89">ast_frame_free</a>(fr, 1);
<a name="l00399"></a>00399 }
<a name="l00400"></a>00400 <span class="comment"></span>
<a name="l00401"></a>00401 <span class="comment">/*! \brief Makes a frame independent of any static storage</span>
<a name="l00402"></a>00402 <span class="comment"> * \param fr frame to act upon</span>
<a name="l00403"></a>00403 <span class="comment"> * Take a frame, and if it's not been malloc'd, make a malloc'd copy</span>
<a name="l00404"></a>00404 <span class="comment"> * and if the data hasn't been malloced then make the</span>
<a name="l00405"></a>00405 <span class="comment"> * data malloc'd.  If you need to store frames, say for queueing, then</span>
<a name="l00406"></a>00406 <span class="comment"> * you should call this function.</span>
<a name="l00407"></a>00407 <span class="comment"> * \return Returns a frame on success, NULL on error</span>
<a name="l00408"></a>00408 <span class="comment"> */</span>
<a name="l00409"></a>00409 <span class="keyword">struct </span><a class="code" href="structast__frame.html">ast_frame</a> *<a class="code" href="frame_8c.html#da06615ce64c8ef3ae0d652d53ac8454">ast_frisolate</a>(<span class="keyword">struct</span> <a class="code" href="structast__frame.html">ast_frame</a> *fr);
<a name="l00410"></a>00410 <span class="comment"></span>
<a name="l00411"></a>00411 <span class="comment">/*! \brief Copies a frame </span>
<a name="l00412"></a>00412 <span class="comment"> * \param fr frame to copy</span>
<a name="l00413"></a>00413 <span class="comment"> * Duplicates a frame -- should only rarely be used, typically frisolate is good enough</span>
<a name="l00414"></a>00414 <span class="comment"> * \return Returns a frame on success, NULL on error</span>
<a name="l00415"></a>00415 <span class="comment"> */</span>
<a name="l00416"></a>00416 <span class="keyword">struct </span><a class="code" href="structast__frame.html">ast_frame</a> *<a class="code" href="frame_8c.html#e7f7f3d8f817e56bbaf43b0b1ecf8997">ast_frdup</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structast__frame.html">ast_frame</a> *fr);
<a name="l00417"></a>00417 
<a name="l00418"></a>00418 <span class="keywordtype">void</span> <a class="code" href="frame_8c.html#ca38e3c89b3ad46cd6b4c67dea7e6e48">ast_swapcopy_samples</a>(<span class="keywordtype">void</span> *dst, <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="structast__frame.html#25d902c24283ab8cfbac54dfa101ad31">src</a>, <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#6ef9161b900632671022358216c7dfe7">samples</a>);
<a name="l00419"></a>00419 
<a name="l00420"></a>00420 <span class="comment">/* Helpers for byteswapping native samples to/from </span>
<a name="l00421"></a>00421 <span class="comment">   little-endian and big-endian. */</span>
<a name="l00422"></a>00422 <span class="preprocessor">#if __BYTE_ORDER == __LITTLE_ENDIAN</span>
<a name="l00423"></a><a class="code" href="frame_8h.html#bbab337e9b65048708cc9f583aa36bd5">00423</a> <span class="preprocessor"></span><span class="preprocessor">#define ast_frame_byteswap_le(fr) do { ; } while(0)</span>
<a name="l00424"></a><a class="code" href="frame_8h.html#0e51a16e06783046f53396844e52d9dc">00424</a> <span class="preprocessor"></span><span class="preprocessor">#define ast_frame_byteswap_be(fr) do { struct ast_frame *__f = (fr); ast_swapcopy_samples(__f-&gt;data, __f-&gt;data, __f-&gt;samples); } while(0)</span>
<a name="l00425"></a>00425 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00426"></a>00426 <span class="preprocessor"></span><span class="preprocessor">#define ast_frame_byteswap_le(fr) do { struct ast_frame *__f = (fr); ast_swapcopy_samples(__f-&gt;data, __f-&gt;data, __f-&gt;samples); } while(0)</span>
<a name="l00427"></a>00427 <span class="preprocessor"></span><span class="preprocessor">#define ast_frame_byteswap_be(fr) do { ; } while(0)</span>
<a name="l00428"></a>00428 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00429"></a>00429 <span class="preprocessor"></span>
<a name="l00430"></a>00430 <span class="comment"></span>
<a name="l00431"></a>00431 <span class="comment">/*! \brief Get the name of a format</span>
<a name="l00432"></a>00432 <span class="comment"> * \param format id of format</span>
<a name="l00433"></a>00433 <span class="comment"> * \return A static string containing the name of the format or "UNKN" if unknown.</span>
<a name="l00434"></a>00434 <span class="comment"> */</span>
<a name="l00435"></a>00435 <span class="keywordtype">char</span>* <a class="code" href="frame_8c.html#fc9ce4e422290b7bda33cc8685094a97">ast_getformatname</a>(<span class="keywordtype">int</span> <a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>);
<a name="l00436"></a>00436 <span class="comment"></span>
<a name="l00437"></a>00437 <span class="comment">/*! \brief Get the names of a set of formats</span>
<a name="l00438"></a>00438 <span class="comment"> * \param buf a buffer for the output string</span>
<a name="l00439"></a>00439 <span class="comment"> * \param size size of buf (bytes)</span>
<a name="l00440"></a>00440 <span class="comment"> * \param format the format (combined IDs of codecs)</span>
<a name="l00441"></a>00441 <span class="comment"> * Prints a list of readable codec names corresponding to "format".</span>
<a name="l00442"></a>00442 <span class="comment"> * ex: for format=AST_FORMAT_GSM|AST_FORMAT_SPEEX|AST_FORMAT_ILBC it will return "0x602 (GSM|SPEEX|ILBC)"</span>
<a name="l00443"></a>00443 <span class="comment"> * \return The return value is buf.</span>
<a name="l00444"></a>00444 <span class="comment"> */</span>
<a name="l00445"></a>00445 <span class="keywordtype">char</span>* <a class="code" href="frame_8c.html#98f2e5f4c4b2d13cb63057889cc0b743">ast_getformatname_multiple</a>(<span class="keywordtype">char</span> *<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, size_t size, <span class="keywordtype">int</span> <a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>);
<a name="l00446"></a>00446 <span class="comment"></span>
<a name="l00447"></a>00447 <span class="comment">/*!</span>
<a name="l00448"></a>00448 <span class="comment"> * \brief Gets a format from a name.</span>
<a name="l00449"></a>00449 <span class="comment"> * \param name string of format</span>
<a name="l00450"></a>00450 <span class="comment"> * \return This returns the form of the format in binary on success, 0 on error.</span>
<a name="l00451"></a>00451 <span class="comment"> */</span>
<a name="l00452"></a>00452 <span class="keywordtype">int</span> <a class="code" href="frame_8c.html#489f45519671fcf4964f385f4de2c689">ast_getformatbyname</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>);
<a name="l00453"></a>00453 <span class="comment"></span>
<a name="l00454"></a>00454 <span class="comment">/*! \brief Get a name from a format </span>
<a name="l00455"></a>00455 <span class="comment"> * Gets a name from a format</span>
<a name="l00456"></a>00456 <span class="comment"> * \param codec codec number (1,2,4,8,16,etc.)</span>
<a name="l00457"></a>00457 <span class="comment"> * \return This returns a static string identifying the format on success, 0 on error.</span>
<a name="l00458"></a>00458 <span class="comment"> */</span>
<a name="l00459"></a>00459 <span class="keywordtype">char</span> *<a class="code" href="frame_8c.html#c6ebfc9b1154b96db80bfca7651d2ca8">ast_codec2str</a>(<span class="keywordtype">int</span> codec);
<a name="l00460"></a>00460 <span class="comment"></span>
<a name="l00461"></a>00461 <span class="comment">/*! \page ast_smooth</span>
<a name="l00462"></a>00462 <span class="comment">The ast_smoother interface was designed specifically</span>
<a name="l00463"></a>00463 <span class="comment">to take frames of variant sizes and produce frames of a single expected</span>
<a name="l00464"></a>00464 <span class="comment">size, precisely what you want to do.</span>
<a name="l00465"></a>00465 <span class="comment"></span>
<a name="l00466"></a>00466 <span class="comment">The basic interface is:</span>
<a name="l00467"></a>00467 <span class="comment"></span>
<a name="l00468"></a>00468 <span class="comment">- Initialize with ast_smoother_new()</span>
<a name="l00469"></a>00469 <span class="comment">- Queue input frames with ast_smoother_feed()</span>
<a name="l00470"></a>00470 <span class="comment">- Get output frames with ast_smoother_read()</span>
<a name="l00471"></a>00471 <span class="comment">- when you're done, free the structure with ast_smoother_free()</span>
<a name="l00472"></a>00472 <span class="comment">- Also see ast_smoother_test_flag(), ast_smoother_set_flags(), ast_smoother_get_flags(), ast_smoother_reset()</span>
<a name="l00473"></a>00473 <span class="comment">*/</span>
<a name="l00474"></a>00474 <span class="keyword">struct </span><a class="code" href="structast__smoother.html">ast_smoother</a>;
<a name="l00475"></a>00475 
<a name="l00476"></a>00476 <span class="keyword">struct </span><a class="code" href="structast__format__list.html">ast_format_list</a> *<a class="code" href="frame_8c.html#ede8db51d1dcb25109ed01739ae8b144">ast_get_format_list_index</a>(<span class="keywordtype">int</span> index);
<a name="l00477"></a>00477 <span class="keyword">struct </span><a class="code" href="structast__format__list.html">ast_format_list</a> *<a class="code" href="frame_8c.html#b54cb1a4969ea1b764d3e620f8a02b40">ast_get_format_list</a>(size_t *size);
<a name="l00478"></a>00478 <span class="keyword">struct </span><a class="code" href="structast__smoother.html">ast_smoother</a> *<a class="code" href="frame_8c.html#3b520e6249c7ee888d133c43bbdda78a">ast_smoother_new</a>(<span class="keywordtype">int</span> bytes);
<a name="l00479"></a>00479 <span class="keywordtype">void</span> <a class="code" href="frame_8c.html#0230908765b8b00e779a2890b6a2cfe6">ast_smoother_set_flags</a>(<span class="keyword">struct</span> <a class="code" href="structast__smoother.html">ast_smoother</a> *smoother, <span class="keywordtype">int</span> <a class="code" href="structast__smoother.html#4e5868d676cb634aa75b125a0f741abf">flags</a>);
<a name="l00480"></a>00480 <span class="keywordtype">int</span> <a class="code" href="frame_8c.html#4fb682b625a3cae6320d2b93d88c5625">ast_smoother_get_flags</a>(<span class="keyword">struct</span> <a class="code" href="structast__smoother.html">ast_smoother</a> *smoother);
<a name="l00481"></a>00481 <span class="keywordtype">int</span> <a class="code" href="frame_8c.html#b59ec8d712f306e04bd1d30671604c31">ast_smoother_test_flag</a>(<span class="keyword">struct</span> <a class="code" href="structast__smoother.html">ast_smoother</a> *<a class="code" href="aesopt_8h.html#8d6242bc80162ac99dd4d368eabe77cc">s</a>, <span class="keywordtype">int</span> flag);
<a name="l00482"></a>00482 <span class="keywordtype">void</span> <a class="code" href="frame_8c.html#6933f1f7df532d61fa64417a0697a62a">ast_smoother_free</a>(<span class="keyword">struct</span> <a class="code" href="structast__smoother.html">ast_smoother</a> *<a class="code" href="aesopt_8h.html#8d6242bc80162ac99dd4d368eabe77cc">s</a>);
<a name="l00483"></a>00483 <span class="keywordtype">void</span> <a class="code" href="frame_8c.html#728e81c6588ddb6b11345d50085359bd">ast_smoother_reset</a>(<span class="keyword">struct</span> <a class="code" href="structast__smoother.html">ast_smoother</a> *<a class="code" href="aesopt_8h.html#8d6242bc80162ac99dd4d368eabe77cc">s</a>, <span class="keywordtype">int</span> bytes);
<a name="l00484"></a>00484 <span class="keywordtype">int</span> <a class="code" href="frame_8c.html#209b60cf300744b0801010641094b92d">__ast_smoother_feed</a>(<span class="keyword">struct</span> <a class="code" href="structast__smoother.html">ast_smoother</a> *<a class="code" href="aesopt_8h.html#8d6242bc80162ac99dd4d368eabe77cc">s</a>, <span class="keyword">struct</span> <a class="code" href="structast__frame.html">ast_frame</a> *<a class="code" href="format__g726_8c.html#85b9b17a7dd34a3638c560bc9152473b">f</a>, <span class="keywordtype">int</span> swap);
<a name="l00485"></a>00485 <span class="keyword">struct </span><a class="code" href="structast__frame.html">ast_frame</a> *<a class="code" href="frame_8c.html#c57cb003ea501fa13139aa90210fbcef">ast_smoother_read</a>(<span class="keyword">struct</span> <a class="code" href="structast__smoother.html">ast_smoother</a> *<a class="code" href="aesopt_8h.html#8d6242bc80162ac99dd4d368eabe77cc">s</a>);
<a name="l00486"></a><a class="code" href="frame_8h.html#718977efebaeb095db7cbe91aea89ca9">00486</a> <span class="preprocessor">#define ast_smoother_feed(s,f) __ast_smoother_feed(s, f, 0)</span>
<a name="l00487"></a>00487 <span class="preprocessor"></span><span class="preprocessor">#if __BYTE_ORDER == __LITTLE_ENDIAN</span>
<a name="l00488"></a><a class="code" href="frame_8h.html#3352181a7b55e7260a20b68bbabc3cf5">00488</a> <span class="preprocessor"></span><span class="preprocessor">#define ast_smoother_feed_be(s,f) __ast_smoother_feed(s, f, 1)</span>
<a name="l00489"></a><a class="code" href="frame_8h.html#4991aa7af290be6da14e2da587233a29">00489</a> <span class="preprocessor"></span><span class="preprocessor">#define ast_smoother_feed_le(s,f) __ast_smoother_feed(s, f, 0)</span>
<a name="l00490"></a>00490 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00491"></a>00491 <span class="preprocessor"></span><span class="preprocessor">#define ast_smoother_feed_be(s,f) __ast_smoother_feed(s, f, 0)</span>
<a name="l00492"></a>00492 <span class="preprocessor"></span><span class="preprocessor">#define ast_smoother_feed_le(s,f) __ast_smoother_feed(s, f, 1)</span>
<a name="l00493"></a>00493 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00494"></a>00494 <span class="preprocessor"></span>
<a name="l00495"></a>00495 <span class="keywordtype">void</span> <a class="code" href="frame_8c.html#11dff4ae984427c6c3511b38359fe34a">ast_frame_dump</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, <span class="keyword">struct</span> <a class="code" href="structast__frame.html">ast_frame</a> *<a class="code" href="format__g726_8c.html#85b9b17a7dd34a3638c560bc9152473b">f</a>, <span class="keywordtype">char</span> *<a class="code" href="http_8c.html#93583f8993b24e7afddf9578925bd1d8">prefix</a>);
<a name="l00496"></a>00496 <span class="comment"></span>
<a name="l00497"></a>00497 <span class="comment">/*! \page AudioCodecPref Audio Codec Preferences</span>
<a name="l00498"></a>00498 <span class="comment"></span>
<a name="l00499"></a>00499 <span class="comment">   In order to negotiate audio codecs in the order they are configured</span>
<a name="l00500"></a>00500 <span class="comment">   in &lt;channel&gt;.conf for a device, we set up codec preference lists</span>
<a name="l00501"></a>00501 <span class="comment">   in addition to the codec capabilities setting. The capabilities</span>
<a name="l00502"></a>00502 <span class="comment">   setting is a bitmask of audio and video codecs with no internal</span>
<a name="l00503"></a>00503 <span class="comment">   order. This will reflect the offer given to the other side, where</span>
<a name="l00504"></a>00504 <span class="comment">   the prefered codecs will be added to the top of the list in the</span>
<a name="l00505"></a>00505 <span class="comment">   order indicated by the "allow" lines in the device configuration.</span>
<a name="l00506"></a>00506 <span class="comment">   </span>
<a name="l00507"></a>00507 <span class="comment">   Video codecs are not included in the preference lists since they</span>
<a name="l00508"></a>00508 <span class="comment">   can't be transcoded and we just have to pick whatever is supported</span>
<a name="l00509"></a>00509 <span class="comment">*/</span>
<a name="l00510"></a>00510 <span class="comment"></span>
<a name="l00511"></a>00511 <span class="comment">/*! \brief Initialize an audio codec preference to "no preference" See \ref AudioCodecPref */</span>
<a name="l00512"></a>00512 <span class="keywordtype">void</span> <a class="code" href="frame_8h.html#634f6a2bf0bafe47ef06c8da80d21d00">ast_codec_pref_init</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref);
<a name="l00513"></a>00513 <span class="comment"></span>
<a name="l00514"></a>00514 <span class="comment">/*! \brief Codec located at a particular place in the preference index See \ref AudioCodecPref */</span>
<a name="l00515"></a>00515 <span class="keywordtype">int</span> <a class="code" href="frame_8c.html#6e71db7f2b8449c591c97f9c090917d2">ast_codec_pref_index</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref, <span class="keywordtype">int</span> index);
<a name="l00516"></a>00516 <span class="comment"></span>
<a name="l00517"></a>00517 <span class="comment">/*! \brief Remove audio a codec from a preference list */</span>
<a name="l00518"></a>00518 <span class="keywordtype">void</span> <a class="code" href="frame_8c.html#7993d6a03e1e57cbb428c6deeec13d8c">ast_codec_pref_remove</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref, <span class="keywordtype">int</span> <a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>);
<a name="l00519"></a>00519 <span class="comment"></span>
<a name="l00520"></a>00520 <span class="comment">/*! \brief Append a audio codec to a preference list, removing it first if it was already there </span>
<a name="l00521"></a>00521 <span class="comment">*/</span>
<a name="l00522"></a>00522 <span class="keywordtype">int</span> <a class="code" href="frame_8c.html#3a43d24dea5c4914c4adbc498d3fec84">ast_codec_pref_append</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref, <span class="keywordtype">int</span> <a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>);
<a name="l00523"></a>00523 <span class="comment"></span>
<a name="l00524"></a>00524 <span class="comment">/*! \brief Select the best audio format according to preference list from supplied options. </span>
<a name="l00525"></a>00525 <span class="comment">   If "find_best" is non-zero then if nothing is found, the "Best" format of </span>
<a name="l00526"></a>00526 <span class="comment">   the format list is selected, otherwise 0 is returned. */</span>
<a name="l00527"></a>00527 <span class="keywordtype">int</span> <a class="code" href="frame_8c.html#b44bee6c3d35e71f8ac931c5eb8d1b32">ast_codec_choose</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref, <span class="keywordtype">int</span> formats, <span class="keywordtype">int</span> <a class="code" href="cli_8c.html#5be9502d1aa1a3046aef9e97e61a1611">find_best</a>);
<a name="l00528"></a>00528 <span class="comment"></span>
<a name="l00529"></a>00529 <span class="comment">/*! \brief Set packet size for codec</span>
<a name="l00530"></a>00530 <span class="comment">*/</span>
<a name="l00531"></a>00531 <span class="keywordtype">int</span> <a class="code" href="frame_8c.html#a1e66ce5adea4bd91d098fa5c98cf5e7">ast_codec_pref_setsize</a>(<span class="keyword">struct</span> <a class="code" href="structast__codec__pref.html">ast_codec_pref</a> *pref, <span class="keywordtype">int</span> <a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>, <span class="keywordtype">int</span> framems);
<a name="l00532"></a>00532 <span class="comment"></span>
<a name="l00533"></a>00533 <span class="comment">/*! \brief Get packet size for codec</span>
<a name="l00534"></a>00534 <span class="comment">*/</span>
<a name="l00535"></a>00535 <span class="keyword">struct </span><a class="code" href="structast__format__list.html">ast_format_list</a> ast_codec_pref_getsize(struct ast_codec_pref *pref, <span class="keywordtype">int</span> <a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>);
<a name="l00536"></a>00536 <span class="comment"></span>
<a name="l00537"></a>00537 <span class="comment">/*! \brief Parse an "allow" or "deny" line in a channel or device configuration </span>
<a name="l00538"></a>00538 <span class="comment">        and update the capabilities mask and pref if provided.</span>
<a name="l00539"></a>00539 <span class="comment">   Video codecs are not added to codec preference lists, since we can not transcode</span>
<a name="l00540"></a>00540 <span class="comment">   \return Returns number of errors encountered during parsing</span>
<a name="l00541"></a>00541 <span class="comment"> */</span>
<a name="l00542"></a>00542 <span class="keywordtype">int</span> <a class="code" href="frame_8c.html#8ca22a4761271647fa7d079721f5badc">ast_parse_allow_disallow</a>(<span class="keyword">struct</span> ast_codec_pref *pref, <span class="keywordtype">int</span> *mask, <span class="keyword">const</span> <span class="keywordtype">char</span> *list, <span class="keywordtype">int</span> allowing);
<a name="l00543"></a>00543 <span class="comment"></span>
<a name="l00544"></a>00544 <span class="comment">/*! \brief Dump audio codec preference list into a string */</span>
<a name="l00545"></a>00545 <span class="keywordtype">int</span> <a class="code" href="frame_8c.html#611907362824d464d9e5b4c5eff95005">ast_codec_pref_string</a>(<span class="keyword">struct</span> ast_codec_pref *pref, <span class="keywordtype">char</span> *<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, size_t size);
<a name="l00546"></a>00546 <span class="comment"></span>
<a name="l00547"></a>00547 <span class="comment">/*! \brief Shift an audio codec preference list up or down 65 bytes so that it becomes an ASCII string */</span>
<a name="l00548"></a>00548 <span class="keywordtype">void</span> <a class="code" href="frame_8c.html#6f50f49fb8877f8ddf48c139f37a8b8b">ast_codec_pref_convert</a>(<span class="keyword">struct</span> ast_codec_pref *pref, <span class="keywordtype">char</span> *<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, size_t size, <span class="keywordtype">int</span> right);
<a name="l00549"></a>00549 <span class="comment"></span>
<a name="l00550"></a>00550 <span class="comment">/*! \brief Returns the number of samples contained in the frame */</span>
<a name="l00551"></a>00551 <span class="keywordtype">int</span> <a class="code" href="frame_8c.html#1c2e4fd774af6555c92272ab31d635ab">ast_codec_get_samples</a>(<span class="keyword">struct</span> <a class="code" href="structast__frame.html">ast_frame</a> *<a class="code" href="format__g726_8c.html#85b9b17a7dd34a3638c560bc9152473b">f</a>);
<a name="l00552"></a>00552 <span class="comment"></span>
<a name="l00553"></a>00553 <span class="comment">/*! \brief Returns the number of bytes for the number of samples of the given format */</span>
<a name="l00554"></a>00554 <span class="keywordtype">int</span> <a class="code" href="frame_8c.html#86a66efeb5a412e9c1cae13f92043c47">ast_codec_get_len</a>(<span class="keywordtype">int</span> <a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>, <span class="keywordtype">int</span> <a class="code" href="structast__frame.html#6ef9161b900632671022358216c7dfe7">samples</a>);
<a name="l00555"></a>00555 <span class="comment"></span>
<a name="l00556"></a>00556 <span class="comment">/*! \brief Appends a frame to the end of a list of frames, truncating the maximum length of the list */</span>
<a name="l00557"></a>00557 <span class="keyword">struct </span><a class="code" href="structast__frame.html">ast_frame</a> *<a class="code" href="frame_8h.html#50f574b5014f37c75d7281fa33b5f49e">ast_frame_enqueue</a>(<span class="keyword">struct</span> <a class="code" href="structast__frame.html">ast_frame</a> *head, <span class="keyword">struct</span> <a class="code" href="structast__frame.html">ast_frame</a> *<a class="code" href="format__g726_8c.html#85b9b17a7dd34a3638c560bc9152473b">f</a>, <span class="keywordtype">int</span> maxlen, <span class="keywordtype">int</span> dupe);
<a name="l00558"></a>00558 
<a name="l00559"></a>00559 <span class="comment"></span>
<a name="l00560"></a>00560 <span class="comment">/*! \brief Gets duration in ms of interpolation frame for a format */</span>
<a name="l00561"></a><a class="code" href="frame_8h.html#ba8b30f56c36a1e77180728bdb29ab3f">00561</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="frame_8h.html#ba8b30f56c36a1e77180728bdb29ab3f">ast_codec_interp_len</a>(<span class="keywordtype">int</span> <a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>) 
<a name="l00562"></a>00562 { 
<a name="l00563"></a>00563    <span class="keywordflow">return</span> (format == <a class="code" href="frame_8h.html#c2f4d8d1a79322d795824fd91fb2706c">AST_FORMAT_ILBC</a>) ? 30 : 20;
<a name="l00564"></a>00564 }
<a name="l00565"></a>00565 <span class="comment"></span>
<a name="l00566"></a>00566 <span class="comment">/*!</span>
<a name="l00567"></a>00567 <span class="comment">  \brief Adjusts the volume of the audio samples contained in a frame.</span>
<a name="l00568"></a>00568 <span class="comment">  \param f The frame containing the samples (must be AST_FRAME_VOICE and AST_FORMAT_SLINEAR)</span>
<a name="l00569"></a>00569 <span class="comment">  \param adjustment The number of dB to adjust up or down.</span>
<a name="l00570"></a>00570 <span class="comment">  \return 0 for success, non-zero for an error</span>
<a name="l00571"></a>00571 <span class="comment"> */</span>
<a name="l00572"></a>00572 <span class="keywordtype">int</span> <a class="code" href="frame_8c.html#0f5d115410bf7f582584378b94d8d37b">ast_frame_adjust_volume</a>(<span class="keyword">struct</span> <a class="code" href="structast__frame.html">ast_frame</a> *<a class="code" href="format__g726_8c.html#85b9b17a7dd34a3638c560bc9152473b">f</a>, <span class="keywordtype">int</span> adjustment);
<a name="l00573"></a>00573 <span class="comment"></span>
<a name="l00574"></a>00574 <span class="comment">/*!</span>
<a name="l00575"></a>00575 <span class="comment">  \brief Sums two frames of audio samples.</span>
<a name="l00576"></a>00576 <span class="comment">  \param f1 The first frame (which will contain the result)</span>
<a name="l00577"></a>00577 <span class="comment">  \param f2 The second frame</span>
<a name="l00578"></a>00578 <span class="comment">  \return 0 for success, non-zero for an error</span>
<a name="l00579"></a>00579 <span class="comment"></span>
<a name="l00580"></a>00580 <span class="comment">  The frames must be AST_FRAME_VOICE and must contain AST_FORMAT_SLINEAR samples,</span>
<a name="l00581"></a>00581 <span class="comment">  and must contain the same number of samples.</span>
<a name="l00582"></a>00582 <span class="comment"> */</span>
<a name="l00583"></a>00583 <span class="keywordtype">int</span> <a class="code" href="frame_8c.html#8a78ed734b1cafea2ab42e1363a330d0">ast_frame_slinear_sum</a>(<span class="keyword">struct</span> <a class="code" href="structast__frame.html">ast_frame</a> *f1, <span class="keyword">struct</span> <a class="code" href="structast__frame.html">ast_frame</a> *f2);
<a name="l00584"></a>00584 
<a name="l00585"></a>00585 <span class="preprocessor">#if defined(__cplusplus) || defined(c_plusplus)</span>
<a name="l00586"></a>00586 <span class="preprocessor"></span>}
<a name="l00587"></a>00587 <span class="preprocessor">#endif</span>
<a name="l00588"></a>00588 <span class="preprocessor"></span>
<a name="l00589"></a>00589 <span class="preprocessor">#endif </span><span class="comment">/* _ASTERISK_FRAME_H */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu May 24 22:26:42 2007 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
