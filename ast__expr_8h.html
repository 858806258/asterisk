<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (24 May 2007)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Thu May 24 22:27:02 2007</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Finclude_2F.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Finclude_2Fasterisk_2F.html">asterisk</a></div>
<h1>ast_expr.h File Reference</h1>
<p>
<a href="ast__expr_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ast__expr_8h.html#ba551f4bc61114d2514c037ff14a9259">ast_expr</a> (char *expr, char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, int length)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ba551f4bc61114d2514c037ff14a9259"></a><!-- doxytag: member="ast_expr.h::ast_expr" ref="ba551f4bc61114d2514c037ff14a9259" args="(char *expr, char *buf, int length)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_expr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>expr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>length</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ast__expr2f_8c-source.html#l03097">3097</a> of file <a class="el" href="ast__expr2f_8c-source.html">ast_expr2f.c</a>.<div class="fragment"><pre class="fragment"><a name="l03098"></a>03098 {
<a name="l03099"></a>03099    <span class="keyword">struct </span><a class="code" href="structparse__io.html">parse_io</a> io;
<a name="l03100"></a>03100    <span class="keywordtype">int</span> return_value = 0;
<a name="l03101"></a>03101    
<a name="l03102"></a>03102    memset(&amp;io, 0, <span class="keyword">sizeof</span>(io));
<a name="l03103"></a>03103    io.<a class="code" href="structparse__io.html#b45cffe084dd3d20d928bee85e7b0f21">string</a> = expr;  <span class="comment">/* to pass to the error routine */</span>
<a name="l03104"></a>03104    
<a name="l03105"></a>03105    <a class="code" href="ast__expr2f_8c.html#890ff8952c43e7161c4ef6f3db272520">ast_yylex_init</a>(&amp;io.<a class="code" href="structparse__io.html#bbdaea376f500d25f6b0c1050311dd07">scanner</a>);
<a name="l03106"></a>03106    
<a name="l03107"></a>03107    <a class="code" href="ast__expr2f_8c.html#e5aa9818b26bf3bfea5e073dc6b3cd14">ast_yy_scan_string</a>(expr, io.<a class="code" href="structparse__io.html#bbdaea376f500d25f6b0c1050311dd07">scanner</a>);
<a name="l03108"></a>03108    
<a name="l03109"></a>03109    <a class="code" href="ast__expr2f_8c.html#ddd2166f2146255faa89355d3332b1cf">ast_yyparse</a> ((<span class="keywordtype">void</span> *) &amp;io);
<a name="l03110"></a>03110 
<a name="l03111"></a>03111    <a class="code" href="ast__expr2f_8c.html#e5646334089727b415835fc7aaf95fcd">ast_yylex_destroy</a>(io.<a class="code" href="structparse__io.html#bbdaea376f500d25f6b0c1050311dd07">scanner</a>);
<a name="l03112"></a>03112 
<a name="l03113"></a>03113    <span class="keywordflow">if</span> (!io.<a class="code" href="structparse__io.html#3a6d0284e743dc4a9b86f97d6dd1a3bf">val</a>) {
<a name="l03114"></a>03114       <span class="keywordflow">if</span> (length &gt; 1) {
<a name="l03115"></a>03115          strcpy(<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, <span class="stringliteral">"0"</span>);
<a name="l03116"></a>03116          return_value = 1;
<a name="l03117"></a>03117       }
<a name="l03118"></a>03118    } <span class="keywordflow">else</span> {
<a name="l03119"></a>03119       <span class="keywordflow">if</span> (io.<a class="code" href="structparse__io.html#3a6d0284e743dc4a9b86f97d6dd1a3bf">val</a>-&gt;<a class="code" href="structval.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a> == <a class="code" href="ast__expr2_8c.html#bd3a405085f25dbcae3c259a1cad0ac029f5b7a0a4e4022d17667f572c51ecae">AST_EXPR_integer</a>) {
<a name="l03120"></a>03120          <span class="keywordtype">int</span> res_length;
<a name="l03121"></a>03121 
<a name="l03122"></a>03122          res_length = snprintf(<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, length, <span class="stringliteral">"%ld"</span>, (<span class="keywordtype">long</span> <span class="keywordtype">int</span>) io.<a class="code" href="structparse__io.html#3a6d0284e743dc4a9b86f97d6dd1a3bf">val</a>-&gt;<a class="code" href="structval.html#7b774effe4a349c6dd82ad4f4f21d34c">u</a>.i);
<a name="l03123"></a>03123          return_value = (res_length &lt;= length) ? res_length : length;
<a name="l03124"></a>03124       } <span class="keywordflow">else</span> {
<a name="l03125"></a>03125 #<span class="keywordflow">if</span> defined(STANDALONE) || defined(LOW_MEMORY) || defined(STANDALONE_AEL)
<a name="l03126"></a>03126          strncpy(<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, io.<a class="code" href="structval.html">val</a>-&gt;u.<a class="code" href="aesopt_8h.html#8d6242bc80162ac99dd4d368eabe77cc">s</a>, length - 1);
<a name="l03127"></a>03127 #else <span class="comment">/* !STANDALONE &amp;&amp; !LOW_MEMORY */</span>
<a name="l03128"></a>03128          ast_copy_string(buf, io.<a class="code" href="structval.html">val</a>-&gt;u.s, length);
<a name="l03129"></a>03129 #endif <span class="comment">/* STANDALONE || LOW_MEMORY */</span>
<a name="l03130"></a>03130          return_value = strlen(buf);
<a name="l03131"></a>03131          <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(io.<a class="code" href="structval.html">val</a>-&gt;u.s);
<a name="l03132"></a>03132       }
<a name="l03133"></a>03133       <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(io.<a class="code" href="structval.html">val</a>);
<a name="l03134"></a>03134    }
<a name="l03135"></a>03135    return return_value;
<a name="l03136"></a>03136 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu May 24 22:27:02 2007 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
