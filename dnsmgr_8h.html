<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (24 May 2007)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Thu May 24 22:27:27 2007</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Finclude_2F.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Finclude_2Fasterisk_2F.html">asterisk</a></div>
<h1>dnsmgr.h File Reference</h1>Background DNS update manager. <a href="#_details">More...</a>
<p>
<code>#include &lt;netinet/in.h&gt;</code><br>

<p>
<a href="dnsmgr_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dnsmgr_8h.html#68483fb36fcaaf84520c46f5ae70b51e">ast_dnsmgr_changed</a> (struct <a class="el" href="structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *entry)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check is see if a dnsmgr entry has changed.  <a href="#68483fb36fcaaf84520c46f5ae70b51e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dnsmgr_8h.html#aa9a042fcf60b295befa58ca2bc41bed">ast_dnsmgr_get</a> (const char *<a class="el" href="cdr__tds_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, struct in_addr *<a class="el" href="cdr__pgsql_8c.html#b4a88417b3d0170d754c647c30b7216a">result</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dnsmgr_8h.html#c0f14e87e1c5fc7196034f2334847c6a">ast_dnsmgr_lookup</a> (const char *<a class="el" href="cdr__tds_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, struct in_addr *<a class="el" href="cdr__pgsql_8c.html#b4a88417b3d0170d754c647c30b7216a">result</a>, struct <a class="el" href="structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> **dnsmgr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dnsmgr_8h.html#00be59b11bb76ae57b4dbf8ec333e43d">ast_dnsmgr_refresh</a> (struct <a class="el" href="structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *entry)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Force a refresh of a dnsmgr entry.  <a href="#00be59b11bb76ae57b4dbf8ec333e43d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dnsmgr_8h.html#cc6d75965018ba72c2ba0dc0520e2b4a">ast_dnsmgr_release</a> (struct <a class="el" href="structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *entry)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Background DNS update manager. 
<p>

<p>
Definition in file <a class="el" href="dnsmgr_8h-source.html">dnsmgr.h</a>.<hr><h2>Function Documentation</h2>
<a class="anchor" name="68483fb36fcaaf84520c46f5ae70b51e"></a><!-- doxytag: member="dnsmgr.h::ast_dnsmgr_changed" ref="68483fb36fcaaf84520c46f5ae70b51e" args="(struct ast_dnsmgr_entry *entry)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_dnsmgr_changed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>entry</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Check is see if a dnsmgr entry has changed. 
<p>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>non-zero</em>&nbsp;</td><td>if the dnsmgr entry has changed since the last call to this function </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>zero</em>&nbsp;</td><td>if the dnsmgr entry has not changed since the last call to this function </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dnsmgr_8c-source.html#l00197">197</a> of file <a class="el" href="dnsmgr_8c-source.html">dnsmgr.c</a>.
<p>
References <a class="el" href="lock_8h-source.html#l00530">ast_mutex_lock()</a>, <a class="el" href="lock_8h-source.html#l00520">ast_mutex_unlock()</a>, <a class="el" href="dnsmgr_8c-source.html#l00061">ast_dnsmgr_entry::changed</a>, and <a class="el" href="dnsmgr_8c-source.html#l00062">ast_dnsmgr_entry::lock</a>.
<p>
Referenced by <a class="el" href="chan__iax2_8c-source.html#l08012">iax2_do_register()</a>.<div class="fragment"><pre class="fragment"><a name="l00198"></a>00198 {
<a name="l00199"></a>00199    <span class="keywordtype">int</span> <a class="code" href="structast__dnsmgr__entry.html#8977dfac2f8e04cb96e66882235f5aba">changed</a>;
<a name="l00200"></a>00200 
<a name="l00201"></a>00201    <a class="code" href="lock_8h.html#b3c5e3093b325167f88db93c8b4b2421">ast_mutex_lock</a>(&amp;entry-&gt;<a class="code" href="structast__dnsmgr__entry.html#dce7c4174ce9323904a934a486c41288">lock</a>);
<a name="l00202"></a>00202 
<a name="l00203"></a>00203    changed = entry-&gt;<a class="code" href="structast__dnsmgr__entry.html#8977dfac2f8e04cb96e66882235f5aba">changed</a>;
<a name="l00204"></a>00204    entry-&gt;<a class="code" href="structast__dnsmgr__entry.html#8977dfac2f8e04cb96e66882235f5aba">changed</a> = 0;
<a name="l00205"></a>00205 
<a name="l00206"></a>00206    <a class="code" href="lock_8h.html#1d33e3caf152f0901c5ebdb69c2d4d26">ast_mutex_unlock</a>(&amp;entry-&gt;<a class="code" href="structast__dnsmgr__entry.html#dce7c4174ce9323904a934a486c41288">lock</a>);
<a name="l00207"></a>00207    
<a name="l00208"></a>00208    <span class="keywordflow">return</span> changed;
<a name="l00209"></a>00209 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="aa9a042fcf60b295befa58ca2bc41bed"></a><!-- doxytag: member="dnsmgr.h::ast_dnsmgr_get" ref="aa9a042fcf60b295befa58ca2bc41bed" args="(const char *name, struct in_addr *result)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__dnsmgr__entry.html">ast_dnsmgr_entry</a>* ast_dnsmgr_get           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct in_addr *&nbsp;</td>
          <td class="mdname" nowrap> <em>result</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dnsmgr_8c-source.html#l00089">89</a> of file <a class="el" href="dnsmgr_8c-source.html">dnsmgr.c</a>.
<p>
References <a class="el" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>, <a class="el" href="linkedlists_8h-source.html#l00650">AST_LIST_INSERT_HEAD</a>, <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, <a class="el" href="lock_8h-source.html#l00508">ast_mutex_init()</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, and <a class="el" href="dnsmgr_8c-source.html#l00057">ast_dnsmgr_entry::result</a>.
<p>
Referenced by <a class="el" href="dnsmgr_8c-source.html#l00122">ast_dnsmgr_lookup()</a>.<div class="fragment"><pre class="fragment"><a name="l00090"></a>00090 {
<a name="l00091"></a>00091    <span class="keyword">struct </span><a class="code" href="structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *entry;
<a name="l00092"></a>00092 
<a name="l00093"></a>00093    <span class="keywordflow">if</span> (!<a class="code" href="cdr__pgsql_8c.html#b4a88417b3d0170d754c647c30b7216a">result</a> || <a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>) || !(entry = <a class="code" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*entry) + strlen(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>))))
<a name="l00094"></a>00094       <span class="keywordflow">return</span> NULL;
<a name="l00095"></a>00095 
<a name="l00096"></a>00096    entry-&gt;result = <a class="code" href="cdr__pgsql_8c.html#b4a88417b3d0170d754c647c30b7216a">result</a>;
<a name="l00097"></a>00097    <a class="code" href="lock_8h.html#33e99ac90b0ca47211841b5cab79ffc4">ast_mutex_init</a>(&amp;entry-&gt;lock);
<a name="l00098"></a>00098    strcpy(entry-&gt;name, <a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>);
<a name="l00099"></a>00099 
<a name="l00100"></a>00100    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;entry_list);
<a name="l00101"></a>00101    <a class="code" href="linkedlists_8h.html#5df56040a8838bdc841ef8eb179b7609">AST_LIST_INSERT_HEAD</a>(&amp;entry_list, entry, list);
<a name="l00102"></a>00102    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;entry_list);
<a name="l00103"></a>00103 
<a name="l00104"></a>00104    <span class="keywordflow">return</span> entry;
<a name="l00105"></a>00105 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c0f14e87e1c5fc7196034f2334847c6a"></a><!-- doxytag: member="dnsmgr.h::ast_dnsmgr_lookup" ref="c0f14e87e1c5fc7196034f2334847c6a" args="(const char *name, struct in_addr *result, struct ast_dnsmgr_entry **dnsmgr)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_dnsmgr_lookup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct in_addr *&nbsp;</td>
          <td class="mdname" nowrap> <em>result</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>dnsmgr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dnsmgr_8c-source.html#l00122">122</a> of file <a class="el" href="dnsmgr_8c-source.html">dnsmgr.c</a>.
<p>
References <a class="el" href="dnsmgr_8c-source.html#l00089">ast_dnsmgr_get()</a>, <a class="el" href="utils_8c-source.html#l00182">ast_gethostbyname()</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="cdr_8c-source.html#l00091">enabled</a>, <a class="el" href="chan__skinny_8c-source.html#l00760">hp</a>, <a class="el" href="asterisk_8c-source.html#l00163">option_verbose</a>, <a class="el" href="logger_8h-source.html#l00044">VERBOSE_PREFIX_2</a>, and <a class="el" href="logger_8h-source.html#l00046">VERBOSE_PREFIX_4</a>.
<p>
Referenced by <a class="el" href="chan__iax2_8c-source.html#l08607">build_peer()</a>, and <a class="el" href="chan__iax2_8c-source.html#l05581">iax2_append_register()</a>.<div class="fragment"><pre class="fragment"><a name="l00123"></a>00123 {
<a name="l00124"></a>00124    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>) || !<a class="code" href="cdr__pgsql_8c.html#b4a88417b3d0170d754c647c30b7216a">result</a> || !dnsmgr)
<a name="l00125"></a>00125       <span class="keywordflow">return</span> -1;
<a name="l00126"></a>00126 
<a name="l00127"></a>00127    <span class="keywordflow">if</span> (*dnsmgr &amp;&amp; !strcasecmp((*dnsmgr)-&gt;name, name))
<a name="l00128"></a>00128       <span class="keywordflow">return</span> 0;
<a name="l00129"></a>00129 
<a name="l00130"></a>00130    <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 3)
<a name="l00131"></a>00131       <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<a class="code" href="logger_8h.html#8f25f582e7a737b25f607fb6ad653807">VERBOSE_PREFIX_4</a> <span class="stringliteral">"doing dnsmgr_lookup for '%s'\n"</span>, name);
<a name="l00132"></a>00132 
<a name="l00133"></a>00133    <span class="comment">/* if it's actually an IP address and not a name,</span>
<a name="l00134"></a>00134 <span class="comment">      there's no need for a managed lookup */</span>
<a name="l00135"></a>00135    <span class="keywordflow">if</span> (inet_aton(name, <a class="code" href="cdr__pgsql_8c.html#b4a88417b3d0170d754c647c30b7216a">result</a>))
<a name="l00136"></a>00136       <span class="keywordflow">return</span> 0;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138    <span class="comment">/* if the manager is disabled, do a direct lookup and return the result,</span>
<a name="l00139"></a>00139 <span class="comment">      otherwise register a managed lookup for the name */</span>
<a name="l00140"></a>00140    <span class="keywordflow">if</span> (!<a class="code" href="cdr_8c.html#a10311459433adf322f2590a4987c423">enabled</a>) {
<a name="l00141"></a>00141       <span class="keyword">struct </span><a class="code" href="structast__hostent.html">ast_hostent</a> ahp;
<a name="l00142"></a>00142       <span class="keyword">struct </span>hostent *<a class="code" href="chan__skinny_8c.html#d2ccda10db94c2b5d51beed10484c025">hp</a>;
<a name="l00143"></a>00143 
<a name="l00144"></a>00144       <span class="keywordflow">if</span> ((hp = <a class="code" href="utils_8c.html#00f9ad2be8cda9c885557d03568816ec">ast_gethostbyname</a>(name, &amp;ahp)))
<a name="l00145"></a>00145          memcpy(<a class="code" href="cdr__pgsql_8c.html#b4a88417b3d0170d754c647c30b7216a">result</a>, hp-&gt;h_addr, <span class="keyword">sizeof</span>(result));
<a name="l00146"></a>00146       <span class="keywordflow">return</span> 0;
<a name="l00147"></a>00147    } <span class="keywordflow">else</span> {
<a name="l00148"></a>00148       <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 2)
<a name="l00149"></a>00149          <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<a class="code" href="logger_8h.html#6e3640436a97291b451a8d264b5ab15d">VERBOSE_PREFIX_2</a> <span class="stringliteral">"adding dns manager for '%s'\n"</span>, name);
<a name="l00150"></a>00150       *dnsmgr = <a class="code" href="dnsmgr_8c.html#aa9a042fcf60b295befa58ca2bc41bed">ast_dnsmgr_get</a>(name, <a class="code" href="cdr__pgsql_8c.html#b4a88417b3d0170d754c647c30b7216a">result</a>);
<a name="l00151"></a>00151       <span class="keywordflow">return</span> !*dnsmgr;
<a name="l00152"></a>00152    }
<a name="l00153"></a>00153 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="00be59b11bb76ae57b4dbf8ec333e43d"></a><!-- doxytag: member="dnsmgr.h::ast_dnsmgr_refresh" ref="00be59b11bb76ae57b4dbf8ec333e43d" args="(struct ast_dnsmgr_entry *entry)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_dnsmgr_refresh           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>entry</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Force a refresh of a dnsmgr entry. 
<p>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>non-zero</em>&nbsp;</td><td>if the result is different than the previous result </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>zero</em>&nbsp;</td><td>if the result is the same as the previous result </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dnsmgr_8c-source.html#l00189">189</a> of file <a class="el" href="dnsmgr_8c-source.html">dnsmgr.c</a>.
<p>
References <a class="el" href="dnsmgr_8c-source.html#l00158">dnsmgr_refresh()</a>.
<p>
Referenced by <a class="el" href="chan__iax2_8c-source.html#l08012">iax2_do_register()</a>.<div class="fragment"><pre class="fragment"><a name="l00190"></a>00190 {
<a name="l00191"></a>00191    <span class="keywordflow">return</span> <a class="code" href="dnsmgr_8c.html#e0a4bd789aa60ccc390a765ba087a35d">dnsmgr_refresh</a>(entry, 0);
<a name="l00192"></a>00192 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="cc6d75965018ba72c2ba0dc0520e2b4a"></a><!-- doxytag: member="dnsmgr.h::ast_dnsmgr_release" ref="cc6d75965018ba72c2ba0dc0520e2b4a" args="(struct ast_dnsmgr_entry *entry)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_dnsmgr_release           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__dnsmgr__entry.html">ast_dnsmgr_entry</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>entry</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dnsmgr_8c-source.html#l00107">107</a> of file <a class="el" href="dnsmgr_8c-source.html">dnsmgr.c</a>.
<p>
References <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00731">AST_LIST_REMOVE</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, <a class="el" href="lock_8h-source.html#l00525">ast_mutex_destroy()</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="astmm_8h-source.html#l00069">free</a>, <a class="el" href="dnsmgr_8c-source.html#l00062">ast_dnsmgr_entry::lock</a>, <a class="el" href="asterisk_8c-source.html#l00163">option_verbose</a>, and <a class="el" href="logger_8h-source.html#l00046">VERBOSE_PREFIX_4</a>.
<p>
Referenced by <a class="el" href="chan__iax2_8c-source.html#l09068">delete_users()</a>, <a class="el" href="chan__iax2_8c-source.html#l09131">destroy_peer()</a>, and <a class="el" href="chan__sip_8c-source.html#l02679">sip_destroy_peer()</a>.<div class="fragment"><pre class="fragment"><a name="l00108"></a>00108 {
<a name="l00109"></a>00109    <span class="keywordflow">if</span> (!entry)
<a name="l00110"></a>00110       <span class="keywordflow">return</span>;
<a name="l00111"></a>00111 
<a name="l00112"></a>00112    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;entry_list);
<a name="l00113"></a>00113    <a class="code" href="linkedlists_8h.html#d4a4c53d3b264b4e1c5e3fdd84cd8b5a">AST_LIST_REMOVE</a>(&amp;entry_list, entry, list);
<a name="l00114"></a>00114    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;entry_list);
<a name="l00115"></a>00115    <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 3)
<a name="l00116"></a>00116       <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<a class="code" href="logger_8h.html#8f25f582e7a737b25f607fb6ad653807">VERBOSE_PREFIX_4</a> <span class="stringliteral">"removing dns manager for '%s'\n"</span>, entry-&gt;name);
<a name="l00117"></a>00117 
<a name="l00118"></a>00118    <a class="code" href="lock_8h.html#1b27af7774f46859ffe2b1340ee7c082">ast_mutex_destroy</a>(&amp;entry-&gt;<a class="code" href="structast__dnsmgr__entry.html#dce7c4174ce9323904a934a486c41288">lock</a>);
<a name="l00119"></a>00119    <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(entry);
<a name="l00120"></a>00120 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu May 24 22:27:27 2007 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
