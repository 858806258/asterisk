<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (24 May 2007)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Thu May 24 22:27:37 2007</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Finclude_2F.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Finclude_2Fasterisk_2F.html">asterisk</a></div>
<h1>module.h File Reference</h1>Asterisk module definitions. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="utils_8h-source.html">asterisk/utils.h</a>&quot;</code><br>

<p>
<a href="module_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structast__module__info.html">ast_module_info</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#87ed115f504573783508f70d6107558d">AST_MODULE_CONFIG</a>&nbsp;&nbsp;&nbsp;&quot;modules.conf&quot;</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Module configuration file.  <a href="#87ed115f504573783508f70d6107558d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#237cb97341e39c38b6e3ecb88b7ea148">AST_MODULE_INFO</a>(keystr, flags_to_set, <a class="el" href="cdr__sqlite3__custom_8c.html#1dee80c7d5ab2c1c90aa8d2f7dd47256">desc</a>, fields...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#0cb745936e8fcf4d3805b996dd94ab03">AST_MODULE_INFO_STANDARD</a>(keystr, <a class="el" href="cdr__sqlite3__custom_8c.html#1dee80c7d5ab2c1c90aa8d2f7dd47256">desc</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#01229151b3816d7323f7460fef4305c3">ast_module_user_add</a>(<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>)&nbsp;&nbsp;&nbsp;__ast_module_user_add(<a class="el" href="structast__module__info.html">ast_module_info</a>-&gt;self, <a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#c41f250c8ab8ddcb77214a7b149c9e71">ast_module_user_hangup_all</a>()&nbsp;&nbsp;&nbsp;__ast_module_user_hangup_all(<a class="el" href="structast__module__info.html">ast_module_info</a>-&gt;self)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#bc801fe463749e03a890acb67c37fbdd">ast_module_user_remove</a>(user)&nbsp;&nbsp;&nbsp;__ast_module_user_remove(<a class="el" href="structast__module__info.html">ast_module_info</a>-&gt;self, user)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#fdd823f5e0fdac8332029b8e4538b773">ASTERISK_GPL_KEY</a>&nbsp;&nbsp;&nbsp;&quot;This paragraph is copyright (c) 2006 by Digium, Inc. \In order for your module to load, it must return this \key via a function called \&quot;key\&quot;.  Any code which \includes this paragraph must be licensed under the GNU \General Public License version 2 or later (at your \option).  In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot;</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The text the <a class="el" href="func__channel_8c.html#87ef31d54f81072952c331d5c7339d8e">key()</a> function should return.  <a href="#fdd823f5e0fdac8332029b8e4538b773"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#b4566594eeb42c8fc7d6733c7b4b6c0a">ast_module_flags</a> { <a class="el" href="module_8h.html#b4566594eeb42c8fc7d6733c7b4b6c0a5f5faa4cd21b6f6a0a7b9cfc9d3e6db4">AST_MODFLAG_DEFAULT</a> =  0, 
<a class="el" href="module_8h.html#b4566594eeb42c8fc7d6733c7b4b6c0a0b99d39f1f6a9afeedd2f8e6632dd76c">AST_MODFLAG_GLOBAL_SYMBOLS</a> =  (1 &lt;&lt; 0)
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0a">ast_module_load_result</a> { <a class="el" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0ad07cbe1dd6392827ce7616a624aad97c">AST_MODULE_LOAD_SUCCESS</a> =  0, 
<a class="el" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0adea6426eed250d0d922d7e289a706663">AST_MODULE_LOAD_DECLINE</a> =  1, 
<a class="el" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0ad2ec6d7ab7a7c169dc765e9937b966aa">AST_MODULE_LOAD_SKIP</a> =  2, 
<a class="el" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0a40ed2f1246faac667accd325ea83f9e2">AST_MODULE_LOAD_FAILURE</a> =  -1
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#7f8992121648ba013497a678ccaa6269">ast_module_unload_mode</a> { <a class="el" href="module_8h.html#7f8992121648ba013497a678ccaa62699562c97b424aad17b52e51a3a948315f">AST_FORCE_SOFT</a> =  0, 
<a class="el" href="module_8h.html#7f8992121648ba013497a678ccaa6269bbebb65eda949b35cc897af469927afb">AST_FORCE_FIRM</a> =  1, 
<a class="el" href="module_8h.html#7f8992121648ba013497a678ccaa6269aaaa4d6677842cb350fa742106d7eb46">AST_FORCE_HARD</a> =  2
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__module__user.html">ast_module_user</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#b049dea5b2b6b6bc66c843da4eef6cdf">__ast_module_user_add</a> (struct <a class="el" href="structast__module.html">ast_module</a> *, struct <a class="el" href="structast__channel.html">ast_channel</a> *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#9f155347e23d9a500d07e2b00cf8d361">__ast_module_user_hangup_all</a> (struct <a class="el" href="structast__module.html">ast_module</a> *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#34cbedd80356f74214d1c600edf66c54">__ast_module_user_remove</a> (struct <a class="el" href="structast__module.html">ast_module</a> *, struct <a class="el" href="structast__module__user.html">ast_module_user</a> *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static const&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#f2d6624e67e8f0bfe70b35ed8f609515">__attribute__</a> ((unused)) struct <a class="el" href="structast__module__info.html">ast_module_info</a> *<a class="el" href="structast__module__info.html">ast_module_info</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum <a class="el" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0a">ast_module_load_result</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#0b433ec2b68daca76aba804442b86ea0">ast_load_resource</a> (const char *resource_name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load a module.  <a href="#0b433ec2b68daca76aba804442b86ea0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#76ca1d2d53c11b5a688748a27553308d">ast_loader_register</a> (int(*updater)(void))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a procedure to be run when modules have been updated.  <a href="#76ca1d2d53c11b5a688748a27553308d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#b52d1337cd8ba7ac557468d2a92df5c2">ast_loader_unregister</a> (int(*updater)(void))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove a procedure to be run when modules are updated.  <a href="#b52d1337cd8ba7ac557468d2a92df5c2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#c6d04c8ea97d8c855a8fa30759fcb6f1">ast_module_check</a> (const char *<a class="el" href="cdr__tds_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if module with the name given is loaded.  <a href="#c6d04c8ea97d8c855a8fa30759fcb6f1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#35dec328d257abc218594c71f6ee2855">ast_module_helper</a> (const char *<a class="el" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a>, const char *word, int pos, int <a class="el" href="structstate.html">state</a>, int rpos, int needsreload)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Match modules names for the Asterisk cli.  <a href="#35dec328d257abc218594c71f6ee2855"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__module.html">ast_module</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#708752d34cfe2ad9dd4761a0e443331e">ast_module_ref</a> (struct <a class="el" href="structast__module.html">ast_module</a> *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#1a74ec5004e01a77b124abc67cb9988e">ast_module_register</a> (const struct <a class="el" href="structast__module__info.html">ast_module_info</a> *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#9d9de894f786fcad5a6badbeeb474ea8">ast_module_unref</a> (struct <a class="el" href="structast__module.html">ast_module</a> *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#6ac7d62fef9c370acdbe76898b2c162c">ast_module_unregister</a> (const struct <a class="el" href="structast__module__info.html">ast_module_info</a> *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#c3b6d984f6fa8e7e29d5c48301f4bea2">ast_unload_resource</a> (const char *resource_name, enum <a class="el" href="module_8h.html#7f8992121648ba013497a678ccaa6269">ast_module_unload_mode</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unload a module.  <a href="#c3b6d984f6fa8e7e29d5c48301f4bea2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#ce0d5fddcce98cb7d051a4058f20030e">ast_update_module_list</a> (int(*modentry)(const char *module, const char *description, int usecnt, const char *like), const char *like)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ask for a list of modules, descriptions, and use counts.  <a href="#ce0d5fddcce98cb7d051a4058f20030e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="module_8h.html#963a5bf4226e836e07eed720bd60baf1">ast_update_use_count</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Notify when usecount has been changed.  <a href="#963a5bf4226e836e07eed720bd60baf1"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Asterisk module definitions. 
<p>
This file contains the definitons for functions Asterisk modules should provide and some other module related functions. 
<p>
Definition in file <a class="el" href="module_8h-source.html">module.h</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="87ed115f504573783508f70d6107558d"></a><!-- doxytag: member="module.h::AST_MODULE_CONFIG" ref="87ed115f504573783508f70d6107558d" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define AST_MODULE_CONFIG&nbsp;&nbsp;&nbsp;&quot;modules.conf&quot;          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Module configuration file. 
<p>

<p>
Definition at line <a class="el" href="module_8h-source.html#l00051">51</a> of file <a class="el" href="module_8h-source.html">module.h</a>.
<p>
Referenced by <a class="el" href="loader_8c-source.html#l00704">load_modules()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="237cb97341e39c38b6e3ecb88b7ea148"></a><!-- doxytag: member="module.h::AST_MODULE_INFO" ref="237cb97341e39c38b6e3ecb88b7ea148" args="(keystr, flags_to_set, desc, fields...)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define AST_MODULE_INFO          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">keystr,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>flags_to_set,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="cdr__sqlite3__custom_8c.html#1dee80c7d5ab2c1c90aa8d2f7dd47256">desc</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>fields...&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="module_8h-source.html#l00329">329</a> of file <a class="el" href="module_8h-source.html">module.h</a>.
<p>
Referenced by <a class="el" href="app__rpt_8c-source.html#l07414">reload()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="0cb745936e8fcf4d3805b996dd94ab03"></a><!-- doxytag: member="module.h::AST_MODULE_INFO_STANDARD" ref="0cb745936e8fcf4d3805b996dd94ab03" args="(keystr, desc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define AST_MODULE_INFO_STANDARD          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">keystr,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="cdr__sqlite3__custom_8c.html#1dee80c7d5ab2c1c90aa8d2f7dd47256">desc</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="module_8h.html#237cb97341e39c38b6e3ecb88b7ea148">AST_MODULE_INFO</a>(keystr, <a class="code" href="module_8h.html#b4566594eeb42c8fc7d6733c7b4b6c0a5f5faa4cd21b6f6a0a7b9cfc9d3e6db4">AST_MODFLAG_DEFAULT</a>, <a class="code" href="chan__gtalk_8c.html#45c085ae9b1d6f46cf9e03f75b76fd83">desc</a>, \
         .load = <a class="code" href="chan__agent_8c.html#8c304b271325d497b3ce1886465a1abe">load_module</a>,       \
         .unload = <a class="code" href="chan__agent_8c.html#eaf793e807a29b69460b0c6c94a79a0b">unload_module</a>,      \
             )
</pre></div>
<p>
Definition at line <a class="el" href="module_8h-source.html#l00349">349</a> of file <a class="el" href="module_8h-source.html">module.h</a>.
<p>
Referenced by <a class="el" href="format__g726_8c-source.html#l00266">unload_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="01229151b3816d7323f7460fef4305c3"></a><!-- doxytag: member="module.h::ast_module_user_add" ref="01229151b3816d7323f7460fef4305c3" args="(chan)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_module_user_add          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;__ast_module_user_add(<a class="el" href="structast__module__info.html">ast_module_info</a>-&gt;self, <a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="module_8h-source.html#l00217">217</a> of file <a class="el" href="module_8h-source.html">module.h</a>.
<p>
Referenced by <a class="el" href="chan__agent_8c-source.html#l01763">__login_exec()</a>, <a class="el" href="app__macro_8c-source.html#l00144">_macro_exec()</a>, <a class="el" href="app__while_8c-source.html#l00164">_while_exec()</a>, <a class="el" href="func__curl_8c-source.html#l00136">acf_curl_exec()</a>, <a class="el" href="func__cut_8c-source.html#l00249">acf_cut_exec()</a>, <a class="el" href="func__rand_8c-source.html#l00044">acf_rand_exec()</a>, <a class="el" href="func__cut_8c-source.html#l00223">acf_sort_exec()</a>, <a class="el" href="func__version_8c-source.html#l00047">acf_version_exec()</a>, <a class="el" href="func__vmcount_8c-source.html#l00048">acf_vmcount_exec()</a>, <a class="el" href="app__meetme_8c-source.html#l02750">admin_exec()</a>, <a class="el" href="app__adsiprog_8c-source.html#l01549">adsi_exec()</a>, <a class="el" href="res__agi_8c-source.html#l02033">agi_exec_full()</a>, <a class="el" href="app__alarmreceiver_8c-source.html#l00635">alarmreceiver_exec()</a>, <a class="el" href="app__amd_8c-source.html#l00319">amd_exec()</a>, <a class="el" href="app__externalivr_8c-source.html#l00244">app_exec()</a>, <a class="el" href="app__queue_8c-source.html#l03326">aqm_exec()</a>, <a class="el" href="app__channelredirect_8c-source.html#l00052">asyncgoto_exec()</a>, <a class="el" href="app__authenticate_8c-source.html#l00094">auth_exec()</a>, <a class="el" href="app__talkdetect_8c-source.html#l00063">background_detect_exec()</a>, <a class="el" href="res__features_8c-source.html#l02716">bridge_exec()</a>, <a class="el" href="res__features_8c-source.html#l00529">builtin_parkcall()</a>, <a class="el" href="app__chanisavail_8c-source.html#l00069">chanavail_exec()</a>, <a class="el" href="app__meetme_8c-source.html#l02904">channel_admin_exec()</a>, <a class="el" href="app__chanspy_8c-source.html#l00626">chanspy_exec()</a>, <a class="el" href="app__meetme_8c-source.html#l02485">conf_exec()</a>, <a class="el" href="app__controlplayback_8c-source.html#l00075">controlplayback_exec()</a>, <a class="el" href="app__meetme_8c-source.html#l02434">count_exec()</a>, <a class="el" href="app__getcpeid_8c-source.html#l00066">cpeid_exec()</a>, <a class="el" href="app__db_8c-source.html#l00110">del_exec()</a>, <a class="el" href="app__db_8c-source.html#l00068">deltree_exec()</a>, <a class="el" href="app__dial_8c-source.html#l01184">dial_exec_full()</a>, <a class="el" href="app__dictate_8c-source.html#l00079">dictate_exec()</a>, <a class="el" href="app__directory_8c-source.html#l00570">directory_exec()</a>, <a class="el" href="app__disa_8c-source.html#l00113">disa_exec()</a>, <a class="el" href="app__dumpchan_8c-source.html#l00143">dumpchan_exec()</a>, <a class="el" href="pbx__dundi_8c-source.html#l03869">dundi_query_read()</a>, <a class="el" href="pbx__dundi_8c-source.html#l03947">dundi_result_read()</a>, <a class="el" href="pbx__dundi_8c-source.html#l03771">dundifunc_read()</a>, <a class="el" href="app__echo_8c-source.html#l00054">echo_exec()</a>, <a class="el" href="func__enum_8c-source.html#l00155">enum_query_read()</a>, <a class="el" href="func__enum_8c-source.html#l00222">enum_result_read()</a>, <a class="el" href="app__exec_8c-source.html#l00091">exec_exec()</a>, <a class="el" href="app__exec_8c-source.html#l00162">execif_exec()</a>, <a class="el" href="app__chanspy_8c-source.html#l00708">extenspy_exec()</a>, <a class="el" href="app__festival_8c-source.html#l00286">festival_exec()</a>, <a class="el" href="app__flash_8c-source.html#l00072">flash_exec()</a>, <a class="el" href="app__forkcdr_8c-source.html#l00077">forkcdr_exec()</a>, <a class="el" href="func__enum_8c-source.html#l00057">function_enum()</a>, <a class="el" href="func__realtime_8c-source.html#l00048">function_realtime_read()</a>, <a class="el" href="func__realtime_8c-source.html#l00100">function_realtime_write()</a>, <a class="el" href="func__enum_8c-source.html#l00346">function_txtcidname()</a>, <a class="el" href="app__stack_8c-source.html#l00193">gosub_exec()</a>, <a class="el" href="app__stack_8c-source.html#l00277">gosubif_exec()</a>, <a class="el" href="app__ices_8c-source.html#l00104">ices_exec()</a>, <a class="el" href="chan__local_8c-source.html#l00593">local_new()</a>, <a class="el" href="app__verbose_8c-source.html#l00101">log_exec()</a>, <a class="el" href="app__macro_8c-source.html#l00499">macroif_exec()</a>, <a class="el" href="app__milliwatt_8c-source.html#l00113">milliwatt_exec()</a>, <a class="el" href="app__minivm_8c-source.html#l02065">minivm_accmess_exec()</a>, <a class="el" href="app__minivm_8c-source.html#l02021">minivm_delete_exec()</a>, <a class="el" href="app__minivm_8c-source.html#l01818">minivm_greet_exec()</a>, <a class="el" href="app__minivm_8c-source.html#l01673">minivm_notify_exec()</a>, <a class="el" href="app__minivm_8c-source.html#l01751">minivm_record_exec()</a>, <a class="el" href="app__mixmonitor_8c-source.html#l00302">mixmonitor_exec()</a>, <a class="el" href="app__morsecode_8c-source.html#l00109">morsecode_exec()</a>, <a class="el" href="app__mp3_8c-source.html#l00125">mp3_exec()</a>, <a class="el" href="chan__nbs_8c-source.html#l00233">nbs_new()</a>, <a class="el" href="app__nbscat_8c-source.html#l00116">NBScat_exec()</a>, <a class="el" href="app__cdr_8c-source.html#l00047">nocdr_exec()</a>, <a class="el" href="app__osplookup_8c-source.html#l01311">ospauth_exec()</a>, <a class="el" href="app__osplookup_8c-source.html#l01803">ospfinished_exec()</a>, <a class="el" href="app__osplookup_8c-source.html#l01415">osplookup_exec()</a>, <a class="el" href="app__osplookup_8c-source.html#l01618">ospnext_exec()</a>, <a class="el" href="app__page_8c-source.html#l00085">page_exec()</a>, <a class="el" href="res__features_8c-source.html#l01938">park_call_exec()</a>, <a class="el" href="res__features_8c-source.html#l01967">park_exec()</a>, <a class="el" href="app__parkandannounce_8c-source.html#l00077">parkandannounce_exec()</a>, <a class="el" href="app__directed__pickup_8c-source.html#l00134">pickup_exec()</a>, <a class="el" href="app__playback_8c-source.html#l00378">playback_exec()</a>, <a class="el" href="app__queue_8c-source.html#l03157">pqm_exec()</a>, <a class="el" href="app__privacy_8c-source.html#l00078">privacy_exec()</a>, <a class="el" href="app__queue_8c-source.html#l03404">ql_exec()</a>, <a class="el" href="app__queue_8c-source.html#l03443">queue_exec()</a>, <a class="el" href="app__queue_8c-source.html#l03783">queue_function_qac()</a>, <a class="el" href="app__queue_8c-source.html#l03860">queue_function_queuememberlist()</a>, <a class="el" href="app__queue_8c-source.html#l03825">queue_function_queuewaitingcount()</a>, <a class="el" href="app__queue_8c-source.html#l03731">queue_function_var()</a>, <a class="el" href="app__read_8c-source.html#l00087">read_exec()</a>, <a class="el" href="app__readfile_8c-source.html#l00056">readfile_exec()</a>, <a class="el" href="app__record_8c-source.html#l00078">record_exec()</a>, <a class="el" href="app__dial_8c-source.html#l01747">retrydial_exec()</a>, <a class="el" href="app__rpt_8c-source.html#l06759">rpt_exec()</a>, <a class="el" href="app__queue_8c-source.html#l03263">rqm_exec()</a>, <a class="el" href="app__sayunixtime_8c-source.html#l00069">sayunixtime_exec()</a>, <a class="el" href="app__senddtmf_8c-source.html#l00059">senddtmf_exec()</a>, <a class="el" href="app__image_8c-source.html#l00063">sendimage_exec()</a>, <a class="el" href="app__sendtext_8c-source.html#l00067">sendtext_exec()</a>, <a class="el" href="app__url_8c-source.html#l00070">sendurl_exec()</a>, <a class="el" href="app__setcallerid_8c-source.html#l00067">setcallerid_pres_exec()</a>, <a class="el" href="app__ivrdemo_8c-source.html#l00092">skel_exec()</a>, <a class="el" href="app__sms_8c-source.html#l01748">sms_exec()</a>, <a class="el" href="app__softhangup_8c-source.html#l00056">softhangup_exec()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00457">speech_activate()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00543">speech_background()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00346">speech_create()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00435">speech_deactivate()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00775">speech_destroy()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00379">speech_load()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00500">speech_processing_sound()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00479">speech_start()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00413">speech_unload()</a>, <a class="el" href="app__mixmonitor_8c-source.html#l00384">stop_mixmonitor_exec()</a>, <a class="el" href="app__system_8c-source.html#l00085">system_exec_helper()</a>, <a class="el" href="app__test_8c-source.html#l00131">testclient_exec()</a>, <a class="el" href="app__test_8c-source.html#l00322">testserver_exec()</a>, <a class="el" href="app__transfer_8c-source.html#l00068">transfer_exec()</a>, <a class="el" href="app__exec_8c-source.html#l00126">tryexec_exec()</a>, <a class="el" href="app__queue_8c-source.html#l03210">upqm_exec()</a>, <a class="el" href="app__userevent_8c-source.html#l00058">userevent_exec()</a>, <a class="el" href="app__verbose_8c-source.html#l00055">verbose_exec()</a>, <a class="el" href="app__voicemail_8c-source.html#l07081">vm_box_exists()</a>, <a class="el" href="app__voicemail_8c-source.html#l06944">vm_exec()</a>, <a class="el" href="app__voicemail_8c-source.html#l06398">vm_execmain()</a>, <a class="el" href="app__voicemail_8c-source.html#l07154">vmauthenticate()</a>, <a class="el" href="app__waitforring_8c-source.html#l00056">waitforring_exec()</a>, <a class="el" href="app__zapateller_8c-source.html#l00059">zapateller_exec()</a>, and <a class="el" href="app__zapras_8c-source.html#l00201">zapras_exec()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="c41f250c8ab8ddcb77214a7b149c9e71"></a><!-- doxytag: member="module.h::ast_module_user_hangup_all" ref="c41f250c8ab8ddcb77214a7b149c9e71" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_module_user_hangup_all          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;__ast_module_user_hangup_all(<a class="el" href="structast__module__info.html">ast_module_info</a>-&gt;self)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="module_8h-source.html#l00219">219</a> of file <a class="el" href="module_8h-source.html">module.h</a>.
<p>
Referenced by <a class="el" href="app__adsiprog_8c-source.html#l01573">unload_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="bc801fe463749e03a890acb67c37fbdd"></a><!-- doxytag: member="module.h::ast_module_user_remove" ref="bc801fe463749e03a890acb67c37fbdd" args="(user)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_module_user_remove          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">user&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;__ast_module_user_remove(<a class="el" href="structast__module__info.html">ast_module_info</a>-&gt;self, user)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="module_8h-source.html#l00218">218</a> of file <a class="el" href="module_8h-source.html">module.h</a>.
<p>
Referenced by <a class="el" href="app__macro_8c-source.html#l00144">_macro_exec()</a>, <a class="el" href="func__curl_8c-source.html#l00136">acf_curl_exec()</a>, <a class="el" href="func__cut_8c-source.html#l00249">acf_cut_exec()</a>, <a class="el" href="func__rand_8c-source.html#l00044">acf_rand_exec()</a>, <a class="el" href="func__cut_8c-source.html#l00223">acf_sort_exec()</a>, <a class="el" href="func__version_8c-source.html#l00047">acf_version_exec()</a>, <a class="el" href="func__vmcount_8c-source.html#l00048">acf_vmcount_exec()</a>, <a class="el" href="app__meetme_8c-source.html#l02750">admin_exec()</a>, <a class="el" href="app__adsiprog_8c-source.html#l01549">adsi_exec()</a>, <a class="el" href="res__agi_8c-source.html#l02033">agi_exec_full()</a>, <a class="el" href="app__alarmreceiver_8c-source.html#l00635">alarmreceiver_exec()</a>, <a class="el" href="app__amd_8c-source.html#l00319">amd_exec()</a>, <a class="el" href="app__externalivr_8c-source.html#l00244">app_exec()</a>, <a class="el" href="app__queue_8c-source.html#l03326">aqm_exec()</a>, <a class="el" href="app__channelredirect_8c-source.html#l00052">asyncgoto_exec()</a>, <a class="el" href="app__authenticate_8c-source.html#l00094">auth_exec()</a>, <a class="el" href="res__features_8c-source.html#l02716">bridge_exec()</a>, <a class="el" href="res__features_8c-source.html#l00529">builtin_parkcall()</a>, <a class="el" href="app__chanisavail_8c-source.html#l00069">chanavail_exec()</a>, <a class="el" href="app__meetme_8c-source.html#l02904">channel_admin_exec()</a>, <a class="el" href="app__chanspy_8c-source.html#l00626">chanspy_exec()</a>, <a class="el" href="app__meetme_8c-source.html#l02485">conf_exec()</a>, <a class="el" href="app__controlplayback_8c-source.html#l00075">controlplayback_exec()</a>, <a class="el" href="app__meetme_8c-source.html#l02434">count_exec()</a>, <a class="el" href="app__db_8c-source.html#l00110">del_exec()</a>, <a class="el" href="app__db_8c-source.html#l00068">deltree_exec()</a>, <a class="el" href="app__dial_8c-source.html#l01184">dial_exec_full()</a>, <a class="el" href="app__dictate_8c-source.html#l00079">dictate_exec()</a>, <a class="el" href="app__directory_8c-source.html#l00570">directory_exec()</a>, <a class="el" href="app__disa_8c-source.html#l00113">disa_exec()</a>, <a class="el" href="app__dumpchan_8c-source.html#l00143">dumpchan_exec()</a>, <a class="el" href="pbx__dundi_8c-source.html#l03869">dundi_query_read()</a>, <a class="el" href="pbx__dundi_8c-source.html#l03947">dundi_result_read()</a>, <a class="el" href="pbx__dundi_8c-source.html#l03771">dundifunc_read()</a>, <a class="el" href="app__echo_8c-source.html#l00054">echo_exec()</a>, <a class="el" href="func__enum_8c-source.html#l00155">enum_query_read()</a>, <a class="el" href="func__enum_8c-source.html#l00222">enum_result_read()</a>, <a class="el" href="app__exec_8c-source.html#l00091">exec_exec()</a>, <a class="el" href="app__exec_8c-source.html#l00162">execif_exec()</a>, <a class="el" href="app__chanspy_8c-source.html#l00708">extenspy_exec()</a>, <a class="el" href="app__festival_8c-source.html#l00286">festival_exec()</a>, <a class="el" href="app__flash_8c-source.html#l00072">flash_exec()</a>, <a class="el" href="app__forkcdr_8c-source.html#l00077">forkcdr_exec()</a>, <a class="el" href="func__enum_8c-source.html#l00057">function_enum()</a>, <a class="el" href="func__realtime_8c-source.html#l00048">function_realtime_read()</a>, <a class="el" href="func__realtime_8c-source.html#l00100">function_realtime_write()</a>, <a class="el" href="func__enum_8c-source.html#l00346">function_txtcidname()</a>, <a class="el" href="app__stack_8c-source.html#l00193">gosub_exec()</a>, <a class="el" href="app__stack_8c-source.html#l00277">gosubif_exec()</a>, <a class="el" href="app__ices_8c-source.html#l00104">ices_exec()</a>, <a class="el" href="chan__local_8c-source.html#l00488">local_hangup()</a>, <a class="el" href="app__verbose_8c-source.html#l00101">log_exec()</a>, <a class="el" href="app__macro_8c-source.html#l00499">macroif_exec()</a>, <a class="el" href="app__milliwatt_8c-source.html#l00113">milliwatt_exec()</a>, <a class="el" href="app__minivm_8c-source.html#l02065">minivm_accmess_exec()</a>, <a class="el" href="app__minivm_8c-source.html#l02021">minivm_delete_exec()</a>, <a class="el" href="app__minivm_8c-source.html#l01818">minivm_greet_exec()</a>, <a class="el" href="app__minivm_8c-source.html#l01673">minivm_notify_exec()</a>, <a class="el" href="app__minivm_8c-source.html#l01751">minivm_record_exec()</a>, <a class="el" href="app__mixmonitor_8c-source.html#l00302">mixmonitor_exec()</a>, <a class="el" href="app__morsecode_8c-source.html#l00109">morsecode_exec()</a>, <a class="el" href="app__mp3_8c-source.html#l00125">mp3_exec()</a>, <a class="el" href="chan__nbs_8c-source.html#l00120">nbs_destroy()</a>, <a class="el" href="app__nbscat_8c-source.html#l00116">NBScat_exec()</a>, <a class="el" href="app__cdr_8c-source.html#l00047">nocdr_exec()</a>, <a class="el" href="app__osplookup_8c-source.html#l01311">ospauth_exec()</a>, <a class="el" href="app__osplookup_8c-source.html#l01803">ospfinished_exec()</a>, <a class="el" href="app__osplookup_8c-source.html#l01415">osplookup_exec()</a>, <a class="el" href="app__osplookup_8c-source.html#l01618">ospnext_exec()</a>, <a class="el" href="app__page_8c-source.html#l00085">page_exec()</a>, <a class="el" href="res__features_8c-source.html#l01938">park_call_exec()</a>, <a class="el" href="app__parkandannounce_8c-source.html#l00077">parkandannounce_exec()</a>, <a class="el" href="app__directed__pickup_8c-source.html#l00134">pickup_exec()</a>, <a class="el" href="app__playback_8c-source.html#l00378">playback_exec()</a>, <a class="el" href="app__queue_8c-source.html#l03157">pqm_exec()</a>, <a class="el" href="app__privacy_8c-source.html#l00078">privacy_exec()</a>, <a class="el" href="app__queue_8c-source.html#l03404">ql_exec()</a>, <a class="el" href="app__queue_8c-source.html#l03443">queue_exec()</a>, <a class="el" href="app__queue_8c-source.html#l03783">queue_function_qac()</a>, <a class="el" href="app__queue_8c-source.html#l03860">queue_function_queuememberlist()</a>, <a class="el" href="app__queue_8c-source.html#l03825">queue_function_queuewaitingcount()</a>, <a class="el" href="app__queue_8c-source.html#l03731">queue_function_var()</a>, <a class="el" href="app__read_8c-source.html#l00087">read_exec()</a>, <a class="el" href="app__readfile_8c-source.html#l00056">readfile_exec()</a>, <a class="el" href="app__record_8c-source.html#l00078">record_exec()</a>, <a class="el" href="app__dial_8c-source.html#l01747">retrydial_exec()</a>, <a class="el" href="app__rpt_8c-source.html#l06759">rpt_exec()</a>, <a class="el" href="app__queue_8c-source.html#l03263">rqm_exec()</a>, <a class="el" href="app__sayunixtime_8c-source.html#l00069">sayunixtime_exec()</a>, <a class="el" href="app__senddtmf_8c-source.html#l00059">senddtmf_exec()</a>, <a class="el" href="app__image_8c-source.html#l00063">sendimage_exec()</a>, <a class="el" href="app__sendtext_8c-source.html#l00067">sendtext_exec()</a>, <a class="el" href="app__url_8c-source.html#l00070">sendurl_exec()</a>, <a class="el" href="app__setcallerid_8c-source.html#l00067">setcallerid_pres_exec()</a>, <a class="el" href="app__ivrdemo_8c-source.html#l00092">skel_exec()</a>, <a class="el" href="app__sms_8c-source.html#l01748">sms_exec()</a>, <a class="el" href="app__softhangup_8c-source.html#l00056">softhangup_exec()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00457">speech_activate()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00543">speech_background()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00346">speech_create()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00435">speech_deactivate()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00775">speech_destroy()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00379">speech_load()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00500">speech_processing_sound()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00479">speech_start()</a>, <a class="el" href="app__speech__utils_8c-source.html#l00413">speech_unload()</a>, <a class="el" href="app__mixmonitor_8c-source.html#l00384">stop_mixmonitor_exec()</a>, <a class="el" href="app__system_8c-source.html#l00085">system_exec_helper()</a>, <a class="el" href="app__test_8c-source.html#l00131">testclient_exec()</a>, <a class="el" href="app__test_8c-source.html#l00322">testserver_exec()</a>, <a class="el" href="app__transfer_8c-source.html#l00068">transfer_exec()</a>, <a class="el" href="app__exec_8c-source.html#l00126">tryexec_exec()</a>, <a class="el" href="app__queue_8c-source.html#l03210">upqm_exec()</a>, <a class="el" href="app__userevent_8c-source.html#l00058">userevent_exec()</a>, <a class="el" href="app__verbose_8c-source.html#l00055">verbose_exec()</a>, <a class="el" href="app__voicemail_8c-source.html#l07081">vm_box_exists()</a>, <a class="el" href="app__voicemail_8c-source.html#l06944">vm_exec()</a>, <a class="el" href="app__voicemail_8c-source.html#l06398">vm_execmain()</a>, <a class="el" href="app__voicemail_8c-source.html#l07154">vmauthenticate()</a>, <a class="el" href="app__zapateller_8c-source.html#l00059">zapateller_exec()</a>, and <a class="el" href="app__zapras_8c-source.html#l00201">zapras_exec()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="fdd823f5e0fdac8332029b8e4538b773"></a><!-- doxytag: member="module.h::ASTERISK_GPL_KEY" ref="fdd823f5e0fdac8332029b8e4538b773" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ASTERISK_GPL_KEY&nbsp;&nbsp;&nbsp;&quot;This paragraph is copyright (c) 2006 by Digium, Inc. \In order for your module to load, it must return this \key via a function called \&quot;key\&quot;.  Any code which \includes this paragraph must be licensed under the GNU \General Public License version 2 or later (at your \option).  In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot;          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The text the <a class="el" href="func__channel_8c.html#87ef31d54f81072952c331d5c7339d8e">key()</a> function should return. 
<p>

<p>
Definition at line <a class="el" href="module_8h-source.html#l00038">38</a> of file <a class="el" href="module_8h-source.html">module.h</a>.
<p>
Referenced by <a class="el" href="func__channel_8c-source.html#l00149">key()</a>, <a class="el" href="app__rpt_8c-source.html#l07414">reload()</a>, and <a class="el" href="format__g726_8c-source.html#l00266">unload_module()</a>.    </td>
  </tr>
</table>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="b4566594eeb42c8fc7d6733c7b4b6c0a"></a><!-- doxytag: member="module.h::ast_module_flags" ref="b4566594eeb42c8fc7d6733c7b4b6c0a" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="module_8h.html#b4566594eeb42c8fc7d6733c7b4b6c0a">ast_module_flags</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="b4566594eeb42c8fc7d6733c7b4b6c0a5f5faa4cd21b6f6a0a7b9cfc9d3e6db4"></a><!-- doxytag: member="AST_MODFLAG_DEFAULT" ref="b4566594eeb42c8fc7d6733c7b4b6c0a5f5faa4cd21b6f6a0a7b9cfc9d3e6db4" args="" -->AST_MODFLAG_DEFAULT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="b4566594eeb42c8fc7d6733c7b4b6c0a0b99d39f1f6a9afeedd2f8e6632dd76c"></a><!-- doxytag: member="AST_MODFLAG_GLOBAL_SYMBOLS" ref="b4566594eeb42c8fc7d6733c7b4b6c0a0b99d39f1f6a9afeedd2f8e6632dd76c" args="" -->AST_MODFLAG_GLOBAL_SYMBOLS</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="module_8h-source.html#l00179">179</a> of file <a class="el" href="module_8h-source.html">module.h</a>.<div class="fragment"><pre class="fragment"><a name="l00179"></a>00179                       {
<a name="l00180"></a>00180    <a class="code" href="module_8h.html#b4566594eeb42c8fc7d6733c7b4b6c0a5f5faa4cd21b6f6a0a7b9cfc9d3e6db4">AST_MODFLAG_DEFAULT</a> = 0,
<a name="l00181"></a>00181    <a class="code" href="module_8h.html#b4566594eeb42c8fc7d6733c7b4b6c0a0b99d39f1f6a9afeedd2f8e6632dd76c">AST_MODFLAG_GLOBAL_SYMBOLS</a> = (1 &lt;&lt; 0),
<a name="l00182"></a>00182 };
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="6b66b922ea50fb20d0a8a25ba8317b0a"></a><!-- doxytag: member="module.h::ast_module_load_result" ref="6b66b922ea50fb20d0a8a25ba8317b0a" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0a">ast_module_load_result</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="6b66b922ea50fb20d0a8a25ba8317b0ad07cbe1dd6392827ce7616a624aad97c"></a><!-- doxytag: member="AST_MODULE_LOAD_SUCCESS" ref="6b66b922ea50fb20d0a8a25ba8317b0ad07cbe1dd6392827ce7616a624aad97c" args="" -->AST_MODULE_LOAD_SUCCESS</em>&nbsp;</td><td>
Module loaded and configured </td></tr>
<tr><td valign="top"><em><a class="anchor" name="6b66b922ea50fb20d0a8a25ba8317b0adea6426eed250d0d922d7e289a706663"></a><!-- doxytag: member="AST_MODULE_LOAD_DECLINE" ref="6b66b922ea50fb20d0a8a25ba8317b0adea6426eed250d0d922d7e289a706663" args="" -->AST_MODULE_LOAD_DECLINE</em>&nbsp;</td><td>
Module is not configured </td></tr>
<tr><td valign="top"><em><a class="anchor" name="6b66b922ea50fb20d0a8a25ba8317b0ad2ec6d7ab7a7c169dc765e9937b966aa"></a><!-- doxytag: member="AST_MODULE_LOAD_SKIP" ref="6b66b922ea50fb20d0a8a25ba8317b0ad2ec6d7ab7a7c169dc765e9937b966aa" args="" -->AST_MODULE_LOAD_SKIP</em>&nbsp;</td><td>
Module was skipped for some reason </td></tr>
<tr><td valign="top"><em><a class="anchor" name="6b66b922ea50fb20d0a8a25ba8317b0a40ed2f1246faac667accd325ea83f9e2"></a><!-- doxytag: member="AST_MODULE_LOAD_FAILURE" ref="6b66b922ea50fb20d0a8a25ba8317b0a40ed2f1246faac667accd325ea83f9e2" args="" -->AST_MODULE_LOAD_FAILURE</em>&nbsp;</td><td>
Module could not be loaded properly </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="module_8h-source.html#l00060">60</a> of file <a class="el" href="module_8h-source.html">module.h</a>.<div class="fragment"><pre class="fragment"><a name="l00060"></a>00060                             {
<a name="l00061"></a>00061    <a class="code" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0ad07cbe1dd6392827ce7616a624aad97c">AST_MODULE_LOAD_SUCCESS</a> = 0,  <span class="comment">/*!&lt; Module loaded and configured */</span>
<a name="l00062"></a>00062    <a class="code" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0adea6426eed250d0d922d7e289a706663">AST_MODULE_LOAD_DECLINE</a> = 1,  <span class="comment">/*!&lt; Module is not configured */</span>
<a name="l00063"></a>00063    <a class="code" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0ad2ec6d7ab7a7c169dc765e9937b966aa">AST_MODULE_LOAD_SKIP</a> = 2,  <span class="comment">/*!&lt; Module was skipped for some reason */</span>
<a name="l00064"></a>00064    <a class="code" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0a40ed2f1246faac667accd325ea83f9e2">AST_MODULE_LOAD_FAILURE</a> = -1, <span class="comment">/*!&lt; Module could not be loaded properly */</span>
<a name="l00065"></a>00065 };
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="7f8992121648ba013497a678ccaa6269"></a><!-- doxytag: member="module.h::ast_module_unload_mode" ref="7f8992121648ba013497a678ccaa6269" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="module_8h.html#7f8992121648ba013497a678ccaa6269">ast_module_unload_mode</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="7f8992121648ba013497a678ccaa62699562c97b424aad17b52e51a3a948315f"></a><!-- doxytag: member="AST_FORCE_SOFT" ref="7f8992121648ba013497a678ccaa62699562c97b424aad17b52e51a3a948315f" args="" -->AST_FORCE_SOFT</em>&nbsp;</td><td>
Softly unload a module, only if not in use </td></tr>
<tr><td valign="top"><em><a class="anchor" name="7f8992121648ba013497a678ccaa6269bbebb65eda949b35cc897af469927afb"></a><!-- doxytag: member="AST_FORCE_FIRM" ref="7f8992121648ba013497a678ccaa6269bbebb65eda949b35cc897af469927afb" args="" -->AST_FORCE_FIRM</em>&nbsp;</td><td>
Firmly unload a module, even if in use </td></tr>
<tr><td valign="top"><em><a class="anchor" name="7f8992121648ba013497a678ccaa6269aaaa4d6677842cb350fa742106d7eb46"></a><!-- doxytag: member="AST_FORCE_HARD" ref="7f8992121648ba013497a678ccaa6269aaaa4d6677842cb350fa742106d7eb46" args="" -->AST_FORCE_HARD</em>&nbsp;</td><td>
as FIRM, plus <a class="el" href="dlfcn_8c.html#45a2f0c60f9c16390e6878ecc49d436d">dlclose()</a> on the module. Not recommended as it may cause crashes </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="module_8h-source.html#l00053">53</a> of file <a class="el" href="module_8h-source.html">module.h</a>.<div class="fragment"><pre class="fragment"><a name="l00053"></a>00053                             {
<a name="l00054"></a>00054    <a class="code" href="module_8h.html#7f8992121648ba013497a678ccaa62699562c97b424aad17b52e51a3a948315f">AST_FORCE_SOFT</a> = 0, <span class="comment">/*!&lt; Softly unload a module, only if not in use */</span>
<a name="l00055"></a>00055    <a class="code" href="module_8h.html#7f8992121648ba013497a678ccaa6269bbebb65eda949b35cc897af469927afb">AST_FORCE_FIRM</a> = 1, <span class="comment">/*!&lt; Firmly unload a module, even if in use */</span>
<a name="l00056"></a>00056    <a class="code" href="module_8h.html#7f8992121648ba013497a678ccaa6269aaaa4d6677842cb350fa742106d7eb46">AST_FORCE_HARD</a> = 2, <span class="comment">/*!&lt; as FIRM, plus dlclose() on the module. Not recommended</span>
<a name="l00057"></a>00057 <span class="comment">            as it may cause crashes */</span>
<a name="l00058"></a>00058 };
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="b049dea5b2b6b6bc66c843da4eef6cdf"></a><!-- doxytag: member="module.h::__ast_module_user_add" ref="b049dea5b2b6b6bc66c843da4eef6cdf" args="(struct ast_module *, struct ast_channel *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__module__user.html">ast_module_user</a>* __ast_module_user_add           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__module.html">ast_module</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00177">177</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>, <a class="el" href="linkedlists_8h-source.html#l00650">AST_LIST_INSERT_HEAD</a>, <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, <a class="el" href="loader_8c-source.html#l00861">ast_update_use_count()</a>, <a class="el" href="loader_8c-source.html#l00086">ast_module::usecount</a>, and <a class="el" href="loader_8c-source.html#l00087">ast_module::users</a>.<div class="fragment"><pre class="fragment"><a name="l00179"></a>00179 {
<a name="l00180"></a>00180    <span class="keyword">struct </span><a class="code" href="structast__module__user.html">ast_module_user</a> *u = <a class="code" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*u));
<a name="l00181"></a>00181 
<a name="l00182"></a>00182    <span class="keywordflow">if</span> (!u)
<a name="l00183"></a>00183       <span class="keywordflow">return</span> NULL;
<a name="l00184"></a>00184 
<a name="l00185"></a>00185    u-&gt;<a class="code" href="structast__module__user.html#26c322652770620e64ac90682eb6504c">chan</a> = <a class="code" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>;
<a name="l00186"></a>00186 
<a name="l00187"></a>00187    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;mod-&gt;users);
<a name="l00188"></a>00188    <a class="code" href="linkedlists_8h.html#5df56040a8838bdc841ef8eb179b7609">AST_LIST_INSERT_HEAD</a>(&amp;mod-&gt;users, u, entry);
<a name="l00189"></a>00189    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;mod-&gt;users);
<a name="l00190"></a>00190 
<a name="l00191"></a>00191    ast_atomic_fetchadd_int(&amp;mod-&gt;usecount, +1);
<a name="l00192"></a>00192 
<a name="l00193"></a>00193    <a class="code" href="loader_8c.html#963a5bf4226e836e07eed720bd60baf1">ast_update_use_count</a>();
<a name="l00194"></a>00194 
<a name="l00195"></a>00195    <span class="keywordflow">return</span> u;
<a name="l00196"></a>00196 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="9f155347e23d9a500d07e2b00cf8d361"></a><!-- doxytag: member="module.h::__ast_module_user_hangup_all" ref="9f155347e23d9a500d07e2b00cf8d361" args="(struct ast_module *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void __ast_module_user_hangup_all           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__module.html">ast_module</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00209">209</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00710">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, <a class="el" href="channel_8c-source.html#l01456">ast_softhangup()</a>, <a class="el" href="channel_8h.html#a4d79cb252987ad7f099770543e601a1a605d712c745c736f14ef4e8bfd59245">AST_SOFTHANGUP_APPUNLOAD</a>, <a class="el" href="loader_8c-source.html#l00861">ast_update_use_count()</a>, <a class="el" href="loader_8c-source.html#l00069">ast_module_user::chan</a>, <a class="el" href="astmm_8h-source.html#l00069">free</a>, <a class="el" href="loader_8c-source.html#l00086">ast_module::usecount</a>, and <a class="el" href="loader_8c-source.html#l00087">ast_module::users</a>.
<p>
Referenced by <a class="el" href="loader_8c-source.html#l00431">ast_unload_resource()</a>.<div class="fragment"><pre class="fragment"><a name="l00210"></a>00210 {
<a name="l00211"></a>00211    <span class="keyword">struct </span><a class="code" href="structast__module__user.html">ast_module_user</a> *u;
<a name="l00212"></a>00212 
<a name="l00213"></a>00213    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;mod-&gt;users);
<a name="l00214"></a>00214    <span class="keywordflow">while</span> ((u = <a class="code" href="linkedlists_8h.html#beec347da29fe6b0d7fdb3e80b851f90">AST_LIST_REMOVE_HEAD</a>(&amp;mod-&gt;users, entry))) {
<a name="l00215"></a>00215       <a class="code" href="channel_8c.html#a1a142039194e9f6dfb632b28a0c5eb5">ast_softhangup</a>(u-&gt;<a class="code" href="structast__module__user.html#26c322652770620e64ac90682eb6504c">chan</a>, <a class="code" href="channel_8h.html#a4d79cb252987ad7f099770543e601a1a605d712c745c736f14ef4e8bfd59245">AST_SOFTHANGUP_APPUNLOAD</a>);
<a name="l00216"></a>00216       ast_atomic_fetchadd_int(&amp;mod-&gt;usecount, -1);
<a name="l00217"></a>00217       <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(u);
<a name="l00218"></a>00218    }
<a name="l00219"></a>00219    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;mod-&gt;users);
<a name="l00220"></a>00220 
<a name="l00221"></a>00221         <a class="code" href="loader_8c.html#963a5bf4226e836e07eed720bd60baf1">ast_update_use_count</a>();
<a name="l00222"></a>00222 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="34cbedd80356f74214d1c600edf66c54"></a><!-- doxytag: member="module.h::__ast_module_user_remove" ref="34cbedd80356f74214d1c600edf66c54" args="(struct ast_module *, struct ast_module_user *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void __ast_module_user_remove           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__module.html">ast_module</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__module__user.html">ast_module_user</a> *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00198">198</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00731">AST_LIST_REMOVE</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, <a class="el" href="loader_8c-source.html#l00861">ast_update_use_count()</a>, <a class="el" href="astmm_8h-source.html#l00069">free</a>, <a class="el" href="loader_8c-source.html#l00086">ast_module::usecount</a>, and <a class="el" href="loader_8c-source.html#l00087">ast_module::users</a>.<div class="fragment"><pre class="fragment"><a name="l00199"></a>00199 {
<a name="l00200"></a>00200    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;mod-&gt;users);
<a name="l00201"></a>00201    <a class="code" href="linkedlists_8h.html#d4a4c53d3b264b4e1c5e3fdd84cd8b5a">AST_LIST_REMOVE</a>(&amp;mod-&gt;users, u, entry);
<a name="l00202"></a>00202    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;mod-&gt;users);
<a name="l00203"></a>00203    ast_atomic_fetchadd_int(&amp;mod-&gt;usecount, -1);
<a name="l00204"></a>00204    <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(u);
<a name="l00205"></a>00205 
<a name="l00206"></a>00206    <a class="code" href="loader_8c.html#963a5bf4226e836e07eed720bd60baf1">ast_update_use_count</a>();
<a name="l00207"></a>00207 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="f2d6624e67e8f0bfe70b35ed8f609515"></a><!-- doxytag: member="module.h::__attribute__" ref="f2d6624e67e8f0bfe70b35ed8f609515" args="((unused)) struct ast_module_info *ast_module_info" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static const <a class="el" href="struct____attribute____.html">__attribute__</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(unused)&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="0b433ec2b68daca76aba804442b86ea0"></a><!-- doxytag: member="module.h::ast_load_resource" ref="0b433ec2b68daca76aba804442b86ea0" args="(const char *resource_name)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0a">ast_module_load_result</a> ast_load_resource           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>resource_name</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Load a module. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>resource_name</em>&nbsp;</td><td>The name of the module to load.</td></tr>
  </table>
</dl>
This function is run by the PBX to load the modules. It performs all loading and initilization tasks. Basically, to load a module, just give it the name of the module and it will do the rest.<p>
<dl compact><dt><b>Returns:</b></dt><dd>See possible enum values for ast_module_load_result. </dd></dl>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00670">670</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, and <a class="el" href="loader_8c-source.html#l00593">load_resource()</a>.
<p>
Referenced by <a class="el" href="pbx__gtkconsole_8c-source.html#l00243">file_ok_sel()</a>, <a class="el" href="cli_8c-source.html#l00111">handle_load()</a>, and <a class="el" href="pbx__gtkconsole_8c-source.html#l00203">reload_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00671"></a>00671 {
<a name="l00672"></a>00672        <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;module_list);
<a name="l00673"></a>00673        <a class="code" href="loader_8c.html#026f2e4d7ffe711115d50078bca82fcb">load_resource</a>(resource_name, 0);
<a name="l00674"></a>00674        <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;module_list);
<a name="l00675"></a>00675 
<a name="l00676"></a>00676        <span class="keywordflow">return</span> 0;
<a name="l00677"></a>00677 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="76ca1d2d53c11b5a688748a27553308d"></a><!-- doxytag: member="module.h::ast_loader_register" ref="76ca1d2d53c11b5a688748a27553308d" args="(int(*updater)(void))" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_loader_register           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int(*)(void)&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>updater</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add a procedure to be run when modules have been updated. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>updater</em>&nbsp;</td><td>The function to run when modules have been updated.</td></tr>
  </table>
</dl>
This function adds the given function to a linked list of functions to be run when the modules are updated.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Zero on success and -1 on failure. </dd></dl>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00907">907</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="linkedlists_8h-source.html#l00650">AST_LIST_INSERT_HEAD</a>, <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, and <a class="el" href="utils_8h-source.html#l00359">ast_malloc</a>.
<p>
Referenced by <a class="el" href="pbx__gtkconsole_8c-source.html#l00357">show_console()</a>.<div class="fragment"><pre class="fragment"><a name="l00908"></a>00908 {
<a name="l00909"></a>00909    <span class="keyword">struct </span><a class="code" href="structloadupdate.html">loadupdate</a> *tmp;
<a name="l00910"></a>00910 
<a name="l00911"></a>00911    <span class="keywordflow">if</span> (!(tmp = <a class="code" href="utils_8h.html#efc2f2f953e736b509e4a2cee96151db">ast_malloc</a>(<span class="keyword">sizeof</span>(*tmp))))
<a name="l00912"></a>00912       <span class="keywordflow">return</span> -1;
<a name="l00913"></a>00913 
<a name="l00914"></a>00914    tmp-&gt;updater = v;
<a name="l00915"></a>00915    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;module_list);
<a name="l00916"></a>00916    <a class="code" href="linkedlists_8h.html#5df56040a8838bdc841ef8eb179b7609">AST_LIST_INSERT_HEAD</a>(&amp;updaters, tmp, entry);
<a name="l00917"></a>00917    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;module_list);
<a name="l00918"></a>00918 
<a name="l00919"></a>00919    <span class="keywordflow">return</span> 0;
<a name="l00920"></a>00920 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b52d1337cd8ba7ac557468d2a92df5c2"></a><!-- doxytag: member="module.h::ast_loader_unregister" ref="b52d1337cd8ba7ac557468d2a92df5c2" args="(int(*updater)(void))" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_loader_unregister           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int(*)(void)&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>updater</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Remove a procedure to be run when modules are updated. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>updater</em>&nbsp;</td><td>The updater function to unregister.</td></tr>
  </table>
</dl>
This removes the given function from the updater list.<p>
<dl compact><dt><b>Returns:</b></dt><dd>Zero on success, -1 on failure. </dd></dl>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00922">922</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00516">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="linkedlists_8h-source.html#l00491">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="linkedlists_8h-source.html#l00554">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, and <a class="el" href="structloadupdate.html#909b0eb66f2f08ae7a8a41067705abd2">loadupdate::updater</a>.
<p>
Referenced by <a class="el" href="pbx__gtkconsole_8c-source.html#l00308">exit_now()</a>.<div class="fragment"><pre class="fragment"><a name="l00923"></a>00923 {
<a name="l00924"></a>00924    <span class="keyword">struct </span><a class="code" href="structloadupdate.html">loadupdate</a> *cur;
<a name="l00925"></a>00925 
<a name="l00926"></a>00926    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;module_list);
<a name="l00927"></a>00927    <a class="code" href="linkedlists_8h.html#915e438a9528c8d6316c617b5bd84487">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;updaters, cur, entry) {
<a name="l00928"></a>00928       <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="structloadupdate.html#909b0eb66f2f08ae7a8a41067705abd2">updater</a> == v)  {
<a name="l00929"></a>00929          <a class="code" href="linkedlists_8h.html#37f99379dafa45c921f95bf7235eb91d">AST_LIST_REMOVE_CURRENT</a>(&amp;updaters, entry);
<a name="l00930"></a>00930          <span class="keywordflow">break</span>;
<a name="l00931"></a>00931       }
<a name="l00932"></a>00932    }
<a name="l00933"></a>00933    <a class="code" href="linkedlists_8h.html#a93fdadc00a2a090968004b7d9c79630">AST_LIST_TRAVERSE_SAFE_END</a>;
<a name="l00934"></a>00934    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;module_list);
<a name="l00935"></a>00935 
<a name="l00936"></a>00936    <span class="keywordflow">return</span> cur ? 0 : -1;
<a name="l00937"></a>00937 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c6d04c8ea97d8c855a8fa30759fcb6f1"></a><!-- doxytag: member="module.h::ast_module_check" ref="c6d04c8ea97d8c855a8fa30759fcb6f1" args="(const char *name)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_module_check           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>name</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Check if module with the name given is loaded. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Module name, like "chan_sip.so" </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if false, 1 if true </dd></dl>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00894">894</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, and <a class="el" href="loader_8c-source.html#l00304">find_resource()</a>.
<p>
Referenced by <a class="el" href="func__module_8c-source.html#l00042">ifmodule_read()</a>.<div class="fragment"><pre class="fragment"><a name="l00895"></a>00895 {
<a name="l00896"></a>00896    <span class="keyword">struct </span><a class="code" href="structast__module.html">ast_module</a> *cur;
<a name="l00897"></a>00897 
<a name="l00898"></a>00898    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>))
<a name="l00899"></a>00899       <span class="keywordflow">return</span> 0;       <span class="comment">/* FALSE */</span>
<a name="l00900"></a>00900 
<a name="l00901"></a>00901    cur = <a class="code" href="loader_8c.html#b6b27fa010ee029803109c4a9cb036eb">find_resource</a>(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, 1);
<a name="l00902"></a>00902 
<a name="l00903"></a>00903    <span class="keywordflow">return</span> (cur != NULL);
<a name="l00904"></a>00904 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="35dec328d257abc218594c71f6ee2855"></a><!-- doxytag: member="module.h::ast_module_helper" ref="35dec328d257abc218594c71f6ee2855" args="(const char *line, const char *word, int pos, int state, int rpos, int needsreload)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* ast_module_helper           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>line</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>word</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>pos</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>rpos</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>needsreload</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Match modules names for the Asterisk cli. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>line</em>&nbsp;</td><td>Unused by this function, but this should be the line we are matching. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>word</em>&nbsp;</td><td>The partial name to match. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>The position the word we are completing is in. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>The possible match to return. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rpos</em>&nbsp;</td><td>The position we should be matching. This should be the same as pos. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>needsreload</em>&nbsp;</td><td>This should be 1 if we need to reload this module and 0 otherwise. This function will only return modules that are reloadble if this is 1.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A possible completion of the partial match, or NULL if no matches were found. </dd></dl>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00490">490</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00453">AST_LIST_TRAVERSE</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, <a class="el" href="loader_8c-source.html#l00084">ast_module::info</a>, <a class="el" href="callerid_8c-source.html#l01043">name</a>, <a class="el" href="structast__module__info.html#27ee28a0c75b9149c59584103c439553">ast_module_info::reload</a>, and <a class="el" href="astmm_8h-source.html#l00075">strdup</a>.
<p>
Referenced by <a class="el" href="cli_8c-source.html#l00413">handle_modlist()</a>, <a class="el" href="cli_8c-source.html#l00144">handle_reload()</a>, and <a class="el" href="cli_8c-source.html#l00259">handle_unload()</a>.<div class="fragment"><pre class="fragment"><a name="l00491"></a>00491 {
<a name="l00492"></a>00492    <span class="keyword">struct </span><a class="code" href="structast__module.html">ast_module</a> *cur;
<a name="l00493"></a>00493    <span class="keywordtype">int</span> i, which=0, l = strlen(word);
<a name="l00494"></a>00494    <span class="keywordtype">char</span> *ret = NULL;
<a name="l00495"></a>00495 
<a name="l00496"></a>00496    <span class="keywordflow">if</span> (pos != rpos)
<a name="l00497"></a>00497       <span class="keywordflow">return</span> NULL;
<a name="l00498"></a>00498 
<a name="l00499"></a>00499    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;module_list);
<a name="l00500"></a>00500    <a class="code" href="linkedlists_8h.html#e5bbda4b7ef1cd9462bb86ba25c5d7eb">AST_LIST_TRAVERSE</a>(&amp;module_list, cur, entry) {
<a name="l00501"></a>00501       <span class="keywordflow">if</span> (!strncasecmp(word, cur-&gt;resource, l) &amp;&amp;
<a name="l00502"></a>00502           (cur-&gt;<a class="code" href="structast__module.html#caf9b6b99962bf5c2264824231d7a40c">info</a>-&gt;<a class="code" href="structast__module__info.html#27ee28a0c75b9149c59584103c439553">reload</a> || !needsreload) &amp;&amp;
<a name="l00503"></a>00503           ++which &gt; <a class="code" href="structstate.html">state</a>) {
<a name="l00504"></a>00504          ret = <a class="code" href="astmm_8h.html#17881997a89ddffd239268f0476567d0">strdup</a>(cur-&gt;resource);
<a name="l00505"></a>00505          <span class="keywordflow">break</span>;
<a name="l00506"></a>00506       }
<a name="l00507"></a>00507    }
<a name="l00508"></a>00508    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;module_list);
<a name="l00509"></a>00509 
<a name="l00510"></a>00510    <span class="keywordflow">if</span> (!ret) {
<a name="l00511"></a>00511       <span class="keywordflow">for</span> (i=0; !ret &amp;&amp; <a class="code" href="structreload__classes.html">reload_classes</a>[i].<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>; i++) {
<a name="l00512"></a>00512          <span class="keywordflow">if</span> (!strncasecmp(word, <a class="code" href="structreload__classes.html">reload_classes</a>[i].<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, l) &amp;&amp; ++which &gt; <a class="code" href="structstate.html">state</a>)
<a name="l00513"></a>00513             ret = <a class="code" href="astmm_8h.html#17881997a89ddffd239268f0476567d0">strdup</a>(<a class="code" href="structreload__classes.html">reload_classes</a>[i].name);
<a name="l00514"></a>00514       }
<a name="l00515"></a>00515    }
<a name="l00516"></a>00516 
<a name="l00517"></a>00517    <span class="keywordflow">return</span> ret;
<a name="l00518"></a>00518 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="708752d34cfe2ad9dd4761a0e443331e"></a><!-- doxytag: member="module.h::ast_module_ref" ref="708752d34cfe2ad9dd4761a0e443331e" args="(struct ast_module *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__module.html">ast_module</a>* ast_module_ref           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__module.html">ast_module</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00939">939</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="loader_8c-source.html#l00861">ast_update_use_count()</a>, and <a class="el" href="loader_8c-source.html#l00086">ast_module::usecount</a>.
<p>
Referenced by <a class="el" href="chan__h323_8c-source.html#l01010">__oh323_new()</a>, <a class="el" href="chan__alsa_8c-source.html#l00790">alsa_new()</a>, <a class="el" href="chan__iax2_8c-source.html#l03426">ast_iax2_new()</a>, <a class="el" href="res__convert_8c-source.html#l00057">cli_audio_convert()</a>, <a class="el" href="res__clioriginate_8c-source.html#l00147">complete_orig()</a>, <a class="el" href="chan__features_8c-source.html#l00448">features_new()</a>, <a class="el" href="file_8c-source.html#l00305">fn_wrapper()</a>, <a class="el" href="chan__gtalk_8c-source.html#l00902">gtalk_new()</a>, <a class="el" href="res__clioriginate_8c-source.html#l00125">handle_orig()</a>, <a class="el" href="chan__mgcp_8c-source.html#l01457">mgcp_new()</a>, <a class="el" href="chan__oss_8c-source.html#l01020">oss_new()</a>, <a class="el" href="chan__phone_8c-source.html#l00939">phone_check_exception()</a>, <a class="el" href="chan__phone_8c-source.html#l00864">phone_new()</a>, <a class="el" href="chan__sip_8c-source.html#l04179">sip_new()</a>, <a class="el" href="chan__skinny_8c-source.html#l02823">skinny_new()</a>, <a class="el" href="res__smdi_8c-source.html#l00520">smdi_load()</a>, and <a class="el" href="chan__zap_8c-source.html#l05516">zt_new()</a>.<div class="fragment"><pre class="fragment"><a name="l00940"></a>00940 {
<a name="l00941"></a>00941    ast_atomic_fetchadd_int(&amp;mod-&gt;usecount, +1);
<a name="l00942"></a>00942    <a class="code" href="loader_8c.html#963a5bf4226e836e07eed720bd60baf1">ast_update_use_count</a>();
<a name="l00943"></a>00943 
<a name="l00944"></a>00944    <span class="keywordflow">return</span> mod;
<a name="l00945"></a>00945 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="1a74ec5004e01a77b124abc67cb9988e"></a><!-- doxytag: member="module.h::ast_module_register" ref="1a74ec5004e01a77b124abc67cb9988e" args="(const struct ast_module_info *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_module_register           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const struct <a class="el" href="structast__module__info.html">ast_module_info</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00115">115</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>, <a class="el" href="linkedlists_8h-source.html#l00565">AST_LIST_HEAD_INIT</a>, <a class="el" href="linkedlists_8h-source.html#l00670">AST_LIST_INSERT_TAIL</a>, <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, <a class="el" href="loader_8c-source.html#l00079">embedding</a>, <a class="el" href="loader_8c-source.html#l00084">ast_module::info</a>, <a class="el" href="module_8h-source.html#l00197">ast_module_info::name</a>, <a class="el" href="loader_8c-source.html#l00111">resource_being_loaded</a>, <a class="el" href="module_8h-source.html#l00191">ast_module_info::self</a>, and <a class="el" href="loader_8c-source.html#l00087">ast_module::users</a>.<div class="fragment"><pre class="fragment"><a name="l00116"></a>00116 {
<a name="l00117"></a>00117    <span class="keyword">struct </span><a class="code" href="structast__module.html">ast_module</a> *mod;
<a name="l00118"></a>00118 
<a name="l00119"></a>00119    <span class="keywordflow">if</span> (<a class="code" href="loader_8c.html#91dcd46b7c7d960c321ddb6c8b0ce5d1">embedding</a>) {
<a name="l00120"></a>00120       <span class="keywordflow">if</span> (!(mod = <a class="code" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*mod) + strlen(<a class="code" href="structast__module.html#caf9b6b99962bf5c2264824231d7a40c">info</a>-&gt;<a class="code" href="structast__module__info.html#b068931cc450442b63f5b3d276ea4297">name</a>) + 1)))
<a name="l00121"></a>00121          <span class="keywordflow">return</span>;
<a name="l00122"></a>00122       strcpy(mod-&gt;resource, <a class="code" href="structast__module.html#caf9b6b99962bf5c2264824231d7a40c">info</a>-&gt;<a class="code" href="structast__module__info.html#b068931cc450442b63f5b3d276ea4297">name</a>);
<a name="l00123"></a>00123    } <span class="keywordflow">else</span> {
<a name="l00124"></a>00124       mod = <a class="code" href="loader_8c.html#b9db9c439c7f7d12921a5bca784ff755">resource_being_loaded</a>;
<a name="l00125"></a>00125    }
<a name="l00126"></a>00126 
<a name="l00127"></a>00127    mod-&gt;<a class="code" href="structast__module.html#caf9b6b99962bf5c2264824231d7a40c">info</a> = <a class="code" href="structast__module.html#caf9b6b99962bf5c2264824231d7a40c">info</a>;
<a name="l00128"></a>00128    <a class="code" href="linkedlists_8h.html#6658ec426af4d1ba98830fd5ac45f93e">AST_LIST_HEAD_INIT</a>(&amp;mod-&gt;users);
<a name="l00129"></a>00129 
<a name="l00130"></a>00130    <span class="comment">/* during startup, before the loader has been initialized,</span>
<a name="l00131"></a>00131 <span class="comment">      there are no threads, so there is no need to take the lock</span>
<a name="l00132"></a>00132 <span class="comment">      on this list to manipulate it. it is also possible that it</span>
<a name="l00133"></a>00133 <span class="comment">      might be unsafe to use the list lock at that point... so</span>
<a name="l00134"></a>00134 <span class="comment">      let's avoid it altogether</span>
<a name="l00135"></a>00135 <span class="comment">   */</span>
<a name="l00136"></a>00136    <span class="keywordflow">if</span> (!<a class="code" href="loader_8c.html#91dcd46b7c7d960c321ddb6c8b0ce5d1">embedding</a>)
<a name="l00137"></a>00137       <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;module_list);
<a name="l00138"></a>00138 
<a name="l00139"></a>00139    <span class="comment">/* it is paramount that the new entry be placed at the tail of</span>
<a name="l00140"></a>00140 <span class="comment">      the list, otherwise the code that uses dlopen() to load</span>
<a name="l00141"></a>00141 <span class="comment">      dynamic modules won't be able to find out if the module it</span>
<a name="l00142"></a>00142 <span class="comment">      just opened was registered or failed to load</span>
<a name="l00143"></a>00143 <span class="comment">   */</span>
<a name="l00144"></a>00144    <a class="code" href="linkedlists_8h.html#8de6ce8a3b9d59e7e7fddee6b62b32a7">AST_LIST_INSERT_TAIL</a>(&amp;module_list, mod, entry);
<a name="l00145"></a>00145 
<a name="l00146"></a>00146    <span class="keywordflow">if</span> (!<a class="code" href="loader_8c.html#91dcd46b7c7d960c321ddb6c8b0ce5d1">embedding</a>)
<a name="l00147"></a>00147       <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;module_list);
<a name="l00148"></a>00148 
<a name="l00149"></a>00149    <span class="comment">/* give the module a copy of its own handle, for later use in registrations and the like */</span>
<a name="l00150"></a>00150    *((<span class="keyword">struct </span><a class="code" href="structast__module.html">ast_module</a> **) &amp;(<a class="code" href="structast__module.html#caf9b6b99962bf5c2264824231d7a40c">info</a>-&gt;<a class="code" href="structast__module__info.html#590f53e8699817c6fa498cc11a4cbe63">self</a>)) = mod;
<a name="l00151"></a>00151 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="9d9de894f786fcad5a6badbeeb474ea8"></a><!-- doxytag: member="module.h::ast_module_unref" ref="9d9de894f786fcad5a6badbeeb474ea8" args="(struct ast_module *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_module_unref           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__module.html">ast_module</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00947">947</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="loader_8c-source.html#l00861">ast_update_use_count()</a>, and <a class="el" href="loader_8c-source.html#l00086">ast_module::usecount</a>.
<p>
Referenced by <a class="el" href="chan__alsa_8c-source.html#l00575">alsa_hangup()</a>, <a class="el" href="file_8c-source.html#l00701">ast_closestream()</a>, <a class="el" href="res__smdi_8c-source.html#l00489">ast_smdi_interface_destroy()</a>, <a class="el" href="res__convert_8c-source.html#l00057">cli_audio_convert()</a>, <a class="el" href="res__clioriginate_8c-source.html#l00147">complete_orig()</a>, <a class="el" href="translate_8c-source.html#l00139">destroy()</a>, <a class="el" href="chan__gtalk_8c-source.html#l01499">gtalk_hangup()</a>, <a class="el" href="res__clioriginate_8c-source.html#l00125">handle_orig()</a>, <a class="el" href="chan__iax2_8c-source.html#l01799">iax2_predestroy()</a>, <a class="el" href="chan__mgcp_8c-source.html#l00942">mgcp_hangup()</a>, <a class="el" href="chan__h323_8c-source.html#l00696">oh323_hangup()</a>, <a class="el" href="chan__oss_8c-source.html#l00859">oss_hangup()</a>, <a class="el" href="chan__phone_8c-source.html#l00939">phone_check_exception()</a>, <a class="el" href="chan__phone_8c-source.html#l00345">phone_hangup()</a>, <a class="el" href="chan__sip_8c-source.html#l03676">sip_hangup()</a>, and <a class="el" href="chan__zap_8c-source.html#l02612">zt_hangup()</a>.<div class="fragment"><pre class="fragment"><a name="l00948"></a>00948 {
<a name="l00949"></a>00949    ast_atomic_fetchadd_int(&amp;mod-&gt;usecount, -1);
<a name="l00950"></a>00950    <a class="code" href="loader_8c.html#963a5bf4226e836e07eed720bd60baf1">ast_update_use_count</a>();
<a name="l00951"></a>00951 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="6ac7d62fef9c370acdbe76898b2c162c"></a><!-- doxytag: member="module.h::ast_module_unregister" ref="6ac7d62fef9c370acdbe76898b2c162c" args="(const struct ast_module_info *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_module_unregister           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const struct <a class="el" href="structast__module__info.html">ast_module_info</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00153">153</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="linkedlists_8h-source.html#l00592">AST_LIST_HEAD_DESTROY</a>, <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00516">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="linkedlists_8h-source.html#l00491">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="linkedlists_8h-source.html#l00554">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, <a class="el" href="astmm_8h-source.html#l00069">free</a>, <a class="el" href="loader_8c-source.html#l00084">ast_module::info</a>, and <a class="el" href="loader_8c-source.html#l00087">ast_module::users</a>.<div class="fragment"><pre class="fragment"><a name="l00154"></a>00154 {
<a name="l00155"></a>00155    <span class="keyword">struct </span><a class="code" href="structast__module.html">ast_module</a> *mod = NULL;
<a name="l00156"></a>00156 
<a name="l00157"></a>00157    <span class="comment">/* it is assumed that the users list in the module structure</span>
<a name="l00158"></a>00158 <span class="comment">      will already be empty, or we cannot have gotten to this</span>
<a name="l00159"></a>00159 <span class="comment">      point</span>
<a name="l00160"></a>00160 <span class="comment">   */</span>
<a name="l00161"></a>00161    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;module_list);
<a name="l00162"></a>00162    <a class="code" href="linkedlists_8h.html#915e438a9528c8d6316c617b5bd84487">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;module_list, mod, entry) {
<a name="l00163"></a>00163       <span class="keywordflow">if</span> (mod-&gt;<a class="code" href="structast__module.html#caf9b6b99962bf5c2264824231d7a40c">info</a> == <a class="code" href="structast__module.html#caf9b6b99962bf5c2264824231d7a40c">info</a>) {
<a name="l00164"></a>00164          <a class="code" href="linkedlists_8h.html#37f99379dafa45c921f95bf7235eb91d">AST_LIST_REMOVE_CURRENT</a>(&amp;module_list, entry);
<a name="l00165"></a>00165          <span class="keywordflow">break</span>;
<a name="l00166"></a>00166       }
<a name="l00167"></a>00167    }
<a name="l00168"></a>00168    <a class="code" href="linkedlists_8h.html#a93fdadc00a2a090968004b7d9c79630">AST_LIST_TRAVERSE_SAFE_END</a>;
<a name="l00169"></a>00169    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;module_list);
<a name="l00170"></a>00170 
<a name="l00171"></a>00171    <span class="keywordflow">if</span> (mod) {
<a name="l00172"></a>00172       <a class="code" href="linkedlists_8h.html#969e61ff51efd385da31bb638deb44e7">AST_LIST_HEAD_DESTROY</a>(&amp;mod-&gt;<a class="code" href="structast__module.html#9bc65c2abec141778ffaa729489f3e87">users</a>);
<a name="l00173"></a>00173       <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(mod);
<a name="l00174"></a>00174    }
<a name="l00175"></a>00175 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c3b6d984f6fa8e7e29d5c48301f4bea2"></a><!-- doxytag: member="module.h::ast_unload_resource" ref="c3b6d984f6fa8e7e29d5c48301f4bea2" args="(const char *resource_name, enum ast_module_unload_mode)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_unload_resource           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>resource_name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>enum&nbsp;</td>
          <td class="mdname" nowrap> <em>ast_module_unload_mode</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Unload a module. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>resource_name</em>&nbsp;</td><td>The name of the module to unload. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ast_module_unload_mode</em>&nbsp;</td><td>The force flag. This should be set using one of the AST_FORCE flags.</td></tr>
  </table>
</dl>
This function unloads a module. It will only unload modules that are not in use (usecount not zero), unless <a class="el" href="module_8h.html#7f8992121648ba013497a678ccaa6269bbebb65eda949b35cc897af469927afb">AST_FORCE_FIRM</a> or <a class="el" href="module_8h.html#7f8992121648ba013497a678ccaa6269aaaa4d6677842cb350fa742106d7eb46">AST_FORCE_HARD</a> is specified. Setting <a class="el" href="module_8h.html#7f8992121648ba013497a678ccaa6269bbebb65eda949b35cc897af469927afb">AST_FORCE_FIRM</a> or <a class="el" href="module_8h.html#7f8992121648ba013497a678ccaa6269aaaa4d6677842cb350fa742106d7eb46">AST_FORCE_HARD</a> will unload the module regardless of consequences (NOT RECOMMENDED).<p>
<dl compact><dt><b>Returns:</b></dt><dd>Zero on success, -1 on error. </dd></dl>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00431">431</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="loader_8c-source.html#l00209">__ast_module_user_hangup_all()</a>, <a class="el" href="module_8h.html#7f8992121648ba013497a678ccaa6269bbebb65eda949b35cc897af469927afb">AST_FORCE_FIRM</a>, <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="loader_8c-source.html#l00861">ast_update_use_count()</a>, <a class="el" href="dlfcn_8c-source.html#l00196">error()</a>, <a class="el" href="loader_8c-source.html#l00304">find_resource()</a>, <a class="el" href="structast__module.html#4e5868d676cb634aa75b125a0f741abf">ast_module::flags</a>, <a class="el" href="loader_8c-source.html#l00084">ast_module::info</a>, <a class="el" href="loader_8c-source.html#l00085">ast_module::lib</a>, <a class="el" href="structast__module__info.html#da95ce17d77513a6f22da628644148de">ast_module_info::restore_globals</a>, and <a class="el" href="loader_8c-source.html#l00086">ast_module::usecount</a>.
<p>
Referenced by <a class="el" href="pbx__gtkconsole_8c-source.html#l00308">exit_now()</a>, <a class="el" href="cli_8c-source.html#l00259">handle_unload()</a>, <a class="el" href="pbx__gtkconsole_8c-source.html#l00203">reload_module()</a>, and <a class="el" href="pbx__gtkconsole_8c-source.html#l00184">remove_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00432"></a>00432 {
<a name="l00433"></a>00433    <span class="keyword">struct </span><a class="code" href="structast__module.html">ast_module</a> *mod;
<a name="l00434"></a>00434    <span class="keywordtype">int</span> res = -1;
<a name="l00435"></a>00435    <span class="keywordtype">int</span> <a class="code" href="dlfcn_8c.html#9989047f9754c69a45ea752cb417ca79">error</a> = 0;
<a name="l00436"></a>00436 
<a name="l00437"></a>00437    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;module_list);
<a name="l00438"></a>00438 
<a name="l00439"></a>00439    <span class="keywordflow">if</span> (!(mod = <a class="code" href="loader_8c.html#b6b27fa010ee029803109c4a9cb036eb">find_resource</a>(resource_name, 0))) {
<a name="l00440"></a>00440       <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;module_list);
<a name="l00441"></a>00441       <span class="keywordflow">return</span> 0;
<a name="l00442"></a>00442    }
<a name="l00443"></a>00443 
<a name="l00444"></a>00444    <span class="keywordflow">if</span> (!(mod-&gt;<a class="code" href="structast__module.html#4e5868d676cb634aa75b125a0f741abf">flags</a>.running || mod-&gt;<a class="code" href="structast__module.html#4e5868d676cb634aa75b125a0f741abf">flags</a>.declined))
<a name="l00445"></a>00445       error = 1;
<a name="l00446"></a>00446 
<a name="l00447"></a>00447    <span class="keywordflow">if</span> (!error &amp;&amp; (mod-&gt;<a class="code" href="structast__module.html#2bc03f11219aa0e7a3ea1e303a9f0c9a">usecount</a> &gt; 0)) {
<a name="l00448"></a>00448       <span class="keywordflow">if</span> (force)
<a name="l00449"></a>00449          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Warning:  Forcing removal of module '%s' with use count %d\n"</span>,
<a name="l00450"></a>00450             resource_name, mod-&gt;<a class="code" href="structast__module.html#2bc03f11219aa0e7a3ea1e303a9f0c9a">usecount</a>);
<a name="l00451"></a>00451       <span class="keywordflow">else</span> {
<a name="l00452"></a>00452          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Soft unload failed, '%s' has use count %d\n"</span>, resource_name,
<a name="l00453"></a>00453             mod-&gt;<a class="code" href="structast__module.html#2bc03f11219aa0e7a3ea1e303a9f0c9a">usecount</a>);
<a name="l00454"></a>00454          error = 1;
<a name="l00455"></a>00455       }
<a name="l00456"></a>00456    }
<a name="l00457"></a>00457 
<a name="l00458"></a>00458    <span class="keywordflow">if</span> (!error) {
<a name="l00459"></a>00459       <a class="code" href="loader_8c.html#4d02435a0b84fdc4878c337d049ac1e9">__ast_module_user_hangup_all</a>(mod);
<a name="l00460"></a>00460       res = mod-&gt;<a class="code" href="structast__module.html#caf9b6b99962bf5c2264824231d7a40c">info</a>-&gt;<a class="code" href="structast__module__info.html#33946851061b568a2aa7ca1a89596be2">unload</a>();
<a name="l00461"></a>00461 
<a name="l00462"></a>00462       <span class="keywordflow">if</span> (res) {
<a name="l00463"></a>00463          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Firm unload failed for %s\n"</span>, resource_name);
<a name="l00464"></a>00464          <span class="keywordflow">if</span> (force &lt;= <a class="code" href="module_8h.html#7f8992121648ba013497a678ccaa6269bbebb65eda949b35cc897af469927afb">AST_FORCE_FIRM</a>)
<a name="l00465"></a>00465             error = 1;
<a name="l00466"></a>00466          <span class="keywordflow">else</span>
<a name="l00467"></a>00467             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"** Dangerous **: Unloading resource anyway, at user request\n"</span>);
<a name="l00468"></a>00468       }
<a name="l00469"></a>00469    }
<a name="l00470"></a>00470 
<a name="l00471"></a>00471    <span class="keywordflow">if</span> (!error)
<a name="l00472"></a>00472       mod-&gt;<a class="code" href="structast__module.html#4e5868d676cb634aa75b125a0f741abf">flags</a>.running = mod-&gt;<a class="code" href="structast__module.html#4e5868d676cb634aa75b125a0f741abf">flags</a>.declined = 0;
<a name="l00473"></a>00473 
<a name="l00474"></a>00474    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;module_list);
<a name="l00475"></a>00475 
<a name="l00476"></a>00476    <span class="keywordflow">if</span> (!error &amp;&amp; !mod-&gt;<a class="code" href="structast__module.html#e8acc63b1e238f3255c900eed37254b8">lib</a>)
<a name="l00477"></a>00477       mod-&gt;<a class="code" href="structast__module.html#caf9b6b99962bf5c2264824231d7a40c">info</a>-&gt;<a class="code" href="structast__module__info.html#da95ce17d77513a6f22da628644148de">restore_globals</a>();
<a name="l00478"></a>00478 
<a name="l00479"></a>00479 <span class="preprocessor">#if LOADABLE_MODULES</span>
<a name="l00480"></a>00480 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (!error)
<a name="l00481"></a>00481       unload_dynamic_module(mod);
<a name="l00482"></a>00482 <span class="preprocessor">#endif</span>
<a name="l00483"></a>00483 <span class="preprocessor"></span>
<a name="l00484"></a>00484    <span class="keywordflow">if</span> (!error)
<a name="l00485"></a>00485       <a class="code" href="loader_8c.html#963a5bf4226e836e07eed720bd60baf1">ast_update_use_count</a>();
<a name="l00486"></a>00486 
<a name="l00487"></a>00487    <span class="keywordflow">return</span> res;
<a name="l00488"></a>00488 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ce0d5fddcce98cb7d051a4058f20030e"></a><!-- doxytag: member="module.h::ast_update_module_list" ref="ce0d5fddcce98cb7d051a4058f20030e" args="(int(*modentry)(const char *module, const char *description, int usecnt, const char *like), const char *like)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_update_module_list           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int(*)(const char *module, const char *description, int usecnt, const char *like)&nbsp;</td>
          <td class="mdname" nowrap> <em>modentry</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>like</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Ask for a list of modules, descriptions, and use counts. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>modentry</em>&nbsp;</td><td>A callback to an updater function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>like</em>&nbsp;</td><td>For each of the modules loaded, modentry will be executed with the resource, description, and usecount values of each particular module.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the number of modules loaded </dd></dl>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00873">873</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="linkedlists_8h-source.html#l00453">AST_LIST_TRAVERSE</a>, <a class="el" href="linkedlists_8h-source.html#l00071">AST_LIST_TRYLOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, <a class="el" href="module_8h-source.html#l00198">ast_module_info::description</a>, <a class="el" href="loader_8c-source.html#l00084">ast_module::info</a>, and <a class="el" href="loader_8c-source.html#l00086">ast_module::usecount</a>.
<p>
Referenced by <a class="el" href="cli_8c-source.html#l00413">handle_modlist()</a>, and <a class="el" href="pbx__gtkconsole_8c-source.html#l00292">mod_update()</a>.<div class="fragment"><pre class="fragment"><a name="l00875"></a>00875 {
<a name="l00876"></a>00876    <span class="keyword">struct </span><a class="code" href="structast__module.html">ast_module</a> *cur;
<a name="l00877"></a>00877    <span class="keywordtype">int</span> unlock = -1;
<a name="l00878"></a>00878    <span class="keywordtype">int</span> total_mod_loaded = 0;
<a name="l00879"></a>00879 
<a name="l00880"></a>00880    <span class="keywordflow">if</span> (<a class="code" href="linkedlists_8h.html#70f597b7ac853679d6d4a57ae476750a">AST_LIST_TRYLOCK</a>(&amp;module_list))
<a name="l00881"></a>00881       unlock = 0;
<a name="l00882"></a>00882 
<a name="l00883"></a>00883    <a class="code" href="linkedlists_8h.html#e5bbda4b7ef1cd9462bb86ba25c5d7eb">AST_LIST_TRAVERSE</a>(&amp;module_list, cur, entry) {
<a name="l00884"></a>00884       total_mod_loaded += modentry(cur-&gt;resource, cur-&gt;<a class="code" href="structast__module.html#caf9b6b99962bf5c2264824231d7a40c">info</a>-&gt;<a class="code" href="structast__module__info.html#67daf92c833c41c95db874e18fcb2786">description</a>, cur-&gt;<a class="code" href="structast__module.html#2bc03f11219aa0e7a3ea1e303a9f0c9a">usecount</a>, like);
<a name="l00885"></a>00885    }
<a name="l00886"></a>00886 
<a name="l00887"></a>00887    <span class="keywordflow">if</span> (unlock)
<a name="l00888"></a>00888       <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;module_list);
<a name="l00889"></a>00889 
<a name="l00890"></a>00890    <span class="keywordflow">return</span> total_mod_loaded;
<a name="l00891"></a>00891 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="963a5bf4226e836e07eed720bd60baf1"></a><!-- doxytag: member="module.h::ast_update_use_count" ref="963a5bf4226e836e07eed720bd60baf1" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_update_use_count           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Notify when usecount has been changed. 
<p>
This function calulates use counts and notifies anyone trying to keep track of them. It should be called whenever your module's usecount changes.<p>
<dl compact><dt><b>Note:</b></dt><dd>The LOCAL_USER macros take care of calling this function for you. </dd></dl>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00861">861</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00453">AST_LIST_TRAVERSE</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, and <a class="el" href="structloadupdate.html#909b0eb66f2f08ae7a8a41067705abd2">loadupdate::updater</a>.
<p>
Referenced by <a class="el" href="loader_8c-source.html#l00177">__ast_module_user_add()</a>, <a class="el" href="loader_8c-source.html#l00209">__ast_module_user_hangup_all()</a>, <a class="el" href="loader_8c-source.html#l00198">__ast_module_user_remove()</a>, <a class="el" href="loader_8c-source.html#l00939">ast_module_ref()</a>, <a class="el" href="loader_8c-source.html#l00947">ast_module_unref()</a>, <a class="el" href="loader_8c-source.html#l00431">ast_unload_resource()</a>, <a class="el" href="pbx__gtkconsole_8c-source.html#l00308">exit_now()</a>, <a class="el" href="pbx__gtkconsole_8c-source.html#l00480">load_module()</a>, <a class="el" href="chan__h323_8c-source.html#l01728">oh323_request()</a>, <a class="el" href="chan__sip_8c-source.html#l16326">sip_request_call()</a>, and <a class="el" href="chan__sip_8c-source.html#l15802">sipsock_read()</a>.<div class="fragment"><pre class="fragment"><a name="l00862"></a>00862 {
<a name="l00863"></a>00863    <span class="comment">/* Notify any module monitors that the use count for a</span>
<a name="l00864"></a>00864 <span class="comment">      resource has changed */</span>
<a name="l00865"></a>00865    <span class="keyword">struct </span><a class="code" href="structloadupdate.html">loadupdate</a> *m;
<a name="l00866"></a>00866 
<a name="l00867"></a>00867    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;module_list);
<a name="l00868"></a>00868    <a class="code" href="linkedlists_8h.html#e5bbda4b7ef1cd9462bb86ba25c5d7eb">AST_LIST_TRAVERSE</a>(&amp;updaters, m, entry)
<a name="l00869"></a>00869       m-&gt;<a class="code" href="structloadupdate.html#909b0eb66f2f08ae7a8a41067705abd2">updater</a>();
<a name="l00870"></a>00870    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;module_list);
<a name="l00871"></a>00871 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu May 24 22:27:37 2007 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
