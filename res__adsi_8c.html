<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (24 May 2007)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Thu May 24 22:27:42 2007</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Fres_2F.html">res</a></div>
<h1>res_adsi.c File Reference</h1>ADSI support. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="asterisk_8h-source.html">asterisk.h</a>&quot;</code><br>
<code>#include &lt;<a class="el" href="time_8h-source.html">time.h</a>&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &lt;math.h&gt;</code><br>
<code>#include &lt;errno.h&gt;</code><br>
<code>#include &quot;<a class="el" href="adsi_8h-source.html">asterisk/adsi.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="ulaw_8h-source.html">asterisk/ulaw.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="alaw_8h-source.html">asterisk/alaw.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="callerid_8h-source.html">asterisk/callerid.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="logger_8h-source.html">asterisk/logger.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="fskmodem_8h-source.html">asterisk/fskmodem.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="channel_8h-source.html">asterisk/channel.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="module_8h-source.html">asterisk/module.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="config_8h-source.html">asterisk/config.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="file_8h-source.html">asterisk/file.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="options_8h-source.html">asterisk/options.h</a>&quot;</code><br>

<p>
<a href="res__adsi_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#dcac4b80957623c8d130d8816501b774">ADSI_FLAG_DATAMODE</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 8)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#9cc826737b70b8aa3c17268638a96c80">ADSI_MAX_INTRO</a>&nbsp;&nbsp;&nbsp;20</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#848106944500ddb4e014e16622ca1bc2">ADSI_MAX_SPEED_DIAL</a>&nbsp;&nbsp;&nbsp;6</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#9860b98dda4c2787d63505e2ab35cae2">ADSI_SPEED_DIAL</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#5d79a8bfbaa690d02c040ead68cf0b9d">DEFAULT_ADSI_MAX_RETRIES</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#d325b5e29195ed04114912fc7b7c155b">__adsi_transmit_messages</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, unsigned char **<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, int *<a class="el" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a>, int *<a class="el" href="adsistub_8c.html#b7aba3f31a451319eaaaac1ab12415fc">msgtype</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#18afa442dd8a9df2807efb59e84211b1">_ast_adsi_available</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#c3620c03f9bf204d219d262d54dada42">_ast_adsi_begin_download</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, char *<a class="el" href="adsistub_8c.html#aaabf0d39951f3e6c3e8a7911df524c2">service</a>, unsigned char *<a class="el" href="adsistub_8c.html#88588060e6ba48fcc882c19f052fecb8">fdn</a>, unsigned char *<a class="el" href="adsistub_8c.html#74459ca3cf85a81df90da95ff6e7a207">sec</a>, int version)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#835342b83fe9fd827f8106167cbd592b">_ast_adsi_channel_restore</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#004f1151fe783aaa1a640cdf548d63a1">_ast_adsi_clear_screen</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#ea2672ce0989df0ff86dc5b17438225d">_ast_adsi_clear_soft_keys</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#7e35f9e069738cb559faeff5e6e60894">_ast_adsi_connect_session</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, unsigned char *<a class="el" href="adsistub_8c.html#88588060e6ba48fcc882c19f052fecb8">fdn</a>, int <a class="el" href="adsistub_8c.html#0812f14f43315611dd0ef462515c9d00">ver</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#e048374564a61a5585f43a5452c4bfd8">_ast_adsi_data_mode</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#9f2336c7475367c8e2325fa6a20579b9">_ast_adsi_disconnect_session</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#91a341a45a6673f5d2bacde9ac62bbb4">_ast_adsi_display</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, int <a class="el" href="adsistub_8c.html#71860c77c6745379b0d44304d66b6a13">page</a>, int <a class="el" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a>, int just, int <a class="el" href="adsistub_8c.html#ccfc59a528a109fa4204e8ea06e8b68b">wrap</a>, char *col1, char *col2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#0bcb7eca357e70d0f0f5f4c76a94d6a4">_ast_adsi_download_connect</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, char *<a class="el" href="adsistub_8c.html#aaabf0d39951f3e6c3e8a7911df524c2">service</a>, unsigned char *<a class="el" href="adsistub_8c.html#88588060e6ba48fcc882c19f052fecb8">fdn</a>, unsigned char *<a class="el" href="adsistub_8c.html#74459ca3cf85a81df90da95ff6e7a207">sec</a>, int <a class="el" href="adsistub_8c.html#0812f14f43315611dd0ef462515c9d00">ver</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#e61c405ec8abbba634308d0ffe235ef2">_ast_adsi_download_disconnect</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#5e9d361346d4604ccf2259b582a4bfab">_ast_adsi_end_download</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#888c74a2a821dcf22c935cdfe2f1d160">_ast_adsi_get_cpeid</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, unsigned char *cpeid, int voice)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#c0098b910e7cc67fbded9e41d8bf789d">_ast_adsi_get_cpeinfo</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, int *<a class="el" href="adsistub_8c.html#eaae26a6fb20ed3ef54fb23bfa0b1fcc">width</a>, int *<a class="el" href="adsistub_8c.html#b435e227d5dd201e1768b2bcb2e0aa81">height</a>, int *<a class="el" href="adsistub_8c.html#02634eff3c24742057ecacbee91c4bbd">buttons</a>, int voice)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#b252f01056cc929d2cdf474860cb2891">_ast_adsi_input_control</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, int <a class="el" href="adsistub_8c.html#71860c77c6745379b0d44304d66b6a13">page</a>, int <a class="el" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a>, int display, int <a class="el" href="cdr__custom_8c.html#b954976e6264c40232046aacb5b7c390">format</a>, int just)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#20ba0508073c28960333ed8ed790b19b">_ast_adsi_input_format</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, int <a class="el" href="adsistub_8c.html#0fc3cfbc27e91ea60a787de13dae3e3c">num</a>, int <a class="el" href="adsistub_8c.html#736007832d2167baaae763fd3a3f3cf1">dir</a>, int <a class="el" href="adsistub_8c.html#ccfc59a528a109fa4204e8ea06e8b68b">wrap</a>, char *<a class="el" href="adsistub_8c.html#9b6e54888c4dccb752b4827eb66c5aed">format1</a>, char *format2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#553807459e28b5de53b7baece66c02f5">_ast_adsi_load_session</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, unsigned char *<a class="el" href="res__agi_8c.html#d2a57dc1d883fd21fb9951699df71cc7">app</a>, int <a class="el" href="adsistub_8c.html#0812f14f43315611dd0ef462515c9d00">ver</a>, int data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#76365932347df60e1f0ab75e03fecc65">_ast_adsi_load_soft_key</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, int key, const char *llabel, const char *slabel, char *ret, int data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#6ad10d8c66cead9f1a7acc02ee819489">_ast_adsi_print</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, char **lines, int *<a class="el" href="res__adsi_8c.html#3c53e90059d11bfa52688d4c8a6e0c7c">aligns</a>, int voice)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#ee64bfd44513a3fbb3bc5ebbcc859a4f">_ast_adsi_query_cpeid</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#c9a9c3ca08b37a3421235a625066065b">_ast_adsi_query_cpeinfo</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#67a3aa20a91f08bcee84fc730891f8df">_ast_adsi_read_encoded_dtmf</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, int maxlen)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#61fa65b5b483e58fef84feb1d6b7f6af">_ast_adsi_set_keys</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, unsigned char *<a class="el" href="res__crypto_8c.html#14f802e1fba977727845e8872c1743a7">keys</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#38a795f94e04dce0df355b2d1b55aa8c">_ast_adsi_set_line</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, int <a class="el" href="adsistub_8c.html#71860c77c6745379b0d44304d66b6a13">page</a>, int <a class="el" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#9d692a815a62e805989fe57c9ca8ad84">_ast_adsi_transmit_message</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, unsigned char *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, int <a class="el" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a>, int <a class="el" href="adsistub_8c.html#b7aba3f31a451319eaaaac1ab12415fc">msgtype</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#d3e747c68ea4657d061ec60bd7358715">_ast_adsi_transmit_message_full</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, unsigned char *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, int <a class="el" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a>, int <a class="el" href="adsistub_8c.html#b7aba3f31a451319eaaaac1ab12415fc">msgtype</a>, int dowait)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#1616f9a6c8a99129c9560ef439f708b9">_ast_adsi_unload_session</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#16e3797831731903ef49cd748508bff0">_ast_adsi_voice_mode</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, int when)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#a0a4868be37e55dd89b5d5ced6234055">adsi_careful_send</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, int len, int *remainder)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#0524fc30b67374877d22ea616aa4780a">adsi_generate</a> (unsigned char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, int <a class="el" href="adsistub_8c.html#b7aba3f31a451319eaaaac1ab12415fc">msgtype</a>, unsigned char *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, int <a class="el" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a>, int msgnum, int <a class="el" href="pbx__gtkconsole_8c.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>, int codec)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#51f4e5d499fb7171deda11d0560f0bbe">adsi_load</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#c35fee6632e430457f6ccfa051cbf6cf">AST_MODULE_INFO</a> (ASTERISK_GPL_KEY, AST_MODFLAG_DEFAULT,&quot;ADSI Resource&quot;,.load=load_module,.unload=unload_module,.reload=reload,)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#ebce1e598fc6f0741769a7b9f1c8fec0">ccopy</a> (unsigned char *dst, const unsigned char *src, int max)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#486e13f28cb32da27c723a6050505900">init_state</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#8c304b271325d497b3ce1886465a1abe">load_module</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#91875b0435b600b8ed0e424d70d492b0">reload</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#e6adaef09487edbb91279a9d81f5c3b2">str2align</a> (char *s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#eaf793e807a29b69460b0c6c94a79a0b">unload_module</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#5a159214b169da90d96590d47fff379e">alignment</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#3c53e90059d11bfa52688d4c8a6e0c7c">aligns</a> [ADSI_MAX_INTRO]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#f0c86aca045f92fe9859b48fe7ac6c38">intro</a> [ADSI_MAX_INTRO][20]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#7f28c2cce3d8babb0e8754a55469aad7">maxretries</a> = DEFAULT_ADSI_MAX_RETRIES</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#7c7a7dd2c520302cb7caf8cec3fb3c18">speeddial</a> [ADSI_MAX_SPEED_DIAL][3][20]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#f88a1518ac11072847b2d8c171b0ab9a">speeds</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__adsi_8c.html#fbb44b4487415b134bce9c790a27fe5e">total</a> = 0</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
ADSI support. 
<p>
<dl compact><dt><b>Author:</b></dt><dd>Mark Spencer &lt;<a href="mailto:markster@digium.com">markster@digium.com</a>&gt;</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>this module is required by app_voicemail and app_getcpeid </dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000032">Todo:</a></b></dt><dd>Move app_getcpeid into this module <p>
Create a core layer so that app_voicemail does not require res_adsi to load </dd></dl>

<p>
Definition in file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="dcac4b80957623c8d130d8816501b774"></a><!-- doxytag: member="res_adsi.c::ADSI_FLAG_DATAMODE" ref="dcac4b80957623c8d130d8816501b774" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ADSI_FLAG_DATAMODE&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 8)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00063">63</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l00198">__adsi_transmit_messages()</a>, and <a class="el" href="res__adsi_8c-source.html#l00370">_ast_adsi_transmit_message_full()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="9cc826737b70b8aa3c17268638a96c80"></a><!-- doxytag: member="res_adsi.c::ADSI_MAX_INTRO" ref="9cc826737b70b8aa3c17268638a96c80" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ADSI_MAX_INTRO&nbsp;&nbsp;&nbsp;20          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00060">60</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>, and <a class="el" href="res__adsi_8c-source.html#l01067">init_state()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="848106944500ddb4e014e16622ca1bc2"></a><!-- doxytag: member="res_adsi.c::ADSI_MAX_SPEED_DIAL" ref="848106944500ddb4e014e16622ca1bc2" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ADSI_MAX_SPEED_DIAL&nbsp;&nbsp;&nbsp;6          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00061">61</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="9860b98dda4c2787d63505e2ab35cae2"></a><!-- doxytag: member="res_adsi.c::ADSI_SPEED_DIAL" ref="9860b98dda4c2787d63505e2ab35cae2" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ADSI_SPEED_DIAL&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00068">68</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l00946">_ast_adsi_channel_restore()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="5d79a8bfbaa690d02c040ead68cf0b9d"></a><!-- doxytag: member="res_adsi.c::DEFAULT_ADSI_MAX_RETRIES" ref="5d79a8bfbaa690d02c040ead68cf0b9d" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define DEFAULT_ADSI_MAX_RETRIES&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00058">58</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="d325b5e29195ed04114912fc7b7c155b"></a><!-- doxytag: member="res_adsi.c::__adsi_transmit_messages" ref="d325b5e29195ed04114912fc7b7c155b" args="(struct ast_channel *chan, unsigned char **msg, int *msglen, int *msgtype)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int __adsi_transmit_messages           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char **&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>msglen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>msgtype</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00198">198</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="res__adsi_8c-source.html#l00127">adsi_careful_send()</a>, <a class="el" href="res__adsi_8c-source.html#l00063">ADSI_FLAG_DATAMODE</a>, <a class="el" href="channel_8h-source.html#l00452">ast_channel::adsicpe</a>, <a class="el" href="channel_8h.html#b0b0e02362739df53c5a11797f118a6df141c289f651b61ee5a5bc0e3511f4c7">AST_ADSI_AVAILABLE</a>, <a class="el" href="channel_8h.html#b0b0e02362739df53c5a11797f118a6db29a58956d5f95b2dc9aedd6dea41b54">AST_ADSI_UNAVAILABLE</a>, <a class="el" href="frame_8h-source.html#l00225">AST_FORMAT_ULAW</a>, <a class="el" href="frame_8h-source.html#l00125">AST_FRAME_DTMF</a>, <a class="el" href="frame_8h-source.html#l00396">ast_frfree()</a>, <a class="el" href="callerid_8c-source.html#l00235">ast_gen_cas()</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="channel_8c-source.html#l02438">ast_read()</a>, <a class="el" href="channel_8c-source.html#l01952">ast_waitfor()</a>, <a class="el" href="adsistub_8c-source.html#l00065">buf</a>, <a class="el" href="format__g726_8c-source.html#l00193">f</a>, <a class="el" href="frame_8h-source.html#l00131">ast_frame::frametype</a>, <a class="el" href="logger_8h-source.html#l00094">LOG_DEBUG</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="res__adsi_8c-source.html#l00065">maxretries</a>, <a class="el" href="asterisk_8c-source.html#l00164">option_debug</a>, and <a class="el" href="frame_8h-source.html#l00133">ast_frame::subclass</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l00370">_ast_adsi_transmit_message_full()</a>.<div class="fragment"><pre class="fragment"><a name="l00199"></a>00199 {
<a name="l00200"></a>00200    <span class="comment">/* msglen must be no more than 256 bits, each */</span>
<a name="l00201"></a>00201    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[24000 * 5];
<a name="l00202"></a>00202    <span class="keywordtype">int</span> pos = 0, res;
<a name="l00203"></a>00203    <span class="keywordtype">int</span> x;
<a name="l00204"></a>00204    <span class="keywordtype">int</span> start=0;
<a name="l00205"></a>00205    <span class="keywordtype">int</span> retries = 0;
<a name="l00206"></a>00206 
<a name="l00207"></a>00207    <span class="keywordtype">char</span> ack[3];
<a name="l00208"></a>00208 
<a name="l00209"></a>00209    <span class="comment">/* Wait up to 500 ms for initial ACK */</span>
<a name="l00210"></a>00210    <span class="keywordtype">int</span> waittime;
<a name="l00211"></a>00211    <span class="keyword">struct </span><a class="code" href="structast__frame.html">ast_frame</a> *<a class="code" href="format__g726_8c.html#85b9b17a7dd34a3638c560bc9152473b">f</a>;
<a name="l00212"></a>00212    <span class="keywordtype">int</span> rem = 0;
<a name="l00213"></a>00213    <span class="keywordtype">int</span> def;
<a name="l00214"></a>00214 
<a name="l00215"></a>00215    <span class="keywordflow">if</span> (chan-&gt;<a class="code" href="structast__channel.html#89c64e070078b5f6dcd6e241d2eb986e">adsicpe</a> == <a class="code" href="channel_8h.html#b0b0e02362739df53c5a11797f118a6db29a58956d5f95b2dc9aedd6dea41b54">AST_ADSI_UNAVAILABLE</a>) {
<a name="l00216"></a>00216       <span class="comment">/* Don't bother if we know they don't support ADSI */</span>
<a name="l00217"></a>00217       errno = ENOSYS;
<a name="l00218"></a>00218       <span class="keywordflow">return</span> -1;
<a name="l00219"></a>00219    }
<a name="l00220"></a>00220 
<a name="l00221"></a>00221    <span class="keywordflow">while</span>(retries &lt; <a class="code" href="res__adsi_8c.html#7f28c2cce3d8babb0e8754a55469aad7">maxretries</a>) {
<a name="l00222"></a>00222       <span class="keywordflow">if</span> (!(chan-&gt;<a class="code" href="structast__channel.html#89c64e070078b5f6dcd6e241d2eb986e">adsicpe</a> &amp; <a class="code" href="res__adsi_8c.html#dcac4b80957623c8d130d8816501b774">ADSI_FLAG_DATAMODE</a>)) {
<a name="l00223"></a>00223          <span class="comment">/* Generate CAS (no SAS) */</span>
<a name="l00224"></a>00224          <a class="code" href="callerid_8c.html#650489920c146454c38d0fc56d5e2771">ast_gen_cas</a>(buf, 0, 680, <a class="code" href="frame_8h.html#a71706b2c864525ec1c9fcf925ae3802">AST_FORMAT_ULAW</a>);
<a name="l00225"></a>00225       
<a name="l00226"></a>00226          <span class="comment">/* Send CAS */</span>
<a name="l00227"></a>00227          <span class="keywordflow">if</span> (<a class="code" href="res__adsi_8c.html#a0a4868be37e55dd89b5d5ced6234055">adsi_careful_send</a>(chan, buf, 680, NULL)) {
<a name="l00228"></a>00228             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Unable to send CAS\n"</span>);
<a name="l00229"></a>00229          }
<a name="l00230"></a>00230          <span class="comment">/* Wait For DTMF result */</span>
<a name="l00231"></a>00231          waittime = 500;
<a name="l00232"></a>00232          <span class="keywordflow">for</span>(;;) {
<a name="l00233"></a>00233             <span class="keywordflow">if</span> (((res = <a class="code" href="channel_8c.html#e02dcdf40023f275d4561a930e7a7fc9">ast_waitfor</a>(chan, waittime)) &lt; 1)) {
<a name="l00234"></a>00234                <span class="comment">/* Didn't get back DTMF A in time */</span>
<a name="l00235"></a>00235                <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00236"></a>00236                   <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"No ADSI CPE detected (%d)\n"</span>, res);
<a name="l00237"></a>00237                <span class="keywordflow">if</span> (!chan-&gt;<a class="code" href="structast__channel.html#89c64e070078b5f6dcd6e241d2eb986e">adsicpe</a>)
<a name="l00238"></a>00238                   chan-&gt;<a class="code" href="structast__channel.html#89c64e070078b5f6dcd6e241d2eb986e">adsicpe</a> = <a class="code" href="channel_8h.html#b0b0e02362739df53c5a11797f118a6db29a58956d5f95b2dc9aedd6dea41b54">AST_ADSI_UNAVAILABLE</a>;
<a name="l00239"></a>00239                errno = ENOSYS;
<a name="l00240"></a>00240                <span class="keywordflow">return</span> -1;
<a name="l00241"></a>00241             }
<a name="l00242"></a>00242             waittime = res;
<a name="l00243"></a>00243             f = <a class="code" href="channel_8c.html#1446a8c0bddf626bf26b000fbeae117f">ast_read</a>(chan);
<a name="l00244"></a>00244             <span class="keywordflow">if</span> (!f) {
<a name="l00245"></a>00245                <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00246"></a>00246                   <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"Hangup in ADSI\n"</span>);
<a name="l00247"></a>00247                <span class="keywordflow">return</span> -1;
<a name="l00248"></a>00248             }
<a name="l00249"></a>00249             <span class="keywordflow">if</span> (f-&gt;<a class="code" href="structast__frame.html#9574009b02f8256934a1a25cbac10e1d">frametype</a> == <a class="code" href="frame_8h.html#41e7a80287a24ece13159c2d8b1b9375">AST_FRAME_DTMF</a>) {
<a name="l00250"></a>00250                <span class="keywordflow">if</span> (f-&gt;<a class="code" href="structast__frame.html#c00578b472e008b51fd24237785fa428">subclass</a> == <span class="charliteral">'A'</span>) {
<a name="l00251"></a>00251                   <span class="comment">/* Okay, this is an ADSI CPE.  Note this for future reference, too */</span>
<a name="l00252"></a>00252                   <span class="keywordflow">if</span> (!chan-&gt;<a class="code" href="structast__channel.html#89c64e070078b5f6dcd6e241d2eb986e">adsicpe</a>)
<a name="l00253"></a>00253                      chan-&gt;<a class="code" href="structast__channel.html#89c64e070078b5f6dcd6e241d2eb986e">adsicpe</a> = <a class="code" href="channel_8h.html#b0b0e02362739df53c5a11797f118a6df141c289f651b61ee5a5bc0e3511f4c7">AST_ADSI_AVAILABLE</a>;
<a name="l00254"></a>00254                   <span class="keywordflow">break</span>;
<a name="l00255"></a>00255                } <span class="keywordflow">else</span> {
<a name="l00256"></a>00256                   <span class="keywordflow">if</span> (f-&gt;<a class="code" href="structast__frame.html#c00578b472e008b51fd24237785fa428">subclass</a> == <span class="charliteral">'D'</span>)  {
<a name="l00257"></a>00257                      <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00258"></a>00258                         <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"Off-hook capable CPE only, not ADSI\n"</span>);
<a name="l00259"></a>00259                   } <span class="keywordflow">else</span>
<a name="l00260"></a>00260                      <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Unknown ADSI response '%c'\n"</span>, f-&gt;<a class="code" href="structast__frame.html#c00578b472e008b51fd24237785fa428">subclass</a>);
<a name="l00261"></a>00261                   <span class="keywordflow">if</span> (!chan-&gt;<a class="code" href="structast__channel.html#89c64e070078b5f6dcd6e241d2eb986e">adsicpe</a>)
<a name="l00262"></a>00262                      chan-&gt;<a class="code" href="structast__channel.html#89c64e070078b5f6dcd6e241d2eb986e">adsicpe</a> = <a class="code" href="channel_8h.html#b0b0e02362739df53c5a11797f118a6db29a58956d5f95b2dc9aedd6dea41b54">AST_ADSI_UNAVAILABLE</a>;
<a name="l00263"></a>00263                   errno =  ENOSYS;
<a name="l00264"></a>00264                   <span class="keywordflow">return</span> -1;
<a name="l00265"></a>00265                }
<a name="l00266"></a>00266             }
<a name="l00267"></a>00267             <a class="code" href="frame_8h.html#506c759ec4950e7f7465e8f090a6252b">ast_frfree</a>(f);
<a name="l00268"></a>00268          }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00271"></a>00271             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"ADSI Compatible CPE Detected\n"</span>);
<a name="l00272"></a>00272       } <span class="keywordflow">else</span> {
<a name="l00273"></a>00273          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00274"></a>00274             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"Already in data mode\n"</span>);
<a name="l00275"></a>00275       }
<a name="l00276"></a>00276 
<a name="l00277"></a>00277       x = 0;
<a name="l00278"></a>00278       pos = 0;
<a name="l00279"></a>00279 <span class="preprocessor">#if 1</span>
<a name="l00280"></a>00280 <span class="preprocessor"></span>      def= <a class="code" href="channel_8c.html#c96b0dddc19825d46cc8a62ae92085ab">ast_channel_defer_dtmf</a>(chan);
<a name="l00281"></a>00281 <span class="preprocessor">#endif</span>
<a name="l00282"></a>00282 <span class="preprocessor"></span>      <span class="keywordflow">while</span>((x &lt; 6) &amp;&amp; <a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>[x]) {
<a name="l00283"></a>00283          res = <a class="code" href="res__adsi_8c.html#0524fc30b67374877d22ea616aa4780a">adsi_generate</a>(buf + pos, <a class="code" href="adsistub_8c.html#b7aba3f31a451319eaaaac1ab12415fc">msgtype</a>[x], <a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>[x], <a class="code" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a>[x], x+1 - start, (x == 5) || !<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>[x+1], <a class="code" href="frame_8h.html#a71706b2c864525ec1c9fcf925ae3802">AST_FORMAT_ULAW</a>);
<a name="l00284"></a>00284          <span class="keywordflow">if</span> (res &lt; 0) {
<a name="l00285"></a>00285             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Failed to generate ADSI message %d on channel %s\n"</span>, x + 1, chan-&gt;name);
<a name="l00286"></a>00286             <span class="keywordflow">return</span> -1;
<a name="l00287"></a>00287          }
<a name="l00288"></a>00288          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00289"></a>00289             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"Message %d, of %d input bytes, %d output bytes\n"</span>, 
<a name="l00290"></a>00290                   x + 1, <a class="code" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a>[x], res);
<a name="l00291"></a>00291          pos += res; 
<a name="l00292"></a>00292          x++;
<a name="l00293"></a>00293       }
<a name="l00294"></a>00294 
<a name="l00295"></a>00295 
<a name="l00296"></a>00296       rem = 0;
<a name="l00297"></a>00297       res = <a class="code" href="res__adsi_8c.html#a0a4868be37e55dd89b5d5ced6234055">adsi_careful_send</a>(chan, buf, pos, &amp;rem); 
<a name="l00298"></a>00298       <span class="keywordflow">if</span> (!def)
<a name="l00299"></a>00299          <a class="code" href="channel_8c.html#f73f024d0d929e70569cec47b297ee68">ast_channel_undefer_dtmf</a>(chan);
<a name="l00300"></a>00300       <span class="keywordflow">if</span> (res)
<a name="l00301"></a>00301          <span class="keywordflow">return</span> -1;
<a name="l00302"></a>00302 
<a name="l00303"></a>00303       <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00304"></a>00304          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"Sent total spill of %d bytes\n"</span>, pos);
<a name="l00305"></a>00305 
<a name="l00306"></a>00306       memset(ack, 0, <span class="keyword">sizeof</span>(ack));
<a name="l00307"></a>00307       <span class="comment">/* Get real result */</span>
<a name="l00308"></a>00308       res = <a class="code" href="channel_8c.html#a548e6593830bf5eaf09c25bee20dc62">ast_readstring</a>(chan, ack, 2, 1000, 1000, <span class="stringliteral">""</span>);
<a name="l00309"></a>00309       <span class="comment">/* Check for hangup */</span>
<a name="l00310"></a>00310       <span class="keywordflow">if</span> (res &lt; 0)
<a name="l00311"></a>00311          <span class="keywordflow">return</span> -1;
<a name="l00312"></a>00312       <span class="keywordflow">if</span> (ack[0] == <span class="charliteral">'D'</span>) {
<a name="l00313"></a>00313          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00314"></a>00314             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"Acked up to message %d\n"</span>, atoi(ack + 1));
<a name="l00315"></a>00315          start += atoi(ack + 1);
<a name="l00316"></a>00316          <span class="keywordflow">if</span> (start &gt;= x)
<a name="l00317"></a>00317             <span class="keywordflow">break</span>;
<a name="l00318"></a>00318          <span class="keywordflow">else</span> {
<a name="l00319"></a>00319             retries++;
<a name="l00320"></a>00320             <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00321"></a>00321                <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(LOG_DEBUG, <span class="stringliteral">"Retransmitting (%d), from %d\n"</span>, retries, start + 1);
<a name="l00322"></a>00322          }
<a name="l00323"></a>00323       } <span class="keywordflow">else</span> {
<a name="l00324"></a>00324          retries++;
<a name="l00325"></a>00325          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Unexpected response to ack: %s (retry %d)\n"</span>, ack, retries);
<a name="l00326"></a>00326       } 
<a name="l00327"></a>00327    }
<a name="l00328"></a>00328    <span class="keywordflow">if</span> (retries &gt;= <a class="code" href="res__adsi_8c.html#7f28c2cce3d8babb0e8754a55469aad7">maxretries</a>) {
<a name="l00329"></a>00329       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Maximum ADSI Retries (%d) exceeded\n"</span>, <a class="code" href="res__adsi_8c.html#7f28c2cce3d8babb0e8754a55469aad7">maxretries</a>);
<a name="l00330"></a>00330       errno = ETIMEDOUT;
<a name="l00331"></a>00331       <span class="keywordflow">return</span> -1;
<a name="l00332"></a>00332    }
<a name="l00333"></a>00333    <span class="keywordflow">return</span> 0;
<a name="l00334"></a>00334    
<a name="l00335"></a>00335 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="18afa442dd8a9df2807efb59e84211b1"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_available" ref="18afa442dd8a9df2807efb59e84211b1" args="(struct ast_channel *chan)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_available           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>chan</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00788">788</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="channel_8h-source.html#l00452">ast_channel::adsicpe</a>, <a class="el" href="channel_8h.html#b0b0e02362739df53c5a11797f118a6df141c289f651b61ee5a5bc0e3511f4c7">AST_ADSI_AVAILABLE</a>, and <a class="el" href="channel_8h.html#b0b0e02362739df53c5a11797f118a6d6a7552ab39e56e9786f9b2adbb63fc23">AST_ADSI_UNKNOWN</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00789"></a>00789 {
<a name="l00790"></a>00790    <span class="keywordtype">int</span> cpe = chan-&gt;<a class="code" href="structast__channel.html#89c64e070078b5f6dcd6e241d2eb986e">adsicpe</a> &amp; 0xff;
<a name="l00791"></a>00791    <span class="keywordflow">if</span> ((cpe == <a class="code" href="channel_8h.html#b0b0e02362739df53c5a11797f118a6df141c289f651b61ee5a5bc0e3511f4c7">AST_ADSI_AVAILABLE</a>) ||
<a name="l00792"></a>00792        (cpe == <a class="code" href="channel_8h.html#b0b0e02362739df53c5a11797f118a6d6a7552ab39e56e9786f9b2adbb63fc23">AST_ADSI_UNKNOWN</a>))
<a name="l00793"></a>00793       <span class="keywordflow">return</span> 1;
<a name="l00794"></a>00794    <span class="keywordflow">return</span> 0;
<a name="l00795"></a>00795 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c3620c03f9bf204d219d262d54dada42"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_begin_download" ref="c3620c03f9bf204d219d262d54dada42" args="(struct ast_channel *chan, char *service, unsigned char *fdn, unsigned char *sec, int version)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_begin_download           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>service</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>fdn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>sec</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>version</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00337">337</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00030">ADSI_MSG_DOWNLOAD</a>, <a class="el" href="adsi_8h.html#ea505d7058e65b5403eac572c1616eda">ast_adsi_download_connect</a>, <a class="el" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="channel_8c-source.html#l03156">ast_readstring()</a>, <a class="el" href="adsistub_8c-source.html#l00065">buf</a>, and <a class="el" href="asterisk_8c-source.html#l00164">option_debug</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00338"></a>00338 {
<a name="l00339"></a>00339    <span class="keywordtype">int</span> bytes;
<a name="l00340"></a>00340    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[256];
<a name="l00341"></a>00341    <span class="keywordtype">char</span> ack[2];
<a name="l00342"></a>00342    bytes = 0;
<a name="l00343"></a>00343    <span class="comment">/* Setup the resident soft key stuff, a piece at a time */</span>
<a name="l00344"></a>00344    <span class="comment">/* Upload what scripts we can for voicemail ahead of time */</span>
<a name="l00345"></a>00345    bytes += <a class="code" href="adsi_8h.html#ea505d7058e65b5403eac572c1616eda">ast_adsi_download_connect</a>(buf + bytes, <a class="code" href="adsistub_8c.html#aaabf0d39951f3e6c3e8a7911df524c2">service</a>, <a class="code" href="adsistub_8c.html#88588060e6ba48fcc882c19f052fecb8">fdn</a>, <a class="code" href="adsistub_8c.html#74459ca3cf85a81df90da95ff6e7a207">sec</a>, version);
<a name="l00346"></a>00346    <span class="keywordflow">if</span> (<a class="code" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>(chan, buf, bytes, <a class="code" href="adsi_8h.html#b6dc008f81e5ea297c9b33598c05da10">ADSI_MSG_DOWNLOAD</a>, 0))
<a name="l00347"></a>00347       <span class="keywordflow">return</span> -1;
<a name="l00348"></a>00348    <span class="keywordflow">if</span> (<a class="code" href="channel_8c.html#a548e6593830bf5eaf09c25bee20dc62">ast_readstring</a>(chan, ack, 1, 10000, 10000, <span class="stringliteral">""</span>))
<a name="l00349"></a>00349       <span class="keywordflow">return</span> -1;
<a name="l00350"></a>00350    <span class="keywordflow">if</span> (ack[0] == <span class="charliteral">'B'</span>)
<a name="l00351"></a>00351       <span class="keywordflow">return</span> 0;
<a name="l00352"></a>00352    <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00353"></a>00353       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"Download was denied by CPE\n"</span>);
<a name="l00354"></a>00354    <span class="keywordflow">return</span> -1;
<a name="l00355"></a>00355 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="835342b83fe9fd827f8106167cbd592b"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_channel_restore" ref="835342b83fe9fd827f8106167cbd592b" args="(struct ast_channel *chan)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_channel_restore           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>chan</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00946">946</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00103">ADSI_INFO_PAGE</a>, <a class="el" href="adsi_8h-source.html#l00029">ADSI_MSG_DISPLAY</a>, <a class="el" href="res__adsi_8c-source.html#l00068">ADSI_SPEED_DIAL</a>, <a class="el" href="adsi_8h.html#e8700684fc2732a0514f5bc5567c768d">ast_adsi_set_keys</a>, <a class="el" href="adsi_8h.html#d18dcf73c9d04245baa29520ab6f73d6">ast_adsi_set_line</a>, <a class="el" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>, and <a class="el" href="res__adsi_8c-source.html#l00944">speeds</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00947"></a>00947 {
<a name="l00948"></a>00948    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> dsp[256];
<a name="l00949"></a>00949    <span class="keywordtype">int</span> bytes;
<a name="l00950"></a>00950    <span class="keywordtype">int</span> x;
<a name="l00951"></a>00951    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> keyd[6];
<a name="l00952"></a>00952 
<a name="l00953"></a>00953    memset(dsp, 0, <span class="keyword">sizeof</span>(dsp));
<a name="l00954"></a>00954 
<a name="l00955"></a>00955    <span class="comment">/* Start with initial display setup */</span>
<a name="l00956"></a>00956    bytes = 0;
<a name="l00957"></a>00957    bytes += <a class="code" href="adsi_8h.html#d18dcf73c9d04245baa29520ab6f73d6">ast_adsi_set_line</a>(dsp + bytes, <a class="code" href="adsi_8h.html#eace5ef2cdd5d4b49fa68283d962c0f8">ADSI_INFO_PAGE</a>, 1);
<a name="l00958"></a>00958 
<a name="l00959"></a>00959    <span class="comment">/* Prepare key setup messages */</span>
<a name="l00960"></a>00960 
<a name="l00961"></a>00961    <span class="keywordflow">if</span> (<a class="code" href="res__adsi_8c.html#f88a1518ac11072847b2d8c171b0ab9a">speeds</a>) {
<a name="l00962"></a>00962       memset(keyd, 0, <span class="keyword">sizeof</span>(keyd));
<a name="l00963"></a>00963       <span class="keywordflow">for</span> (x=0;x&lt;<a class="code" href="res__adsi_8c.html#f88a1518ac11072847b2d8c171b0ab9a">speeds</a>;x++) {
<a name="l00964"></a>00964          keyd[x] = <a class="code" href="res__adsi_8c.html#9860b98dda4c2787d63505e2ab35cae2">ADSI_SPEED_DIAL</a> + x;
<a name="l00965"></a>00965       }
<a name="l00966"></a>00966       bytes += <a class="code" href="adsi_8h.html#e8700684fc2732a0514f5bc5567c768d">ast_adsi_set_keys</a>(dsp + bytes, keyd);
<a name="l00967"></a>00967    }
<a name="l00968"></a>00968    <a class="code" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>(chan, dsp, bytes, <a class="code" href="adsi_8h.html#c05f3bc1d5d41dc1f7d842f2363a809d">ADSI_MSG_DISPLAY</a>, 0);
<a name="l00969"></a>00969    <span class="keywordflow">return</span> 0;
<a name="l00970"></a>00970 
<a name="l00971"></a>00971 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="004f1151fe783aaa1a640cdf548d63a1"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_clear_screen" ref="004f1151fe783aaa1a640cdf548d63a1" args="(unsigned char *buf)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_clear_screen           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>buf</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00756">756</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00053">ADSI_CLEAR_SCREEN</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00757"></a>00757 {
<a name="l00758"></a>00758    <span class="keywordtype">int</span> bytes=0;
<a name="l00759"></a>00759 
<a name="l00760"></a>00760    <span class="comment">/* Message type */</span>
<a name="l00761"></a>00761    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#2b802e608a1a80b3d45a5d2a8ca56c20">ADSI_CLEAR_SCREEN</a>;
<a name="l00762"></a>00762 
<a name="l00763"></a>00763    <span class="comment">/* Reserve space for length */</span>
<a name="l00764"></a>00764    bytes++;
<a name="l00765"></a>00765 
<a name="l00766"></a>00766    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00767"></a>00767    <span class="keywordflow">return</span> bytes;
<a name="l00768"></a>00768 
<a name="l00769"></a>00769 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ea2672ce0989df0ff86dc5b17438225d"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_clear_soft_keys" ref="ea2672ce0989df0ff86dc5b17438225d" args="(unsigned char *buf)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_clear_soft_keys           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>buf</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00741">741</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00041">ADSI_CLEAR_SOFTKEY</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00742"></a>00742 {
<a name="l00743"></a>00743    <span class="keywordtype">int</span> bytes=0;
<a name="l00744"></a>00744 
<a name="l00745"></a>00745    <span class="comment">/* Message type */</span>
<a name="l00746"></a>00746    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#a1a97f163273389d4f123a8972304758">ADSI_CLEAR_SOFTKEY</a>;
<a name="l00747"></a>00747 
<a name="l00748"></a>00748    <span class="comment">/* Reserve space for length */</span>
<a name="l00749"></a>00749    bytes++;
<a name="l00750"></a>00750 
<a name="l00751"></a>00751    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00752"></a>00752    <span class="keywordflow">return</span> bytes;
<a name="l00753"></a>00753 
<a name="l00754"></a>00754 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="7e35f9e069738cb559faeff5e6e60894"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_connect_session" ref="7e35f9e069738cb559faeff5e6e60894" args="(unsigned char *buf, unsigned char *fdn, int ver)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_connect_session           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>fdn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>ver</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00506">506</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00047">ADSI_CONNECT_SESSION</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00507"></a>00507 {
<a name="l00508"></a>00508    <span class="keywordtype">int</span> bytes=0;
<a name="l00509"></a>00509    <span class="keywordtype">int</span> x;
<a name="l00510"></a>00510 
<a name="l00511"></a>00511    <span class="comment">/* Message type */</span>
<a name="l00512"></a>00512    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#def2e583349a7e42519a99f88cd7f342">ADSI_CONNECT_SESSION</a>;
<a name="l00513"></a>00513 
<a name="l00514"></a>00514    <span class="comment">/* Reserve space for length */</span>
<a name="l00515"></a>00515    bytes++;
<a name="l00516"></a>00516 
<a name="l00517"></a>00517    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#88588060e6ba48fcc882c19f052fecb8">fdn</a>) {
<a name="l00518"></a>00518       <span class="keywordflow">for</span> (x=0;x&lt;4;x++)
<a name="l00519"></a>00519          <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsistub_8c.html#88588060e6ba48fcc882c19f052fecb8">fdn</a>[x];
<a name="l00520"></a>00520       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#0812f14f43315611dd0ef462515c9d00">ver</a> &gt; -1)
<a name="l00521"></a>00521          <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsistub_8c.html#0812f14f43315611dd0ef462515c9d00">ver</a> &amp; 0xff;
<a name="l00522"></a>00522    }
<a name="l00523"></a>00523 
<a name="l00524"></a>00524    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00525"></a>00525    <span class="keywordflow">return</span> bytes;
<a name="l00526"></a>00526 
<a name="l00527"></a>00527 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e048374564a61a5585f43a5452c4bfd8"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_data_mode" ref="e048374564a61a5585f43a5452c4bfd8" args="(unsigned char *buf)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_data_mode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>buf</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00726">726</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00039">ADSI_SWITCH_TO_DATA</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00727"></a>00727 {
<a name="l00728"></a>00728    <span class="keywordtype">int</span> bytes=0;
<a name="l00729"></a>00729 
<a name="l00730"></a>00730    <span class="comment">/* Message type */</span>
<a name="l00731"></a>00731    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#a2af9d5a9f5381e865ce79763d1c3a20">ADSI_SWITCH_TO_DATA</a>;
<a name="l00732"></a>00732 
<a name="l00733"></a>00733    <span class="comment">/* Reserve space for length */</span>
<a name="l00734"></a>00734    bytes++;
<a name="l00735"></a>00735 
<a name="l00736"></a>00736    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00737"></a>00737    <span class="keywordflow">return</span> bytes;
<a name="l00738"></a>00738 
<a name="l00739"></a>00739 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="9f2336c7475367c8e2325fa6a20579b9"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_disconnect_session" ref="9f2336c7475367c8e2325fa6a20579b9" args="(unsigned char *buf)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_disconnect_session           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>buf</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00559">559</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00038">ADSI_DISC_SESSION</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00560"></a>00560 {
<a name="l00561"></a>00561    <span class="keywordtype">int</span> bytes=0;
<a name="l00562"></a>00562 
<a name="l00563"></a>00563    <span class="comment">/* Message type */</span>
<a name="l00564"></a>00564    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#f919b3be80f1ecf09115184ed8428ed6">ADSI_DISC_SESSION</a>;
<a name="l00565"></a>00565 
<a name="l00566"></a>00566    <span class="comment">/* Reserve space for length */</span>
<a name="l00567"></a>00567    bytes++;
<a name="l00568"></a>00568 
<a name="l00569"></a>00569    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00570"></a>00570    <span class="keywordflow">return</span> bytes;
<a name="l00571"></a>00571 
<a name="l00572"></a>00572 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="91a341a45a6673f5d2bacde9ac62bbb4"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_display" ref="91a341a45a6673f5d2bacde9ac62bbb4" args="(unsigned char *buf, int page, int line, int just, int wrap, char *col1, char *col2)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_display           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>page</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>line</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>just</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>wrap</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>col1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>col2</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00812">812</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00035">ADSI_LOAD_VIRTUAL_DISP</a>, and <a class="el" href="res__adsi_8c-source.html#l00456">ccopy()</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00814"></a>00814 {
<a name="l00815"></a>00815    <span class="keywordtype">int</span> bytes=0;
<a name="l00816"></a>00816 
<a name="l00817"></a>00817    <span class="comment">/* Sanity check line number */</span>
<a name="l00818"></a>00818 
<a name="l00819"></a>00819    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#71860c77c6745379b0d44304d66b6a13">page</a>) {
<a name="l00820"></a>00820       <span class="keywordflow">if</span> (<a class="code" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a> &gt; 4) <span class="keywordflow">return</span> -1;
<a name="l00821"></a>00821    } <span class="keywordflow">else</span> {
<a name="l00822"></a>00822       <span class="keywordflow">if</span> (<a class="code" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a> &gt; 33) <span class="keywordflow">return</span> -1;
<a name="l00823"></a>00823    }
<a name="l00824"></a>00824 
<a name="l00825"></a>00825    <span class="keywordflow">if</span> (<a class="code" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a> &lt; 1)
<a name="l00826"></a>00826       <span class="keywordflow">return</span> -1;
<a name="l00827"></a>00827    <span class="comment">/* Parameter type */</span>
<a name="l00828"></a>00828    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#8652c240edd2b678c5f530821f3b519e">ADSI_LOAD_VIRTUAL_DISP</a>;
<a name="l00829"></a>00829    
<a name="l00830"></a>00830    <span class="comment">/* Reserve space for size */</span>
<a name="l00831"></a>00831    bytes++;
<a name="l00832"></a>00832 
<a name="l00833"></a>00833    <span class="comment">/* Page and wrap indicator */</span>
<a name="l00834"></a>00834    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = ((<a class="code" href="adsistub_8c.html#71860c77c6745379b0d44304d66b6a13">page</a> &amp; 0x1) &lt;&lt; 7) | ((<a class="code" href="adsistub_8c.html#ccfc59a528a109fa4204e8ea06e8b68b">wrap</a> &amp; 0x1) &lt;&lt; 6) | (<a class="code" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a> &amp; 0x3f);
<a name="l00835"></a>00835 
<a name="l00836"></a>00836    <span class="comment">/* Justification */</span>
<a name="l00837"></a>00837    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = (just &amp; 0x3) &lt;&lt; 5;
<a name="l00838"></a>00838 
<a name="l00839"></a>00839    <span class="comment">/* Omit highlight mode definition */</span>
<a name="l00840"></a>00840    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = 0xff;
<a name="l00841"></a>00841 
<a name="l00842"></a>00842    <span class="comment">/* Primary column */</span>
<a name="l00843"></a>00843    bytes+= <a class="code" href="res__adsi_8c.html#ebce1e598fc6f0741769a7b9f1c8fec0">ccopy</a>(<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a> + bytes, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)col1, 20);
<a name="l00844"></a>00844 
<a name="l00845"></a>00845    <span class="comment">/* Delimiter */</span>
<a name="l00846"></a>00846    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = 0xff;
<a name="l00847"></a>00847    
<a name="l00848"></a>00848    <span class="comment">/* Secondary column */</span>
<a name="l00849"></a>00849    bytes += <a class="code" href="res__adsi_8c.html#ebce1e598fc6f0741769a7b9f1c8fec0">ccopy</a>(<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a> + bytes, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)col2, 20);
<a name="l00850"></a>00850 
<a name="l00851"></a>00851    <span class="comment">/* Update length */</span>
<a name="l00852"></a>00852    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00853"></a>00853    
<a name="l00854"></a>00854    <span class="keywordflow">return</span> bytes;
<a name="l00855"></a>00855 
<a name="l00856"></a>00856 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="0bcb7eca357e70d0f0f5f4c76a94d6a4"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_download_connect" ref="0bcb7eca357e70d0f0f5f4c76a94d6a4" args="(unsigned char *buf, char *service, unsigned char *fdn, unsigned char *sec, int ver)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_download_connect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>service</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>fdn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>sec</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>ver</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00529">529</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00062">ADSI_DOWNLOAD_CONNECT</a>, and <a class="el" href="res__adsi_8c-source.html#l00456">ccopy()</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00530"></a>00530 {
<a name="l00531"></a>00531    <span class="keywordtype">int</span> bytes=0;
<a name="l00532"></a>00532    <span class="keywordtype">int</span> x;
<a name="l00533"></a>00533 
<a name="l00534"></a>00534    <span class="comment">/* Message type */</span>
<a name="l00535"></a>00535    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#dfdde1a71367612adea78494100b5a71">ADSI_DOWNLOAD_CONNECT</a>;
<a name="l00536"></a>00536 
<a name="l00537"></a>00537    <span class="comment">/* Reserve space for length */</span>
<a name="l00538"></a>00538    bytes++;
<a name="l00539"></a>00539 
<a name="l00540"></a>00540    <span class="comment">/* Primary column */</span>
<a name="l00541"></a>00541    bytes+= <a class="code" href="res__adsi_8c.html#ebce1e598fc6f0741769a7b9f1c8fec0">ccopy</a>(<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a> + bytes, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code" href="adsistub_8c.html#aaabf0d39951f3e6c3e8a7911df524c2">service</a>, 18);
<a name="l00542"></a>00542 
<a name="l00543"></a>00543    <span class="comment">/* Delimiter */</span>
<a name="l00544"></a>00544    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = 0xff;
<a name="l00545"></a>00545    
<a name="l00546"></a>00546    <span class="keywordflow">for</span> (x=0;x&lt;4;x++) {
<a name="l00547"></a>00547       <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsistub_8c.html#88588060e6ba48fcc882c19f052fecb8">fdn</a>[x];
<a name="l00548"></a>00548    }
<a name="l00549"></a>00549    <span class="keywordflow">for</span> (x=0;x&lt;4;x++)
<a name="l00550"></a>00550       <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsistub_8c.html#74459ca3cf85a81df90da95ff6e7a207">sec</a>[x];
<a name="l00551"></a>00551    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsistub_8c.html#0812f14f43315611dd0ef462515c9d00">ver</a> &amp; 0xff;
<a name="l00552"></a>00552 
<a name="l00553"></a>00553    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00554"></a>00554 
<a name="l00555"></a>00555    <span class="keywordflow">return</span> bytes;
<a name="l00556"></a>00556 
<a name="l00557"></a>00557 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e61c405ec8abbba634308d0ffe235ef2"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_download_disconnect" ref="e61c405ec8abbba634308d0ffe235ef2" args="(unsigned char *buf)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_download_disconnect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>buf</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00797">797</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00063">ADSI_DOWNLOAD_DISC</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00798"></a>00798 {
<a name="l00799"></a>00799    <span class="keywordtype">int</span> bytes=0;
<a name="l00800"></a>00800 
<a name="l00801"></a>00801    <span class="comment">/* Message type */</span>
<a name="l00802"></a>00802    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#bcccbacc201e8533fa3c315511436b19">ADSI_DOWNLOAD_DISC</a>;
<a name="l00803"></a>00803 
<a name="l00804"></a>00804    <span class="comment">/* Reserve space for length */</span>
<a name="l00805"></a>00805    bytes++;
<a name="l00806"></a>00806 
<a name="l00807"></a>00807    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00808"></a>00808    <span class="keywordflow">return</span> bytes;
<a name="l00809"></a>00809 
<a name="l00810"></a>00810 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="5e9d361346d4604ccf2259b582a4bfab"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_end_download" ref="5e9d361346d4604ccf2259b582a4bfab" args="(struct ast_channel *chan)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_end_download           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>chan</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00357">357</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00030">ADSI_MSG_DOWNLOAD</a>, <a class="el" href="adsi_8h.html#9dd64d6f068eccbd5ed8d9563e6f6246">ast_adsi_download_disconnect</a>, <a class="el" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>, and <a class="el" href="adsistub_8c-source.html#l00065">buf</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00358"></a>00358 {
<a name="l00359"></a>00359    <span class="keywordtype">int</span> bytes;
<a name="l00360"></a>00360    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[256];
<a name="l00361"></a>00361         bytes = 0;
<a name="l00362"></a>00362         <span class="comment">/* Setup the resident soft key stuff, a piece at a time */</span>
<a name="l00363"></a>00363         <span class="comment">/* Upload what scripts we can for voicemail ahead of time */</span>
<a name="l00364"></a>00364         bytes += <a class="code" href="adsi_8h.html#9dd64d6f068eccbd5ed8d9563e6f6246">ast_adsi_download_disconnect</a>(buf + bytes);
<a name="l00365"></a>00365    <span class="keywordflow">if</span> (<a class="code" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>(chan, buf, bytes, <a class="code" href="adsi_8h.html#b6dc008f81e5ea297c9b33598c05da10">ADSI_MSG_DOWNLOAD</a>, 0))
<a name="l00366"></a>00366       <span class="keywordflow">return</span> -1;
<a name="l00367"></a>00367    <span class="keywordflow">return</span> 0;
<a name="l00368"></a>00368 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="888c74a2a821dcf22c935cdfe2f1d160"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_get_cpeid" ref="888c74a2a821dcf22c935cdfe2f1d160" args="(struct ast_channel *chan, unsigned char *cpeid, int voice)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_get_cpeid           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>cpeid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>voice</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00629">629</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00029">ADSI_MSG_DISPLAY</a>, <a class="el" href="adsi_8h.html#f93995ad6e203f3125eeb3ad31cff1f2">ast_adsi_data_mode</a>, <a class="el" href="adsi_8h.html#1b4d84e905ad025b19f50447eac6b0da">ast_adsi_query_cpeid</a>, <a class="el" href="adsi_8h.html#26b298c603f507a9304a066eea3643ca">ast_adsi_read_encoded_dtmf</a>, <a class="el" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>, <a class="el" href="adsi_8h.html#a66ef3c75b0f390e9371019d0400a6ba">ast_adsi_voice_mode</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="channel_8c-source.html#l01963">ast_waitfordigit()</a>, and <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00630"></a>00630 {
<a name="l00631"></a>00631    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[256];
<a name="l00632"></a>00632    <span class="keywordtype">int</span> bytes = 0;
<a name="l00633"></a>00633    <span class="keywordtype">int</span> res;
<a name="l00634"></a>00634    bytes += <a class="code" href="adsi_8h.html#f93995ad6e203f3125eeb3ad31cff1f2">ast_adsi_data_mode</a>(buf);
<a name="l00635"></a>00635    <a class="code" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>(chan, buf, bytes, <a class="code" href="adsi_8h.html#c05f3bc1d5d41dc1f7d842f2363a809d">ADSI_MSG_DISPLAY</a>, 0);
<a name="l00636"></a>00636 
<a name="l00637"></a>00637    bytes = 0;
<a name="l00638"></a>00638    bytes += <a class="code" href="adsi_8h.html#1b4d84e905ad025b19f50447eac6b0da">ast_adsi_query_cpeid</a>(buf);
<a name="l00639"></a>00639    <a class="code" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>(chan, buf, bytes, <a class="code" href="adsi_8h.html#c05f3bc1d5d41dc1f7d842f2363a809d">ADSI_MSG_DISPLAY</a>, 0);
<a name="l00640"></a>00640 
<a name="l00641"></a>00641    <span class="comment">/* Get response */</span>
<a name="l00642"></a>00642    memset(buf, 0, <span class="keyword">sizeof</span>(buf));
<a name="l00643"></a>00643    res = <a class="code" href="adsi_8h.html#26b298c603f507a9304a066eea3643ca">ast_adsi_read_encoded_dtmf</a>(chan, cpeid, 4);
<a name="l00644"></a>00644    <span class="keywordflow">if</span> (res != 4) {
<a name="l00645"></a>00645       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Got %d bytes back of encoded DTMF, expecting 4\n"</span>, res);
<a name="l00646"></a>00646       res = 0;
<a name="l00647"></a>00647    } <span class="keywordflow">else</span> {
<a name="l00648"></a>00648       res = 1;
<a name="l00649"></a>00649    }
<a name="l00650"></a>00650 
<a name="l00651"></a>00651    <span class="keywordflow">if</span> (voice) {
<a name="l00652"></a>00652       bytes = 0;
<a name="l00653"></a>00653       bytes += <a class="code" href="adsi_8h.html#a66ef3c75b0f390e9371019d0400a6ba">ast_adsi_voice_mode</a>(buf, 0);
<a name="l00654"></a>00654       <a class="code" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>(chan, buf, bytes, <a class="code" href="adsi_8h.html#c05f3bc1d5d41dc1f7d842f2363a809d">ADSI_MSG_DISPLAY</a>, 0);
<a name="l00655"></a>00655       <span class="comment">/* Ignore the resulting DTMF B announcing it's in voice mode */</span>
<a name="l00656"></a>00656       <a class="code" href="channel_8c.html#b02063e7425e3cfb63ba24edf8081835">ast_waitfordigit</a>(chan, 1000);
<a name="l00657"></a>00657    }
<a name="l00658"></a>00658    <span class="keywordflow">return</span> res;
<a name="l00659"></a>00659 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c0098b910e7cc67fbded9e41d8bf789d"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_get_cpeinfo" ref="c0098b910e7cc67fbded9e41d8bf789d" args="(struct ast_channel *chan, int *width, int *height, int *buttons, int voice)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_get_cpeinfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>width</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>height</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>buttons</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>voice</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00661">661</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00029">ADSI_MSG_DISPLAY</a>, <a class="el" href="adsi_8h.html#f93995ad6e203f3125eeb3ad31cff1f2">ast_adsi_data_mode</a>, <a class="el" href="adsi_8h.html#48043c367ae9b3a7acf3e9db65566087">ast_adsi_query_cpeinfo</a>, <a class="el" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>, <a class="el" href="adsi_8h.html#a66ef3c75b0f390e9371019d0400a6ba">ast_adsi_voice_mode</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="channel_8c-source.html#l03156">ast_readstring()</a>, <a class="el" href="channel_8c-source.html#l01963">ast_waitfordigit()</a>, and <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00662"></a>00662 {
<a name="l00663"></a>00663    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[256];
<a name="l00664"></a>00664    <span class="keywordtype">int</span> bytes = 0;
<a name="l00665"></a>00665    <span class="keywordtype">int</span> res;
<a name="l00666"></a>00666    bytes += <a class="code" href="adsi_8h.html#f93995ad6e203f3125eeb3ad31cff1f2">ast_adsi_data_mode</a>(buf);
<a name="l00667"></a>00667    <a class="code" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>(chan, buf, bytes, <a class="code" href="adsi_8h.html#c05f3bc1d5d41dc1f7d842f2363a809d">ADSI_MSG_DISPLAY</a>, 0);
<a name="l00668"></a>00668 
<a name="l00669"></a>00669    bytes = 0;
<a name="l00670"></a>00670    bytes += <a class="code" href="adsi_8h.html#48043c367ae9b3a7acf3e9db65566087">ast_adsi_query_cpeinfo</a>(buf);
<a name="l00671"></a>00671    <a class="code" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>(chan, buf, bytes, <a class="code" href="adsi_8h.html#c05f3bc1d5d41dc1f7d842f2363a809d">ADSI_MSG_DISPLAY</a>, 0);
<a name="l00672"></a>00672 
<a name="l00673"></a>00673    <span class="comment">/* Get width */</span>
<a name="l00674"></a>00674    memset(buf, 0, <span class="keyword">sizeof</span>(buf));
<a name="l00675"></a>00675    res = <a class="code" href="channel_8c.html#a548e6593830bf5eaf09c25bee20dc62">ast_readstring</a>(chan, (<span class="keywordtype">char</span> *)buf, 2, 1000, 500, <span class="stringliteral">""</span>);
<a name="l00676"></a>00676    <span class="keywordflow">if</span> (res &lt; 0)
<a name="l00677"></a>00677       <span class="keywordflow">return</span> res;
<a name="l00678"></a>00678    <span class="keywordflow">if</span> (strlen((<span class="keywordtype">char</span> *)buf) != 2) {
<a name="l00679"></a>00679       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Got %d bytes of width, expecting 2\n"</span>, res);
<a name="l00680"></a>00680       res = 0;
<a name="l00681"></a>00681    } <span class="keywordflow">else</span> {
<a name="l00682"></a>00682       res = 1;
<a name="l00683"></a>00683    }
<a name="l00684"></a>00684    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#eaae26a6fb20ed3ef54fb23bfa0b1fcc">width</a>)
<a name="l00685"></a>00685       *<a class="code" href="adsistub_8c.html#eaae26a6fb20ed3ef54fb23bfa0b1fcc">width</a> = atoi((<span class="keywordtype">char</span> *)buf);
<a name="l00686"></a>00686    <span class="comment">/* Get height */</span>
<a name="l00687"></a>00687    memset(buf, 0, <span class="keyword">sizeof</span>(buf));
<a name="l00688"></a>00688    <span class="keywordflow">if</span> (res) {
<a name="l00689"></a>00689       res = <a class="code" href="channel_8c.html#a548e6593830bf5eaf09c25bee20dc62">ast_readstring</a>(chan, (<span class="keywordtype">char</span> *)buf, 2, 1000, 500, <span class="stringliteral">""</span>);
<a name="l00690"></a>00690       <span class="keywordflow">if</span> (res &lt; 0)
<a name="l00691"></a>00691          <span class="keywordflow">return</span> res;
<a name="l00692"></a>00692       <span class="keywordflow">if</span> (strlen((<span class="keywordtype">char</span> *)buf) != 2) {
<a name="l00693"></a>00693          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Got %d bytes of height, expecting 2\n"</span>, res);
<a name="l00694"></a>00694          res = 0;
<a name="l00695"></a>00695       } <span class="keywordflow">else</span> {
<a name="l00696"></a>00696          res = 1;
<a name="l00697"></a>00697       }  
<a name="l00698"></a>00698       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#b435e227d5dd201e1768b2bcb2e0aa81">height</a>)
<a name="l00699"></a>00699          *<a class="code" href="adsistub_8c.html#b435e227d5dd201e1768b2bcb2e0aa81">height</a>= atoi((<span class="keywordtype">char</span> *)buf);
<a name="l00700"></a>00700    }
<a name="l00701"></a>00701    <span class="comment">/* Get buttons */</span>
<a name="l00702"></a>00702    memset(buf, 0, <span class="keyword">sizeof</span>(buf));
<a name="l00703"></a>00703    <span class="keywordflow">if</span> (res) {
<a name="l00704"></a>00704       res = <a class="code" href="channel_8c.html#a548e6593830bf5eaf09c25bee20dc62">ast_readstring</a>(chan, (<span class="keywordtype">char</span> *)buf, 1, 1000, 500, <span class="stringliteral">""</span>);
<a name="l00705"></a>00705       <span class="keywordflow">if</span> (res &lt; 0)
<a name="l00706"></a>00706          <span class="keywordflow">return</span> res;
<a name="l00707"></a>00707       <span class="keywordflow">if</span> (strlen((<span class="keywordtype">char</span> *)buf) != 1) {
<a name="l00708"></a>00708          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Got %d bytes of buttons, expecting 1\n"</span>, res);
<a name="l00709"></a>00709          res = 0;
<a name="l00710"></a>00710       } <span class="keywordflow">else</span> {
<a name="l00711"></a>00711          res = 1;
<a name="l00712"></a>00712       }  
<a name="l00713"></a>00713       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#02634eff3c24742057ecacbee91c4bbd">buttons</a>)
<a name="l00714"></a>00714          *<a class="code" href="adsistub_8c.html#02634eff3c24742057ecacbee91c4bbd">buttons</a> = atoi((<span class="keywordtype">char</span> *)buf);
<a name="l00715"></a>00715    }
<a name="l00716"></a>00716    <span class="keywordflow">if</span> (voice) {
<a name="l00717"></a>00717       bytes = 0;
<a name="l00718"></a>00718       bytes += <a class="code" href="adsi_8h.html#a66ef3c75b0f390e9371019d0400a6ba">ast_adsi_voice_mode</a>(buf, 0);
<a name="l00719"></a>00719       <a class="code" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>(chan, buf, bytes, <a class="code" href="adsi_8h.html#c05f3bc1d5d41dc1f7d842f2363a809d">ADSI_MSG_DISPLAY</a>, 0);
<a name="l00720"></a>00720       <span class="comment">/* Ignore the resulting DTMF B announcing it's in voice mode */</span>
<a name="l00721"></a>00721       <a class="code" href="channel_8c.html#b02063e7425e3cfb63ba24edf8081835">ast_waitfordigit</a>(chan, 1000);
<a name="l00722"></a>00722    }
<a name="l00723"></a>00723    <span class="keywordflow">return</span> res;
<a name="l00724"></a>00724 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b252f01056cc929d2cdf474860cb2891"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_input_control" ref="b252f01056cc929d2cdf474860cb2891" args="(unsigned char *buf, int page, int line, int display, int format, int just)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_input_control           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>page</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>line</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>display</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>just</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00858">858</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00042">ADSI_INPUT_CONTROL</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00859"></a>00859 {
<a name="l00860"></a>00860    <span class="keywordtype">int</span> bytes=0;
<a name="l00861"></a>00861 
<a name="l00862"></a>00862    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#71860c77c6745379b0d44304d66b6a13">page</a>) {
<a name="l00863"></a>00863       <span class="keywordflow">if</span> (<a class="code" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a> &gt; 4) <span class="keywordflow">return</span> -1;
<a name="l00864"></a>00864    } <span class="keywordflow">else</span> {
<a name="l00865"></a>00865       <span class="keywordflow">if</span> (<a class="code" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a> &gt; 33) <span class="keywordflow">return</span> -1;
<a name="l00866"></a>00866    }
<a name="l00867"></a>00867 
<a name="l00868"></a>00868    <span class="keywordflow">if</span> (<a class="code" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a> &lt; 1)
<a name="l00869"></a>00869       <span class="keywordflow">return</span> -1;
<a name="l00870"></a>00870 
<a name="l00871"></a>00871    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#7f8a05639ce931d3c1608e0931ff408f">ADSI_INPUT_CONTROL</a>;
<a name="l00872"></a>00872    bytes++;
<a name="l00873"></a>00873    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = ((<a class="code" href="adsistub_8c.html#71860c77c6745379b0d44304d66b6a13">page</a> &amp; 1) &lt;&lt; 7) | (<a class="code" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a> &amp; 0x3f);
<a name="l00874"></a>00874    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = ((display &amp; 1) &lt;&lt; 7) | ((just &amp; 0x3) &lt;&lt; 4) | (<a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a> &amp; 0x7);
<a name="l00875"></a>00875    
<a name="l00876"></a>00876    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00877"></a>00877    <span class="keywordflow">return</span> bytes;
<a name="l00878"></a>00878 
<a name="l00879"></a>00879 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="20ba0508073c28960333ed8ed790b19b"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_input_format" ref="20ba0508073c28960333ed8ed790b19b" args="(unsigned char *buf, int num, int dir, int wrap, char *format1, char *format2)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_input_format           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>wrap</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>format1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>format2</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00881">881</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00043">ADSI_INPUT_FORMAT</a>, and <a class="el" href="res__adsi_8c-source.html#l00456">ccopy()</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00882"></a>00882 {
<a name="l00883"></a>00883    <span class="keywordtype">int</span> bytes = 0;
<a name="l00884"></a>00884 
<a name="l00885"></a>00885    <span class="keywordflow">if</span> (!strlen((<span class="keywordtype">char</span> *)<a class="code" href="adsistub_8c.html#9b6e54888c4dccb752b4827eb66c5aed">format1</a>))
<a name="l00886"></a>00886       <span class="keywordflow">return</span> -1;
<a name="l00887"></a>00887 
<a name="l00888"></a>00888    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#e580bcd13de9bc1ad97495bc96071f7e">ADSI_INPUT_FORMAT</a>;
<a name="l00889"></a>00889    bytes++;
<a name="l00890"></a>00890    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = ((<a class="code" href="adsistub_8c.html#736007832d2167baaae763fd3a3f3cf1">dir</a> &amp; 1) &lt;&lt; 7) | ((<a class="code" href="adsistub_8c.html#ccfc59a528a109fa4204e8ea06e8b68b">wrap</a> &amp; 1) &lt;&lt; 6) | (<a class="code" href="adsistub_8c.html#0fc3cfbc27e91ea60a787de13dae3e3c">num</a> &amp; 0x7);
<a name="l00891"></a>00891    bytes += <a class="code" href="res__adsi_8c.html#ebce1e598fc6f0741769a7b9f1c8fec0">ccopy</a>(<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a> + bytes, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)format1, 20);
<a name="l00892"></a>00892    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = 0xff;
<a name="l00893"></a>00893    <span class="keywordflow">if</span> (format2 &amp;&amp; strlen((<span class="keywordtype">char</span> *)format2)) {
<a name="l00894"></a>00894       bytes += <a class="code" href="res__adsi_8c.html#ebce1e598fc6f0741769a7b9f1c8fec0">ccopy</a>(<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a> + bytes, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)format2, 20);
<a name="l00895"></a>00895    }
<a name="l00896"></a>00896    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00897"></a>00897    <span class="keywordflow">return</span> bytes;
<a name="l00898"></a>00898 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="553807459e28b5de53b7baece66c02f5"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_load_session" ref="553807459e28b5de53b7baece66c02f5" args="(struct ast_channel *chan, unsigned char *app, int ver, int data)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_load_session           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>app</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>ver</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00993">993</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00029">ADSI_MSG_DISPLAY</a>, <a class="el" href="adsi_8h.html#396ff777f6ce9b034afaade484455392">ast_adsi_connect_session</a>, <a class="el" href="adsi_8h.html#f93995ad6e203f3125eeb3ad31cff1f2">ast_adsi_data_mode</a>, <a class="el" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="channel_8c-source.html#l03156">ast_readstring()</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, and <a class="el" href="asterisk_8c-source.html#l00164">option_debug</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00994"></a>00994 {
<a name="l00995"></a>00995    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> dsp[256];
<a name="l00996"></a>00996    <span class="keywordtype">int</span> bytes;
<a name="l00997"></a>00997    <span class="keywordtype">int</span> res;
<a name="l00998"></a>00998    <span class="keywordtype">char</span> resp[2];
<a name="l00999"></a>00999 
<a name="l01000"></a>01000    memset(dsp, 0, <span class="keyword">sizeof</span>(dsp));
<a name="l01001"></a>01001 
<a name="l01002"></a>01002    <span class="comment">/* Connect to session */</span>
<a name="l01003"></a>01003    bytes = 0;
<a name="l01004"></a>01004    bytes += <a class="code" href="adsi_8h.html#396ff777f6ce9b034afaade484455392">ast_adsi_connect_session</a>(dsp + bytes, <a class="code" href="adsistub_8c.html#d2a57dc1d883fd21fb9951699df71cc7">app</a>, <a class="code" href="adsistub_8c.html#0812f14f43315611dd0ef462515c9d00">ver</a>);
<a name="l01005"></a>01005 
<a name="l01006"></a>01006    <span class="keywordflow">if</span> (<a class="code" href="structast__frame.html#8d777f385d3dfec8815d20f7496026dc">data</a>)
<a name="l01007"></a>01007       bytes += <a class="code" href="adsi_8h.html#f93995ad6e203f3125eeb3ad31cff1f2">ast_adsi_data_mode</a>(dsp + bytes);
<a name="l01008"></a>01008 
<a name="l01009"></a>01009    <span class="comment">/* Prepare key setup messages */</span>
<a name="l01010"></a>01010    <span class="keywordflow">if</span> (<a class="code" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>(chan, dsp, bytes, <a class="code" href="adsi_8h.html#c05f3bc1d5d41dc1f7d842f2363a809d">ADSI_MSG_DISPLAY</a>, 0))
<a name="l01011"></a>01011       <span class="keywordflow">return</span> -1;
<a name="l01012"></a>01012    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#d2a57dc1d883fd21fb9951699df71cc7">app</a>) {
<a name="l01013"></a>01013       res = <a class="code" href="channel_8c.html#a548e6593830bf5eaf09c25bee20dc62">ast_readstring</a>(chan, resp, 1, 1200, 1200, <span class="stringliteral">""</span>);
<a name="l01014"></a>01014       <span class="keywordflow">if</span> (res &lt; 0)
<a name="l01015"></a>01015          <span class="keywordflow">return</span> -1;
<a name="l01016"></a>01016       <span class="keywordflow">if</span> (res) {
<a name="l01017"></a>01017          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l01018"></a>01018             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"No response from CPE about version.  Assuming not there.\n"</span>);
<a name="l01019"></a>01019          <span class="keywordflow">return</span> 0;
<a name="l01020"></a>01020       }
<a name="l01021"></a>01021       <span class="keywordflow">if</span> (!strcmp(resp, <span class="stringliteral">"B"</span>)) {
<a name="l01022"></a>01022          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l01023"></a>01023             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"CPE has script '%s' version %d already loaded\n"</span>, <a class="code" href="adsistub_8c.html#d2a57dc1d883fd21fb9951699df71cc7">app</a>, <a class="code" href="adsistub_8c.html#0812f14f43315611dd0ef462515c9d00">ver</a>);
<a name="l01024"></a>01024          <span class="keywordflow">return</span> 1;
<a name="l01025"></a>01025       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(resp, <span class="stringliteral">"A"</span>)) {
<a name="l01026"></a>01026          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l01027"></a>01027             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"CPE hasn't script '%s' version %d already loaded\n"</span>, <a class="code" href="adsistub_8c.html#d2a57dc1d883fd21fb9951699df71cc7">app</a>, <a class="code" href="adsistub_8c.html#0812f14f43315611dd0ef462515c9d00">ver</a>);
<a name="l01028"></a>01028       } <span class="keywordflow">else</span> {
<a name="l01029"></a>01029          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Unexpected CPE response to script query: %s\n"</span>, resp);
<a name="l01030"></a>01030       }
<a name="l01031"></a>01031    } <span class="keywordflow">else</span>
<a name="l01032"></a>01032       <span class="keywordflow">return</span> 1;
<a name="l01033"></a>01033    <span class="keywordflow">return</span> 0;
<a name="l01034"></a>01034 
<a name="l01035"></a>01035 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="76365932347df60e1f0ab75e03fecc65"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_load_soft_key" ref="76365932347df60e1f0ab75e03fecc65" args="(unsigned char *buf, int key, const char *llabel, const char *slabel, char *ret, int data)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_load_soft_key           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>llabel</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>slabel</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>ret</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00467">467</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00033">ADSI_LOAD_SOFTKEY</a>, <a class="el" href="adsi_8h-source.html#l00084">ADSI_SWITCH_TO_DATA2</a>, and <a class="el" href="res__adsi_8c-source.html#l00456">ccopy()</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00468"></a>00468 {
<a name="l00469"></a>00469    <span class="keywordtype">int</span> bytes=0;
<a name="l00470"></a>00470 
<a name="l00471"></a>00471    <span class="comment">/* Abort if invalid key specified */</span>
<a name="l00472"></a>00472    <span class="keywordflow">if</span> ((<a class="code" href="func__channel_8c.html#87ef31d54f81072952c331d5c7339d8e">key</a> &lt; 2) || (<a class="code" href="func__channel_8c.html#87ef31d54f81072952c331d5c7339d8e">key</a> &gt; 33))
<a name="l00473"></a>00473       <span class="keywordflow">return</span> -1;
<a name="l00474"></a>00474    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#b03c29023a9016abe3c2ef12115ae15b">ADSI_LOAD_SOFTKEY</a>;
<a name="l00475"></a>00475    <span class="comment">/* Reserve for length */</span>
<a name="l00476"></a>00476    bytes++;
<a name="l00477"></a>00477    <span class="comment">/* Which key */</span>
<a name="l00478"></a>00478    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="func__channel_8c.html#87ef31d54f81072952c331d5c7339d8e">key</a>;
<a name="l00479"></a>00479 
<a name="l00480"></a>00480    <span class="comment">/* Carefully copy long label */</span>
<a name="l00481"></a>00481    bytes += <a class="code" href="res__adsi_8c.html#ebce1e598fc6f0741769a7b9f1c8fec0">ccopy</a>(<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a> + bytes, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)llabel, 18);
<a name="l00482"></a>00482 
<a name="l00483"></a>00483    <span class="comment">/* Place delimiter */</span>
<a name="l00484"></a>00484    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = 0xff;
<a name="l00485"></a>00485 
<a name="l00486"></a>00486    <span class="comment">/* Short label */</span>
<a name="l00487"></a>00487    bytes += <a class="code" href="res__adsi_8c.html#ebce1e598fc6f0741769a7b9f1c8fec0">ccopy</a>(<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a> + bytes, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)slabel, 7);
<a name="l00488"></a>00488 
<a name="l00489"></a>00489 
<a name="l00490"></a>00490    <span class="comment">/* If specified, copy return string */</span>
<a name="l00491"></a>00491    <span class="keywordflow">if</span> (ret) {
<a name="l00492"></a>00492       <span class="comment">/* Place delimiter */</span>
<a name="l00493"></a>00493       <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = 0xff;
<a name="l00494"></a>00494       <span class="keywordflow">if</span> (<a class="code" href="structast__frame.html#8d777f385d3dfec8815d20f7496026dc">data</a>)
<a name="l00495"></a>00495          <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#b83f915955d792685b362a7bff520dd1">ADSI_SWITCH_TO_DATA2</a>;
<a name="l00496"></a>00496       <span class="comment">/* Carefully copy return string */</span>
<a name="l00497"></a>00497       bytes += <a class="code" href="res__adsi_8c.html#ebce1e598fc6f0741769a7b9f1c8fec0">ccopy</a>(<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a> + bytes, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)ret, 20);
<a name="l00498"></a>00498 
<a name="l00499"></a>00499    }
<a name="l00500"></a>00500    <span class="comment">/* Replace parameter length */</span>
<a name="l00501"></a>00501    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00502"></a>00502    <span class="keywordflow">return</span> bytes;
<a name="l00503"></a>00503    
<a name="l00504"></a>00504 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="6ad10d8c66cead9f1a7acc02ee819489"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_print" ref="6ad10d8c66cead9f1a7acc02ee819489" args="(struct ast_channel *chan, char **lines, int *aligns, int voice)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_print           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>lines</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>aligns</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>voice</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00973">973</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00103">ADSI_INFO_PAGE</a>, <a class="el" href="adsi_8h-source.html#l00029">ADSI_MSG_DISPLAY</a>, <a class="el" href="adsi_8h.html#127627466eb6cc37f8d8a51413c1c7a1">ast_adsi_display</a>, <a class="el" href="adsi_8h.html#d18dcf73c9d04245baa29520ab6f73d6">ast_adsi_set_line</a>, <a class="el" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>, <a class="el" href="adsi_8h.html#a66ef3c75b0f390e9371019d0400a6ba">ast_adsi_voice_mode</a>, and <a class="el" href="channel_8c-source.html#l01963">ast_waitfordigit()</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00974"></a>00974 {
<a name="l00975"></a>00975    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[4096];
<a name="l00976"></a>00976    <span class="keywordtype">int</span> bytes=0;
<a name="l00977"></a>00977    <span class="keywordtype">int</span> res;
<a name="l00978"></a>00978    <span class="keywordtype">int</span> x;
<a name="l00979"></a>00979    <span class="keywordflow">for</span>(x=0;lines[x];x++) 
<a name="l00980"></a>00980       bytes += <a class="code" href="adsi_8h.html#127627466eb6cc37f8d8a51413c1c7a1">ast_adsi_display</a>(buf + bytes, <a class="code" href="adsi_8h.html#eace5ef2cdd5d4b49fa68283d962c0f8">ADSI_INFO_PAGE</a>, x+1, <a class="code" href="res__adsi_8c.html#3c53e90059d11bfa52688d4c8a6e0c7c">aligns</a>[x], 0, lines[x], <span class="stringliteral">""</span>);
<a name="l00981"></a>00981    bytes += <a class="code" href="adsi_8h.html#d18dcf73c9d04245baa29520ab6f73d6">ast_adsi_set_line</a>(buf + bytes, <a class="code" href="adsi_8h.html#eace5ef2cdd5d4b49fa68283d962c0f8">ADSI_INFO_PAGE</a>, 1);
<a name="l00982"></a>00982    <span class="keywordflow">if</span> (voice) {
<a name="l00983"></a>00983       bytes += <a class="code" href="adsi_8h.html#a66ef3c75b0f390e9371019d0400a6ba">ast_adsi_voice_mode</a>(buf + bytes, 0);
<a name="l00984"></a>00984    }
<a name="l00985"></a>00985    res = <a class="code" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>(chan, buf, bytes, <a class="code" href="adsi_8h.html#c05f3bc1d5d41dc1f7d842f2363a809d">ADSI_MSG_DISPLAY</a>, 0);
<a name="l00986"></a>00986    <span class="keywordflow">if</span> (voice) {
<a name="l00987"></a>00987       <span class="comment">/* Ignore the resulting DTMF B announcing it's in voice mode */</span>
<a name="l00988"></a>00988       <a class="code" href="channel_8c.html#b02063e7425e3cfb63ba24edf8081835">ast_waitfordigit</a>(chan, 1000);
<a name="l00989"></a>00989    }
<a name="l00990"></a>00990    <span class="keywordflow">return</span> res;
<a name="l00991"></a>00991 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ee64bfd44513a3fbb3bc5ebbcc859a4f"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_query_cpeid" ref="ee64bfd44513a3fbb3bc5ebbcc859a4f" args="(unsigned char *buf)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_query_cpeid           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>buf</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00574">574</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00055">ADSI_QUERY_CPEID</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00575"></a>00575 {
<a name="l00576"></a>00576    <span class="keywordtype">int</span> bytes = 0;
<a name="l00577"></a>00577    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#423e0e50209eb35ef281dcd818dad89b">ADSI_QUERY_CPEID</a>;
<a name="l00578"></a>00578    <span class="comment">/* Reserve space for length */</span>
<a name="l00579"></a>00579    bytes++;
<a name="l00580"></a>00580    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00581"></a>00581    <span class="keywordflow">return</span> bytes;
<a name="l00582"></a>00582 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c9a9c3ca08b37a3421235a625066065b"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_query_cpeinfo" ref="c9a9c3ca08b37a3421235a625066065b" args="(unsigned char *buf)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_query_cpeinfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>buf</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00584">584</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00054">ADSI_QUERY_CONFIG</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00585"></a>00585 {
<a name="l00586"></a>00586    <span class="keywordtype">int</span> bytes = 0;
<a name="l00587"></a>00587    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#ffa734688ddb0789fb10840ec23c0b1a">ADSI_QUERY_CONFIG</a>;
<a name="l00588"></a>00588    <span class="comment">/* Reserve space for length */</span>
<a name="l00589"></a>00589    bytes++;
<a name="l00590"></a>00590    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00591"></a>00591    <span class="keywordflow">return</span> bytes;
<a name="l00592"></a>00592 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="67a3aa20a91f08bcee84fc730891f8df"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_read_encoded_dtmf" ref="67a3aa20a91f08bcee84fc730891f8df" args="(struct ast_channel *chan, unsigned char *buf, int maxlen)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_read_encoded_dtmf           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>maxlen</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00594">594</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="channel_8c-source.html#l01963">ast_waitfordigit()</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00595"></a>00595 {
<a name="l00596"></a>00596    <span class="keywordtype">int</span> bytes = 0;
<a name="l00597"></a>00597    <span class="keywordtype">int</span> res;
<a name="l00598"></a>00598    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> current = 0;
<a name="l00599"></a>00599    <span class="keywordtype">int</span> gotstar = 0;
<a name="l00600"></a>00600    <span class="keywordtype">int</span> pos = 0;
<a name="l00601"></a>00601    memset(<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>));
<a name="l00602"></a>00602    <span class="keywordflow">while</span>(bytes &lt;= maxlen) {
<a name="l00603"></a>00603       <span class="comment">/* Wait up to a second for a digit */</span>
<a name="l00604"></a>00604       res = <a class="code" href="channel_8c.html#b02063e7425e3cfb63ba24edf8081835">ast_waitfordigit</a>(chan, 1000);
<a name="l00605"></a>00605       <span class="keywordflow">if</span> (!res)
<a name="l00606"></a>00606          <span class="keywordflow">break</span>;
<a name="l00607"></a>00607       <span class="keywordflow">if</span> (res == <span class="charliteral">'*'</span>) {
<a name="l00608"></a>00608          gotstar = 1;   
<a name="l00609"></a>00609          <span class="keywordflow">continue</span>;
<a name="l00610"></a>00610       }
<a name="l00611"></a>00611       <span class="comment">/* Ignore anything other than a digit */</span>
<a name="l00612"></a>00612       <span class="keywordflow">if</span> ((res &lt; <span class="charliteral">'0'</span>) || (res &gt; <span class="charliteral">'9'</span>))
<a name="l00613"></a>00613          <span class="keywordflow">continue</span>;
<a name="l00614"></a>00614       res -= <span class="charliteral">'0'</span>;
<a name="l00615"></a>00615       <span class="keywordflow">if</span> (gotstar)
<a name="l00616"></a>00616          res += 9;
<a name="l00617"></a>00617       <span class="keywordflow">if</span> (pos)  {
<a name="l00618"></a>00618          pos = 0;
<a name="l00619"></a>00619          <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = (res &lt;&lt; 4) | current;
<a name="l00620"></a>00620       } <span class="keywordflow">else</span> {
<a name="l00621"></a>00621          pos = 1;
<a name="l00622"></a>00622          current = res;
<a name="l00623"></a>00623       }
<a name="l00624"></a>00624       gotstar = 0;
<a name="l00625"></a>00625    }
<a name="l00626"></a>00626    <span class="keywordflow">return</span> bytes;
<a name="l00627"></a>00627 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="61fa65b5b483e58fef84feb1d6b7f6af"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_set_keys" ref="61fa65b5b483e58fef84feb1d6b7f6af" args="(unsigned char *buf, unsigned char *keys)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_set_keys           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>keys</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00900">900</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00034">ADSI_INIT_SOFTKEY_LINE</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00901"></a>00901 {
<a name="l00902"></a>00902    <span class="keywordtype">int</span> bytes=0;
<a name="l00903"></a>00903    <span class="keywordtype">int</span> x;
<a name="l00904"></a>00904    <span class="comment">/* Message type */</span>
<a name="l00905"></a>00905    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#12fcb0ce6c41006c1a69fd2eb6eead1a">ADSI_INIT_SOFTKEY_LINE</a>;
<a name="l00906"></a>00906    <span class="comment">/* Space for size */</span>
<a name="l00907"></a>00907    bytes++;
<a name="l00908"></a>00908    <span class="comment">/* Key definitions */</span>
<a name="l00909"></a>00909    <span class="keywordflow">for</span> (x=0;x&lt;6;x++)
<a name="l00910"></a>00910       <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = (<a class="code" href="res__crypto_8c.html#14f802e1fba977727845e8872c1743a7">keys</a>[x] &amp; 0x3f) ? <a class="code" href="res__crypto_8c.html#14f802e1fba977727845e8872c1743a7">keys</a>[x] : (<a class="code" href="res__crypto_8c.html#14f802e1fba977727845e8872c1743a7">keys</a>[x] | 0x1);
<a name="l00911"></a>00911    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00912"></a>00912    <span class="keywordflow">return</span> bytes;
<a name="l00913"></a>00913 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="38a795f94e04dce0df355b2d1b55aa8c"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_set_line" ref="38a795f94e04dce0df355b2d1b55aa8c" args="(unsigned char *buf, int page, int line)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_set_line           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>page</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>line</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00915">915</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00036">ADSI_LINE_CONTROL</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00916"></a>00916 {
<a name="l00917"></a>00917    <span class="keywordtype">int</span> bytes=0;
<a name="l00918"></a>00918 
<a name="l00919"></a>00919    <span class="comment">/* Sanity check line number */</span>
<a name="l00920"></a>00920 
<a name="l00921"></a>00921    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#71860c77c6745379b0d44304d66b6a13">page</a>) {
<a name="l00922"></a>00922       <span class="keywordflow">if</span> (<a class="code" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a> &gt; 4) <span class="keywordflow">return</span> -1;
<a name="l00923"></a>00923    } <span class="keywordflow">else</span> {
<a name="l00924"></a>00924       <span class="keywordflow">if</span> (<a class="code" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a> &gt; 33) <span class="keywordflow">return</span> -1;
<a name="l00925"></a>00925    }
<a name="l00926"></a>00926 
<a name="l00927"></a>00927    <span class="keywordflow">if</span> (<a class="code" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a> &lt; 1)
<a name="l00928"></a>00928       <span class="keywordflow">return</span> -1;
<a name="l00929"></a>00929    <span class="comment">/* Parameter type */</span>
<a name="l00930"></a>00930    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#a53b428ca17d8d37e1636473ce63b536">ADSI_LINE_CONTROL</a>;
<a name="l00931"></a>00931    
<a name="l00932"></a>00932    <span class="comment">/* Reserve space for size */</span>
<a name="l00933"></a>00933    bytes++;
<a name="l00934"></a>00934 
<a name="l00935"></a>00935    <span class="comment">/* Page and line */</span>
<a name="l00936"></a>00936    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = ((<a class="code" href="adsistub_8c.html#71860c77c6745379b0d44304d66b6a13">page</a> &amp; 0x1) &lt;&lt; 7) | (<a class="code" href="manager_8h.html#6438c669e0d0de98e6929c2cc0fac474">line</a> &amp; 0x3f);
<a name="l00937"></a>00937 
<a name="l00938"></a>00938    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00939"></a>00939    <span class="keywordflow">return</span> bytes;
<a name="l00940"></a>00940 
<a name="l00941"></a>00941 };
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="9d692a815a62e805989fe57c9ca8ad84"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_transmit_message" ref="9d692a815a62e805989fe57c9ca8ad84" args="(struct ast_channel *chan, unsigned char *msg, int msglen, int msgtype)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_transmit_message           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>msglen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>msgtype</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00451">451</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00452"></a>00452 {
<a name="l00453"></a>00453    <span class="keywordflow">return</span> <a class="code" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>(chan, <a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, <a class="code" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a>, <a class="code" href="adsistub_8c.html#b7aba3f31a451319eaaaac1ab12415fc">msgtype</a>, 1);
<a name="l00454"></a>00454 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d3e747c68ea4657d061ec60bd7358715"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_transmit_message_full" ref="d3e747c68ea4657d061ec60bd7358715" args="(struct ast_channel *chan, unsigned char *msg, int msglen, int msgtype, int dowait)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_transmit_message_full           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>msglen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>msgtype</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dowait</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00370">370</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="res__adsi_8c-source.html#l00198">__adsi_transmit_messages()</a>, <a class="el" href="res__adsi_8c-source.html#l00063">ADSI_FLAG_DATAMODE</a>, <a class="el" href="adsi_8h-source.html#l00039">ADSI_SWITCH_TO_DATA</a>, <a class="el" href="adsi_8h-source.html#l00040">ADSI_SWITCH_TO_VOICE</a>, <a class="el" href="channel_8h-source.html#l00452">ast_channel::adsicpe</a>, <a class="el" href="frame_8h-source.html#l00225">AST_FORMAT_ULAW</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="channel_8c-source.html#l01048">ast_safe_sleep()</a>, <a class="el" href="channel_8c-source.html#l02920">ast_set_read_format()</a>, <a class="el" href="channel_8c-source.html#l02926">ast_set_write_format()</a>, <a class="el" href="file_8c-source.html#l00131">ast_stopstream()</a>, <a class="el" href="channel_8c-source.html#l01963">ast_waitfordigit()</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="asterisk_8c-source.html#l00164">option_debug</a>, <a class="el" href="channel_8h-source.html#l00477">ast_channel::readformat</a>, and <a class="el" href="channel_8h-source.html#l00478">ast_channel::writeformat</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00371"></a>00371 {
<a name="l00372"></a>00372    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *msgs[5] = { NULL, NULL, NULL, NULL, NULL };
<a name="l00373"></a>00373    <span class="keywordtype">int</span> msglens[5];
<a name="l00374"></a>00374    <span class="keywordtype">int</span> msgtypes[5];
<a name="l00375"></a>00375    <span class="keywordtype">int</span> newdatamode;
<a name="l00376"></a>00376    <span class="keywordtype">int</span> res;
<a name="l00377"></a>00377    <span class="keywordtype">int</span> x;
<a name="l00378"></a>00378    <span class="keywordtype">int</span> writeformat, readformat;
<a name="l00379"></a>00379    <span class="keywordtype">int</span> waitforswitch = 0;
<a name="l00380"></a>00380 
<a name="l00381"></a>00381    writeformat = chan-&gt;<a class="code" href="structast__channel.html#45a38ca474a4f1df88fe13d68bbb0b44">writeformat</a>;
<a name="l00382"></a>00382    readformat = chan-&gt;<a class="code" href="structast__channel.html#c9d2702466074da94d21f26822247ed8">readformat</a>;
<a name="l00383"></a>00383 
<a name="l00384"></a>00384    newdatamode = chan-&gt;<a class="code" href="structast__channel.html#89c64e070078b5f6dcd6e241d2eb986e">adsicpe</a> &amp; <a class="code" href="res__adsi_8c.html#dcac4b80957623c8d130d8816501b774">ADSI_FLAG_DATAMODE</a>;
<a name="l00385"></a>00385 
<a name="l00386"></a>00386    <span class="keywordflow">for</span> (x=0;x&lt;<a class="code" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a>;x+=(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>[x+1]+2)) {
<a name="l00387"></a>00387       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>[x] == <a class="code" href="adsi_8h.html#a2af9d5a9f5381e865ce79763d1c3a20">ADSI_SWITCH_TO_DATA</a>) {
<a name="l00388"></a>00388          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00389"></a>00389             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"Switch to data is sent!\n"</span>);
<a name="l00390"></a>00390          waitforswitch++;
<a name="l00391"></a>00391          newdatamode = <a class="code" href="res__adsi_8c.html#dcac4b80957623c8d130d8816501b774">ADSI_FLAG_DATAMODE</a>;
<a name="l00392"></a>00392       }
<a name="l00393"></a>00393       
<a name="l00394"></a>00394       <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>[x] == <a class="code" href="adsi_8h.html#515ea6c1ecb54c90ea9603c4e25ae951">ADSI_SWITCH_TO_VOICE</a>) {
<a name="l00395"></a>00395          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00396"></a>00396             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"Switch to voice is sent!\n"</span>);
<a name="l00397"></a>00397          waitforswitch++;
<a name="l00398"></a>00398          newdatamode = 0;
<a name="l00399"></a>00399       }
<a name="l00400"></a>00400    }
<a name="l00401"></a>00401    msgs[0] = <a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>;
<a name="l00402"></a>00402 
<a name="l00403"></a>00403    msglens[0] = <a class="code" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a>;
<a name="l00404"></a>00404    msgtypes[0] = <a class="code" href="adsistub_8c.html#b7aba3f31a451319eaaaac1ab12415fc">msgtype</a>;
<a name="l00405"></a>00405 
<a name="l00406"></a>00406    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a> &gt; 253) {
<a name="l00407"></a>00407       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Can't send ADSI message of %d bytes, too large\n"</span>, <a class="code" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a>);
<a name="l00408"></a>00408       <span class="keywordflow">return</span> -1;
<a name="l00409"></a>00409    }
<a name="l00410"></a>00410 
<a name="l00411"></a>00411    <a class="code" href="file_8c.html#460c61941bbb0132a2513ec9d5529e0c">ast_stopstream</a>(chan);
<a name="l00412"></a>00412 
<a name="l00413"></a>00413    <span class="keywordflow">if</span> (<a class="code" href="channel_8c.html#ebcd70a10759c189c265a97b5a9f78c3">ast_set_write_format</a>(chan, <a class="code" href="frame_8h.html#a71706b2c864525ec1c9fcf925ae3802">AST_FORMAT_ULAW</a>)) {
<a name="l00414"></a>00414       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Unable to set write format to ULAW\n"</span>);
<a name="l00415"></a>00415       <span class="keywordflow">return</span> -1;
<a name="l00416"></a>00416    }
<a name="l00417"></a>00417 
<a name="l00418"></a>00418    <span class="keywordflow">if</span> (<a class="code" href="channel_8c.html#8f102047453fca4cd6813696be1b9843">ast_set_read_format</a>(chan, <a class="code" href="frame_8h.html#a71706b2c864525ec1c9fcf925ae3802">AST_FORMAT_ULAW</a>)) {
<a name="l00419"></a>00419       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Unable to set read format to ULAW\n"</span>);
<a name="l00420"></a>00420       <span class="keywordflow">if</span> (writeformat) {
<a name="l00421"></a>00421          <span class="keywordflow">if</span> (<a class="code" href="channel_8c.html#ebcd70a10759c189c265a97b5a9f78c3">ast_set_write_format</a>(chan, writeformat)) 
<a name="l00422"></a>00422             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Unable to restore write format to %d\n"</span>, writeformat);
<a name="l00423"></a>00423       }
<a name="l00424"></a>00424       <span class="keywordflow">return</span> -1;
<a name="l00425"></a>00425    }
<a name="l00426"></a>00426    res = <a class="code" href="res__adsi_8c.html#d325b5e29195ed04114912fc7b7c155b">__adsi_transmit_messages</a>(chan, msgs, msglens, msgtypes);
<a name="l00427"></a>00427 
<a name="l00428"></a>00428    <span class="keywordflow">if</span> (dowait) {
<a name="l00429"></a>00429       <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00430"></a>00430          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"Wait for switch is '%d'\n"</span>, waitforswitch);
<a name="l00431"></a>00431       <span class="keywordflow">while</span> (waitforswitch-- &amp;&amp; ((res = <a class="code" href="channel_8c.html#b02063e7425e3cfb63ba24edf8081835">ast_waitfordigit</a>(chan, 1000)) &gt; 0)) { 
<a name="l00432"></a>00432          res = 0; 
<a name="l00433"></a>00433          <span class="keywordflow">if</span> (option_debug)
<a name="l00434"></a>00434             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"Waiting for 'B'...\n"</span>);
<a name="l00435"></a>00435       }
<a name="l00436"></a>00436    }
<a name="l00437"></a>00437    
<a name="l00438"></a>00438    <span class="keywordflow">if</span> (!res)
<a name="l00439"></a>00439       chan-&gt;<a class="code" href="structast__channel.html#89c64e070078b5f6dcd6e241d2eb986e">adsicpe</a> = (chan-&gt;<a class="code" href="structast__channel.html#89c64e070078b5f6dcd6e241d2eb986e">adsicpe</a> &amp; ~<a class="code" href="res__adsi_8c.html#dcac4b80957623c8d130d8816501b774">ADSI_FLAG_DATAMODE</a>) | newdatamode;
<a name="l00440"></a>00440 
<a name="l00441"></a>00441    <span class="keywordflow">if</span> (writeformat)
<a name="l00442"></a>00442       <a class="code" href="channel_8c.html#ebcd70a10759c189c265a97b5a9f78c3">ast_set_write_format</a>(chan, writeformat);
<a name="l00443"></a>00443    <span class="keywordflow">if</span> (readformat)
<a name="l00444"></a>00444       <a class="code" href="channel_8c.html#8f102047453fca4cd6813696be1b9843">ast_set_read_format</a>(chan, readformat);
<a name="l00445"></a>00445 
<a name="l00446"></a>00446    <span class="keywordflow">if</span> (!res)
<a name="l00447"></a>00447       res = <a class="code" href="channel_8c.html#24a36b04429e3cdef17e161363c13900">ast_safe_sleep</a>(chan, 100 );
<a name="l00448"></a>00448    <span class="keywordflow">return</span> res;
<a name="l00449"></a>00449 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="1616f9a6c8a99129c9560ef439f708b9"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_unload_session" ref="1616f9a6c8a99129c9560ef439f708b9" args="(struct ast_channel *chan)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_unload_session           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>chan</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l01037">1037</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00029">ADSI_MSG_DISPLAY</a>, <a class="el" href="adsi_8h.html#6fb7b0ca78b73025ab309f62b2c07b87">ast_adsi_disconnect_session</a>, <a class="el" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>, and <a class="el" href="adsi_8h.html#a66ef3c75b0f390e9371019d0400a6ba">ast_adsi_voice_mode</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l01038"></a>01038 {
<a name="l01039"></a>01039    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> dsp[256];
<a name="l01040"></a>01040    <span class="keywordtype">int</span> bytes;
<a name="l01041"></a>01041 
<a name="l01042"></a>01042    memset(dsp, 0, <span class="keyword">sizeof</span>(dsp));
<a name="l01043"></a>01043 
<a name="l01044"></a>01044    <span class="comment">/* Connect to session */</span>
<a name="l01045"></a>01045    bytes = 0;
<a name="l01046"></a>01046    bytes += <a class="code" href="adsi_8h.html#6fb7b0ca78b73025ab309f62b2c07b87">ast_adsi_disconnect_session</a>(dsp + bytes);
<a name="l01047"></a>01047    bytes += <a class="code" href="adsi_8h.html#a66ef3c75b0f390e9371019d0400a6ba">ast_adsi_voice_mode</a>(dsp + bytes, 0);
<a name="l01048"></a>01048 
<a name="l01049"></a>01049    <span class="comment">/* Prepare key setup messages */</span>
<a name="l01050"></a>01050    <span class="keywordflow">if</span> (<a class="code" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>(chan, dsp, bytes, <a class="code" href="adsi_8h.html#c05f3bc1d5d41dc1f7d842f2363a809d">ADSI_MSG_DISPLAY</a>, 0))
<a name="l01051"></a>01051       <span class="keywordflow">return</span> -1;
<a name="l01052"></a>01052    <span class="keywordflow">return</span> 0;
<a name="l01053"></a>01053 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="16e3797831731903ef49cd748508bff0"></a><!-- doxytag: member="res_adsi.c::_ast_adsi_voice_mode" ref="16e3797831731903ef49cd748508bff0" args="(unsigned char *buf, int when)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int _ast_adsi_voice_mode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>when</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00771">771</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00040">ADSI_SWITCH_TO_VOICE</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00772"></a>00772 {
<a name="l00773"></a>00773    <span class="keywordtype">int</span> bytes=0;
<a name="l00774"></a>00774 
<a name="l00775"></a>00775    <span class="comment">/* Message type */</span>
<a name="l00776"></a>00776    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = <a class="code" href="adsi_8h.html#515ea6c1ecb54c90ea9603c4e25ae951">ADSI_SWITCH_TO_VOICE</a>;
<a name="l00777"></a>00777 
<a name="l00778"></a>00778    <span class="comment">/* Reserve space for length */</span>
<a name="l00779"></a>00779    bytes++;
<a name="l00780"></a>00780 
<a name="l00781"></a>00781    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[bytes++] = when &amp; 0x7f;
<a name="l00782"></a>00782 
<a name="l00783"></a>00783    <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[1] = bytes - 2;
<a name="l00784"></a>00784    <span class="keywordflow">return</span> bytes;
<a name="l00785"></a>00785 
<a name="l00786"></a>00786 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a0a4868be37e55dd89b5d5ced6234055"></a><!-- doxytag: member="res_adsi.c::adsi_careful_send" ref="a0a4868be37e55dd89b5d5ced6234055" args="(struct ast_channel *chan, unsigned char *buf, int len, int *remainder)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int adsi_careful_send           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>remainder</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00127">127</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="frame_8h-source.html#l00225">AST_FORMAT_ULAW</a>, <a class="el" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f9264fc4720a7b3982e2d4bf246fe3d9924">AST_FRAME_VOICE</a>, <a class="el" href="frame_8h-source.html#l00396">ast_frfree()</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="channel_8c-source.html#l02438">ast_read()</a>, <a class="el" href="channel_8c-source.html#l01952">ast_waitfor()</a>, <a class="el" href="channel_8c-source.html#l02660">ast_write()</a>, <a class="el" href="frame_8h-source.html#l00135">ast_frame::datalen</a>, <a class="el" href="frame_8h-source.html#l00131">ast_frame::frametype</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, and <a class="el" href="frame_8h-source.html#l00133">ast_frame::subclass</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l00198">__adsi_transmit_messages()</a>.<div class="fragment"><pre class="fragment"><a name="l00128"></a>00128 {
<a name="l00129"></a>00129    <span class="comment">/* Sends carefully on a full duplex channel by using reading for</span>
<a name="l00130"></a>00130 <span class="comment">      timing */</span>
<a name="l00131"></a>00131    <span class="keyword">struct </span><a class="code" href="structast__frame.html">ast_frame</a> *inf, outf;
<a name="l00132"></a>00132    <span class="keywordtype">int</span> amt;
<a name="l00133"></a>00133 
<a name="l00134"></a>00134    <span class="comment">/* Zero out our outgoing frame */</span>
<a name="l00135"></a>00135    memset(&amp;outf, 0, <span class="keyword">sizeof</span>(outf));
<a name="l00136"></a>00136 
<a name="l00137"></a>00137    <span class="keywordflow">if</span> (remainder &amp;&amp; *remainder) {
<a name="l00138"></a>00138       amt = <a class="code" href="utils_8h.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>;
<a name="l00139"></a>00139 
<a name="l00140"></a>00140       <span class="comment">/* Send remainder if provided */</span>
<a name="l00141"></a>00141       <span class="keywordflow">if</span> (amt &gt; *remainder)
<a name="l00142"></a>00142          amt = *remainder;
<a name="l00143"></a>00143       <span class="keywordflow">else</span>
<a name="l00144"></a>00144          *remainder = *remainder - amt;
<a name="l00145"></a>00145       outf.<a class="code" href="structast__frame.html#9574009b02f8256934a1a25cbac10e1d">frametype</a> = <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f9264fc4720a7b3982e2d4bf246fe3d9924">AST_FRAME_VOICE</a>;
<a name="l00146"></a>00146       outf.<a class="code" href="structast__frame.html#c00578b472e008b51fd24237785fa428">subclass</a> = <a class="code" href="frame_8h.html#a71706b2c864525ec1c9fcf925ae3802">AST_FORMAT_ULAW</a>;
<a name="l00147"></a>00147       outf.<a class="code" href="structast__frame.html#8d777f385d3dfec8815d20f7496026dc">data</a> = <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>;
<a name="l00148"></a>00148       outf.<a class="code" href="structast__frame.html#106553e2afb20bec4268dd6bd02c952d">datalen</a> = amt;
<a name="l00149"></a>00149       outf.<a class="code" href="structast__frame.html#6ef9161b900632671022358216c7dfe7">samples</a> = amt;
<a name="l00150"></a>00150       <span class="keywordflow">if</span> (<a class="code" href="channel_8c.html#57a74c4c7b7e25ad61a4f461e3c73158">ast_write</a>(chan, &amp;outf)) {
<a name="l00151"></a>00151          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Failed to carefully write frame\n"</span>);
<a name="l00152"></a>00152          <span class="keywordflow">return</span> -1;
<a name="l00153"></a>00153       }
<a name="l00154"></a>00154       <span class="comment">/* Update pointers and lengths */</span>
<a name="l00155"></a>00155       <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a> += amt;
<a name="l00156"></a>00156       <a class="code" href="utils_8h.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a> -= amt;
<a name="l00157"></a>00157    }
<a name="l00158"></a>00158 
<a name="l00159"></a>00159    <span class="keywordflow">while</span>(<a class="code" href="utils_8h.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>) {
<a name="l00160"></a>00160       amt = <a class="code" href="utils_8h.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>;
<a name="l00161"></a>00161       <span class="comment">/* If we don't get anything at all back in a second, forget</span>
<a name="l00162"></a>00162 <span class="comment">         about it */</span>
<a name="l00163"></a>00163       <span class="keywordflow">if</span> (<a class="code" href="channel_8c.html#e02dcdf40023f275d4561a930e7a7fc9">ast_waitfor</a>(chan, 1000) &lt; 1)
<a name="l00164"></a>00164          <span class="keywordflow">return</span> -1;
<a name="l00165"></a>00165       inf = <a class="code" href="channel_8c.html#1446a8c0bddf626bf26b000fbeae117f">ast_read</a>(chan);
<a name="l00166"></a>00166       <span class="comment">/* Detect hangup */</span>
<a name="l00167"></a>00167       <span class="keywordflow">if</span> (!inf)
<a name="l00168"></a>00168          <span class="keywordflow">return</span> -1;
<a name="l00169"></a>00169       <span class="keywordflow">if</span> (inf-&gt;<a class="code" href="structast__frame.html#9574009b02f8256934a1a25cbac10e1d">frametype</a> == <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f9264fc4720a7b3982e2d4bf246fe3d9924">AST_FRAME_VOICE</a>) {
<a name="l00170"></a>00170          <span class="comment">/* Read a voice frame */</span>
<a name="l00171"></a>00171          <span class="keywordflow">if</span> (inf-&gt;<a class="code" href="structast__frame.html#c00578b472e008b51fd24237785fa428">subclass</a> != <a class="code" href="frame_8h.html#a71706b2c864525ec1c9fcf925ae3802">AST_FORMAT_ULAW</a>) {
<a name="l00172"></a>00172             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Channel not in ulaw?\n"</span>);
<a name="l00173"></a>00173             <span class="keywordflow">return</span> -1;
<a name="l00174"></a>00174          }
<a name="l00175"></a>00175          <span class="comment">/* Send no more than they sent us */</span>
<a name="l00176"></a>00176          <span class="keywordflow">if</span> (amt &gt; inf-&gt;<a class="code" href="structast__frame.html#106553e2afb20bec4268dd6bd02c952d">datalen</a>)
<a name="l00177"></a>00177             amt = inf-&gt;<a class="code" href="structast__frame.html#106553e2afb20bec4268dd6bd02c952d">datalen</a>;
<a name="l00178"></a>00178          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (remainder)
<a name="l00179"></a>00179             *remainder = inf-&gt;<a class="code" href="structast__frame.html#106553e2afb20bec4268dd6bd02c952d">datalen</a> - amt;
<a name="l00180"></a>00180          outf.<a class="code" href="structast__frame.html#9574009b02f8256934a1a25cbac10e1d">frametype</a> = <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f9264fc4720a7b3982e2d4bf246fe3d9924">AST_FRAME_VOICE</a>;
<a name="l00181"></a>00181          outf.<a class="code" href="structast__frame.html#c00578b472e008b51fd24237785fa428">subclass</a> = <a class="code" href="frame_8h.html#a71706b2c864525ec1c9fcf925ae3802">AST_FORMAT_ULAW</a>;
<a name="l00182"></a>00182          outf.<a class="code" href="structast__frame.html#8d777f385d3dfec8815d20f7496026dc">data</a> = <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>;
<a name="l00183"></a>00183          outf.<a class="code" href="structast__frame.html#106553e2afb20bec4268dd6bd02c952d">datalen</a> = amt;
<a name="l00184"></a>00184          outf.<a class="code" href="structast__frame.html#6ef9161b900632671022358216c7dfe7">samples</a> = amt;
<a name="l00185"></a>00185          <span class="keywordflow">if</span> (<a class="code" href="channel_8c.html#57a74c4c7b7e25ad61a4f461e3c73158">ast_write</a>(chan, &amp;outf)) {
<a name="l00186"></a>00186             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Failed to carefully write frame\n"</span>);
<a name="l00187"></a>00187             <span class="keywordflow">return</span> -1;
<a name="l00188"></a>00188          }
<a name="l00189"></a>00189          <span class="comment">/* Update pointers and lengths */</span>
<a name="l00190"></a>00190          <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a> += amt;
<a name="l00191"></a>00191          <a class="code" href="utils_8h.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a> -= amt;
<a name="l00192"></a>00192       }
<a name="l00193"></a>00193       <a class="code" href="frame_8h.html#506c759ec4950e7f7465e8f090a6252b">ast_frfree</a>(inf);
<a name="l00194"></a>00194    }
<a name="l00195"></a>00195    <span class="keywordflow">return</span> 0;
<a name="l00196"></a>00196 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="0524fc30b67374877d22ea616aa4780a"></a><!-- doxytag: member="res_adsi.c::adsi_generate" ref="0524fc30b67374877d22ea616aa4780a" args="(unsigned char *buf, int msgtype, unsigned char *msg, int msglen, int msgnum, int last, int codec)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int adsi_generate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>msgtype</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>msglen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>msgnum</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>last</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>codec</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00077">77</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="callerid_8h-source.html#l00260">PUT_CLID</a>, and <a class="el" href="callerid_8h-source.html#l00245">PUT_CLID_MARKMS</a>.<div class="fragment"><pre class="fragment"><a name="l00078"></a>00078 {
<a name="l00079"></a>00079    <span class="keywordtype">int</span> sum;
<a name="l00080"></a>00080    <span class="keywordtype">int</span> x;   
<a name="l00081"></a>00081    <span class="keywordtype">int</span> bytes=0;
<a name="l00082"></a>00082    <span class="comment">/* Initial carrier (imaginary) */</span>
<a name="l00083"></a>00083    <span class="keywordtype">float</span> cr = 1.0;
<a name="l00084"></a>00084    <span class="keywordtype">float</span> ci = 0.0;
<a name="l00085"></a>00085    <span class="keywordtype">float</span> scont = 0.0;
<a name="l00086"></a>00086 
<a name="l00087"></a>00087    <span class="keywordflow">if</span> (<a class="code" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a> &gt; 255)
<a name="l00088"></a>00088       <a class="code" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a> = 255;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090    <span class="comment">/* If first message, Send 150ms of MARK's */</span>
<a name="l00091"></a>00091    <span class="keywordflow">if</span> (msgnum == 1) {
<a name="l00092"></a>00092       <span class="keywordflow">for</span> (x=0;x&lt;150;x++)  <span class="comment">/* was 150 */</span>
<a name="l00093"></a>00093          <a class="code" href="callerid_8h.html#c7d9a0aeae66e15307d9e8af1f444867">PUT_CLID_MARKMS</a>;
<a name="l00094"></a>00094    }
<a name="l00095"></a>00095    <span class="comment">/* Put message type */</span>
<a name="l00096"></a>00096    <a class="code" href="callerid_8h.html#e8be13cde80709083b4ea8ab655611a9">PUT_CLID</a>(<a class="code" href="adsistub_8c.html#b7aba3f31a451319eaaaac1ab12415fc">msgtype</a>);
<a name="l00097"></a>00097    sum = <a class="code" href="adsistub_8c.html#b7aba3f31a451319eaaaac1ab12415fc">msgtype</a>;
<a name="l00098"></a>00098 
<a name="l00099"></a>00099    <span class="comment">/* Put message length (plus one  for the message number) */</span>
<a name="l00100"></a>00100    <a class="code" href="callerid_8h.html#e8be13cde80709083b4ea8ab655611a9">PUT_CLID</a>(<a class="code" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a> + 1);
<a name="l00101"></a>00101    sum += <a class="code" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a> + 1;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103    <span class="comment">/* Put message number */</span>
<a name="l00104"></a>00104    <a class="code" href="callerid_8h.html#e8be13cde80709083b4ea8ab655611a9">PUT_CLID</a>(msgnum);
<a name="l00105"></a>00105    sum += msgnum;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107    <span class="comment">/* Put actual message */</span>
<a name="l00108"></a>00108    <span class="keywordflow">for</span> (x=0;x&lt;<a class="code" href="adsistub_8c.html#94eee2c2db7ff5f81e3de86cb0a124ba">msglen</a>;x++) {
<a name="l00109"></a>00109       <a class="code" href="callerid_8h.html#e8be13cde80709083b4ea8ab655611a9">PUT_CLID</a>(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>[x]);
<a name="l00110"></a>00110       sum += <a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>[x];
<a name="l00111"></a>00111    }
<a name="l00112"></a>00112 
<a name="l00113"></a>00113    <span class="comment">/* Put 2's compliment of sum */</span>
<a name="l00114"></a>00114    <a class="code" href="callerid_8h.html#e8be13cde80709083b4ea8ab655611a9">PUT_CLID</a>(256-(sum &amp; 0xff));
<a name="l00115"></a>00115 
<a name="l00116"></a>00116 <span class="preprocessor">#if 0</span>
<a name="l00117"></a>00117 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (<a class="code" href="pbx__gtkconsole_8c.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>) {
<a name="l00118"></a>00118       <span class="comment">/* Put trailing marks */</span>
<a name="l00119"></a>00119       <span class="keywordflow">for</span> (x=0;x&lt;50;x++)
<a name="l00120"></a>00120          <a class="code" href="callerid_8h.html#c7d9a0aeae66e15307d9e8af1f444867">PUT_CLID_MARKMS</a>;
<a name="l00121"></a>00121    }
<a name="l00122"></a>00122 <span class="preprocessor">#endif</span>
<a name="l00123"></a>00123 <span class="preprocessor"></span>   <span class="keywordflow">return</span> bytes;
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="51f4e5d499fb7171deda11d0560f0bbe"></a><!-- doxytag: member="res_adsi.c::adsi_load" ref="51f4e5d499fb7171deda11d0560f0bbe" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void adsi_load           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l01084">1084</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="res__adsi_8c-source.html#l00060">ADSI_MAX_INTRO</a>, <a class="el" href="res__adsi_8c-source.html#l00061">ADSI_MAX_SPEED_DIAL</a>, <a class="el" href="res__adsi_8c-source.html#l00075">alignment</a>, <a class="el" href="res__adsi_8c-source.html#l00071">aligns</a>, <a class="el" href="config_8c-source.html#l00555">ast_config_destroy()</a>, <a class="el" href="config_8c-source.html#l01278">ast_config_load()</a>, <a class="el" href="config_8c-source.html#l00222">ast_variable_browse()</a>, <a class="el" href="res__adsi_8c-source.html#l01067">init_state()</a>, <a class="el" href="res__adsi_8c-source.html#l00070">intro</a>, <a class="el" href="res__adsi_8c-source.html#l00065">maxretries</a>, <a class="el" href="config_8h-source.html#l00039">ast_variable::name</a>, <a class="el" href="callerid_8c-source.html#l01043">name</a>, <a class="el" href="config_8h-source.html#l00046">ast_variable::next</a>, <a class="el" href="res__adsi_8c-source.html#l00073">speeddial</a>, <a class="el" href="res__adsi_8c-source.html#l00944">speeds</a>, <a class="el" href="res__adsi_8c-source.html#l01055">str2align()</a>, <a class="el" href="strcompat_8c-source.html#l00035">strsep()</a>, <a class="el" href="res__adsi_8c-source.html#l00943">total</a>, and <a class="el" href="config_8h-source.html#l00040">ast_variable::value</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01136">load_module()</a>, and <a class="el" href="res__adsi_8c-source.html#l01130">reload()</a>.<div class="fragment"><pre class="fragment"><a name="l01085"></a>01085 {
<a name="l01086"></a>01086    <span class="keywordtype">int</span> x;
<a name="l01087"></a>01087    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *conf;
<a name="l01088"></a>01088    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *v;
<a name="l01089"></a>01089    <span class="keywordtype">char</span> *<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, *sname;
<a name="l01090"></a>01090    <a class="code" href="res__adsi_8c.html#486e13f28cb32da27c723a6050505900">init_state</a>();
<a name="l01091"></a>01091    conf = <a class="code" href="config_8c.html#0ea8bde5422fa0db50302e0f710e18c1">ast_config_load</a>(<span class="stringliteral">"adsi.conf"</span>);
<a name="l01092"></a>01092    <span class="keywordflow">if</span> (conf) {
<a name="l01093"></a>01093       x=0;
<a name="l01094"></a>01094       <span class="keywordflow">for</span> (v = <a class="code" href="config_8c.html#65ed813ca973e0e5dd3426804249db4f">ast_variable_browse</a>(conf, <span class="stringliteral">"intro"</span>); v; v = v-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l01095"></a>01095          <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, <span class="stringliteral">"alignment"</span>))
<a name="l01096"></a>01096             <a class="code" href="res__adsi_8c.html#5a159214b169da90d96590d47fff379e">alignment</a> = <a class="code" href="res__adsi_8c.html#e6adaef09487edbb91279a9d81f5c3b2">str2align</a>(v-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>);
<a name="l01097"></a>01097          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, <span class="stringliteral">"greeting"</span>)) {
<a name="l01098"></a>01098             <span class="keywordflow">if</span> (x &lt; <a class="code" href="res__adsi_8c.html#9cc826737b70b8aa3c17268638a96c80">ADSI_MAX_INTRO</a>) {
<a name="l01099"></a>01099                <a class="code" href="res__adsi_8c.html#3c53e90059d11bfa52688d4c8a6e0c7c">aligns</a>[x] = <a class="code" href="res__adsi_8c.html#5a159214b169da90d96590d47fff379e">alignment</a>;
<a name="l01100"></a>01100                ast_copy_string(<a class="code" href="res__adsi_8c.html#f0c86aca045f92fe9859b48fe7ac6c38">intro</a>[x], v-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>, <span class="keyword">sizeof</span>(<a class="code" href="res__adsi_8c.html#f0c86aca045f92fe9859b48fe7ac6c38">intro</a>[x]));
<a name="l01101"></a>01101                x++;
<a name="l01102"></a>01102             }
<a name="l01103"></a>01103          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, <span class="stringliteral">"maxretries"</span>)) {
<a name="l01104"></a>01104             <span class="keywordflow">if</span> (atoi(v-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>) &gt; 0)
<a name="l01105"></a>01105                <a class="code" href="res__adsi_8c.html#7f28c2cce3d8babb0e8754a55469aad7">maxretries</a> = atoi(v-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>);
<a name="l01106"></a>01106          }
<a name="l01107"></a>01107       }
<a name="l01108"></a>01108       <span class="keywordflow">if</span> (x)
<a name="l01109"></a>01109          <a class="code" href="res__adsi_8c.html#fbb44b4487415b134bce9c790a27fe5e">total</a> = x;
<a name="l01110"></a>01110       x = 0;
<a name="l01111"></a>01111       <span class="keywordflow">for</span> (v = <a class="code" href="config_8c.html#65ed813ca973e0e5dd3426804249db4f">ast_variable_browse</a>(conf, <span class="stringliteral">"speeddial"</span>); v; v = v-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l01112"></a>01112          <span class="keywordtype">char</span> *stringp = v-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>;
<a name="l01113"></a>01113          name = <a class="code" href="strcompat_8c.html#a541370456ac872bdb4bdcc462fc6a6e">strsep</a>(&amp;stringp, <span class="stringliteral">","</span>);
<a name="l01114"></a>01114          sname = <a class="code" href="strcompat_8c.html#a541370456ac872bdb4bdcc462fc6a6e">strsep</a>(&amp;stringp, <span class="stringliteral">","</span>);
<a name="l01115"></a>01115          <span class="keywordflow">if</span> (!sname) 
<a name="l01116"></a>01116             sname = name;
<a name="l01117"></a>01117          <span class="keywordflow">if</span> (x &lt; <a class="code" href="res__adsi_8c.html#848106944500ddb4e014e16622ca1bc2">ADSI_MAX_SPEED_DIAL</a>) {
<a name="l01118"></a>01118             ast_copy_string(<a class="code" href="res__adsi_8c.html#7c7a7dd2c520302cb7caf8cec3fb3c18">speeddial</a>[x][0], v-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, <span class="keyword">sizeof</span>(<a class="code" href="res__adsi_8c.html#7c7a7dd2c520302cb7caf8cec3fb3c18">speeddial</a>[x][0]));
<a name="l01119"></a>01119             ast_copy_string(<a class="code" href="res__adsi_8c.html#7c7a7dd2c520302cb7caf8cec3fb3c18">speeddial</a>[x][1], name, 18);
<a name="l01120"></a>01120             ast_copy_string(<a class="code" href="res__adsi_8c.html#7c7a7dd2c520302cb7caf8cec3fb3c18">speeddial</a>[x][2], sname, 7);
<a name="l01121"></a>01121             x++;
<a name="l01122"></a>01122          }
<a name="l01123"></a>01123       }
<a name="l01124"></a>01124       <span class="keywordflow">if</span> (x)
<a name="l01125"></a>01125          <a class="code" href="res__adsi_8c.html#f88a1518ac11072847b2d8c171b0ab9a">speeds</a> = x;
<a name="l01126"></a>01126       <a class="code" href="config_8c.html#ad84c9d29ca53758c2a113d057e221a0">ast_config_destroy</a>(conf);
<a name="l01127"></a>01127    }
<a name="l01128"></a>01128 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c35fee6632e430457f6ccfa051cbf6cf"></a><!-- doxytag: member="res_adsi.c::AST_MODULE_INFO" ref="c35fee6632e430457f6ccfa051cbf6cf" args="(ASTERISK_GPL_KEY, AST_MODFLAG_DEFAULT,&quot;ADSI Resource&quot;,.load=load_module,.unload=unload_module,.reload=reload,)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">AST_MODULE_INFO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ASTERISK_GPL_KEY&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>AST_MODFLAG_DEFAULT&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&quot;ADSI Resource&quot;&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>.&nbsp;</td>
          <td class="mdname" nowrap> <em>load</em> = <code>load_module</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>.&nbsp;</td>
          <td class="mdname" nowrap> <em>unload</em> = <code>unload_module</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>.&nbsp;</td>
          <td class="mdname" nowrap> <em>reload</em> = <code>reload</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ebce1e598fc6f0741769a7b9f1c8fec0"></a><!-- doxytag: member="res_adsi.c::ccopy" ref="ebce1e598fc6f0741769a7b9f1c8fec0" args="(unsigned char *dst, const unsigned char *src, int max)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int ccopy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>dst</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>src</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>max</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00456">456</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l00812">_ast_adsi_display()</a>, <a class="el" href="res__adsi_8c-source.html#l00529">_ast_adsi_download_connect()</a>, <a class="el" href="res__adsi_8c-source.html#l00881">_ast_adsi_input_format()</a>, and <a class="el" href="res__adsi_8c-source.html#l00467">_ast_adsi_load_soft_key()</a>.<div class="fragment"><pre class="fragment"><a name="l00457"></a>00457 {
<a name="l00458"></a>00458    <span class="keywordtype">int</span> x=0;
<a name="l00459"></a>00459    <span class="comment">/* Carefully copy the requested data */</span>
<a name="l00460"></a>00460    <span class="keywordflow">while</span> ((x &lt; max) &amp;&amp; src[x] &amp;&amp; (src[x] != 0xff)) {
<a name="l00461"></a>00461       dst[x] = src[x];
<a name="l00462"></a>00462       x++;
<a name="l00463"></a>00463    }
<a name="l00464"></a>00464    <span class="keywordflow">return</span> x;
<a name="l00465"></a>00465 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="486e13f28cb32da27c723a6050505900"></a><!-- doxytag: member="res_adsi.c::init_state" ref="486e13f28cb32da27c723a6050505900" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void init_state           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l01067">1067</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00111">ADSI_JUST_CENT</a>, <a class="el" href="res__adsi_8c-source.html#l00060">ADSI_MAX_INTRO</a>, <a class="el" href="res__adsi_8c-source.html#l00075">alignment</a>, <a class="el" href="res__adsi_8c-source.html#l00071">aligns</a>, <a class="el" href="res__adsi_8c-source.html#l00070">intro</a>, <a class="el" href="res__adsi_8c-source.html#l00073">speeddial</a>, <a class="el" href="res__adsi_8c-source.html#l00944">speeds</a>, and <a class="el" href="res__adsi_8c-source.html#l00943">total</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>.<div class="fragment"><pre class="fragment"><a name="l01068"></a>01068 {
<a name="l01069"></a>01069    <span class="keywordtype">int</span> x;
<a name="l01070"></a>01070 
<a name="l01071"></a>01071    <span class="keywordflow">for</span> (x=0;x&lt;<a class="code" href="res__adsi_8c.html#9cc826737b70b8aa3c17268638a96c80">ADSI_MAX_INTRO</a>;x++)
<a name="l01072"></a>01072       <a class="code" href="res__adsi_8c.html#3c53e90059d11bfa52688d4c8a6e0c7c">aligns</a>[x] = <a class="code" href="adsi_8h.html#809c8d746981c35675e642a72edad17e">ADSI_JUST_CENT</a>;
<a name="l01073"></a>01073    ast_copy_string(<a class="code" href="res__adsi_8c.html#f0c86aca045f92fe9859b48fe7ac6c38">intro</a>[0], <span class="stringliteral">"Welcome to the"</span>, <span class="keyword">sizeof</span>(<a class="code" href="res__adsi_8c.html#f0c86aca045f92fe9859b48fe7ac6c38">intro</a>[0]));
<a name="l01074"></a>01074    ast_copy_string(<a class="code" href="res__adsi_8c.html#f0c86aca045f92fe9859b48fe7ac6c38">intro</a>[1], <span class="stringliteral">"Asterisk"</span>, <span class="keyword">sizeof</span>(<a class="code" href="res__adsi_8c.html#f0c86aca045f92fe9859b48fe7ac6c38">intro</a>[1]));
<a name="l01075"></a>01075    ast_copy_string(<a class="code" href="res__adsi_8c.html#f0c86aca045f92fe9859b48fe7ac6c38">intro</a>[2], <span class="stringliteral">"Open Source PBX"</span>, <span class="keyword">sizeof</span>(<a class="code" href="res__adsi_8c.html#f0c86aca045f92fe9859b48fe7ac6c38">intro</a>[2]));
<a name="l01076"></a>01076    <a class="code" href="res__adsi_8c.html#fbb44b4487415b134bce9c790a27fe5e">total</a> = 3;
<a name="l01077"></a>01077    <a class="code" href="res__adsi_8c.html#f88a1518ac11072847b2d8c171b0ab9a">speeds</a> = 0;
<a name="l01078"></a>01078    <span class="keywordflow">for</span> (x=3;x&lt;<a class="code" href="res__adsi_8c.html#9cc826737b70b8aa3c17268638a96c80">ADSI_MAX_INTRO</a>;x++)
<a name="l01079"></a>01079       <a class="code" href="res__adsi_8c.html#f0c86aca045f92fe9859b48fe7ac6c38">intro</a>[x][0] = <span class="charliteral">'\0'</span>;
<a name="l01080"></a>01080    memset(<a class="code" href="res__adsi_8c.html#7c7a7dd2c520302cb7caf8cec3fb3c18">speeddial</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="res__adsi_8c.html#7c7a7dd2c520302cb7caf8cec3fb3c18">speeddial</a>));
<a name="l01081"></a>01081    <a class="code" href="res__adsi_8c.html#5a159214b169da90d96590d47fff379e">alignment</a> = <a class="code" href="adsi_8h.html#809c8d746981c35675e642a72edad17e">ADSI_JUST_CENT</a>;
<a name="l01082"></a>01082 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="8c304b271325d497b3ce1886465a1abe"></a><!-- doxytag: member="res_adsi.c::load_module" ref="8c304b271325d497b3ce1886465a1abe" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int load_module           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l01136">1136</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="res__adsi_8c-source.html#l00788">_ast_adsi_available()</a>, <a class="el" href="res__adsi_8c-source.html#l00337">_ast_adsi_begin_download()</a>, <a class="el" href="res__adsi_8c-source.html#l00946">_ast_adsi_channel_restore()</a>, <a class="el" href="res__adsi_8c-source.html#l00756">_ast_adsi_clear_screen()</a>, <a class="el" href="res__adsi_8c-source.html#l00741">_ast_adsi_clear_soft_keys()</a>, <a class="el" href="res__adsi_8c-source.html#l00506">_ast_adsi_connect_session()</a>, <a class="el" href="res__adsi_8c-source.html#l00726">_ast_adsi_data_mode()</a>, <a class="el" href="res__adsi_8c-source.html#l00559">_ast_adsi_disconnect_session()</a>, <a class="el" href="res__adsi_8c-source.html#l00812">_ast_adsi_display()</a>, <a class="el" href="res__adsi_8c-source.html#l00529">_ast_adsi_download_connect()</a>, <a class="el" href="res__adsi_8c-source.html#l00797">_ast_adsi_download_disconnect()</a>, <a class="el" href="res__adsi_8c-source.html#l00357">_ast_adsi_end_download()</a>, <a class="el" href="res__adsi_8c-source.html#l00629">_ast_adsi_get_cpeid()</a>, <a class="el" href="res__adsi_8c-source.html#l00661">_ast_adsi_get_cpeinfo()</a>, <a class="el" href="res__adsi_8c-source.html#l00858">_ast_adsi_input_control()</a>, <a class="el" href="res__adsi_8c-source.html#l00881">_ast_adsi_input_format()</a>, <a class="el" href="res__adsi_8c-source.html#l00993">_ast_adsi_load_session()</a>, <a class="el" href="res__adsi_8c-source.html#l00467">_ast_adsi_load_soft_key()</a>, <a class="el" href="res__adsi_8c-source.html#l00973">_ast_adsi_print()</a>, <a class="el" href="res__adsi_8c-source.html#l00574">_ast_adsi_query_cpeid()</a>, <a class="el" href="res__adsi_8c-source.html#l00584">_ast_adsi_query_cpeinfo()</a>, <a class="el" href="res__adsi_8c-source.html#l00594">_ast_adsi_read_encoded_dtmf()</a>, <a class="el" href="res__adsi_8c-source.html#l00900">_ast_adsi_set_keys()</a>, <a class="el" href="res__adsi_8c-source.html#l00915">_ast_adsi_set_line()</a>, <a class="el" href="res__adsi_8c-source.html#l00451">_ast_adsi_transmit_message()</a>, <a class="el" href="res__adsi_8c-source.html#l00370">_ast_adsi_transmit_message_full()</a>, <a class="el" href="res__adsi_8c-source.html#l01037">_ast_adsi_unload_session()</a>, <a class="el" href="res__adsi_8c-source.html#l00771">_ast_adsi_voice_mode()</a>, <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>, <a class="el" href="adsi_8h.html#70400be4898ab6fbd733b93751dcc539">ast_adsi_available</a>, <a class="el" href="adsi_8h.html#7b5f44be3552eb86c534bbbdc95d98cf">ast_adsi_begin_download</a>, <a class="el" href="adsi_8h.html#870a15905d49dedef35507cc0bce5fbb">ast_adsi_channel_restore</a>, <a class="el" href="adsi_8h.html#0e8abaa20838d42936791175409d1760">ast_adsi_clear_screen</a>, <a class="el" href="adsi_8h.html#3b188d23ad33440724da8d74e0b11eca">ast_adsi_clear_soft_keys</a>, <a class="el" href="adsi_8h.html#396ff777f6ce9b034afaade484455392">ast_adsi_connect_session</a>, <a class="el" href="adsi_8h.html#f93995ad6e203f3125eeb3ad31cff1f2">ast_adsi_data_mode</a>, <a class="el" href="adsi_8h.html#6fb7b0ca78b73025ab309f62b2c07b87">ast_adsi_disconnect_session</a>, <a class="el" href="adsi_8h.html#127627466eb6cc37f8d8a51413c1c7a1">ast_adsi_display</a>, <a class="el" href="adsi_8h.html#ea505d7058e65b5403eac572c1616eda">ast_adsi_download_connect</a>, <a class="el" href="adsi_8h.html#9dd64d6f068eccbd5ed8d9563e6f6246">ast_adsi_download_disconnect</a>, <a class="el" href="adsi_8h.html#1ec5ca85774e2522ebf2cdf6c1c916a8">ast_adsi_end_download</a>, <a class="el" href="adsi_8h.html#edabc8036fe06e0ad4eea2d3242b2a69">ast_adsi_get_cpeid</a>, <a class="el" href="adsi_8h.html#0e2b8445221f2988407c68457bf03797">ast_adsi_get_cpeinfo</a>, <a class="el" href="adsi_8h.html#4ec1c66ead4e840205acb7431d8f5d52">ast_adsi_input_control</a>, <a class="el" href="adsi_8h.html#c0837706ae7ec9a166712f5c7d11abdb">ast_adsi_input_format</a>, <a class="el" href="adsi_8h.html#ce3248beba760c229c6a6e561ad692bd">ast_adsi_load_session</a>, <a class="el" href="adsi_8h.html#1f732ee84c1eb99c09b55884899ca5c2">ast_adsi_load_soft_key</a>, <a class="el" href="adsi_8h.html#edfc2727feaa97dce38bf3199fd6aa16">ast_adsi_print</a>, <a class="el" href="adsi_8h.html#1b4d84e905ad025b19f50447eac6b0da">ast_adsi_query_cpeid</a>, <a class="el" href="adsi_8h.html#48043c367ae9b3a7acf3e9db65566087">ast_adsi_query_cpeinfo</a>, <a class="el" href="adsi_8h.html#26b298c603f507a9304a066eea3643ca">ast_adsi_read_encoded_dtmf</a>, <a class="el" href="adsi_8h.html#e8700684fc2732a0514f5bc5567c768d">ast_adsi_set_keys</a>, <a class="el" href="adsi_8h.html#d18dcf73c9d04245baa29520ab6f73d6">ast_adsi_set_line</a>, <a class="el" href="adsi_8h.html#3c7b9e4338db8278f7e3bd3727cb6af1">ast_adsi_transmit_message</a>, <a class="el" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a>, <a class="el" href="adsi_8h.html#2f8323d710716d7bb9c902fa47b29558">ast_adsi_unload_session</a>, and <a class="el" href="adsi_8h.html#a66ef3c75b0f390e9371019d0400a6ba">ast_adsi_voice_mode</a>.<div class="fragment"><pre class="fragment"><a name="l01137"></a>01137 {
<a name="l01138"></a>01138    <a class="code" href="res__adsi_8c.html#51f4e5d499fb7171deda11d0560f0bbe">adsi_load</a>();
<a name="l01139"></a>01139 
<a name="l01140"></a>01140    <a class="code" href="adsi_8h.html#7b5f44be3552eb86c534bbbdc95d98cf">ast_adsi_begin_download</a> = <a class="code" href="res__adsi_8c.html#c3620c03f9bf204d219d262d54dada42">_ast_adsi_begin_download</a>;
<a name="l01141"></a>01141    <a class="code" href="adsi_8h.html#1ec5ca85774e2522ebf2cdf6c1c916a8">ast_adsi_end_download</a> = <a class="code" href="res__adsi_8c.html#5e9d361346d4604ccf2259b582a4bfab">_ast_adsi_end_download</a>;
<a name="l01142"></a>01142    <a class="code" href="adsi_8h.html#870a15905d49dedef35507cc0bce5fbb">ast_adsi_channel_restore</a> = <a class="code" href="res__adsi_8c.html#835342b83fe9fd827f8106167cbd592b">_ast_adsi_channel_restore</a>;
<a name="l01143"></a>01143    <a class="code" href="adsi_8h.html#edfc2727feaa97dce38bf3199fd6aa16">ast_adsi_print</a> = <a class="code" href="res__adsi_8c.html#6ad10d8c66cead9f1a7acc02ee819489">_ast_adsi_print</a>;
<a name="l01144"></a>01144    <a class="code" href="adsi_8h.html#ce3248beba760c229c6a6e561ad692bd">ast_adsi_load_session</a> = <a class="code" href="res__adsi_8c.html#553807459e28b5de53b7baece66c02f5">_ast_adsi_load_session</a>;
<a name="l01145"></a>01145    <a class="code" href="adsi_8h.html#2f8323d710716d7bb9c902fa47b29558">ast_adsi_unload_session</a> = <a class="code" href="res__adsi_8c.html#1616f9a6c8a99129c9560ef439f708b9">_ast_adsi_unload_session</a>;
<a name="l01146"></a>01146    <a class="code" href="adsi_8h.html#3c7b9e4338db8278f7e3bd3727cb6af1">ast_adsi_transmit_message</a> = <a class="code" href="res__adsi_8c.html#9d692a815a62e805989fe57c9ca8ad84">_ast_adsi_transmit_message</a>;
<a name="l01147"></a>01147    <a class="code" href="adsi_8h.html#e625de6a975f7915ec91e4a4f2566054">ast_adsi_transmit_message_full</a> = <a class="code" href="res__adsi_8c.html#d3e747c68ea4657d061ec60bd7358715">_ast_adsi_transmit_message_full</a>;
<a name="l01148"></a>01148    <a class="code" href="adsi_8h.html#26b298c603f507a9304a066eea3643ca">ast_adsi_read_encoded_dtmf</a> = <a class="code" href="res__adsi_8c.html#67a3aa20a91f08bcee84fc730891f8df">_ast_adsi_read_encoded_dtmf</a>;
<a name="l01149"></a>01149    <a class="code" href="adsi_8h.html#396ff777f6ce9b034afaade484455392">ast_adsi_connect_session</a> = <a class="code" href="res__adsi_8c.html#7e35f9e069738cb559faeff5e6e60894">_ast_adsi_connect_session</a>;
<a name="l01150"></a>01150    <a class="code" href="adsi_8h.html#1b4d84e905ad025b19f50447eac6b0da">ast_adsi_query_cpeid</a> = <a class="code" href="res__adsi_8c.html#ee64bfd44513a3fbb3bc5ebbcc859a4f">_ast_adsi_query_cpeid</a>;
<a name="l01151"></a>01151    <a class="code" href="adsi_8h.html#48043c367ae9b3a7acf3e9db65566087">ast_adsi_query_cpeinfo</a> = <a class="code" href="res__adsi_8c.html#c9a9c3ca08b37a3421235a625066065b">_ast_adsi_query_cpeinfo</a>;
<a name="l01152"></a>01152    <a class="code" href="adsi_8h.html#edabc8036fe06e0ad4eea2d3242b2a69">ast_adsi_get_cpeid</a> = <a class="code" href="res__adsi_8c.html#888c74a2a821dcf22c935cdfe2f1d160">_ast_adsi_get_cpeid</a>;
<a name="l01153"></a>01153    <a class="code" href="adsi_8h.html#0e2b8445221f2988407c68457bf03797">ast_adsi_get_cpeinfo</a> = <a class="code" href="res__adsi_8c.html#c0098b910e7cc67fbded9e41d8bf789d">_ast_adsi_get_cpeinfo</a>;
<a name="l01154"></a>01154    <a class="code" href="adsi_8h.html#ea505d7058e65b5403eac572c1616eda">ast_adsi_download_connect</a> = <a class="code" href="res__adsi_8c.html#0bcb7eca357e70d0f0f5f4c76a94d6a4">_ast_adsi_download_connect</a>;
<a name="l01155"></a>01155    <a class="code" href="adsi_8h.html#6fb7b0ca78b73025ab309f62b2c07b87">ast_adsi_disconnect_session</a> = <a class="code" href="res__adsi_8c.html#9f2336c7475367c8e2325fa6a20579b9">_ast_adsi_disconnect_session</a>;
<a name="l01156"></a>01156    <a class="code" href="adsi_8h.html#9dd64d6f068eccbd5ed8d9563e6f6246">ast_adsi_download_disconnect</a> = <a class="code" href="res__adsi_8c.html#e61c405ec8abbba634308d0ffe235ef2">_ast_adsi_download_disconnect</a>;
<a name="l01157"></a>01157    <a class="code" href="adsi_8h.html#f93995ad6e203f3125eeb3ad31cff1f2">ast_adsi_data_mode</a> = <a class="code" href="res__adsi_8c.html#e048374564a61a5585f43a5452c4bfd8">_ast_adsi_data_mode</a>;
<a name="l01158"></a>01158    <a class="code" href="adsi_8h.html#3b188d23ad33440724da8d74e0b11eca">ast_adsi_clear_soft_keys</a> = <a class="code" href="res__adsi_8c.html#ea2672ce0989df0ff86dc5b17438225d">_ast_adsi_clear_soft_keys</a>;
<a name="l01159"></a>01159    <a class="code" href="adsi_8h.html#0e8abaa20838d42936791175409d1760">ast_adsi_clear_screen</a> = <a class="code" href="res__adsi_8c.html#004f1151fe783aaa1a640cdf548d63a1">_ast_adsi_clear_screen</a>;
<a name="l01160"></a>01160    <a class="code" href="adsi_8h.html#a66ef3c75b0f390e9371019d0400a6ba">ast_adsi_voice_mode</a> = <a class="code" href="res__adsi_8c.html#16e3797831731903ef49cd748508bff0">_ast_adsi_voice_mode</a>;
<a name="l01161"></a>01161    <a class="code" href="adsi_8h.html#70400be4898ab6fbd733b93751dcc539">ast_adsi_available</a> = <a class="code" href="res__adsi_8c.html#18afa442dd8a9df2807efb59e84211b1">_ast_adsi_available</a>;
<a name="l01162"></a>01162    <a class="code" href="adsi_8h.html#127627466eb6cc37f8d8a51413c1c7a1">ast_adsi_display</a> = <a class="code" href="res__adsi_8c.html#91a341a45a6673f5d2bacde9ac62bbb4">_ast_adsi_display</a>;
<a name="l01163"></a>01163    <a class="code" href="adsi_8h.html#d18dcf73c9d04245baa29520ab6f73d6">ast_adsi_set_line</a> = <a class="code" href="res__adsi_8c.html#38a795f94e04dce0df355b2d1b55aa8c">_ast_adsi_set_line</a>;
<a name="l01164"></a>01164    <a class="code" href="adsi_8h.html#1f732ee84c1eb99c09b55884899ca5c2">ast_adsi_load_soft_key</a> = <a class="code" href="res__adsi_8c.html#76365932347df60e1f0ab75e03fecc65">_ast_adsi_load_soft_key</a>;
<a name="l01165"></a>01165    <a class="code" href="adsi_8h.html#e8700684fc2732a0514f5bc5567c768d">ast_adsi_set_keys</a> = <a class="code" href="res__adsi_8c.html#61fa65b5b483e58fef84feb1d6b7f6af">_ast_adsi_set_keys</a>;
<a name="l01166"></a>01166    <a class="code" href="adsi_8h.html#4ec1c66ead4e840205acb7431d8f5d52">ast_adsi_input_control</a> = <a class="code" href="res__adsi_8c.html#b252f01056cc929d2cdf474860cb2891">_ast_adsi_input_control</a>;
<a name="l01167"></a>01167    <a class="code" href="adsi_8h.html#c0837706ae7ec9a166712f5c7d11abdb">ast_adsi_input_format</a> = <a class="code" href="res__adsi_8c.html#20ba0508073c28960333ed8ed790b19b">_ast_adsi_input_format</a>;
<a name="l01168"></a>01168 
<a name="l01169"></a>01169    <span class="keywordflow">return</span> 0;
<a name="l01170"></a>01170 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="91875b0435b600b8ed0e424d70d492b0"></a><!-- doxytag: member="res_adsi.c::reload" ref="91875b0435b600b8ed0e424d70d492b0" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int reload           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l01130">1130</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>.<div class="fragment"><pre class="fragment"><a name="l01131"></a>01131 {
<a name="l01132"></a>01132    <a class="code" href="res__adsi_8c.html#51f4e5d499fb7171deda11d0560f0bbe">adsi_load</a>();
<a name="l01133"></a>01133    <span class="keywordflow">return</span> 0;
<a name="l01134"></a>01134 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e6adaef09487edbb91279a9d81f5c3b2"></a><!-- doxytag: member="res_adsi.c::str2align" ref="e6adaef09487edbb91279a9d81f5c3b2" args="(char *s)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int str2align           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>s</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l01055">1055</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
References <a class="el" href="adsi_8h-source.html#l00111">ADSI_JUST_CENT</a>, <a class="el" href="adsi_8h-source.html#l00112">ADSI_JUST_IND</a>, <a class="el" href="adsi_8h-source.html#l00109">ADSI_JUST_LEFT</a>, and <a class="el" href="adsi_8h-source.html#l00110">ADSI_JUST_RIGHT</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>.<div class="fragment"><pre class="fragment"><a name="l01056"></a>01056 {
<a name="l01057"></a>01057    <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="aesopt_8h.html#8d6242bc80162ac99dd4d368eabe77cc">s</a>, <span class="stringliteral">"l"</span>, 1))
<a name="l01058"></a>01058       <span class="keywordflow">return</span> <a class="code" href="adsi_8h.html#f0aee955f43149426abe4a75ff0c2dff">ADSI_JUST_LEFT</a>;
<a name="l01059"></a>01059    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="aesopt_8h.html#8d6242bc80162ac99dd4d368eabe77cc">s</a>, <span class="stringliteral">"r"</span>, 1))
<a name="l01060"></a>01060       <span class="keywordflow">return</span> <a class="code" href="adsi_8h.html#f5808c969f3f9c88c539cebf2616b442">ADSI_JUST_RIGHT</a>;
<a name="l01061"></a>01061    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="aesopt_8h.html#8d6242bc80162ac99dd4d368eabe77cc">s</a>, <span class="stringliteral">"i"</span>, 1))
<a name="l01062"></a>01062       <span class="keywordflow">return</span> <a class="code" href="adsi_8h.html#e63928d83d780a806137fea5f7fdb9d7">ADSI_JUST_IND</a>;
<a name="l01063"></a>01063    <span class="keywordflow">else</span>
<a name="l01064"></a>01064       <span class="keywordflow">return</span> <a class="code" href="adsi_8h.html#809c8d746981c35675e642a72edad17e">ADSI_JUST_CENT</a>;
<a name="l01065"></a>01065 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="eaf793e807a29b69460b0c6c94a79a0b"></a><!-- doxytag: member="res_adsi.c::unload_module" ref="eaf793e807a29b69460b0c6c94a79a0b" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int unload_module           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l01172">1172</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.<div class="fragment"><pre class="fragment"><a name="l01173"></a>01173 {
<a name="l01174"></a>01174    <span class="comment">/* Can't unload this once we're loaded */</span>
<a name="l01175"></a>01175    <span class="keywordflow">return</span> -1;
<a name="l01176"></a>01176 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="5a159214b169da90d96590d47fff379e"></a><!-- doxytag: member="res_adsi.c::alignment" ref="5a159214b169da90d96590d47fff379e" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="res__adsi_8c.html#5a159214b169da90d96590d47fff379e">alignment</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00075">75</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>, and <a class="el" href="res__adsi_8c-source.html#l01067">init_state()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="3c53e90059d11bfa52688d4c8a6e0c7c"></a><!-- doxytag: member="res_adsi.c::aligns" ref="3c53e90059d11bfa52688d4c8a6e0c7c" args="[ADSI_MAX_INTRO]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="res__adsi_8c.html#3c53e90059d11bfa52688d4c8a6e0c7c">aligns</a>[ADSI_MAX_INTRO]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00071">71</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>, and <a class="el" href="res__adsi_8c-source.html#l01067">init_state()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="f0c86aca045f92fe9859b48fe7ac6c38"></a><!-- doxytag: member="res_adsi.c::intro" ref="f0c86aca045f92fe9859b48fe7ac6c38" args="[ADSI_MAX_INTRO][20]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="res__adsi_8c.html#f0c86aca045f92fe9859b48fe7ac6c38">intro</a>[ADSI_MAX_INTRO][20]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00070">70</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>, and <a class="el" href="res__adsi_8c-source.html#l01067">init_state()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="7f28c2cce3d8babb0e8754a55469aad7"></a><!-- doxytag: member="res_adsi.c::maxretries" ref="7f28c2cce3d8babb0e8754a55469aad7" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="res__adsi_8c.html#7f28c2cce3d8babb0e8754a55469aad7">maxretries</a> = DEFAULT_ADSI_MAX_RETRIES<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00065">65</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l00198">__adsi_transmit_messages()</a>, <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>, <a class="el" href="app_8c-source.html#l01253">ast_ivr_menu_run_internal()</a>, and <a class="el" href="app__privacy_8c-source.html#l00078">privacy_exec()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="7c7a7dd2c520302cb7caf8cec3fb3c18"></a><!-- doxytag: member="res_adsi.c::speeddial" ref="7c7a7dd2c520302cb7caf8cec3fb3c18" args="[ADSI_MAX_SPEED_DIAL][3][20]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="res__adsi_8c.html#7c7a7dd2c520302cb7caf8cec3fb3c18">speeddial</a>[ADSI_MAX_SPEED_DIAL][3][20]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00073">73</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>, and <a class="el" href="res__adsi_8c-source.html#l01067">init_state()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="f88a1518ac11072847b2d8c171b0ab9a"></a><!-- doxytag: member="res_adsi.c::speeds" ref="f88a1518ac11072847b2d8c171b0ab9a" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="res__adsi_8c.html#f88a1518ac11072847b2d8c171b0ab9a">speeds</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00944">944</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l00946">_ast_adsi_channel_restore()</a>, <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>, and <a class="el" href="res__adsi_8c-source.html#l01067">init_state()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="fbb44b4487415b134bce9c790a27fe5e"></a><!-- doxytag: member="res_adsi.c::total" ref="fbb44b4487415b134bce9c790a27fe5e" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="res__adsi_8c.html#fbb44b4487415b134bce9c790a27fe5e">total</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__adsi_8c-source.html#l00943">943</a> of file <a class="el" href="res__adsi_8c-source.html">res_adsi.c</a>.
<p>
Referenced by <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>, <a class="el" href="cdr_8c-source.html#l00363">ast_cdr_serialize_variables()</a>, <a class="el" href="res__adsi_8c-source.html#l01067">init_state()</a>, <a class="el" href="chan__sip_8c-source.html#l10326">manager_sip_show_peers()</a>, <a class="el" href="app__meetme_8c-source.html#l00808">meetme_cmd()</a>, <a class="el" href="pbx_8c-source.html#l05734">pbx_builtin_serialize_variables()</a>, and <a class="el" href="chan__alsa_8c-source.html#l00214">send_sound()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu May 24 22:27:42 2007 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
