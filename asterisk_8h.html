<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (24 May 2007)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Thu May 24 22:27:03 2007</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Finclude_2F.html">include</a></div>
<h1>asterisk.h File Reference</h1>Asterisk main include file. File version handling, generic pbx functions. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="autoconfig_8h-source.html">asterisk/autoconfig.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="compat_8h-source.html">asterisk/compat.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="paths_8h-source.html">asterisk/paths.h</a>&quot;</code><br>

<p>
<a href="asterisk_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#457fd3a85858bd80e12a42d294d94309">AST_DIR_MODE</a>&nbsp;&nbsp;&nbsp;0777</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#40c72ca4a20a53b69eb99c554e214a82">AST_FILE_MODE</a>&nbsp;&nbsp;&nbsp;0666</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#9c510a313e63f75dac1b4afadc0d5545">ASTERISK_FILE_VERSION</a>(<a class="el" href="utils_8h.html#8c7dd922ad47494fc02c388e12c00eac">file</a>, version)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register/unregister a source code file with the core.  <a href="#9c510a313e63f75dac1b4afadc0d5545"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#900caad9f94399bdf7f6344a3738976d">DEFAULT_LANGUAGE</a>&nbsp;&nbsp;&nbsp;&quot;en&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#04d52d0c00ed0f3ea0678d55afbf957c">DEFAULT_SAMPLE_RATE</a>&nbsp;&nbsp;&nbsp;8000</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#35d9207ec8638d71f1e25e0299f1f48d">DEFAULT_SAMPLES_PER_MS</a>&nbsp;&nbsp;&nbsp;((DEFAULT_SAMPLE_RATE)/1000)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#7e6c136d19e5300f9824d47089ae28bf">sched_setscheduler</a>&nbsp;&nbsp;&nbsp;__PLEASE_USE_ast_set_priority_INSTEAD_OF_sched_setscheduler__</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#8e136921ec18e6d7a07951bf19c1dfc4">setpriority</a>&nbsp;&nbsp;&nbsp;__PLEASE_USE_ast_set_priority_INSTEAD_OF_setpriority__</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#5e548fab02e9ee58c0d5ea7ab64eca09">ast_add_profile</a> (const char *, uint64_t scale)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">support for event profiling  <a href="#5e548fab02e9ee58c0d5ea7ab64eca09"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#833ba54dcfde3b670f65097c0f1aae33">ast_builtins_init</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initialize the _full_cmd string in * each of the builtins.  <a href="#833ba54dcfde3b670f65097c0f1aae33"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#ea40c04ddba9d91880686eb95e400008">ast_channels_init</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#8422fd37702f84a5ced85ca3a641915b">ast_event_init</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#a60ffb42c53d0d022a1f3a3e55b3b89e">ast_mark</a> (int, int start1_stop0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#12479ce54a93d95bd3c845793c3c0f19">ast_module_reload</a> (const char *<a class="el" href="cdr__tds_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reload asterisk modules.  <a href="#12479ce54a93d95bd3c845793c3c0f19"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#527b2ecec6ba462cbfbe8e812527e16d">ast_profile</a> (int, int64_t)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#c0fa49bc6ac7af56a1f410920f115253">ast_register_atexit</a> (void(*<a class="el" href="utils_8h.html#7df4935f4a5a2865191ef74f64df8754">func</a>)(void))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register a function to be executed before Asterisk exits.  <a href="#c0fa49bc6ac7af56a1f410920f115253"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#d52952457c154bcf0009ece6816c06e5">ast_register_file_version</a> (const char *<a class="el" href="utils_8h.html#8c7dd922ad47494fc02c388e12c00eac">file</a>, const char *version)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register the version of a source code file with the core.  <a href="#d52952457c154bcf0009ece6816c06e5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#b0f7a6d888f790502ecabfbf4bf4c666">ast_set_priority</a> (int)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">We set ourselves to a high priority, that we might pre-empt everything else. If your PBX has heavy activity on it, this is a good thing.  <a href="#b0f7a6d888f790502ecabfbf4bf4c666"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#5c46f443c8dcb0695a690c4d9f7c37b7">ast_term_init</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#60996aec923b890a13ad493979174ea0">ast_unregister_atexit</a> (void(*<a class="el" href="utils_8h.html#7df4935f4a5a2865191ef74f64df8754">func</a>)(void))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unregister a function registered with <a class="el" href="asterisk_8c.html#c0fa49bc6ac7af56a1f410920f115253">ast_register_atexit()</a>.  <a href="#60996aec923b890a13ad493979174ea0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#f61bd9bec3e80110272581aa6591c72e">ast_unregister_file_version</a> (const char *<a class="el" href="utils_8h.html#8c7dd922ad47494fc02c388e12c00eac">file</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unregister a source code file from the core.  <a href="#f61bd9bec3e80110272581aa6591c72e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#ffa7bfa9223627041ba7b94fc751b4e9">astdb_init</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#323ddd8f4ed93915e0e27717128eba2f">close_logger</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#2edcd99e57832c03d01818ddbb8bf871">dnsmgr_init</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#6be31af1df8dbb8613465dc090879c17">dnsmgr_reload</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#6a5d6dd87d710376bdb793d4b5e73010">dnsmgr_start_refresh</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#d40eb7b18ae20acf758c562e5a44abf1">init_framer</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#2dc970548287d60ade9a663e2955d2fd">init_logger</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#0233ae0152e6f49a294e29219b73673a">load_modules</a> (unsigned int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#1123cfede7379bd2813e1b4306327c10">load_pbx</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#16e979f3fb924886e2a31b4f59a0a1d1">reload_logger</a> (int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#59a5fcbc506d1e1e742c0ecbe4fb7ed5">threadstorage_init</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#0fc8e656809ce6507ffed32649956381">ast_config_AST_AGI_DIR</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#0a741f5d37bb00616aba45b9437c13a7">ast_config_AST_CONFIG_DIR</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#518e579b8448d2834f4d7bcb3c0374b9">ast_config_AST_CONFIG_FILE</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#cca382de6ca5496a462dcdf283c793d1">ast_config_AST_CTL</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#3f64ed95129eea6328d3f3ecf4f34de8">ast_config_AST_CTL_GROUP</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#71f7124498b65b37b4211976138e2356">ast_config_AST_CTL_OWNER</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#0c6a6808d852510151af7a84c8f57a99">ast_config_AST_CTL_PERMISSIONS</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#941063989b9bef2acc03ffa668b930a9">ast_config_AST_DATA_DIR</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#876cf5a30ab9549d0f5d72d8fac4ab1c">ast_config_AST_DB</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#5978b4013e123589a1077c519919f7af">ast_config_AST_KEY_DIR</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#af6a08df4c5a91b22da1d9bb4fc3e2a3">ast_config_AST_LOG_DIR</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#0c9ed5029117c0cc03a5acb9e5ff967f">ast_config_AST_MODULE_DIR</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#e30f110a2a02a50a63b05fe5ba3206b6">ast_config_AST_MONITOR_DIR</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#fd1223810856be295a0c0fc256ec902f">ast_config_AST_PID</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#8c5e4b7db03e053ea703f7166c2bd056">ast_config_AST_RUN_DIR</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#d09bbe8a64f8f712d59fb708101e5313">ast_config_AST_RUN_GROUP</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#64c0b497dfed5629380fe004fba12a35">ast_config_AST_RUN_USER</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#08630e9bc03919e21a3142aa0a35cbb2">ast_config_AST_SOCKET</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#a79197213f86764d67b79bf8542e8156">ast_config_AST_SPOOL_DIR</a> [PATH_MAX]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#0a0f8ba4c757a1da509a0cae1830025b">ast_config_AST_SYSTEM_NAME</a> [20]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="asterisk_8h.html#017a6bc35b6f5a54d1a20dd5ca71aba3">ast_config_AST_VAR_DIR</a> [PATH_MAX]</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Asterisk main include file. File version handling, generic pbx functions. 
<p>

<p>
Definition in file <a class="el" href="asterisk_8h-source.html">asterisk.h</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="457fd3a85858bd80e12a42d294d94309"></a><!-- doxytag: member="asterisk.h::AST_DIR_MODE" ref="457fd3a85858bd80e12a42d294d94309" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define AST_DIR_MODE&nbsp;&nbsp;&nbsp;0777          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8h-source.html#l00038">38</a> of file <a class="el" href="asterisk_8h-source.html">asterisk.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="40c72ca4a20a53b69eb99c554e214a82"></a><!-- doxytag: member="asterisk.h::AST_FILE_MODE" ref="40c72ca4a20a53b69eb99c554e214a82" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define AST_FILE_MODE&nbsp;&nbsp;&nbsp;0666          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8h-source.html#l00041">41</a> of file <a class="el" href="asterisk_8h-source.html">asterisk.h</a>.
<p>
Referenced by <a class="el" href="app_8c-source.html#l00509">__ast_play_and_record()</a>, <a class="el" href="app_8c-source.html#l00985">ast_lock_path()</a>, <a class="el" href="res__monitor_8c-source.html#l00127">ast_monitor_start()</a>, <a class="el" href="app__chanspy_8c-source.html#l00626">chanspy_exec()</a>, <a class="el" href="res__convert_8c-source.html#l00057">cli_audio_convert()</a>, <a class="el" href="file_8c-source.html#l00207">copy()</a>, <a class="el" href="db_8c-source.html#l00063">dbinit()</a>, <a class="el" href="app__dictate_8c-source.html#l00079">dictate_exec()</a>, <a class="el" href="app__chanspy_8c-source.html#l00708">extenspy_exec()</a>, <a class="el" href="app__festival_8c-source.html#l00286">festival_exec()</a>, <a class="el" href="res__agi_8c-source.html#l00889">handle_recordfile()</a>, <a class="el" href="cdr__sqlite_8c-source.html#l00179">load_module()</a>, <a class="el" href="app__record_8c-source.html#l00078">record_exec()</a>, <a class="el" href="app__meetme_8c-source.html#l03045">recordthread()</a>, <a class="el" href="app__sms_8c-source.html#l00711">sms_log()</a>, and <a class="el" href="chan__iax2_8c-source.html#l01427">try_firmware()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="9c510a313e63f75dac1b4afadc0d5545"></a><!-- doxytag: member="asterisk.h::ASTERISK_FILE_VERSION" ref="9c510a313e63f75dac1b4afadc0d5545" args="(file, version)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ASTERISK_FILE_VERSION          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="utils_8h.html#8c7dd922ad47494fc02c388e12c00eac">file</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>version&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Register/unregister a source code file with the core. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>file</em>&nbsp;</td><td>the source file name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>version</em>&nbsp;</td><td>the version string (typically a CVS revision keyword string)</td></tr>
  </table>
</dl>
This macro will place a file-scope constructor and destructor into the source of the module using it; this will cause the version of this file to registered with the Asterisk core (and unregistered) at the appropriate times.<p>
Example:<p>
<div class="fragment"><pre class="fragment"> <a class="code" href="asterisk_8h.html#9c510a313e63f75dac1b4afadc0d5545">ASTERISK_FILE_VERSION</a>(__FILE__, <span class="stringliteral">"\$Revision\$"</span>)
</pre></div><p>
<dl compact><dt><b>Note:</b></dt><dd>The dollar signs above have been protected with backslashes to keep CVS from modifying them in this file; under normal circumstances they would not be present and CVS would expand the Revision keyword into the file's revision number. </dd></dl>

<p>
Definition at line <a class="el" href="asterisk_8h-source.html#l00185">185</a> of file <a class="el" href="asterisk_8h-source.html">asterisk.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="900caad9f94399bdf7f6344a3738976d"></a><!-- doxytag: member="asterisk.h::DEFAULT_LANGUAGE" ref="900caad9f94399bdf7f6344a3738976d" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define DEFAULT_LANGUAGE&nbsp;&nbsp;&nbsp;&quot;en&quot;          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8h-source.html#l00044">44</a> of file <a class="el" href="asterisk_8h-source.html">asterisk.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="04d52d0c00ed0f3ea0678d55afbf957c"></a><!-- doxytag: member="asterisk.h::DEFAULT_SAMPLE_RATE" ref="04d52d0c00ed0f3ea0678d55afbf957c" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define DEFAULT_SAMPLE_RATE&nbsp;&nbsp;&nbsp;8000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8h-source.html#l00046">46</a> of file <a class="el" href="asterisk_8h-source.html">asterisk.h</a>.
<p>
Referenced by <a class="el" href="format__pcm_8c-source.html#l00266">check_header()</a>, <a class="el" href="format__ogg__vorbis_8c-source.html#l00206">ogg_vorbis_rewrite()</a>, <a class="el" href="chan__oss_8c-source.html#l00674">setformat()</a>, <a class="el" href="chan__oss_8c-source.html#l00597">sound_thread()</a>, and <a class="el" href="format__pcm_8c-source.html#l00345">write_header()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="35d9207ec8638d71f1e25e0299f1f48d"></a><!-- doxytag: member="asterisk.h::DEFAULT_SAMPLES_PER_MS" ref="35d9207ec8638d71f1e25e0299f1f48d" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define DEFAULT_SAMPLES_PER_MS&nbsp;&nbsp;&nbsp;((DEFAULT_SAMPLE_RATE)/1000)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8h-source.html#l00047">47</a> of file <a class="el" href="asterisk_8h-source.html">asterisk.h</a>.
<p>
Referenced by <a class="el" href="file_8c-source.html#l00691">ast_stream_fastforward()</a>, <a class="el" href="file_8c-source.html#l00696">ast_stream_rewind()</a>, and <a class="el" href="app__amd_8c-source.html#l00097">isAnsweringMachine()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="7e6c136d19e5300f9824d47089ae28bf"></a><!-- doxytag: member="asterisk.h::sched_setscheduler" ref="7e6c136d19e5300f9824d47089ae28bf" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define sched_setscheduler&nbsp;&nbsp;&nbsp;__PLEASE_USE_ast_set_priority_INSTEAD_OF_sched_setscheduler__          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8h-source.html#l00049">49</a> of file <a class="el" href="asterisk_8h-source.html">asterisk.h</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l01156">ast_set_priority()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="8e136921ec18e6d7a07951bf19c1dfc4"></a><!-- doxytag: member="asterisk.h::setpriority" ref="8e136921ec18e6d7a07951bf19c1dfc4" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define setpriority&nbsp;&nbsp;&nbsp;__PLEASE_USE_ast_set_priority_INSTEAD_OF_setpriority__          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8h-source.html#l00048">48</a> of file <a class="el" href="asterisk_8h-source.html">asterisk.h</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l01156">ast_set_priority()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="5e548fab02e9ee58c0d5ea7ab64eca09"></a><!-- doxytag: member="asterisk.h::ast_add_profile" ref="5e548fab02e9ee58c0d5ea7ab64eca09" args="(const char *, uint64_t scale)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_add_profile           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint64_t&nbsp;</td>
          <td class="mdname" nowrap> <em>scale</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
support for event profiling 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>Returns the identifier of the counter. </dd></dl>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00465">465</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.
<p>
References <a class="el" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>, <a class="el" href="utils_8h.html#009723420c269c3a1ecb1953558e608d">ast_realloc</a>, <a class="el" href="utils_8h.html#d67aacdb581292a9d103cf349d0d2862">ast_strdup</a>, <a class="el" href="asterisk_8c-source.html#l00457">profile_data::e</a>, <a class="el" href="asterisk_8c-source.html#l00455">profile_data::entries</a>, <a class="el" href="asterisk_8c-source.html#l00451">profile_entry::events</a>, <a class="el" href="asterisk_8c-source.html#l00449">profile_entry::mark</a>, <a class="el" href="asterisk_8c-source.html#l00456">profile_data::max_size</a>, <a class="el" href="asterisk_8c-source.html#l00447">profile_entry::name</a>, <a class="el" href="asterisk_8c-source.html#l00448">profile_entry::scale</a>, and <a class="el" href="asterisk_8c-source.html#l00450">profile_entry::value</a>.
<p>
Referenced by <a class="el" href="pbx_8c-source.html#l00865">extension_match_core()</a>.<div class="fragment"><pre class="fragment"><a name="l00466"></a>00466 {
<a name="l00467"></a>00467    <span class="keywordtype">int</span> l = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structprofile__data.html">profile_data</a>);
<a name="l00468"></a>00468    <span class="keywordtype">int</span> n = 10; <span class="comment">/* default entries */</span>
<a name="l00469"></a>00469 
<a name="l00470"></a>00470    <span class="keywordflow">if</span> (<a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a> == NULL) {
<a name="l00471"></a>00471       <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a> = <a class="code" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>(1, l + n*<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structprofile__entry.html">profile_entry</a>));
<a name="l00472"></a>00472       <span class="keywordflow">if</span> (<a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a> == NULL)
<a name="l00473"></a>00473          <span class="keywordflow">return</span> -1;
<a name="l00474"></a>00474       <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#5fce916b625108149ee3ea5f48d9b0d1">entries</a> = 0;
<a name="l00475"></a>00475       <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#da3260a0e11612d46e4ebab5d03fd4dd">max_size</a> = n;
<a name="l00476"></a>00476    }
<a name="l00477"></a>00477    <span class="keywordflow">if</span> (<a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#5fce916b625108149ee3ea5f48d9b0d1">entries</a> &gt;= <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#da3260a0e11612d46e4ebab5d03fd4dd">max_size</a>) {
<a name="l00478"></a>00478       <span class="keywordtype">void</span> *p;
<a name="l00479"></a>00479       n = <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#da3260a0e11612d46e4ebab5d03fd4dd">max_size</a> + 20;
<a name="l00480"></a>00480       p = <a class="code" href="utils_8h.html#009723420c269c3a1ecb1953558e608d">ast_realloc</a>(<a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>, l + n*<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structprofile__entry.html">profile_entry</a>));
<a name="l00481"></a>00481       <span class="keywordflow">if</span> (p == NULL)
<a name="l00482"></a>00482          <span class="keywordflow">return</span> -1;
<a name="l00483"></a>00483       <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a> = p;
<a name="l00484"></a>00484       <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#da3260a0e11612d46e4ebab5d03fd4dd">max_size</a> = n;
<a name="l00485"></a>00485    }
<a name="l00486"></a>00486    n = <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#5fce916b625108149ee3ea5f48d9b0d1">entries</a>++;
<a name="l00487"></a>00487    <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[n].<a class="code" href="structprofile__entry.html#b068931cc450442b63f5b3d276ea4297">name</a> = <a class="code" href="utils_8h.html#d67aacdb581292a9d103cf349d0d2862">ast_strdup</a>(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>);
<a name="l00488"></a>00488    <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[n].<a class="code" href="structprofile__entry.html#2063c1608d6e0baf80249c42e2be5804">value</a> = 0;
<a name="l00489"></a>00489    <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[n].<a class="code" href="structprofile__entry.html#16908b0605f2645dfcb4c3a8d248cef3">events</a> = 0;
<a name="l00490"></a>00490    <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[n].<a class="code" href="structprofile__entry.html#ea82410c7a9991816b5eeeebe195e20a">mark</a> = 0;
<a name="l00491"></a>00491    <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[n].<a class="code" href="structprofile__entry.html#0cb47aeb6e5f9323f0969e628c4e59f5">scale</a> = scale;
<a name="l00492"></a>00492    <span class="keywordflow">return</span> n;
<a name="l00493"></a>00493 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="833ba54dcfde3b670f65097c0f1aae33"></a><!-- doxytag: member="asterisk.h::ast_builtins_init" ref="833ba54dcfde3b670f65097c0f1aae33" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_builtins_init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
initialize the _full_cmd string in * each of the builtins. 
<p>
Provided by <a class="el" href="cli_8c.html">cli.c</a> 
<p>
Definition at line <a class="el" href="cli_8c-source.html#l01041">1041</a> of file <a class="el" href="cli_8c-source.html">cli.c</a>.
<p>
References <a class="el" href="cli_8c-source.html#l01352">ast_cli_register_multiple()</a>, <a class="el" href="cli_8h-source.html#l00154">ast_cli_entry::cmda</a>, and <a class="el" href="cli_8c-source.html#l01022">set_full_cmd()</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.<div class="fragment"><pre class="fragment"><a name="l01042"></a>01042 {
<a name="l01043"></a>01043    <span class="keyword">struct </span><a class="code" href="structast__cli__entry.html">ast_cli_entry</a> *e;
<a name="l01044"></a>01044 
<a name="l01045"></a>01045    <span class="keywordflow">for</span> (e = <a class="code" href="cli_8c.html#7b94c2c41ed9fd600b9a19bb54467397">builtins</a>; e-&gt;<a class="code" href="structast__cli__entry.html#ec27655330419638d73b5c69b3f1168e">cmda</a>[0] != NULL; e++)
<a name="l01046"></a>01046       <a class="code" href="cli_8c.html#cbe3c5bc7c46fc8815615f69cb6d88d9">set_full_cmd</a>(e);
<a name="l01047"></a>01047 
<a name="l01048"></a>01048    <a class="code" href="cli_8c.html#a334dfd903e83eea3729ff37aa372781">ast_cli_register_multiple</a>(<a class="code" href="cli_8c.html#fb3c7b069abee786fac0195e698d4bd9">cli_cli</a>, <span class="keyword">sizeof</span>(<a class="code" href="cli_8c.html#fb3c7b069abee786fac0195e698d4bd9">cli_cli</a>) / <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structast__cli__entry.html">ast_cli_entry</a>));
<a name="l01049"></a>01049 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ea40c04ddba9d91880686eb95e400008"></a><!-- doxytag: member="asterisk.h::ast_channels_init" ref="ea40c04ddba9d91880686eb95e400008" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_channels_init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provided by <a class="el" href="channel_8c.html">channel.c</a> 
<p>
Definition at line <a class="el" href="channel_8c-source.html#l04455">4455</a> of file <a class="el" href="channel_8c-source.html">channel.c</a>.
<p>
References <a class="el" href="cli_8c-source.html#l01352">ast_cli_register_multiple()</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.<div class="fragment"><pre class="fragment"><a name="l04456"></a>04456 {
<a name="l04457"></a>04457    <a class="code" href="cli_8c.html#a334dfd903e83eea3729ff37aa372781">ast_cli_register_multiple</a>(<a class="code" href="channel_8c.html#21ec745a076182c96358f435eab3b6bc">cli_channel</a>, <span class="keyword">sizeof</span>(cli_channel) / <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structast__cli__entry.html">ast_cli_entry</a>));
<a name="l04458"></a>04458 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="8422fd37702f84a5ced85ca3a641915b"></a><!-- doxytag: member="asterisk.h::ast_event_init" ref="8422fd37702f84a5ced85ca3a641915b" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_event_init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provided by <a class="el" href="event_8c.html">event.c</a> 
<p>
Definition at line <a class="el" href="event_8c-source.html#l00758">758</a> of file <a class="el" href="event_8c-source.html">event.c</a>.
<p>
References <a class="el" href="lock_8h-source.html#l00542">ast_cond_init()</a>, <a class="el" href="event_8c-source.html#l00707">ast_event_dispatcher()</a>, <a class="el" href="event__defs_8h.html#6113ee9ad28cba551a4b7c7f9e13d8f56c0d85a4badc26620b04ecd2a4dfbd6b">AST_EVENT_TOTAL</a>, <a class="el" href="utils_8h-source.html#l00307">ast_pthread_create_background</a>, <a class="el" href="linkedlists_8h-source.html#l00578">AST_RWLIST_HEAD_INIT</a>, <a class="el" href="event_8c.html#13beb04f99cfd9fd4b1d9d303e774eff">event_thread</a>, and <a class="el" href="event_8c-source.html#l00038">NUM_EVENT_THREADS</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00759"></a>00759 {
<a name="l00760"></a>00760    <span class="keywordtype">int</span> i;
<a name="l00761"></a>00761 
<a name="l00762"></a>00762    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="event__defs_8h.html#6113ee9ad28cba551a4b7c7f9e13d8f56c0d85a4badc26620b04ecd2a4dfbd6b">AST_EVENT_TOTAL</a>; i++)
<a name="l00763"></a>00763       <a class="code" href="linkedlists_8h.html#e0c2d1850da548278dc3850748a8296f">AST_RWLIST_HEAD_INIT</a>(&amp;ast_event_subs[i]);
<a name="l00764"></a>00764 
<a name="l00765"></a>00765    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="event__defs_8h.html#6113ee9ad28cba551a4b7c7f9e13d8f56c0d85a4badc26620b04ecd2a4dfbd6b">AST_EVENT_TOTAL</a>; i++)
<a name="l00766"></a>00766       <a class="code" href="linkedlists_8h.html#e0c2d1850da548278dc3850748a8296f">AST_RWLIST_HEAD_INIT</a>(&amp;ast_event_cache[i]);
<a name="l00767"></a>00767 
<a name="l00768"></a>00768    <a class="code" href="lock_8h.html#26b556000e9ba452b40f732a86644de6">ast_cond_init</a>(&amp;<a class="code" href="event_8c.html#13beb04f99cfd9fd4b1d9d303e774eff">event_thread</a>.cond, NULL);
<a name="l00769"></a>00769 
<a name="l00770"></a>00770    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="event_8c.html#01b5e015ac0acb2f53df5744d6d5efbb">NUM_EVENT_THREADS</a>; i++) {
<a name="l00771"></a>00771       pthread_t dont_care;
<a name="l00772"></a>00772       <a class="code" href="utils_8h.html#351b78c7aeb62b2b57eb447287cdd9d4">ast_pthread_create_background</a>(&amp;dont_care, NULL, <a class="code" href="event_8c.html#76c4666a7e4da29982e909c9d8843feb">ast_event_dispatcher</a>, NULL);
<a name="l00773"></a>00773    }
<a name="l00774"></a>00774 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a60ffb42c53d0d022a1f3a3e55b3b89e"></a><!-- doxytag: member="asterisk.h::ast_mark" ref="a60ffb42c53d0d022a1f3a3e55b3b89e" args="(int, int start1_stop0)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int64_t ast_mark           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>start1_stop0</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00527">527</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.
<p>
References <a class="el" href="asterisk_8c-source.html#l00457">profile_data::e</a>, <a class="el" href="asterisk_8c-source.html#l00455">profile_data::entries</a>, <a class="el" href="asterisk_8c-source.html#l00451">profile_entry::events</a>, <a class="el" href="asterisk_8c-source.html#l00449">profile_entry::mark</a>, <a class="el" href="asterisk_8c-source.html#l00521">rdtsc()</a>, <a class="el" href="asterisk_8c-source.html#l00448">profile_entry::scale</a>, and <a class="el" href="asterisk_8c-source.html#l00450">profile_entry::value</a>.
<p>
Referenced by <a class="el" href="pbx_8c-source.html#l00865">extension_match_core()</a>.<div class="fragment"><pre class="fragment"><a name="l00528"></a>00528 {
<a name="l00529"></a>00529    <span class="keywordflow">if</span> (!<a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a> || i &lt; 0 || i &gt; <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#5fce916b625108149ee3ea5f48d9b0d1">entries</a>) <span class="comment">/* invalid index */</span>
<a name="l00530"></a>00530       <span class="keywordflow">return</span> 0;
<a name="l00531"></a>00531    <span class="keywordflow">if</span> (startstop == 1)
<a name="l00532"></a>00532       <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[i].<a class="code" href="structprofile__entry.html#ea82410c7a9991816b5eeeebe195e20a">mark</a> = <a class="code" href="asterisk_8c.html#46e66c5d990efced61fe0a62c146b454">rdtsc</a>();
<a name="l00533"></a>00533    <span class="keywordflow">else</span> {
<a name="l00534"></a>00534       <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[i].<a class="code" href="structprofile__entry.html#ea82410c7a9991816b5eeeebe195e20a">mark</a> = (<a class="code" href="asterisk_8c.html#46e66c5d990efced61fe0a62c146b454">rdtsc</a>() - <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[i].<a class="code" href="structprofile__entry.html#ea82410c7a9991816b5eeeebe195e20a">mark</a>);
<a name="l00535"></a>00535       <span class="keywordflow">if</span> (<a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[i].<a class="code" href="structprofile__entry.html#0cb47aeb6e5f9323f0969e628c4e59f5">scale</a> &gt; 1)
<a name="l00536"></a>00536          <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[i].<a class="code" href="structprofile__entry.html#ea82410c7a9991816b5eeeebe195e20a">mark</a> /= <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[i].<a class="code" href="structprofile__entry.html#0cb47aeb6e5f9323f0969e628c4e59f5">scale</a>;
<a name="l00537"></a>00537       <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[i].<a class="code" href="structprofile__entry.html#2063c1608d6e0baf80249c42e2be5804">value</a> += <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[i].<a class="code" href="structprofile__entry.html#ea82410c7a9991816b5eeeebe195e20a">mark</a>;
<a name="l00538"></a>00538       <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[i].<a class="code" href="structprofile__entry.html#16908b0605f2645dfcb4c3a8d248cef3">events</a>++;
<a name="l00539"></a>00539    }
<a name="l00540"></a>00540    <span class="keywordflow">return</span> <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[i].<a class="code" href="structprofile__entry.html#ea82410c7a9991816b5eeeebe195e20a">mark</a>;
<a name="l00541"></a>00541 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="12479ce54a93d95bd3c845793c3c0f19"></a><!-- doxytag: member="asterisk.h::ast_module_reload" ref="12479ce54a93d95bd3c845793c3c0f19" args="(const char *name)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_module_reload           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>name</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reload asterisk modules. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>the name of the module to reload</td></tr>
  </table>
</dl>
This function reloads the specified module, or if no modules are specified, it will reload all loaded modules.<p>
<dl compact><dt><b>Note:</b></dt><dd>Modules are reloaded using their <a class="el" href="chan__agent_8c.html#91875b0435b600b8ed0e424d70d492b0">reload()</a> functions, not unloading them and loading them again.</dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>Zero if the specified module was not found, 1 if the module was found but cannot be reloaded, -1 if a reload operation is already in progress, and 2 if the specfied module was found and reloaded. </dd></dl>

<p>
Definition at line <a class="el" href="loader_8c-source.html#l00520">520</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="asterisk_8c-source.html#l00196">ast_lastreloadtime</a>, <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00453">AST_LIST_TRAVERSE</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, <a class="el" href="lock_8h-source.html#l00535">ast_mutex_trylock()</a>, <a class="el" href="lock_8h-source.html#l00520">ast_mutex_unlock()</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="module_8h-source.html#l00198">ast_module_info::description</a>, <a class="el" href="structast__module.html#4e5868d676cb634aa75b125a0f741abf">ast_module::flags</a>, <a class="el" href="loader_8c-source.html#l00084">ast_module::info</a>, <a class="el" href="asterisk_8c-source.html#l00163">option_verbose</a>, <a class="el" href="structast__module__info.html#27ee28a0c75b9149c59584103c439553">ast_module_info::reload</a>, <a class="el" href="loader_8c-source.html#l00286">resource_name_match()</a>, and <a class="el" href="logger_8h-source.html#l00045">VERBOSE_PREFIX_3</a>.
<p>
Referenced by <a class="el" href="manager_8c-source.html#l01251">action_updateconfig()</a>, <a class="el" href="cli_8c-source.html#l00144">handle_reload()</a>, and <a class="el" href="asterisk_8c-source.html#l02550">monitor_sig_flags()</a>.<div class="fragment"><pre class="fragment"><a name="l00521"></a>00521 {
<a name="l00522"></a>00522    <span class="keyword">struct </span><a class="code" href="structast__module.html">ast_module</a> *cur;
<a name="l00523"></a>00523    <span class="keywordtype">int</span> res = 0; <span class="comment">/* return value. 0 = not found, others, see below */</span>
<a name="l00524"></a>00524    <span class="keywordtype">int</span> i;
<a name="l00525"></a>00525 
<a name="l00526"></a>00526    <span class="keywordflow">if</span> (<a class="code" href="lock_8h.html#95eeb25d5a8ccfa3adff8168c75d70e0">ast_mutex_trylock</a>(&amp;reloadlock)) {
<a name="l00527"></a>00527       <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<span class="stringliteral">"The previous reload command didn't finish yet\n"</span>);
<a name="l00528"></a>00528       <span class="keywordflow">return</span> -1;  <span class="comment">/* reload already in progress */</span>
<a name="l00529"></a>00529    }
<a name="l00530"></a>00530    <a class="code" href="asterisk_8c.html#e6ff0fa0781fd6b2cfaac6462595ff78">ast_lastreloadtime</a> = time(NULL);
<a name="l00531"></a>00531 
<a name="l00532"></a>00532    <span class="comment">/* Call "predefined" reload here first */</span>
<a name="l00533"></a>00533    <span class="keywordflow">for</span> (i = 0; <a class="code" href="structreload__classes.html">reload_classes</a>[i].<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>; i++) {
<a name="l00534"></a>00534       <span class="keywordflow">if</span> (!<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a> || !strcasecmp(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, <a class="code" href="structreload__classes.html">reload_classes</a>[i].<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>)) {
<a name="l00535"></a>00535          <a class="code" href="structreload__classes.html">reload_classes</a>[i].reload_fn();   <span class="comment">/* XXX should check error ? */</span>
<a name="l00536"></a>00536          res = 2; <span class="comment">/* found and reloaded */</span>
<a name="l00537"></a>00537       }
<a name="l00538"></a>00538    }
<a name="l00539"></a>00539 
<a name="l00540"></a>00540    <span class="keywordflow">if</span> (name &amp;&amp; res) {
<a name="l00541"></a>00541       <a class="code" href="lock_8h.html#1d33e3caf152f0901c5ebdb69c2d4d26">ast_mutex_unlock</a>(&amp;reloadlock);
<a name="l00542"></a>00542       <span class="keywordflow">return</span> res;
<a name="l00543"></a>00543    }
<a name="l00544"></a>00544 
<a name="l00545"></a>00545    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;module_list);
<a name="l00546"></a>00546    <a class="code" href="linkedlists_8h.html#e5bbda4b7ef1cd9462bb86ba25c5d7eb">AST_LIST_TRAVERSE</a>(&amp;module_list, cur, entry) {
<a name="l00547"></a>00547       <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structast__module__info.html">ast_module_info</a> *info = cur-&gt;<a class="code" href="structast__module.html#caf9b6b99962bf5c2264824231d7a40c">info</a>;
<a name="l00548"></a>00548 
<a name="l00549"></a>00549       <span class="keywordflow">if</span> (name &amp;&amp; <a class="code" href="loader_8c.html#0af63f3a784807952b56443706a2a5ab">resource_name_match</a>(name, cur-&gt;resource))
<a name="l00550"></a>00550          <span class="keywordflow">continue</span>;
<a name="l00551"></a>00551 
<a name="l00552"></a>00552       <span class="keywordflow">if</span> (!(cur-&gt;<a class="code" href="structast__module.html#4e5868d676cb634aa75b125a0f741abf">flags</a>.running || cur-&gt;<a class="code" href="structast__module.html#4e5868d676cb634aa75b125a0f741abf">flags</a>.declined))
<a name="l00553"></a>00553          <span class="keywordflow">continue</span>;
<a name="l00554"></a>00554 
<a name="l00555"></a>00555       <span class="keywordflow">if</span> (!info-&gt;<a class="code" href="structast__module__info.html#27ee28a0c75b9149c59584103c439553">reload</a>) { <span class="comment">/* cannot be reloaded */</span>
<a name="l00556"></a>00556          <span class="keywordflow">if</span> (res &lt; 1)   <span class="comment">/* store result if possible */</span>
<a name="l00557"></a>00557             res = 1; <span class="comment">/* 1 = no reload() method */</span>
<a name="l00558"></a>00558          <span class="keywordflow">continue</span>;
<a name="l00559"></a>00559       }
<a name="l00560"></a>00560 
<a name="l00561"></a>00561       res = 2;
<a name="l00562"></a>00562       <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 2)
<a name="l00563"></a>00563          <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<a class="code" href="logger_8h.html#aefd5a67b7464040f5352e4ecdc535ca">VERBOSE_PREFIX_3</a> <span class="stringliteral">"Reloading module '%s' (%s)\n"</span>, cur-&gt;resource, info-&gt;<a class="code" href="structast__module__info.html#67daf92c833c41c95db874e18fcb2786">description</a>);
<a name="l00564"></a>00564       info-&gt;<a class="code" href="structast__module__info.html#27ee28a0c75b9149c59584103c439553">reload</a>();
<a name="l00565"></a>00565    }
<a name="l00566"></a>00566    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;module_list);
<a name="l00567"></a>00567 
<a name="l00568"></a>00568    <a class="code" href="lock_8h.html#1d33e3caf152f0901c5ebdb69c2d4d26">ast_mutex_unlock</a>(&amp;reloadlock);
<a name="l00569"></a>00569 
<a name="l00570"></a>00570    <span class="keywordflow">return</span> res;
<a name="l00571"></a>00571 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="527b2ecec6ba462cbfbe8e812527e16d"></a><!-- doxytag: member="asterisk.h::ast_profile" ref="527b2ecec6ba462cbfbe8e812527e16d" args="(int, int64_t)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int64_t ast_profile           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int64_t&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00495">495</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.
<p>
References <a class="el" href="asterisk_8c-source.html#l00457">profile_data::e</a>, <a class="el" href="asterisk_8c-source.html#l00455">profile_data::entries</a>, <a class="el" href="asterisk_8c-source.html#l00451">profile_entry::events</a>, <a class="el" href="asterisk_8c-source.html#l00448">profile_entry::scale</a>, and <a class="el" href="asterisk_8c-source.html#l00450">profile_entry::value</a>.<div class="fragment"><pre class="fragment"><a name="l00496"></a>00496 {
<a name="l00497"></a>00497    <span class="keywordflow">if</span> (!<a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a> || i &lt; 0 || i &gt; <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#5fce916b625108149ee3ea5f48d9b0d1">entries</a>) <span class="comment">/* invalid index */</span>
<a name="l00498"></a>00498       <span class="keywordflow">return</span> 0;
<a name="l00499"></a>00499    <span class="keywordflow">if</span> (<a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[i].<a class="code" href="structprofile__entry.html#0cb47aeb6e5f9323f0969e628c4e59f5">scale</a> &gt; 1)
<a name="l00500"></a>00500       delta /= <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[i].<a class="code" href="structprofile__entry.html#0cb47aeb6e5f9323f0969e628c4e59f5">scale</a>;
<a name="l00501"></a>00501    <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[i].<a class="code" href="structprofile__entry.html#2063c1608d6e0baf80249c42e2be5804">value</a> += delta;
<a name="l00502"></a>00502    <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[i].<a class="code" href="structprofile__entry.html#16908b0605f2645dfcb4c3a8d248cef3">events</a>++;
<a name="l00503"></a>00503    <span class="keywordflow">return</span> <a class="code" href="asterisk_8c.html#3376dd77bf013759997b26cfc31c7235">prof_data</a>-&gt;<a class="code" href="structprofile__data.html#0251968a168fdbd4d7f2d3bf92e37539">e</a>[i].<a class="code" href="structprofile__entry.html#2063c1608d6e0baf80249c42e2be5804">value</a>;
<a name="l00504"></a>00504 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c0fa49bc6ac7af56a1f410920f115253"></a><!-- doxytag: member="asterisk.h::ast_register_atexit" ref="c0fa49bc6ac7af56a1f410920f115253" args="(void(*func)(void))" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_register_atexit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void(*)(void)&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>func</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Register a function to be executed before Asterisk exits. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>func</em>&nbsp;</td><td>The callback function to use.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Zero on success, -1 on error. </dd></dl>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00672">672</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.
<p>
References <a class="el" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>, <a class="el" href="linkedlists_8h-source.html#l00650">AST_LIST_INSERT_HEAD</a>, <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, and <a class="el" href="asterisk_8c-source.html#l00687">ast_unregister_atexit()</a>.
<p>
Referenced by <a class="el" href="cdr_8c-source.html#l01229">do_reload()</a>, and <a class="el" href="res__musiconhold_8c-source.html#l01225">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00673"></a>00673 {
<a name="l00674"></a>00674    <span class="keywordtype">int</span> res = -1;
<a name="l00675"></a>00675    <span class="keyword">struct </span><a class="code" href="structast__atexit.html">ast_atexit</a> *ae;
<a name="l00676"></a>00676    <a class="code" href="asterisk_8c.html#60996aec923b890a13ad493979174ea0">ast_unregister_atexit</a>(<a class="code" href="manager_8h.html#7df4935f4a5a2865191ef74f64df8754">func</a>);  
<a name="l00677"></a>00677    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;atexits);
<a name="l00678"></a>00678    <span class="keywordflow">if</span> ((ae = <a class="code" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*ae)))) {
<a name="l00679"></a>00679       <a class="code" href="linkedlists_8h.html#5df56040a8838bdc841ef8eb179b7609">AST_LIST_INSERT_HEAD</a>(&amp;atexits, ae, list);
<a name="l00680"></a>00680       ae-&gt;func = <a class="code" href="manager_8h.html#7df4935f4a5a2865191ef74f64df8754">func</a>;
<a name="l00681"></a>00681       res = 0;
<a name="l00682"></a>00682    }
<a name="l00683"></a>00683    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;atexits);
<a name="l00684"></a>00684    <span class="keywordflow">return</span> res;
<a name="l00685"></a>00685 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d52952457c154bcf0009ece6816c06e5"></a><!-- doxytag: member="asterisk.h::ast_register_file_version" ref="d52952457c154bcf0009ece6816c06e5" args="(const char *file, const char *version)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_register_file_version           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>version</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Register the version of a source code file with the core. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>file</em>&nbsp;</td><td>the source file name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>version</em>&nbsp;</td><td>the version string (typically a CVS revision keyword string) </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing</dd></dl>
This function should not be called directly, but instead the ASTERISK_FILE_VERSION macro should be used to register a file with the core. 
<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00261">261</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.
<p>
References <a class="el" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>, <a class="el" href="linkedlists_8h-source.html#l00650">AST_LIST_INSERT_HEAD</a>, <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, <a class="el" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>, and <a class="el" href="utils_8c-source.html#l00676">ast_strip_quoted()</a>.<div class="fragment"><pre class="fragment"><a name="l00262"></a>00262 {
<a name="l00263"></a>00263    <span class="keyword">struct </span><a class="code" href="structfile__version.html">file_version</a> *<span class="keyword">new</span>;
<a name="l00264"></a>00264    <span class="keywordtype">char</span> *work;
<a name="l00265"></a>00265    size_t version_length;
<a name="l00266"></a>00266 
<a name="l00267"></a>00267    work = <a class="code" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>(version);
<a name="l00268"></a>00268    work = ast_strip(<a class="code" href="utils_8c.html#6a943d01c4b8702655d014e9243b4e7d">ast_strip_quoted</a>(work, <span class="stringliteral">"$"</span>, <span class="stringliteral">"$"</span>));
<a name="l00269"></a>00269    version_length = strlen(work) + 1;
<a name="l00270"></a>00270    
<a name="l00271"></a>00271    <span class="keywordflow">if</span> (!(<span class="keyword">new</span> = <a class="code" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*<span class="keyword">new</span>) + version_length)))
<a name="l00272"></a>00272       <span class="keywordflow">return</span>;
<a name="l00273"></a>00273 
<a name="l00274"></a>00274    <span class="keyword">new</span>-&gt;file = <a class="code" href="manager_8h.html#8c7dd922ad47494fc02c388e12c00eac">file</a>;
<a name="l00275"></a>00275    <span class="keyword">new</span>-&gt;version = (<span class="keywordtype">char</span> *) <span class="keyword">new</span> + <span class="keyword">sizeof</span>(*<span class="keyword">new</span>);
<a name="l00276"></a>00276    memcpy(new-&gt;version, work, version_length);
<a name="l00277"></a>00277    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;file_versions);
<a name="l00278"></a>00278    <a class="code" href="linkedlists_8h.html#5df56040a8838bdc841ef8eb179b7609">AST_LIST_INSERT_HEAD</a>(&amp;file_versions, <span class="keyword">new</span>, list);
<a name="l00279"></a>00279    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;file_versions);
<a name="l00280"></a>00280 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b0f7a6d888f790502ecabfbf4bf4c666"></a><!-- doxytag: member="asterisk.h::ast_set_priority" ref="b0f7a6d888f790502ecabfbf4bf4c666" args="(int)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_set_priority           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
We set ourselves to a high priority, that we might pre-empt everything else. If your PBX has heavy activity on it, this is a good thing. 
<p>
Provided by <a class="el" href="asterisk_8c.html">asterisk.c</a> 
<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l01156">1156</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.
<p>
References <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="asterisk_8c-source.html#l00163">option_verbose</a>, <a class="el" href="asterisk_8h-source.html#l00049">sched_setscheduler</a>, and <a class="el" href="asterisk_8h-source.html#l00048">setpriority</a>.
<p>
Referenced by <a class="el" href="app__externalivr_8c-source.html#l00244">app_exec()</a>, <a class="el" href="asterisk_8c-source.html#l00746">ast_safe_system()</a>, <a class="el" href="app__ices_8c-source.html#l00066">icesencode()</a>, <a class="el" href="res__agi_8c-source.html#l00235">launch_script()</a>, <a class="el" href="asterisk_8c-source.html#l02570">main()</a>, <a class="el" href="app__mp3_8c-source.html#l00063">mp3play()</a>, <a class="el" href="app__nbscat_8c-source.html#l00067">NBScatplay()</a>, <a class="el" href="app__festival_8c-source.html#l00128">send_waveform_to_fd()</a>, <a class="el" href="res__musiconhold_8c-source.html#l00367">spawn_mp3()</a>, and <a class="el" href="app__zapras_8c-source.html#l00077">spawn_ras()</a>.<div class="fragment"><pre class="fragment"><a name="l01157"></a>01157 {
<a name="l01158"></a>01158    <span class="keyword">struct </span>sched_param sched;
<a name="l01159"></a>01159    memset(&amp;sched, 0, <span class="keyword">sizeof</span>(sched));
<a name="l01160"></a>01160 <span class="preprocessor">#ifdef __linux__</span>
<a name="l01161"></a>01161 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (pri) {  
<a name="l01162"></a>01162       sched.sched_priority = 10;
<a name="l01163"></a>01163       <span class="keywordflow">if</span> (<a class="code" href="asterisk_8h.html#7e6c136d19e5300f9824d47089ae28bf">sched_setscheduler</a>(0, SCHED_RR, &amp;sched)) {
<a name="l01164"></a>01164          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Unable to set high priority\n"</span>);
<a name="l01165"></a>01165          <span class="keywordflow">return</span> -1;
<a name="l01166"></a>01166       } <span class="keywordflow">else</span>
<a name="l01167"></a>01167          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a>)
<a name="l01168"></a>01168             <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<span class="stringliteral">"Set to realtime thread\n"</span>);
<a name="l01169"></a>01169    } <span class="keywordflow">else</span> {
<a name="l01170"></a>01170       sched.sched_priority = 0;
<a name="l01171"></a>01171       <span class="comment">/* According to the manpage, these parameters can never fail. */</span>
<a name="l01172"></a>01172       <a class="code" href="asterisk_8h.html#7e6c136d19e5300f9824d47089ae28bf">sched_setscheduler</a>(0, SCHED_OTHER, &amp;sched);
<a name="l01173"></a>01173    }
<a name="l01174"></a>01174 <span class="preprocessor">#else</span>
<a name="l01175"></a>01175 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (pri) {
<a name="l01176"></a>01176       <span class="keywordflow">if</span> (<a class="code" href="asterisk_8h.html#8e136921ec18e6d7a07951bf19c1dfc4">setpriority</a>(PRIO_PROCESS, 0, -10) == -1) {
<a name="l01177"></a>01177          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Unable to set high priority\n"</span>);
<a name="l01178"></a>01178          <span class="keywordflow">return</span> -1;
<a name="l01179"></a>01179       } <span class="keywordflow">else</span>
<a name="l01180"></a>01180          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a>)
<a name="l01181"></a>01181             <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<span class="stringliteral">"Set to high priority\n"</span>);
<a name="l01182"></a>01182    } <span class="keywordflow">else</span> {
<a name="l01183"></a>01183       <span class="comment">/* According to the manpage, these parameters can never fail. */</span>
<a name="l01184"></a>01184       <a class="code" href="asterisk_8h.html#8e136921ec18e6d7a07951bf19c1dfc4">setpriority</a>(PRIO_PROCESS, 0, 0);
<a name="l01185"></a>01185    }
<a name="l01186"></a>01186 <span class="preprocessor">#endif</span>
<a name="l01187"></a>01187 <span class="preprocessor"></span>   <span class="keywordflow">return</span> 0;
<a name="l01188"></a>01188 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="5c46f443c8dcb0695a690c4d9f7c37b7"></a><!-- doxytag: member="asterisk.h::ast_term_init" ref="5c46f443c8dcb0695a690c4d9f7c37b7" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_term_init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provided by <a class="el" href="term_8c.html">term.c</a> 
<p>
Definition at line <a class="el" href="term_8c-source.html#l00075">75</a> of file <a class="el" href="term_8c-source.html">term.c</a>.
<p>
References <a class="el" href="options_8h-source.html#l00089">ast_opt_console</a>, <a class="el" href="options_8h-source.html#l00094">ast_opt_no_color</a>, <a class="el" href="options_8h-source.html#l00087">ast_opt_no_fork</a>, <a class="el" href="term_8h-source.html#l00032">ATTR_BRIGHT</a>, <a class="el" href="term_8h-source.html#l00031">ATTR_RESET</a>, <a class="el" href="term_8h-source.html#l00039">COLOR_BLACK</a>, <a class="el" href="term_8h-source.html#l00045">COLOR_BROWN</a>, <a class="el" href="term_8h-source.html#l00053">COLOR_WHITE</a>, <a class="el" href="term_8c-source.html#l00060">convshort()</a>, <a class="el" href="term_8c-source.html#l00049">enddata</a>, <a class="el" href="term_8h-source.html#l00030">ESC</a>, <a class="el" href="term_8c-source.html#l00048">prepdata</a>, <a class="el" href="term_8c-source.html#l00050">quitdata</a>, <a class="el" href="term_8c-source.html#l00052">termpath</a>, and <a class="el" href="term_8c-source.html#l00046">vt100compat</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00076"></a>00076 {
<a name="l00077"></a>00077    <span class="keywordtype">char</span> *term = getenv(<span class="stringliteral">"TERM"</span>);
<a name="l00078"></a>00078    <span class="keywordtype">char</span> termfile[256] = <span class="stringliteral">""</span>;
<a name="l00079"></a>00079    <span class="keywordtype">char</span> buffer[512] = <span class="stringliteral">""</span>;
<a name="l00080"></a>00080    <span class="keywordtype">int</span> termfd = -1, parseokay = 0, i;
<a name="l00081"></a>00081 
<a name="l00082"></a>00082    <span class="keywordflow">if</span> (!term)
<a name="l00083"></a>00083       <span class="keywordflow">return</span> 0;
<a name="l00084"></a>00084    <span class="keywordflow">if</span> (!<a class="code" href="options_8h.html#515f7780aa1f2a8965a93c447ce1fe03">ast_opt_console</a> || <a class="code" href="options_8h.html#3df2312254163e4b7c23a2d92b47f07f">ast_opt_no_color</a> || !<a class="code" href="options_8h.html#b87fc2eaa77d3b56580c136e17312465">ast_opt_no_fork</a>)
<a name="l00085"></a>00085       <span class="keywordflow">return</span> 0;
<a name="l00086"></a>00086 
<a name="l00087"></a>00087    <span class="keywordflow">for</span> (i=0 ;; i++) {
<a name="l00088"></a>00088       <span class="keywordflow">if</span> (<a class="code" href="term_8c.html#d10003d183037dc5a0c5a61ef63fc077">termpath</a>[i] == NULL) {
<a name="l00089"></a>00089          <span class="keywordflow">break</span>;
<a name="l00090"></a>00090       }
<a name="l00091"></a>00091       snprintf(termfile, <span class="keyword">sizeof</span>(termfile), <span class="stringliteral">"%s/%c/%s"</span>, <a class="code" href="term_8c.html#d10003d183037dc5a0c5a61ef63fc077">termpath</a>[i], *term, term);
<a name="l00092"></a>00092       termfd = open(termfile, O_RDONLY);
<a name="l00093"></a>00093       <span class="keywordflow">if</span> (termfd &gt; -1) {
<a name="l00094"></a>00094          <span class="keywordflow">break</span>;
<a name="l00095"></a>00095       }
<a name="l00096"></a>00096    }
<a name="l00097"></a>00097    <span class="keywordflow">if</span> (termfd &gt; -1) {
<a name="l00098"></a>00098       <span class="keywordtype">int</span> actsize = read(termfd, buffer, <span class="keyword">sizeof</span>(buffer) - 1);
<a name="l00099"></a>00099       <span class="keywordtype">short</span> sz_names = <a class="code" href="term_8c.html#f0750d2d5b4723569189b87574ae95f7">convshort</a>(buffer + 2);
<a name="l00100"></a>00100       <span class="keywordtype">short</span> sz_bools = <a class="code" href="term_8c.html#f0750d2d5b4723569189b87574ae95f7">convshort</a>(buffer + 4);
<a name="l00101"></a>00101       <span class="keywordtype">short</span> n_nums   = <a class="code" href="term_8c.html#f0750d2d5b4723569189b87574ae95f7">convshort</a>(buffer + 6);
<a name="l00102"></a>00102 
<a name="l00103"></a>00103       <span class="comment">/* if ((sz_names + sz_bools) &amp; 1)</span>
<a name="l00104"></a>00104 <span class="comment">         sz_bools++; */</span>
<a name="l00105"></a>00105 
<a name="l00106"></a>00106       <span class="keywordflow">if</span> (sz_names + sz_bools + n_nums &lt; actsize) {
<a name="l00107"></a>00107          <span class="comment">/* Offset 13 is defined in /usr/include/term.h, though we do not</span>
<a name="l00108"></a>00108 <span class="comment">          * include it here, as it conflicts with include/asterisk/term.h */</span>
<a name="l00109"></a>00109          <span class="keywordtype">short</span> max_colors = <a class="code" href="term_8c.html#f0750d2d5b4723569189b87574ae95f7">convshort</a>(buffer + 12 + sz_names + sz_bools + 13 * 2);
<a name="l00110"></a>00110          <span class="keywordflow">if</span> (max_colors &gt; 0) {
<a name="l00111"></a>00111             <a class="code" href="term_8c.html#077900bc7d71ba132554e04adf11b899">vt100compat</a> = 1;
<a name="l00112"></a>00112          }
<a name="l00113"></a>00113          parseokay = 1;
<a name="l00114"></a>00114       }
<a name="l00115"></a>00115       close(termfd);
<a name="l00116"></a>00116    }
<a name="l00117"></a>00117 
<a name="l00118"></a>00118    <span class="keywordflow">if</span> (!parseokay) {
<a name="l00119"></a>00119       <span class="comment">/* These comparisons should not be substrings nor case-insensitive, as</span>
<a name="l00120"></a>00120 <span class="comment">       * terminal types are very particular about how they treat suffixes and</span>
<a name="l00121"></a>00121 <span class="comment">       * capitalization.  For example, terminal type 'linux-m' does NOT</span>
<a name="l00122"></a>00122 <span class="comment">       * support color, while 'linux' does.  Not even all vt100* terminals</span>
<a name="l00123"></a>00123 <span class="comment">       * support color, either (e.g. 'vt100+fnkeys'). */</span>
<a name="l00124"></a>00124       <span class="keywordflow">if</span> (!strcmp(term, <span class="stringliteral">"linux"</span>)) {
<a name="l00125"></a>00125          <a class="code" href="term_8c.html#077900bc7d71ba132554e04adf11b899">vt100compat</a> = 1;
<a name="l00126"></a>00126       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(term, <span class="stringliteral">"xterm"</span>)) {
<a name="l00127"></a>00127          <a class="code" href="term_8c.html#077900bc7d71ba132554e04adf11b899">vt100compat</a> = 1;
<a name="l00128"></a>00128       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(term, <span class="stringliteral">"xterm-color"</span>)) {
<a name="l00129"></a>00129          <a class="code" href="term_8c.html#077900bc7d71ba132554e04adf11b899">vt100compat</a> = 1;
<a name="l00130"></a>00130       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(term, <span class="stringliteral">"Eterm"</span>, 5)) {
<a name="l00131"></a>00131          <span class="comment">/* Both entries which start with Eterm support color */</span>
<a name="l00132"></a>00132          <a class="code" href="term_8c.html#077900bc7d71ba132554e04adf11b899">vt100compat</a> = 1;
<a name="l00133"></a>00133       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(term, <span class="stringliteral">"vt100"</span>)) {
<a name="l00134"></a>00134          <a class="code" href="term_8c.html#077900bc7d71ba132554e04adf11b899">vt100compat</a> = 1;
<a name="l00135"></a>00135       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(term, <span class="stringliteral">"crt"</span>, 3)) {
<a name="l00136"></a>00136          <span class="comment">/* Both crt terminals support color */</span>
<a name="l00137"></a>00137          <a class="code" href="term_8c.html#077900bc7d71ba132554e04adf11b899">vt100compat</a> = 1;
<a name="l00138"></a>00138       }
<a name="l00139"></a>00139    }
<a name="l00140"></a>00140 
<a name="l00141"></a>00141    <span class="keywordflow">if</span> (<a class="code" href="term_8c.html#077900bc7d71ba132554e04adf11b899">vt100compat</a>) {
<a name="l00142"></a>00142       <span class="comment">/* Make commands show up in nice colors */</span>
<a name="l00143"></a>00143       snprintf(<a class="code" href="term_8c.html#722133fdfbb5eb716a94c744f5b7ebba">prepdata</a>, <span class="keyword">sizeof</span>(prepdata), <span class="stringliteral">"%c[%d;%d;%dm"</span>, <a class="code" href="term_8h.html#6351aefd1e5e1b62c76f8580116964be">ESC</a>, <a class="code" href="term_8h.html#e2b14f73b9e6d838c758e247ab461297">ATTR_BRIGHT</a>, <a class="code" href="term_8h.html#5bff307c138842ec65cb935d64f8b225">COLOR_BROWN</a>, <a class="code" href="term_8h.html#5e5cea0d4c88b925440f00651b538612">COLOR_BLACK</a> + 10);
<a name="l00144"></a>00144       snprintf(<a class="code" href="term_8c.html#dcdd2067d40e238e1638bd009fa112b5">enddata</a>, <span class="keyword">sizeof</span>(<a class="code" href="term_8c.html#dcdd2067d40e238e1638bd009fa112b5">enddata</a>), <span class="stringliteral">"%c[%d;%d;%dm"</span>, <a class="code" href="term_8h.html#6351aefd1e5e1b62c76f8580116964be">ESC</a>, <a class="code" href="term_8h.html#b24089cf5d1260730f7d901a1fff620f">ATTR_RESET</a>, <a class="code" href="term_8h.html#2b3a19181ff01a8ef924841b67eed92e">COLOR_WHITE</a>, <a class="code" href="term_8h.html#5e5cea0d4c88b925440f00651b538612">COLOR_BLACK</a> + 10);
<a name="l00145"></a>00145       snprintf(<a class="code" href="term_8c.html#0fef16f06f3ebd481d374c56c4ee040a">quitdata</a>, <span class="keyword">sizeof</span>(<a class="code" href="term_8c.html#0fef16f06f3ebd481d374c56c4ee040a">quitdata</a>), <span class="stringliteral">"%c[0m"</span>, <a class="code" href="term_8h.html#6351aefd1e5e1b62c76f8580116964be">ESC</a>);
<a name="l00146"></a>00146    }
<a name="l00147"></a>00147    <span class="keywordflow">return</span> 0;
<a name="l00148"></a>00148 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="60996aec923b890a13ad493979174ea0"></a><!-- doxytag: member="asterisk.h::ast_unregister_atexit" ref="60996aec923b890a13ad493979174ea0" args="(void(*func)(void))" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_unregister_atexit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void(*)(void)&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>func</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Unregister a function registered with <a class="el" href="asterisk_8c.html#c0fa49bc6ac7af56a1f410920f115253">ast_register_atexit()</a>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>func</em>&nbsp;</td><td>The callback function to unregister. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00687">687</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.
<p>
References <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00516">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="linkedlists_8h-source.html#l00491">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="linkedlists_8h-source.html#l00554">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, and <a class="el" href="structast__atexit.html#75adca866a59c23ec17ecab46f1c6211">ast_atexit::func</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l00672">ast_register_atexit()</a>, and <a class="el" href="cdr_8c-source.html#l01229">do_reload()</a>.<div class="fragment"><pre class="fragment"><a name="l00688"></a>00688 {
<a name="l00689"></a>00689    <span class="keyword">struct </span><a class="code" href="structast__atexit.html">ast_atexit</a> *ae;
<a name="l00690"></a>00690    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;atexits);
<a name="l00691"></a>00691    <a class="code" href="linkedlists_8h.html#915e438a9528c8d6316c617b5bd84487">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;atexits, ae, list) {
<a name="l00692"></a>00692       <span class="keywordflow">if</span> (ae-&gt;<a class="code" href="structast__atexit.html#75adca866a59c23ec17ecab46f1c6211">func</a> == <a class="code" href="manager_8h.html#7df4935f4a5a2865191ef74f64df8754">func</a>) {
<a name="l00693"></a>00693          <a class="code" href="linkedlists_8h.html#37f99379dafa45c921f95bf7235eb91d">AST_LIST_REMOVE_CURRENT</a>(&amp;atexits, list);
<a name="l00694"></a>00694          <span class="keywordflow">break</span>;
<a name="l00695"></a>00695       }
<a name="l00696"></a>00696    }
<a name="l00697"></a>00697    <a class="code" href="linkedlists_8h.html#a93fdadc00a2a090968004b7d9c79630">AST_LIST_TRAVERSE_SAFE_END</a>
<a name="l00698"></a>00698    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;atexits);
<a name="l00699"></a>00699 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="f61bd9bec3e80110272581aa6591c72e"></a><!-- doxytag: member="asterisk.h::ast_unregister_file_version" ref="f61bd9bec3e80110272581aa6591c72e" args="(const char *file)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_unregister_file_version           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>file</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Unregister a source code file from the core. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>file</em>&nbsp;</td><td>the source file name </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing</dd></dl>
This function should not be called directly, but instead the ASTERISK_FILE_VERSION macro should be used to automatically unregister the file when the module is unloaded. 
<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00282">282</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.
<p>
References <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00516">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="linkedlists_8h-source.html#l00491">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="linkedlists_8h-source.html#l00554">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, and <a class="el" href="astmm_8h-source.html#l00069">free</a>.<div class="fragment"><pre class="fragment"><a name="l00283"></a>00283 {
<a name="l00284"></a>00284    <span class="keyword">struct </span><a class="code" href="structfile__version.html">file_version</a> *find;
<a name="l00285"></a>00285 
<a name="l00286"></a>00286    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;file_versions);
<a name="l00287"></a>00287    <a class="code" href="linkedlists_8h.html#915e438a9528c8d6316c617b5bd84487">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;file_versions, find, list) {
<a name="l00288"></a>00288       <span class="keywordflow">if</span> (!strcasecmp(find-&gt;file, <a class="code" href="manager_8h.html#8c7dd922ad47494fc02c388e12c00eac">file</a>)) {
<a name="l00289"></a>00289          <a class="code" href="linkedlists_8h.html#37f99379dafa45c921f95bf7235eb91d">AST_LIST_REMOVE_CURRENT</a>(&amp;file_versions, list);
<a name="l00290"></a>00290          <span class="keywordflow">break</span>;
<a name="l00291"></a>00291       }
<a name="l00292"></a>00292    }
<a name="l00293"></a>00293    <a class="code" href="linkedlists_8h.html#a93fdadc00a2a090968004b7d9c79630">AST_LIST_TRAVERSE_SAFE_END</a>;
<a name="l00294"></a>00294    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;file_versions);
<a name="l00295"></a>00295    <span class="keywordflow">if</span> (find)
<a name="l00296"></a>00296       <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(find);
<a name="l00297"></a>00297 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ffa7bfa9223627041ba7b94fc751b4e9"></a><!-- doxytag: member="asterisk.h::astdb_init" ref="ffa7bfa9223627041ba7b94fc751b4e9" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int astdb_init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provided by <a class="el" href="db_8c.html">db.c</a> 
<p>
Definition at line <a class="el" href="db_8c-source.html#l00643">643</a> of file <a class="el" href="db_8c-source.html">db.c</a>.
<p>
References <a class="el" href="cli_8c-source.html#l01352">ast_cli_register_multiple()</a>, <a class="el" href="manager_8h-source.html#l00116">ast_manager_register</a>, <a class="el" href="db_8c-source.html#l00063">dbinit()</a>, <a class="el" href="manager_8h-source.html#l00051">EVENT_FLAG_SYSTEM</a>, <a class="el" href="db_8c-source.html#l00594">manager_dbdel()</a>, <a class="el" href="db_8c-source.html#l00619">manager_dbdeltree()</a>, <a class="el" href="db_8c-source.html#l00557">manager_dbget()</a>, and <a class="el" href="db_8c-source.html#l00528">manager_dbput()</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00644"></a>00644 {
<a name="l00645"></a>00645    <a class="code" href="db_8c.html#c857b472b20815fc30d31312a5cf8088">dbinit</a>();
<a name="l00646"></a>00646    <a class="code" href="cli_8c.html#a334dfd903e83eea3729ff37aa372781">ast_cli_register_multiple</a>(<a class="code" href="db_8c.html#72d3b53f7516a86b85a9d93a183aa81a">cli_database</a>, <span class="keyword">sizeof</span>(<a class="code" href="db_8c.html#72d3b53f7516a86b85a9d93a183aa81a">cli_database</a>) / <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structast__cli__entry.html">ast_cli_entry</a>));
<a name="l00647"></a>00647    <a class="code" href="manager_8h.html#e4738d78136f7a3a390d7729872d206e">ast_manager_register</a>(<span class="stringliteral">"DBGet"</span>, <a class="code" href="manager_8h.html#440ebd9d80179402b9cd76c426adb8d2">EVENT_FLAG_SYSTEM</a>, <a class="code" href="db_8c.html#c2a39921a6d94211a25b4f06e69cf111">manager_dbget</a>, <span class="stringliteral">"Get DB Entry"</span>);
<a name="l00648"></a>00648    <a class="code" href="manager_8h.html#e4738d78136f7a3a390d7729872d206e">ast_manager_register</a>(<span class="stringliteral">"DBPut"</span>, <a class="code" href="manager_8h.html#440ebd9d80179402b9cd76c426adb8d2">EVENT_FLAG_SYSTEM</a>, <a class="code" href="db_8c.html#88ff77a9e9c584cea2b64503e085d041">manager_dbput</a>, <span class="stringliteral">"Put DB Entry"</span>);
<a name="l00649"></a>00649    <a class="code" href="manager_8h.html#e4738d78136f7a3a390d7729872d206e">ast_manager_register</a>(<span class="stringliteral">"DBDel"</span>, <a class="code" href="manager_8h.html#440ebd9d80179402b9cd76c426adb8d2">EVENT_FLAG_SYSTEM</a>, <a class="code" href="db_8c.html#489adf32d1a534c047d92b2d0076b911">manager_dbdel</a>, <span class="stringliteral">"Delete DB Entry"</span>);
<a name="l00650"></a>00650    <a class="code" href="manager_8h.html#e4738d78136f7a3a390d7729872d206e">ast_manager_register</a>(<span class="stringliteral">"DBDelTree"</span>, <a class="code" href="manager_8h.html#440ebd9d80179402b9cd76c426adb8d2">EVENT_FLAG_SYSTEM</a>, <a class="code" href="db_8c.html#13190961f97155bcd5301b8bdc47b32e">manager_dbdeltree</a>, <span class="stringliteral">"Delete DB Tree"</span>);
<a name="l00651"></a>00651    <span class="keywordflow">return</span> 0;
<a name="l00652"></a>00652 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="323ddd8f4ed93915e0e27717128eba2f"></a><!-- doxytag: member="asterisk.h::close_logger" ref="323ddd8f4ed93915e0e27717128eba2f" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void close_logger           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provided by <a class="el" href="logger_8c.html">logger.c</a> 
<p>
Definition at line <a class="el" href="logger_8c-source.html#l00827">827</a> of file <a class="el" href="logger_8c-source.html">logger.c</a>.
<p>
References <a class="el" href="lock_8h-source.html#l00547">ast_cond_signal()</a>, <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00453">AST_LIST_TRAVERSE</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, <a class="el" href="logger_8c-source.html#l00137">close_logger_thread</a>, <a class="el" href="logger_8c-source.html#l00139">eventlog</a>, <a class="el" href="format__g726_8c-source.html#l00193">f</a>, <a class="el" href="logger_8c-source.html#l00111">logchannel::fileptr</a>, <a class="el" href="logger_8c-source.html#l00136">logcond</a>, and <a class="el" href="logger_8c-source.html#l00140">qlog</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l01201">quit_handler()</a>.<div class="fragment"><pre class="fragment"><a name="l00828"></a>00828 {
<a name="l00829"></a>00829    <span class="keyword">struct </span><a class="code" href="structlogchannel.html">logchannel</a> *<a class="code" href="format__g726_8c.html#85b9b17a7dd34a3638c560bc9152473b">f</a> = NULL;
<a name="l00830"></a>00830 
<a name="l00831"></a>00831    <span class="comment">/* Stop logger thread */</span>
<a name="l00832"></a>00832    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;logmsgs);
<a name="l00833"></a>00833    <a class="code" href="logger_8c.html#be20b126c291ec84edd80c293078f1a7">close_logger_thread</a> = 1;
<a name="l00834"></a>00834    <a class="code" href="lock_8h.html#119b205a84b106ec84a3a496dbe88082">ast_cond_signal</a>(&amp;<a class="code" href="logger_8c.html#0b49c94b9956c7ecc17f20447258fad3">logcond</a>);
<a name="l00835"></a>00835    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;logmsgs);
<a name="l00836"></a>00836 
<a name="l00837"></a>00837    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;logchannels);
<a name="l00838"></a>00838 
<a name="l00839"></a>00839    <span class="keywordflow">if</span> (<a class="code" href="logger_8c.html#f47a66a903b4f64e00e9a1aa9bee17a7">eventlog</a>) {
<a name="l00840"></a>00840       fclose(<a class="code" href="logger_8c.html#f47a66a903b4f64e00e9a1aa9bee17a7">eventlog</a>);
<a name="l00841"></a>00841       <a class="code" href="logger_8c.html#f47a66a903b4f64e00e9a1aa9bee17a7">eventlog</a> = NULL;
<a name="l00842"></a>00842    }
<a name="l00843"></a>00843 
<a name="l00844"></a>00844    <span class="keywordflow">if</span> (<a class="code" href="logger_8c.html#fb224cabc648945bcfd1d84c6e478518">qlog</a>) {
<a name="l00845"></a>00845       fclose(<a class="code" href="logger_8c.html#fb224cabc648945bcfd1d84c6e478518">qlog</a>);
<a name="l00846"></a>00846       <a class="code" href="logger_8c.html#fb224cabc648945bcfd1d84c6e478518">qlog</a> = NULL;
<a name="l00847"></a>00847    }
<a name="l00848"></a>00848 
<a name="l00849"></a>00849    <a class="code" href="linkedlists_8h.html#e5bbda4b7ef1cd9462bb86ba25c5d7eb">AST_LIST_TRAVERSE</a>(&amp;logchannels, f, list) {
<a name="l00850"></a>00850       <span class="keywordflow">if</span> (f-&gt;<a class="code" href="structlogchannel.html#fa3d50f005921f181f7f414b1f321d63">fileptr</a> &amp;&amp; (f-&gt;<a class="code" href="structlogchannel.html#fa3d50f005921f181f7f414b1f321d63">fileptr</a> != stdout) &amp;&amp; (f-&gt;<a class="code" href="structlogchannel.html#fa3d50f005921f181f7f414b1f321d63">fileptr</a> != stderr)) {
<a name="l00851"></a>00851          fclose(f-&gt;<a class="code" href="structlogchannel.html#fa3d50f005921f181f7f414b1f321d63">fileptr</a>);
<a name="l00852"></a>00852          f-&gt;<a class="code" href="structlogchannel.html#fa3d50f005921f181f7f414b1f321d63">fileptr</a> = NULL;
<a name="l00853"></a>00853       }
<a name="l00854"></a>00854    }
<a name="l00855"></a>00855 
<a name="l00856"></a>00856    closelog(); <span class="comment">/* syslog */</span>
<a name="l00857"></a>00857 
<a name="l00858"></a>00858    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;logchannels);
<a name="l00859"></a>00859 
<a name="l00860"></a>00860    <span class="keywordflow">return</span>;
<a name="l00861"></a>00861 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="2edcd99e57832c03d01818ddbb8bf871"></a><!-- doxytag: member="asterisk.h::dnsmgr_init" ref="2edcd99e57832c03d01818ddbb8bf871" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int dnsmgr_init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provided by <a class="el" href="dnsmgr_8c.html">dnsmgr.c</a> 
<p>
Definition at line <a class="el" href="dnsmgr_8c-source.html#l00336">336</a> of file <a class="el" href="dnsmgr_8c-source.html">dnsmgr.c</a>.
<p>
References <a class="el" href="cli_8c-source.html#l01344">ast_cli_register()</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="cdr_8c-source.html#l01229">do_reload()</a>, <a class="el" href="logger_8h-source.html#l00118">LOG_ERROR</a>, and <a class="el" href="sched_8c-source.html#l00075">sched_context_create()</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00337"></a>00337 {
<a name="l00338"></a>00338    <span class="keywordflow">if</span> (!(<a class="code" href="structsched.html">sched</a> = <a class="code" href="sched_8c.html#4326fa64fd840788d03093b9931bb1fb">sched_context_create</a>())) {
<a name="l00339"></a>00339       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#4490aa3d29644e716440fada68f54032">LOG_ERROR</a>, <span class="stringliteral">"Unable to create schedule context.\n"</span>);
<a name="l00340"></a>00340       <span class="keywordflow">return</span> -1;
<a name="l00341"></a>00341    }
<a name="l00342"></a>00342    <a class="code" href="cli_8c.html#63b8a59f72a7d4f5f3cdef8190057349">ast_cli_register</a>(&amp;<a class="code" href="dnsmgr_8c.html#328abb9fa714448b3c5bb9af5a72ea1f">cli_reload</a>);
<a name="l00343"></a>00343    <a class="code" href="cli_8c.html#63b8a59f72a7d4f5f3cdef8190057349">ast_cli_register</a>(&amp;<a class="code" href="cdr_8c.html#a43065b204561baf7f5ea3fafc435672">cli_status</a>);
<a name="l00344"></a>00344    <span class="keywordflow">return</span> <a class="code" href="cdr_8c.html#398d4ec50a0d5be51afce0244d30f16d">do_reload</a>(1);
<a name="l00345"></a>00345 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="6be31af1df8dbb8613465dc090879c17"></a><!-- doxytag: member="asterisk.h::dnsmgr_reload" ref="6be31af1df8dbb8613465dc090879c17" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int dnsmgr_reload           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provided by <a class="el" href="dnsmgr_8c.html">dnsmgr.c</a> 
<p>
Definition at line <a class="el" href="dnsmgr_8c-source.html#l00347">347</a> of file <a class="el" href="dnsmgr_8c-source.html">dnsmgr.c</a>.
<p>
References <a class="el" href="cdr_8c-source.html#l01229">do_reload()</a>.<div class="fragment"><pre class="fragment"><a name="l00348"></a>00348 {
<a name="l00349"></a>00349    <span class="keywordflow">return</span> <a class="code" href="cdr_8c.html#398d4ec50a0d5be51afce0244d30f16d">do_reload</a>(0);
<a name="l00350"></a>00350 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="6a5d6dd87d710376bdb793d4b5e73010"></a><!-- doxytag: member="asterisk.h::dnsmgr_start_refresh" ref="6a5d6dd87d710376bdb793d4b5e73010" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void dnsmgr_start_refresh           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provided by <a class="el" href="dnsmgr_8c.html">dnsmgr.c</a> 
<p>
Definition at line <a class="el" href="dnsmgr_8c-source.html#l00251">251</a> of file <a class="el" href="dnsmgr_8c-source.html">dnsmgr.c</a>.
<p>
References <a class="el" href="sched_8c-source.html#l00215">ast_sched_add_variable()</a>, <a class="el" href="sched_8c-source.html#l00259">ast_sched_del()</a>, <a class="el" href="dnsmgr_8c-source.html#l00222">refresh_list()</a>, and <a class="el" href="dnsmgr_8c-source.html#l00052">refresh_sched</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00252"></a>00252 {
<a name="l00253"></a>00253    <span class="keywordflow">if</span> (<a class="code" href="dnsmgr_8c.html#5c82937eb07c8712bd8e0280c5cd46b6">refresh_sched</a> &gt; -1) {
<a name="l00254"></a>00254       <a class="code" href="sched_8c.html#4a0b784f64b9caf71932a3344c9c7c49">ast_sched_del</a>(<a class="code" href="structsched.html">sched</a>, <a class="code" href="dnsmgr_8c.html#5c82937eb07c8712bd8e0280c5cd46b6">refresh_sched</a>);
<a name="l00255"></a>00255       <a class="code" href="dnsmgr_8c.html#5c82937eb07c8712bd8e0280c5cd46b6">refresh_sched</a> = <a class="code" href="sched_8c.html#5e691064a5722460631d25cabf3b7756">ast_sched_add_variable</a>(<a class="code" href="structsched.html">sched</a>, 100, <a class="code" href="dnsmgr_8c.html#5a8a80b52a581ce1e3db8682838a26ed">refresh_list</a>, &amp;<a class="code" href="dnsmgr_8c.html#3b4b43479126508d86864420d71aada1">master_refresh_info</a>, 1);
<a name="l00256"></a>00256    }
<a name="l00257"></a>00257 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d40eb7b18ae20acf758c562e5a44abf1"></a><!-- doxytag: member="asterisk.h::init_framer" ref="d40eb7b18ae20acf758c562e5a44abf1" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int init_framer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provided by <a class="el" href="frame_8c.html">frame.c</a> 
<p>
Definition at line <a class="el" href="frame_8c-source.html#l00930">930</a> of file <a class="el" href="frame_8c-source.html">frame.c</a>.
<p>
References <a class="el" href="cli_8c-source.html#l01352">ast_cli_register_multiple()</a>, and <a class="el" href="frame_8c-source.html#l00902">my_clis</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00931"></a>00931 {
<a name="l00932"></a>00932    <a class="code" href="cli_8c.html#a334dfd903e83eea3729ff37aa372781">ast_cli_register_multiple</a>(<a class="code" href="frame_8c.html#d41cfb9797a324bfbf477ff50adc3368">my_clis</a>, <span class="keyword">sizeof</span>(my_clis) / <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structast__cli__entry.html">ast_cli_entry</a>));
<a name="l00933"></a>00933    <span class="keywordflow">return</span> 0;   
<a name="l00934"></a>00934 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="2dc970548287d60ade9a663e2955d2fd"></a><!-- doxytag: member="asterisk.h::init_logger" ref="2dc970548287d60ade9a663e2955d2fd" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int init_logger           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provided by <a class="el" href="logger_8c.html">logger.c</a> 
<p>
Definition at line <a class="el" href="logger_8c-source.html#l00781">781</a> of file <a class="el" href="logger_8c-source.html">logger.c</a>.
<p>
References <a class="el" href="cli_8c-source.html#l01352">ast_cli_register_multiple()</a>, <a class="el" href="lock_8h-source.html#l00557">ast_cond_destroy()</a>, <a class="el" href="lock_8h-source.html#l00542">ast_cond_init()</a>, <a class="el" href="asterisk_8c-source.html#l00217">ast_config_AST_LOG_DIR</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="utils_8h-source.html#l00298">ast_pthread_create</a>, <a class="el" href="logger_8c-source.html#l00382">ast_queue_log()</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="logger_8c-source.html#l00139">eventlog</a>, <a class="el" href="logger_8h-source.html#l00036">EVENTLOG</a>, <a class="el" href="logger_8c-source.html#l00612">handle_SIGXFSZ()</a>, <a class="el" href="logger_8c-source.html#l00309">init_logger_chain()</a>, <a class="el" href="logger_8h-source.html#l00118">LOG_ERROR</a>, <a class="el" href="logger_8h-source.html#l00100">LOG_EVENT</a>, <a class="el" href="logger_8c-source.html#l00136">logcond</a>, <a class="el" href="logger_8c.html#d9c335882826a0798f8101f6a1343f60">logfiles</a>, <a class="el" href="logger_8c-source.html#l00745">logger_thread()</a>, <a class="el" href="logger_8c-source.html#l00135">logthread</a>, <a class="el" href="asterisk_8c-source.html#l00163">option_verbose</a>, <a class="el" href="logger_8c-source.html#l00140">qlog</a>, and <a class="el" href="logger_8c-source.html#l00087">queue_log_name</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00782"></a>00782 {
<a name="l00783"></a>00783    <span class="keywordtype">char</span> tmp[256];
<a name="l00784"></a>00784    <span class="keywordtype">int</span> res = 0;
<a name="l00785"></a>00785 
<a name="l00786"></a>00786    <span class="comment">/* auto rotate if sig SIGXFSZ comes a-knockin */</span>
<a name="l00787"></a>00787    (void) signal(SIGXFSZ,(<span class="keywordtype">void</span> *) <a class="code" href="logger_8c.html#7e5a41c69c3670af86175d40da449a43">handle_SIGXFSZ</a>);
<a name="l00788"></a>00788 
<a name="l00789"></a>00789    <span class="comment">/* start logger thread */</span>
<a name="l00790"></a>00790    <a class="code" href="lock_8h.html#26b556000e9ba452b40f732a86644de6">ast_cond_init</a>(&amp;<a class="code" href="logger_8c.html#0b49c94b9956c7ecc17f20447258fad3">logcond</a>, NULL);
<a name="l00791"></a>00791    <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#89a8ad746b25627dd12304511d68a24c">ast_pthread_create</a>(&amp;<a class="code" href="logger_8c.html#694674cd76b5451d333adbcdfa7dd33e">logthread</a>, NULL, <a class="code" href="logger_8c.html#e55359d638172af0c46b6a374752b634">logger_thread</a>, NULL) &lt; 0) {
<a name="l00792"></a>00792       <a class="code" href="lock_8h.html#137771c8825678eeb6d67193572919d1">ast_cond_destroy</a>(&amp;<a class="code" href="logger_8c.html#0b49c94b9956c7ecc17f20447258fad3">logcond</a>);
<a name="l00793"></a>00793       <span class="keywordflow">return</span> -1;
<a name="l00794"></a>00794    }
<a name="l00795"></a>00795 
<a name="l00796"></a>00796    <span class="comment">/* register the logger cli commands */</span>
<a name="l00797"></a>00797    <a class="code" href="cli_8c.html#a334dfd903e83eea3729ff37aa372781">ast_cli_register_multiple</a>(<a class="code" href="logger_8c.html#b802598a9c2754d6eba59e6d69cf1ad6">cli_logger</a>, <span class="keyword">sizeof</span>(<a class="code" href="logger_8c.html#b802598a9c2754d6eba59e6d69cf1ad6">cli_logger</a>) / <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structast__cli__entry.html">ast_cli_entry</a>));
<a name="l00798"></a>00798 
<a name="l00799"></a>00799    mkdir(<a class="code" href="asterisk_8c.html#af6a08df4c5a91b22da1d9bb4fc3e2a3">ast_config_AST_LOG_DIR</a>, 0755);
<a name="l00800"></a>00800   
<a name="l00801"></a>00801    <span class="comment">/* create log channels */</span>
<a name="l00802"></a>00802    <a class="code" href="logger_8c.html#c78b4875648a366a3927c721e8d8cd19">init_logger_chain</a>();
<a name="l00803"></a>00803 
<a name="l00804"></a>00804    <span class="comment">/* create the eventlog */</span>
<a name="l00805"></a>00805    <span class="keywordflow">if</span> (<a class="code" href="logger_8c.html#d9c335882826a0798f8101f6a1343f60">logfiles</a>.event_log) {
<a name="l00806"></a>00806       mkdir(<a class="code" href="asterisk_8c.html#af6a08df4c5a91b22da1d9bb4fc3e2a3">ast_config_AST_LOG_DIR</a>, 0755);
<a name="l00807"></a>00807       snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">"%s/%s"</span>, <a class="code" href="asterisk_8c.html#af6a08df4c5a91b22da1d9bb4fc3e2a3">ast_config_AST_LOG_DIR</a>, <a class="code" href="logger_8h.html#ea818bb73b1eea69c38c5c13b69971af">EVENTLOG</a>);
<a name="l00808"></a>00808       <a class="code" href="logger_8c.html#f47a66a903b4f64e00e9a1aa9bee17a7">eventlog</a> = fopen(tmp, <span class="stringliteral">"a"</span>);
<a name="l00809"></a>00809       <span class="keywordflow">if</span> (<a class="code" href="logger_8c.html#f47a66a903b4f64e00e9a1aa9bee17a7">eventlog</a>) {
<a name="l00810"></a>00810          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#4671d62857becc386bbe4cfdc0d96fdc">LOG_EVENT</a>, <span class="stringliteral">"Started Asterisk Event Logger\n"</span>);
<a name="l00811"></a>00811          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a>)
<a name="l00812"></a>00812             <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<span class="stringliteral">"Asterisk Event Logger Started %s\n"</span>, tmp);
<a name="l00813"></a>00813       } <span class="keywordflow">else</span> {
<a name="l00814"></a>00814          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#4490aa3d29644e716440fada68f54032">LOG_ERROR</a>, <span class="stringliteral">"Unable to create event log: %s\n"</span>, strerror(errno));
<a name="l00815"></a>00815          res = -1;
<a name="l00816"></a>00816       }
<a name="l00817"></a>00817    }
<a name="l00818"></a>00818 
<a name="l00819"></a>00819    <span class="keywordflow">if</span> (<a class="code" href="logger_8c.html#d9c335882826a0798f8101f6a1343f60">logfiles</a>.queue_log) {
<a name="l00820"></a>00820       snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">"%s/%s"</span>, <a class="code" href="asterisk_8c.html#af6a08df4c5a91b22da1d9bb4fc3e2a3">ast_config_AST_LOG_DIR</a>, <a class="code" href="logger_8c.html#7910496bacc721498fc269323c8884ac">queue_log_name</a>);
<a name="l00821"></a>00821       <a class="code" href="logger_8c.html#fb224cabc648945bcfd1d84c6e478518">qlog</a> = fopen(tmp, <span class="stringliteral">"a"</span>);
<a name="l00822"></a>00822       <a class="code" href="logger_8c.html#fea5f2d99796443dd5537c0d8ca44bce">ast_queue_log</a>(<span class="stringliteral">"NONE"</span>, <span class="stringliteral">"NONE"</span>, <span class="stringliteral">"NONE"</span>, <span class="stringliteral">"QUEUESTART"</span>, <span class="stringliteral">"%s"</span>, <span class="stringliteral">""</span>);
<a name="l00823"></a>00823    }
<a name="l00824"></a>00824    <span class="keywordflow">return</span> res;
<a name="l00825"></a>00825 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="0233ae0152e6f49a294e29219b73673a"></a><!-- doxytag: member="asterisk.h::load_modules" ref="0233ae0152e6f49a294e29219b73673a" args="(unsigned int)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int load_modules           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>int</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provided by <a class="el" href="loader_8c.html">loader.c</a> 
<p>
Definition at line <a class="el" href="loader_8c-source.html#l00704">704</a> of file <a class="el" href="loader_8c-source.html">loader.c</a>.
<p>
References <a class="el" href="loader_8c-source.html#l00686">add_to_load_order()</a>, <a class="el" href="asterisk_8c-source.html#l00212">ast_config_AST_MODULE_DIR</a>, <a class="el" href="config_8c-source.html#l00555">ast_config_destroy()</a>, <a class="el" href="config_8c-source.html#l01278">ast_config_load()</a>, <a class="el" href="linkedlists_8h-source.html#l00620">AST_LIST_HEAD_INIT_NOLOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00516">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="linkedlists_8h-source.html#l00710">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="linkedlists_8h-source.html#l00453">AST_LIST_TRAVERSE</a>, <a class="el" href="linkedlists_8h-source.html#l00491">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="linkedlists_8h-source.html#l00554">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="module_8h-source.html#l00051">AST_MODULE_CONFIG</a>, <a class="el" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0adea6426eed250d0d922d7e289a706663">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0a40ed2f1246faac667accd325ea83f9e2">AST_MODULE_LOAD_FAILURE</a>, <a class="el" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0ad2ec6d7ab7a7c169dc765e9937b966aa">AST_MODULE_LOAD_SKIP</a>, <a class="el" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0ad07cbe1dd6392827ce7616a624aad97c">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="options_8h-source.html#l00088">ast_opt_quiet</a>, <a class="el" href="utils_8c-source.html#l00724">ast_true()</a>, <a class="el" href="config_8c-source.html#l00222">ast_variable_browse()</a>, <a class="el" href="config_8c-source.html#l00244">ast_variable_retrieve()</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="adsistub_8c-source.html#l00083">dir</a>, <a class="el" href="loader_8c-source.html#l00079">embedding</a>, <a class="el" href="loader_8c-source.html#l00304">find_resource()</a>, <a class="el" href="structast__module.html#4e5868d676cb634aa75b125a0f741abf">ast_module::flags</a>, <a class="el" href="astmm_8h-source.html#l00069">free</a>, <a class="el" href="loader_8c-source.html#l00085">ast_module::lib</a>, <a class="el" href="loader_8c-source.html#l00593">load_resource()</a>, <a class="el" href="logger_8h-source.html#l00106">LOG_NOTICE</a>, <a class="el" href="config_8h-source.html#l00039">ast_variable::name</a>, <a class="el" href="config_8h-source.html#l00046">ast_variable::next</a>, <a class="el" href="loader_8c-source.html#l00680">load_order_entry::resource</a>, <a class="el" href="loader_8c-source.html#l00286">resource_name_match()</a>, and <a class="el" href="config_8h-source.html#l00040">ast_variable::value</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00705"></a>00705 {
<a name="l00706"></a>00706    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *cfg;
<a name="l00707"></a>00707    <span class="keyword">struct </span><a class="code" href="structast__module.html">ast_module</a> *mod;
<a name="l00708"></a>00708    <span class="keyword">struct </span><a class="code" href="structload__order__entry.html">load_order_entry</a> *order;
<a name="l00709"></a>00709    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *v;
<a name="l00710"></a>00710    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> load_count;
<a name="l00711"></a>00711    <span class="keyword">struct </span>load_order load_order;
<a name="l00712"></a>00712    <span class="keywordtype">int</span> res = 0;
<a name="l00713"></a>00713 <span class="preprocessor">#if LOADABLE_MODULES</span>
<a name="l00714"></a>00714 <span class="preprocessor"></span>   <span class="keyword">struct </span>dirent *dirent;
<a name="l00715"></a>00715    DIR *<a class="code" href="adsistub_8c.html#736007832d2167baaae763fd3a3f3cf1">dir</a>;
<a name="l00716"></a>00716 <span class="preprocessor">#endif</span>
<a name="l00717"></a>00717 <span class="preprocessor"></span>
<a name="l00718"></a>00718    <span class="comment">/* all embedded modules have registered themselves by now */</span>
<a name="l00719"></a>00719    <a class="code" href="loader_8c.html#91dcd46b7c7d960c321ddb6c8b0ce5d1">embedding</a> = 0;
<a name="l00720"></a>00720 
<a name="l00721"></a>00721    <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a>)
<a name="l00722"></a>00722       <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<span class="stringliteral">"Asterisk Dynamic Loader Starting:\n"</span>);
<a name="l00723"></a>00723 
<a name="l00724"></a>00724    <a class="code" href="linkedlists_8h.html#0ae37ea56ca862f6504390fd49b9839f">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;load_order);
<a name="l00725"></a>00725 
<a name="l00726"></a>00726    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;module_list);
<a name="l00727"></a>00727 
<a name="l00728"></a>00728    <span class="keywordflow">if</span> (!(cfg = <a class="code" href="config_8c.html#0ea8bde5422fa0db50302e0f710e18c1">ast_config_load</a>(<a class="code" href="module_8h.html#87ed115f504573783508f70d6107558d">AST_MODULE_CONFIG</a>))) {
<a name="l00729"></a>00729       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"No '%s' found, no modules will be loaded.\n"</span>, <a class="code" href="module_8h.html#87ed115f504573783508f70d6107558d">AST_MODULE_CONFIG</a>);
<a name="l00730"></a>00730       <span class="keywordflow">goto</span> done;
<a name="l00731"></a>00731    }
<a name="l00732"></a>00732 
<a name="l00733"></a>00733    <span class="comment">/* first, find all the modules we have been explicitly requested to load */</span>
<a name="l00734"></a>00734    <span class="keywordflow">for</span> (v = <a class="code" href="config_8c.html#65ed813ca973e0e5dd3426804249db4f">ast_variable_browse</a>(cfg, <span class="stringliteral">"modules"</span>); v; v = v-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l00735"></a>00735       <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, preload_only ? <span class="stringliteral">"preload"</span> : <span class="stringliteral">"load"</span>))
<a name="l00736"></a>00736          <a class="code" href="loader_8c.html#257d99457621b00b9984b6f6cc206bd4">add_to_load_order</a>(v-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>, &amp;load_order);
<a name="l00737"></a>00737    }
<a name="l00738"></a>00738 
<a name="l00739"></a>00739    <span class="comment">/* check if 'autoload' is on */</span>
<a name="l00740"></a>00740    <span class="keywordflow">if</span> (!preload_only &amp;&amp; <a class="code" href="utils_8c.html#63bb02e4d6f18c1dbeca92dc63310685">ast_true</a>(<a class="code" href="config_8c.html#db24588ed54fb0d9d8f078b9d64bd0e1">ast_variable_retrieve</a>(cfg, <span class="stringliteral">"modules"</span>, <span class="stringliteral">"autoload"</span>))) {
<a name="l00741"></a>00741       <span class="comment">/* if so, first add all the embedded modules that are not already running to the load order */</span>
<a name="l00742"></a>00742       <a class="code" href="linkedlists_8h.html#e5bbda4b7ef1cd9462bb86ba25c5d7eb">AST_LIST_TRAVERSE</a>(&amp;module_list, mod, entry) {
<a name="l00743"></a>00743          <span class="comment">/* if it's not embedded, skip it */</span>
<a name="l00744"></a>00744          <span class="keywordflow">if</span> (mod-&gt;<a class="code" href="structast__module.html#e8acc63b1e238f3255c900eed37254b8">lib</a>)
<a name="l00745"></a>00745             <span class="keywordflow">continue</span>;
<a name="l00746"></a>00746 
<a name="l00747"></a>00747          <span class="keywordflow">if</span> (mod-&gt;<a class="code" href="structast__module.html#4e5868d676cb634aa75b125a0f741abf">flags</a>.running)
<a name="l00748"></a>00748             <span class="keywordflow">continue</span>;
<a name="l00749"></a>00749 
<a name="l00750"></a>00750          order = <a class="code" href="loader_8c.html#257d99457621b00b9984b6f6cc206bd4">add_to_load_order</a>(mod-&gt;resource, &amp;load_order);
<a name="l00751"></a>00751       }
<a name="l00752"></a>00752 
<a name="l00753"></a>00753 <span class="preprocessor">#if LOADABLE_MODULES</span>
<a name="l00754"></a>00754 <span class="preprocessor"></span>      <span class="comment">/* if we are allowed to load dynamic modules, scan the directory for</span>
<a name="l00755"></a>00755 <span class="comment">         for all available modules and add them as well */</span>
<a name="l00756"></a>00756       <span class="keywordflow">if</span> ((dir  = opendir(<a class="code" href="asterisk_8c.html#0c9ed5029117c0cc03a5acb9e5ff967f">ast_config_AST_MODULE_DIR</a>))) {
<a name="l00757"></a>00757          <span class="keywordflow">while</span> ((dirent = readdir(dir))) {
<a name="l00758"></a>00758             <span class="keywordtype">int</span> ld = strlen(dirent-&gt;d_name);
<a name="l00759"></a>00759 
<a name="l00760"></a>00760             <span class="comment">/* Must end in .so to load it.  */</span>
<a name="l00761"></a>00761 
<a name="l00762"></a>00762             <span class="keywordflow">if</span> (ld &lt; 4)
<a name="l00763"></a>00763                <span class="keywordflow">continue</span>;
<a name="l00764"></a>00764 
<a name="l00765"></a>00765             <span class="keywordflow">if</span> (strcasecmp(dirent-&gt;d_name + ld - 3, <span class="stringliteral">".so"</span>))
<a name="l00766"></a>00766                <span class="keywordflow">continue</span>;
<a name="l00767"></a>00767 
<a name="l00768"></a>00768             <span class="comment">/* if there is already a module by this name in the module_list,</span>
<a name="l00769"></a>00769 <span class="comment">               skip this file */</span>
<a name="l00770"></a>00770             <span class="keywordflow">if</span> (<a class="code" href="loader_8c.html#b6b27fa010ee029803109c4a9cb036eb">find_resource</a>(dirent-&gt;d_name, 0))
<a name="l00771"></a>00771                <span class="keywordflow">continue</span>;
<a name="l00772"></a>00772 
<a name="l00773"></a>00773             <a class="code" href="loader_8c.html#257d99457621b00b9984b6f6cc206bd4">add_to_load_order</a>(dirent-&gt;d_name, &amp;load_order);
<a name="l00774"></a>00774          }
<a name="l00775"></a>00775 
<a name="l00776"></a>00776          closedir(dir);
<a name="l00777"></a>00777       } <span class="keywordflow">else</span> {
<a name="l00778"></a>00778          <span class="keywordflow">if</span> (!<a class="code" href="options_8h.html#7ee79ab5227cecd2447bd8fa17656e67">ast_opt_quiet</a>)
<a name="l00779"></a>00779             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Unable to open modules directory '%s'.\n"</span>,
<a name="l00780"></a>00780                <a class="code" href="asterisk_8c.html#0c9ed5029117c0cc03a5acb9e5ff967f">ast_config_AST_MODULE_DIR</a>);
<a name="l00781"></a>00781       }
<a name="l00782"></a>00782 <span class="preprocessor">#endif</span>
<a name="l00783"></a>00783 <span class="preprocessor"></span>   }
<a name="l00784"></a>00784 
<a name="l00785"></a>00785    <span class="comment">/* now scan the config for any modules we are prohibited from loading and</span>
<a name="l00786"></a>00786 <span class="comment">      remove them from the load order */</span>
<a name="l00787"></a>00787    <span class="keywordflow">for</span> (v = <a class="code" href="config_8c.html#65ed813ca973e0e5dd3426804249db4f">ast_variable_browse</a>(cfg, <span class="stringliteral">"modules"</span>); v; v = v-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l00788"></a>00788       <span class="keywordflow">if</span> (strcasecmp(v-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, <span class="stringliteral">"noload"</span>))
<a name="l00789"></a>00789          <span class="keywordflow">continue</span>;
<a name="l00790"></a>00790 
<a name="l00791"></a>00791       <a class="code" href="linkedlists_8h.html#915e438a9528c8d6316c617b5bd84487">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;load_order, order, entry) {
<a name="l00792"></a>00792          <span class="keywordflow">if</span> (!<a class="code" href="loader_8c.html#0af63f3a784807952b56443706a2a5ab">resource_name_match</a>(order-&gt;<a class="code" href="structload__order__entry.html#96ab4e163f4ee03aaa4d1051aa51d204">resource</a>, v-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>)) {
<a name="l00793"></a>00793             <a class="code" href="linkedlists_8h.html#37f99379dafa45c921f95bf7235eb91d">AST_LIST_REMOVE_CURRENT</a>(&amp;load_order, entry);
<a name="l00794"></a>00794             <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(order-&gt;<a class="code" href="structload__order__entry.html#96ab4e163f4ee03aaa4d1051aa51d204">resource</a>);
<a name="l00795"></a>00795             <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(order);
<a name="l00796"></a>00796          }
<a name="l00797"></a>00797       }
<a name="l00798"></a>00798       <a class="code" href="linkedlists_8h.html#a93fdadc00a2a090968004b7d9c79630">AST_LIST_TRAVERSE_SAFE_END</a>;
<a name="l00799"></a>00799    }
<a name="l00800"></a>00800 
<a name="l00801"></a>00801    <span class="comment">/* we are done with the config now, all the information we need is in the</span>
<a name="l00802"></a>00802 <span class="comment">      load_order list */</span>
<a name="l00803"></a>00803    <a class="code" href="config_8c.html#ad84c9d29ca53758c2a113d057e221a0">ast_config_destroy</a>(cfg);
<a name="l00804"></a>00804 
<a name="l00805"></a>00805    load_count = 0;
<a name="l00806"></a>00806    <a class="code" href="linkedlists_8h.html#e5bbda4b7ef1cd9462bb86ba25c5d7eb">AST_LIST_TRAVERSE</a>(&amp;load_order, order, entry)
<a name="l00807"></a>00807       load_count++;
<a name="l00808"></a>00808 
<a name="l00809"></a>00809    if (load_count)
<a name="l00810"></a>00810       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#bbf95aad74d847cd4bcb129604f798cd">LOG_NOTICE</a>, "%d <a class="code" href="pbx__gtkconsole_8c.html#0eb9b3af2e4a00837a1b1a854c9ea18c">modules</a> will be loaded.\n", load_count);
<a name="l00811"></a>00811 
<a name="l00812"></a>00812    <span class="comment">/* first, load only modules that provide global symbols */</span>
<a name="l00813"></a>00813    <a class="code" href="linkedlists_8h.html#915e438a9528c8d6316c617b5bd84487">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;load_order, order, entry) {
<a name="l00814"></a>00814       <span class="keywordflow">switch</span> (<a class="code" href="loader_8c.html#026f2e4d7ffe711115d50078bca82fcb">load_resource</a>(order-&gt;resource, 1)) {
<a name="l00815"></a>00815       <span class="keywordflow">case</span> <a class="code" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0ad07cbe1dd6392827ce7616a624aad97c">AST_MODULE_LOAD_SUCCESS</a>:
<a name="l00816"></a>00816       <span class="keywordflow">case</span> <a class="code" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0adea6426eed250d0d922d7e289a706663">AST_MODULE_LOAD_DECLINE</a>:
<a name="l00817"></a>00817          <a class="code" href="linkedlists_8h.html#37f99379dafa45c921f95bf7235eb91d">AST_LIST_REMOVE_CURRENT</a>(&amp;load_order, entry);
<a name="l00818"></a>00818          <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(order-&gt;resource);
<a name="l00819"></a>00819          <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(order);
<a name="l00820"></a>00820          <span class="keywordflow">break</span>;
<a name="l00821"></a>00821       <span class="keywordflow">case</span> <a class="code" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0a40ed2f1246faac667accd325ea83f9e2">AST_MODULE_LOAD_FAILURE</a>:
<a name="l00822"></a>00822          res = -1;
<a name="l00823"></a>00823          <span class="keywordflow">goto</span> done;
<a name="l00824"></a>00824       <span class="keywordflow">case</span> <a class="code" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0ad2ec6d7ab7a7c169dc765e9937b966aa">AST_MODULE_LOAD_SKIP</a>:
<a name="l00825"></a>00825          <span class="comment">/* try again later */</span>
<a name="l00826"></a>00826          <span class="keywordflow">break</span>;
<a name="l00827"></a>00827       }
<a name="l00828"></a>00828    }
<a name="l00829"></a>00829    <a class="code" href="linkedlists_8h.html#a93fdadc00a2a090968004b7d9c79630">AST_LIST_TRAVERSE_SAFE_END</a>;
<a name="l00830"></a>00830 
<a name="l00831"></a>00831    <span class="comment">/* now load everything else */</span>
<a name="l00832"></a>00832    <a class="code" href="linkedlists_8h.html#915e438a9528c8d6316c617b5bd84487">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;load_order, order, entry) {
<a name="l00833"></a>00833       <span class="keywordflow">switch</span> (<a class="code" href="loader_8c.html#026f2e4d7ffe711115d50078bca82fcb">load_resource</a>(order-&gt;resource, 0)) {
<a name="l00834"></a>00834       <span class="keywordflow">case</span> <a class="code" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0ad07cbe1dd6392827ce7616a624aad97c">AST_MODULE_LOAD_SUCCESS</a>:
<a name="l00835"></a>00835       <span class="keywordflow">case</span> <a class="code" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0adea6426eed250d0d922d7e289a706663">AST_MODULE_LOAD_DECLINE</a>:
<a name="l00836"></a>00836          <a class="code" href="linkedlists_8h.html#37f99379dafa45c921f95bf7235eb91d">AST_LIST_REMOVE_CURRENT</a>(&amp;load_order, entry);
<a name="l00837"></a>00837          <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(order-&gt;resource);
<a name="l00838"></a>00838          <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(order);
<a name="l00839"></a>00839          <span class="keywordflow">break</span>;
<a name="l00840"></a>00840       <span class="keywordflow">case</span> <a class="code" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0a40ed2f1246faac667accd325ea83f9e2">AST_MODULE_LOAD_FAILURE</a>:
<a name="l00841"></a>00841          res = -1;
<a name="l00842"></a>00842          <span class="keywordflow">goto</span> done;
<a name="l00843"></a>00843       <span class="keywordflow">case</span> <a class="code" href="module_8h.html#6b66b922ea50fb20d0a8a25ba8317b0ad2ec6d7ab7a7c169dc765e9937b966aa">AST_MODULE_LOAD_SKIP</a>:
<a name="l00844"></a>00844          <span class="comment">/* should not happen */</span>
<a name="l00845"></a>00845          <span class="keywordflow">break</span>;
<a name="l00846"></a>00846       }
<a name="l00847"></a>00847    }
<a name="l00848"></a>00848    <a class="code" href="linkedlists_8h.html#a93fdadc00a2a090968004b7d9c79630">AST_LIST_TRAVERSE_SAFE_END</a>;
<a name="l00849"></a>00849 
<a name="l00850"></a>00850 done:
<a name="l00851"></a>00851    <span class="keywordflow">while</span> ((order = <a class="code" href="linkedlists_8h.html#beec347da29fe6b0d7fdb3e80b851f90">AST_LIST_REMOVE_HEAD</a>(&amp;load_order, entry))) {
<a name="l00852"></a>00852       <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(order-&gt;resource);
<a name="l00853"></a>00853       <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(order);
<a name="l00854"></a>00854    }
<a name="l00855"></a>00855 
<a name="l00856"></a>00856    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;module_list);
<a name="l00857"></a>00857 
<a name="l00858"></a>00858    <span class="keywordflow">return</span> res;
<a name="l00859"></a>00859 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="1123cfede7379bd2813e1b4306327c10"></a><!-- doxytag: member="asterisk.h::load_pbx" ref="1123cfede7379bd2813e1b4306327c10" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int load_pbx           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provided by <a class="el" href="pbx_8c.html">pbx.c</a> 
<p>
Definition at line <a class="el" href="pbx_8c-source.html#l06035">6035</a> of file <a class="el" href="pbx_8c-source.html">pbx.c</a>.
<p>
References <a class="el" href="cli_8c-source.html#l01352">ast_cli_register_multiple()</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="manager_8c-source.html#l02694">ast_manager_register2()</a>, <a class="el" href="pbx_8c-source.html#l02875">ast_register_application()</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="cli_8c-source.html#l00949">builtins</a>, <a class="el" href="callerid_8c-source.html#l01044">description</a>, <a class="el" href="manager_8h-source.html#l00058">EVENT_FLAG_CONFIG</a>, <a class="el" href="logger_8h-source.html#l00118">LOG_ERROR</a>, <a class="el" href="pbx_8c-source.html#l03690">manager_show_dialplan()</a>, <a class="el" href="asterisk_8c-source.html#l00163">option_verbose</a>, <a class="el" href="chan__agent_8c-source.html#l00082">synopsis</a>, and <a class="el" href="logger_8h-source.html#l00043">VERBOSE_PREFIX_1</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.<div class="fragment"><pre class="fragment"><a name="l06036"></a>06036 {
<a name="l06037"></a>06037    <span class="keywordtype">int</span> x;
<a name="l06038"></a>06038 
<a name="l06039"></a>06039    <span class="comment">/* Initialize the PBX */</span>
<a name="l06040"></a>06040    <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a>) {
<a name="l06041"></a>06041       <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>( <span class="stringliteral">"Asterisk PBX Core Initializing\n"</span>);
<a name="l06042"></a>06042       <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>( <span class="stringliteral">"Registering builtin applications:\n"</span>);
<a name="l06043"></a>06043    }
<a name="l06044"></a>06044    <a class="code" href="cli_8c.html#a334dfd903e83eea3729ff37aa372781">ast_cli_register_multiple</a>(<a class="code" href="pbx_8c.html#886f64036bf3be08de3c6f7561b0a8a9">pbx_cli</a>, <span class="keyword">sizeof</span>(<a class="code" href="pbx_8c.html#886f64036bf3be08de3c6f7561b0a8a9">pbx_cli</a>) / <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structast__cli__entry.html">ast_cli_entry</a>));
<a name="l06045"></a>06045 
<a name="l06046"></a>06046    <span class="comment">/* Register builtin applications */</span>
<a name="l06047"></a>06047    <span class="keywordflow">for</span> (x=0; x&lt;<span class="keyword">sizeof</span>(<a class="code" href="cli_8c.html#7b94c2c41ed9fd600b9a19bb54467397">builtins</a>) / <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structpbx__builtin.html">pbx_builtin</a>); x++) {
<a name="l06048"></a>06048       <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a>)
<a name="l06049"></a>06049          <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>( <a class="code" href="logger_8h.html#be88e5e9e0316971a55422c09f04e996">VERBOSE_PREFIX_1</a> <span class="stringliteral">"[%s]\n"</span>, builtins[x].<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>);
<a name="l06050"></a>06050       <span class="keywordflow">if</span> (<a class="code" href="pbx_8c.html#f8e9b339fed38c405332f222cceeec40">ast_register_application</a>(builtins[x].<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, builtins[x].execute, builtins[x].<a class="code" href="chan__agent_8c.html#485d112e4e425dde393e2e7091451856">synopsis</a>, builtins[x].<a class="code" href="callerid_8c.html#67daf92c833c41c95db874e18fcb2786">description</a>)) {
<a name="l06051"></a>06051          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#4490aa3d29644e716440fada68f54032">LOG_ERROR</a>, <span class="stringliteral">"Unable to register builtin application '%s'\n"</span>, builtins[x].name);
<a name="l06052"></a>06052          <span class="keywordflow">return</span> -1;
<a name="l06053"></a>06053       }
<a name="l06054"></a>06054    }
<a name="l06055"></a>06055    
<a name="l06056"></a>06056    <span class="comment">/* Register manager application */</span>
<a name="l06057"></a>06057    <a class="code" href="group__Group__AMI.html#g84a70f66019d4cf74b8e203011d22431">ast_manager_register2</a>(<span class="stringliteral">"ShowDialPlan"</span>, <a class="code" href="manager_8h.html#31c33938947056ad055258c5c585812c">EVENT_FLAG_CONFIG</a>, <a class="code" href="pbx_8c.html#f6b8ea6835408c7f6c5a42d5a7502c03">manager_show_dialplan</a>, <span class="stringliteral">"List dialplan"</span>, <a class="code" href="pbx_8c.html#120b7e9b0d3b3902740d7fa84fc826e0">mandescr_show_dialplan</a>);
<a name="l06058"></a>06058    <span class="keywordflow">return</span> 0;
<a name="l06059"></a>06059 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="16e979f3fb924886e2a31b4f59a0a1d1"></a><!-- doxytag: member="asterisk.h::reload_logger" ref="16e979f3fb924886e2a31b4f59a0a1d1" args="(int)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int reload_logger           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provided by <a class="el" href="logger_8c.html">logger.c</a> 
<p>
Definition at line <a class="el" href="logger_8c-source.html#l00397">397</a> of file <a class="el" href="logger_8c-source.html">logger.c</a>.
<p>
References <a class="el" href="asterisk_8c-source.html#l00217">ast_config_AST_LOG_DIR</a>, <a class="el" href="linkedlists_8h-source.html#l00038">AST_LIST_LOCK</a>, <a class="el" href="linkedlists_8h-source.html#l00453">AST_LIST_TRAVERSE</a>, <a class="el" href="linkedlists_8h-source.html#l00104">AST_LIST_UNLOCK</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="logger_8c-source.html#l00382">ast_queue_log()</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="logger_8c-source.html#l00108">logchannel::disabled</a>, <a class="el" href="manager_8h-source.html#l00051">EVENT_FLAG_SYSTEM</a>, <a class="el" href="logger_8h-source.html#l00036">EVENTLOG</a>, <a class="el" href="logger_8c-source.html#l00139">eventlog</a>, <a class="el" href="format__g726_8c-source.html#l00193">f</a>, <a class="el" href="logger_8c-source.html#l00112">logchannel::filename</a>, <a class="el" href="logger_8c-source.html#l00111">logchannel::fileptr</a>, <a class="el" href="logger_8c-source.html#l00089">filesize_reload_needed</a>, <a class="el" href="logger_8c-source.html#l00309">init_logger_chain()</a>, <a class="el" href="logger_8h-source.html#l00118">LOG_ERROR</a>, <a class="el" href="logger_8h-source.html#l00100">LOG_EVENT</a>, <a class="el" href="logger_8c.html#d9c335882826a0798f8101f6a1343f60">logfiles</a>, <a class="el" href="manager_8h-source.html#l00163">manager_event</a>, <a class="el" href="asterisk_8c-source.html#l00163">option_verbose</a>, <a class="el" href="logger_8c-source.html#l00140">qlog</a>, <a class="el" href="logger_8c-source.html#l00087">queue_log_name</a>, and <a class="el" href="logger_8c-source.html#l00091">rotatetimestamp</a>.
<p>
Referenced by <a class="el" href="logger_8c-source.html#l00524">handle_logger_reload()</a>, <a class="el" href="logger_8c-source.html#l00533">handle_logger_rotate()</a>, and <a class="el" href="logger_8c-source.html#l00645">logger_print_normal()</a>.<div class="fragment"><pre class="fragment"><a name="l00398"></a>00398 {
<a name="l00399"></a>00399    <span class="keywordtype">char</span> old[PATH_MAX] = <span class="stringliteral">""</span>;
<a name="l00400"></a>00400    <span class="keywordtype">char</span> <span class="keyword">new</span>[PATH_MAX];
<a name="l00401"></a>00401    <span class="keywordtype">int</span> event_rotate = rotate, queue_rotate = rotate;
<a name="l00402"></a>00402    <span class="keyword">struct </span><a class="code" href="structlogchannel.html">logchannel</a> *<a class="code" href="format__g726_8c.html#85b9b17a7dd34a3638c560bc9152473b">f</a>;
<a name="l00403"></a>00403    FILE *myf;
<a name="l00404"></a>00404    <span class="keywordtype">int</span> x, res = 0;
<a name="l00405"></a>00405 
<a name="l00406"></a>00406    <a class="code" href="linkedlists_8h.html#44d46016bec4f7c50450973666ce638d">AST_LIST_LOCK</a>(&amp;logchannels);
<a name="l00407"></a>00407 
<a name="l00408"></a>00408    <span class="keywordflow">if</span> (<a class="code" href="logger_8c.html#f47a66a903b4f64e00e9a1aa9bee17a7">eventlog</a>) 
<a name="l00409"></a>00409       fclose(<a class="code" href="logger_8c.html#f47a66a903b4f64e00e9a1aa9bee17a7">eventlog</a>);
<a name="l00410"></a>00410    <span class="keywordflow">else</span> 
<a name="l00411"></a>00411       event_rotate = 0;
<a name="l00412"></a>00412    <a class="code" href="logger_8c.html#f47a66a903b4f64e00e9a1aa9bee17a7">eventlog</a> = NULL;
<a name="l00413"></a>00413 
<a name="l00414"></a>00414    <span class="keywordflow">if</span> (<a class="code" href="logger_8c.html#fb224cabc648945bcfd1d84c6e478518">qlog</a>) 
<a name="l00415"></a>00415       fclose(<a class="code" href="logger_8c.html#fb224cabc648945bcfd1d84c6e478518">qlog</a>);
<a name="l00416"></a>00416    <span class="keywordflow">else</span> 
<a name="l00417"></a>00417       queue_rotate = 0;
<a name="l00418"></a>00418    <a class="code" href="logger_8c.html#fb224cabc648945bcfd1d84c6e478518">qlog</a> = NULL;
<a name="l00419"></a>00419 
<a name="l00420"></a>00420    mkdir(<a class="code" href="asterisk_8c.html#af6a08df4c5a91b22da1d9bb4fc3e2a3">ast_config_AST_LOG_DIR</a>, 0755);
<a name="l00421"></a>00421 
<a name="l00422"></a>00422    <a class="code" href="linkedlists_8h.html#e5bbda4b7ef1cd9462bb86ba25c5d7eb">AST_LIST_TRAVERSE</a>(&amp;logchannels, f, list) {
<a name="l00423"></a>00423       <span class="keywordflow">if</span> (f-&gt;<a class="code" href="structlogchannel.html#075ae3d2fc31640504f814f60e5ef713">disabled</a>) {
<a name="l00424"></a>00424          f-&gt;<a class="code" href="structlogchannel.html#075ae3d2fc31640504f814f60e5ef713">disabled</a> = 0;  <span class="comment">/* Re-enable logging at reload */</span>
<a name="l00425"></a>00425          <a class="code" href="manager_8h.html#17a8c809d5b2d04cbb8969a209134c2b">manager_event</a>(<a class="code" href="manager_8h.html#440ebd9d80179402b9cd76c426adb8d2">EVENT_FLAG_SYSTEM</a>, <span class="stringliteral">"LogChannel"</span>, <span class="stringliteral">"Channel: %s\r\nEnabled: Yes\r\n"</span>, f-&gt;<a class="code" href="structlogchannel.html#5d0deb8dec37512d817b24ccd1676232">filename</a>);
<a name="l00426"></a>00426       }
<a name="l00427"></a>00427       <span class="keywordflow">if</span> (f-&gt;<a class="code" href="structlogchannel.html#fa3d50f005921f181f7f414b1f321d63">fileptr</a> &amp;&amp; (f-&gt;<a class="code" href="structlogchannel.html#fa3d50f005921f181f7f414b1f321d63">fileptr</a> != stdout) &amp;&amp; (f-&gt;<a class="code" href="structlogchannel.html#fa3d50f005921f181f7f414b1f321d63">fileptr</a> != stderr)) {
<a name="l00428"></a>00428          fclose(f-&gt;<a class="code" href="structlogchannel.html#fa3d50f005921f181f7f414b1f321d63">fileptr</a>);  <span class="comment">/* Close file */</span>
<a name="l00429"></a>00429          f-&gt;<a class="code" href="structlogchannel.html#fa3d50f005921f181f7f414b1f321d63">fileptr</a> = NULL;
<a name="l00430"></a>00430          <span class="keywordflow">if</span> (rotate) {
<a name="l00431"></a>00431             ast_copy_string(old, f-&gt;<a class="code" href="structlogchannel.html#5d0deb8dec37512d817b24ccd1676232">filename</a>, <span class="keyword">sizeof</span>(old));
<a name="l00432"></a>00432             
<a name="l00433"></a>00433             <span class="keywordflow">if</span> (!<a class="code" href="logger_8c.html#dc49b8f1dd0e04cd75a59aab3c8578f6">rotatetimestamp</a>) { 
<a name="l00434"></a>00434                <span class="keywordflow">for</span> (x = 0; ; x++) {
<a name="l00435"></a>00435                   snprintf(<span class="keyword">new</span>, <span class="keyword">sizeof</span>(<span class="keyword">new</span>), <span class="stringliteral">"%s.%d"</span>, f-&gt;<a class="code" href="structlogchannel.html#5d0deb8dec37512d817b24ccd1676232">filename</a>, x);
<a name="l00436"></a>00436                   myf = fopen(<span class="keyword">new</span>, <span class="stringliteral">"r"</span>);
<a name="l00437"></a>00437                   <span class="keywordflow">if</span> (myf)
<a name="l00438"></a>00438                      fclose(myf);
<a name="l00439"></a>00439                   <span class="keywordflow">else</span>
<a name="l00440"></a>00440                      <span class="keywordflow">break</span>;
<a name="l00441"></a>00441                }
<a name="l00442"></a>00442             } <span class="keywordflow">else</span> 
<a name="l00443"></a>00443                snprintf(<span class="keyword">new</span>, <span class="keyword">sizeof</span>(<span class="keyword">new</span>), <span class="stringliteral">"%s.%ld"</span>, f-&gt;<a class="code" href="structlogchannel.html#5d0deb8dec37512d817b24ccd1676232">filename</a>, (<span class="keywordtype">long</span>)time(NULL));
<a name="l00444"></a>00444 
<a name="l00445"></a>00445             <span class="comment">/* do it */</span>
<a name="l00446"></a>00446             <span class="keywordflow">if</span> (rename(old,<span class="keyword">new</span>))
<a name="l00447"></a>00447                fprintf(stderr, <span class="stringliteral">"Unable to rename file '%s' to '%s'\n"</span>, old, <span class="keyword">new</span>);
<a name="l00448"></a>00448          }
<a name="l00449"></a>00449       }
<a name="l00450"></a>00450    }
<a name="l00451"></a>00451 
<a name="l00452"></a>00452    <a class="code" href="logger_8c.html#d367f37beb3a682291cbbe3dc6365a3c">filesize_reload_needed</a> = 0;
<a name="l00453"></a>00453    
<a name="l00454"></a>00454    <a class="code" href="logger_8c.html#c78b4875648a366a3927c721e8d8cd19">init_logger_chain</a>();
<a name="l00455"></a>00455 
<a name="l00456"></a>00456    <span class="keywordflow">if</span> (<a class="code" href="logger_8c.html#d9c335882826a0798f8101f6a1343f60">logfiles</a>.event_log) {
<a name="l00457"></a>00457       snprintf(old, <span class="keyword">sizeof</span>(old), <span class="stringliteral">"%s/%s"</span>, <a class="code" href="asterisk_8c.html#af6a08df4c5a91b22da1d9bb4fc3e2a3">ast_config_AST_LOG_DIR</a>, <a class="code" href="logger_8h.html#ea818bb73b1eea69c38c5c13b69971af">EVENTLOG</a>);
<a name="l00458"></a>00458       <span class="keywordflow">if</span> (event_rotate) {
<a name="l00459"></a>00459          <span class="keywordflow">if</span> (!<a class="code" href="logger_8c.html#dc49b8f1dd0e04cd75a59aab3c8578f6">rotatetimestamp</a>) { 
<a name="l00460"></a>00460             <span class="keywordflow">for</span> (x=0;;x++) {
<a name="l00461"></a>00461                snprintf(<span class="keyword">new</span>, <span class="keyword">sizeof</span>(<span class="keyword">new</span>), <span class="stringliteral">"%s/%s.%d"</span>, <a class="code" href="asterisk_8c.html#af6a08df4c5a91b22da1d9bb4fc3e2a3">ast_config_AST_LOG_DIR</a>, <a class="code" href="logger_8h.html#ea818bb73b1eea69c38c5c13b69971af">EVENTLOG</a>,x);
<a name="l00462"></a>00462                myf = fopen(<span class="keyword">new</span>, <span class="stringliteral">"r"</span>);
<a name="l00463"></a>00463                <span class="keywordflow">if</span> (myf)    <span class="comment">/* File exists */</span>
<a name="l00464"></a>00464                   fclose(myf);
<a name="l00465"></a>00465                <span class="keywordflow">else</span>
<a name="l00466"></a>00466                   <span class="keywordflow">break</span>;
<a name="l00467"></a>00467             }
<a name="l00468"></a>00468          } <span class="keywordflow">else</span> 
<a name="l00469"></a>00469             snprintf(<span class="keyword">new</span>, <span class="keyword">sizeof</span>(<span class="keyword">new</span>), <span class="stringliteral">"%s/%s.%ld"</span>, <a class="code" href="asterisk_8c.html#af6a08df4c5a91b22da1d9bb4fc3e2a3">ast_config_AST_LOG_DIR</a>, <a class="code" href="logger_8h.html#ea818bb73b1eea69c38c5c13b69971af">EVENTLOG</a>,(<span class="keywordtype">long</span>)time(NULL));
<a name="l00470"></a>00470    
<a name="l00471"></a>00471          <span class="comment">/* do it */</span>
<a name="l00472"></a>00472          <span class="keywordflow">if</span> (rename(old,<span class="keyword">new</span>))
<a name="l00473"></a>00473             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#4490aa3d29644e716440fada68f54032">LOG_ERROR</a>, <span class="stringliteral">"Unable to rename file '%s' to '%s'\n"</span>, old, <span class="keyword">new</span>);
<a name="l00474"></a>00474       }
<a name="l00475"></a>00475 
<a name="l00476"></a>00476       <a class="code" href="logger_8c.html#f47a66a903b4f64e00e9a1aa9bee17a7">eventlog</a> = fopen(old, <span class="stringliteral">"a"</span>);
<a name="l00477"></a>00477       <span class="keywordflow">if</span> (<a class="code" href="logger_8c.html#f47a66a903b4f64e00e9a1aa9bee17a7">eventlog</a>) {
<a name="l00478"></a>00478          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#4671d62857becc386bbe4cfdc0d96fdc">LOG_EVENT</a>, <span class="stringliteral">"Restarted Asterisk Event Logger\n"</span>);
<a name="l00479"></a>00479          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a>)
<a name="l00480"></a>00480             <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<span class="stringliteral">"Asterisk Event Logger restarted\n"</span>);
<a name="l00481"></a>00481       } <span class="keywordflow">else</span> {
<a name="l00482"></a>00482          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#4490aa3d29644e716440fada68f54032">LOG_ERROR</a>, <span class="stringliteral">"Unable to create event log: %s\n"</span>, strerror(errno));
<a name="l00483"></a>00483          res = -1;
<a name="l00484"></a>00484       }
<a name="l00485"></a>00485    }
<a name="l00486"></a>00486 
<a name="l00487"></a>00487    <span class="keywordflow">if</span> (<a class="code" href="logger_8c.html#d9c335882826a0798f8101f6a1343f60">logfiles</a>.queue_log) {
<a name="l00488"></a>00488       snprintf(old, <span class="keyword">sizeof</span>(old), <span class="stringliteral">"%s/%s"</span>, <a class="code" href="asterisk_8c.html#af6a08df4c5a91b22da1d9bb4fc3e2a3">ast_config_AST_LOG_DIR</a>, <a class="code" href="logger_8c.html#7910496bacc721498fc269323c8884ac">queue_log_name</a>);
<a name="l00489"></a>00489       <span class="keywordflow">if</span> (queue_rotate) {
<a name="l00490"></a>00490          <span class="keywordflow">if</span> (!<a class="code" href="logger_8c.html#dc49b8f1dd0e04cd75a59aab3c8578f6">rotatetimestamp</a>) { 
<a name="l00491"></a>00491             <span class="keywordflow">for</span> (x = 0; ; x++) {
<a name="l00492"></a>00492                snprintf(<span class="keyword">new</span>, <span class="keyword">sizeof</span>(<span class="keyword">new</span>), <span class="stringliteral">"%s/%s.%d"</span>, <a class="code" href="asterisk_8c.html#af6a08df4c5a91b22da1d9bb4fc3e2a3">ast_config_AST_LOG_DIR</a>, <a class="code" href="logger_8c.html#7910496bacc721498fc269323c8884ac">queue_log_name</a>, x);
<a name="l00493"></a>00493                myf = fopen(<span class="keyword">new</span>, <span class="stringliteral">"r"</span>);
<a name="l00494"></a>00494                <span class="keywordflow">if</span> (myf)    <span class="comment">/* File exists */</span>
<a name="l00495"></a>00495                   fclose(myf);
<a name="l00496"></a>00496                <span class="keywordflow">else</span>
<a name="l00497"></a>00497                   <span class="keywordflow">break</span>;
<a name="l00498"></a>00498             }
<a name="l00499"></a>00499    
<a name="l00500"></a>00500          } <span class="keywordflow">else</span> 
<a name="l00501"></a>00501             snprintf(<span class="keyword">new</span>, <span class="keyword">sizeof</span>(<span class="keyword">new</span>), <span class="stringliteral">"%s/%s.%ld"</span>, <a class="code" href="asterisk_8c.html#af6a08df4c5a91b22da1d9bb4fc3e2a3">ast_config_AST_LOG_DIR</a>, <a class="code" href="logger_8c.html#7910496bacc721498fc269323c8884ac">queue_log_name</a>,(<span class="keywordtype">long</span>)time(NULL));
<a name="l00502"></a>00502          <span class="comment">/* do it */</span>
<a name="l00503"></a>00503          <span class="keywordflow">if</span> (rename(old, <span class="keyword">new</span>))
<a name="l00504"></a>00504             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#4490aa3d29644e716440fada68f54032">LOG_ERROR</a>, <span class="stringliteral">"Unable to rename file '%s' to '%s'\n"</span>, old, <span class="keyword">new</span>);
<a name="l00505"></a>00505       }
<a name="l00506"></a>00506 
<a name="l00507"></a>00507       <a class="code" href="logger_8c.html#fb224cabc648945bcfd1d84c6e478518">qlog</a> = fopen(old, <span class="stringliteral">"a"</span>);
<a name="l00508"></a>00508       <span class="keywordflow">if</span> (<a class="code" href="logger_8c.html#fb224cabc648945bcfd1d84c6e478518">qlog</a>) {
<a name="l00509"></a>00509          <a class="code" href="logger_8c.html#fea5f2d99796443dd5537c0d8ca44bce">ast_queue_log</a>(<span class="stringliteral">"NONE"</span>, <span class="stringliteral">"NONE"</span>, <span class="stringliteral">"NONE"</span>, <span class="stringliteral">"CONFIGRELOAD"</span>, <span class="stringliteral">"%s"</span>, <span class="stringliteral">""</span>);
<a name="l00510"></a>00510          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#4671d62857becc386bbe4cfdc0d96fdc">LOG_EVENT</a>, <span class="stringliteral">"Restarted Asterisk Queue Logger\n"</span>);
<a name="l00511"></a>00511          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a>)
<a name="l00512"></a>00512             <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<span class="stringliteral">"Asterisk Queue Logger restarted\n"</span>);
<a name="l00513"></a>00513       } <span class="keywordflow">else</span> {
<a name="l00514"></a>00514          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#4490aa3d29644e716440fada68f54032">LOG_ERROR</a>, <span class="stringliteral">"Unable to create queue log: %s\n"</span>, strerror(errno));
<a name="l00515"></a>00515          res = -1;
<a name="l00516"></a>00516       }
<a name="l00517"></a>00517    }
<a name="l00518"></a>00518 
<a name="l00519"></a>00519    <a class="code" href="linkedlists_8h.html#1829cc3d91ee394b65b7379f68ab3dad">AST_LIST_UNLOCK</a>(&amp;logchannels);
<a name="l00520"></a>00520 
<a name="l00521"></a>00521    <span class="keywordflow">return</span> res;
<a name="l00522"></a>00522 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="59a5fcbc506d1e1e742c0ecbe4fb7ed5"></a><!-- doxytag: member="asterisk.h::threadstorage_init" ref="59a5fcbc506d1e1e742c0ecbe4fb7ed5" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void threadstorage_init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provided by <a class="el" href="threadstorage_8c.html">threadstorage.c</a> 
<p>
Definition at line <a class="el" href="threadstorage_8c-source.html#l00222">222</a> of file <a class="el" href="threadstorage_8c-source.html">threadstorage.c</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00223"></a>00223 {
<a name="l00224"></a>00224 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="0fc8e656809ce6507ffed32649956381"></a><!-- doxytag: member="asterisk.h::ast_config_AST_AGI_DIR" ref="0fc8e656809ce6507ffed32649956381" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#0fc8e656809ce6507ffed32649956381">ast_config_AST_AGI_DIR</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00218">218</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="0a741f5d37bb00616aba45b9437c13a7"></a><!-- doxytag: member="asterisk.h::ast_config_AST_CONFIG_DIR" ref="0a741f5d37bb00616aba45b9437c13a7" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#0a741f5d37bb00616aba45b9437c13a7">ast_config_AST_CONFIG_DIR</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00210">210</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="518e579b8448d2834f4d7bcb3c0374b9"></a><!-- doxytag: member="asterisk.h::ast_config_AST_CONFIG_FILE" ref="518e579b8448d2834f4d7bcb3c0374b9" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#518e579b8448d2834f4d7bcb3c0374b9">ast_config_AST_CONFIG_FILE</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00211">211</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="cca382de6ca5496a462dcdf283c793d1"></a><!-- doxytag: member="asterisk.h::ast_config_AST_CTL" ref="cca382de6ca5496a462dcdf283c793d1" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#cca382de6ca5496a462dcdf283c793d1">ast_config_AST_CTL</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00229">229</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="3f64ed95129eea6328d3f3ecf4f34de8"></a><!-- doxytag: member="asterisk.h::ast_config_AST_CTL_GROUP" ref="3f64ed95129eea6328d3f3ecf4f34de8" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#3f64ed95129eea6328d3f3ecf4f34de8">ast_config_AST_CTL_GROUP</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00228">228</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="71f7124498b65b37b4211976138e2356"></a><!-- doxytag: member="asterisk.h::ast_config_AST_CTL_OWNER" ref="71f7124498b65b37b4211976138e2356" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#71f7124498b65b37b4211976138e2356">ast_config_AST_CTL_OWNER</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00227">227</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="0c6a6808d852510151af7a84c8f57a99"></a><!-- doxytag: member="asterisk.h::ast_config_AST_CTL_PERMISSIONS" ref="0c6a6808d852510151af7a84c8f57a99" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#0c6a6808d852510151af7a84c8f57a99">ast_config_AST_CTL_PERMISSIONS</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00226">226</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="941063989b9bef2acc03ffa668b930a9"></a><!-- doxytag: member="asterisk.h::ast_config_AST_DATA_DIR" ref="941063989b9bef2acc03ffa668b930a9" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#941063989b9bef2acc03ffa668b930a9">ast_config_AST_DATA_DIR</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00216">216</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="876cf5a30ab9549d0f5d72d8fac4ab1c"></a><!-- doxytag: member="asterisk.h::ast_config_AST_DB" ref="876cf5a30ab9549d0f5d72d8fac4ab1c" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#876cf5a30ab9549d0f5d72d8fac4ab1c">ast_config_AST_DB</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00219">219</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="5978b4013e123589a1077c519919f7af"></a><!-- doxytag: member="asterisk.h::ast_config_AST_KEY_DIR" ref="5978b4013e123589a1077c519919f7af" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#5978b4013e123589a1077c519919f7af">ast_config_AST_KEY_DIR</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00220">220</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="af6a08df4c5a91b22da1d9bb4fc3e2a3"></a><!-- doxytag: member="asterisk.h::ast_config_AST_LOG_DIR" ref="af6a08df4c5a91b22da1d9bb4fc3e2a3" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#af6a08df4c5a91b22da1d9bb4fc3e2a3">ast_config_AST_LOG_DIR</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00217">217</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="0c9ed5029117c0cc03a5acb9e5ff967f"></a><!-- doxytag: member="asterisk.h::ast_config_AST_MODULE_DIR" ref="0c9ed5029117c0cc03a5acb9e5ff967f" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#0c9ed5029117c0cc03a5acb9e5ff967f">ast_config_AST_MODULE_DIR</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00212">212</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="e30f110a2a02a50a63b05fe5ba3206b6"></a><!-- doxytag: member="asterisk.h::ast_config_AST_MONITOR_DIR" ref="e30f110a2a02a50a63b05fe5ba3206b6" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#e30f110a2a02a50a63b05fe5ba3206b6">ast_config_AST_MONITOR_DIR</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00214">214</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="fd1223810856be295a0c0fc256ec902f"></a><!-- doxytag: member="asterisk.h::ast_config_AST_PID" ref="fd1223810856be295a0c0fc256ec902f" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#fd1223810856be295a0c0fc256ec902f">ast_config_AST_PID</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00221">221</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="8c5e4b7db03e053ea703f7166c2bd056"></a><!-- doxytag: member="asterisk.h::ast_config_AST_RUN_DIR" ref="8c5e4b7db03e053ea703f7166c2bd056" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#8c5e4b7db03e053ea703f7166c2bd056">ast_config_AST_RUN_DIR</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00223">223</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d09bbe8a64f8f712d59fb708101e5313"></a><!-- doxytag: member="asterisk.h::ast_config_AST_RUN_GROUP" ref="d09bbe8a64f8f712d59fb708101e5313" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="asterisk_8h.html#d09bbe8a64f8f712d59fb708101e5313">ast_config_AST_RUN_GROUP</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00225">225</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.
<p>
Referenced by <a class="el" href="manager_8c-source.html#l02200">action_coresettings()</a>, <a class="el" href="asterisk_8c-source.html#l02369">ast_readconfig()</a>, <a class="el" href="asterisk_8c-source.html#l00344">handle_show_settings()</a>, and <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="64c0b497dfed5629380fe004fba12a35"></a><!-- doxytag: member="asterisk.h::ast_config_AST_RUN_USER" ref="64c0b497dfed5629380fe004fba12a35" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="asterisk_8h.html#64c0b497dfed5629380fe004fba12a35">ast_config_AST_RUN_USER</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00224">224</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.
<p>
Referenced by <a class="el" href="manager_8c-source.html#l02200">action_coresettings()</a>, <a class="el" href="asterisk_8c-source.html#l02369">ast_readconfig()</a>, <a class="el" href="asterisk_8c-source.html#l00344">handle_show_settings()</a>, and <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="08630e9bc03919e21a3142aa0a35cbb2"></a><!-- doxytag: member="asterisk.h::ast_config_AST_SOCKET" ref="08630e9bc03919e21a3142aa0a35cbb2" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#08630e9bc03919e21a3142aa0a35cbb2">ast_config_AST_SOCKET</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00222">222</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a79197213f86764d67b79bf8542e8156"></a><!-- doxytag: member="asterisk.h::ast_config_AST_SPOOL_DIR" ref="a79197213f86764d67b79bf8542e8156" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#a79197213f86764d67b79bf8542e8156">ast_config_AST_SPOOL_DIR</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00213">213</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="0a0f8ba4c757a1da509a0cae1830025b"></a><!-- doxytag: member="asterisk.h::ast_config_AST_SYSTEM_NAME" ref="0a0f8ba4c757a1da509a0cae1830025b" args="[20]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#0a0f8ba4c757a1da509a0cae1830025b">ast_config_AST_SYSTEM_NAME</a>[20]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00230">230</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="017a6bc35b6f5a54d1a20dd5ca71aba3"></a><!-- doxytag: member="asterisk.h::ast_config_AST_VAR_DIR" ref="017a6bc35b6f5a54d1a20dd5ca71aba3" args="[PATH_MAX]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="paths_8h.html#017a6bc35b6f5a54d1a20dd5ca71aba3">ast_config_AST_VAR_DIR</a>[PATH_MAX]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="asterisk_8c-source.html#l00215">215</a> of file <a class="el" href="asterisk_8c-source.html">asterisk.c</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu May 24 22:27:04 2007 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
