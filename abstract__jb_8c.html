<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (24 May 2007)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Thu May 24 22:26:52 2007</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Fmain_2F.html">main</a></div>
<h1>abstract_jb.c File Reference</h1>Common implementation-independent jitterbuffer stuff. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="asterisk_8h-source.html">asterisk.h</a>&quot;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &quot;<a class="el" href="frame_8h-source.html">asterisk/frame.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="channel_8h-source.html">asterisk/channel.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="logger_8h-source.html">asterisk/logger.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="term_8h-source.html">asterisk/term.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="options_8h-source.html">asterisk/options.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="utils_8h-source.html">asterisk/utils.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="abstract__jb_8h-source.html">asterisk/abstract_jb.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="fixedjitterbuf_8h-source.html">fixedjitterbuf.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="jitterbuf_8h-source.html">jitterbuf.h</a>&quot;</code><br>

<p>
<a href="abstract__jb_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structast__jb__impl.html">ast_jb_impl</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Jitterbuffer implementation private struct.  <a href="structast__jb__impl.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#6707a65d86cea2d7224e4b79e003a8ab">jb_framelog</a>()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Macros for the frame log files.  <a href="#6707a65d86cea2d7224e4b79e003a8ab"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void *(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#99cf8bb08ec78ce162025e63399d12dd">jb_create_impl</a> )(struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a> *general_config, long resynch_threshold)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create.  <a href="#99cf8bb08ec78ce162025e63399d12dd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#9f759a4576c3f7cc522c5d7c98d5ddd1">jb_destroy_impl</a> )(void *jb)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy.  <a href="#9f759a4576c3f7cc522c5d7c98d5ddd1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#5bb4ff7d15d833fc5985d0f9952b5f86">jb_force_resynch_impl</a> )(void *jb)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Force resynch.  <a href="#5bb4ff7d15d833fc5985d0f9952b5f86"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#945a24a30919c89bfdf46db452a07ec9">jb_get_impl</a> )(void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> **fout, long now, long interpl)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get frame for now.  <a href="#945a24a30919c89bfdf46db452a07ec9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef long(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#ff98f995738838d7166e1d1d34b59126">jb_next_impl</a> )(void *jb)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get next.  <a href="#ff98f995738838d7166e1d1d34b59126"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#e725e9c8b3bda9b642d2dd9ed0157cce">jb_put_first_impl</a> )(void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> *fin, long now)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Put first frame.  <a href="#e725e9c8b3bda9b642d2dd9ed0157cce"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#b65e8658e94d05e15a9c84a3cd125de1">jb_put_impl</a> )(void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> *fin, long now)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Put frame.  <a href="#b65e8658e94d05e15a9c84a3cd125de1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#59aaa391857718678f6e9b446617eb6a">jb_remove_impl</a> )(void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> **fout)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove first frame.  <a href="#59aaa391857718678f6e9b446617eb6a"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f">JB_USE</a> =  (1 &lt;&lt; 0), 
<a class="el" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516efd895cb3810122ea90b27e9ce1176e623">JB_TIMEBASE_INITIALIZED</a> =  (1 &lt;&lt; 1), 
<a class="el" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a> =  (1 &lt;&lt; 2)
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8">JB_IMPL_OK</a>, 
<a class="el" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a730069f14b763b659b3c924a0818a673bb27">JB_IMPL_DROP</a>, 
<a class="el" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300d7f335805ebddd6de9e8b7bd14153290">JB_IMPL_INTERP</a>, 
<a class="el" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300604a98df1f81ff29fc48e301100cd8bf">JB_IMPL_NOFRAME</a>
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#ce6dbff5add20ce65086769d32bce117">ast_jb_configure</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, const struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a> *conf)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configures a jitterbuffer on a channel.  <a href="#ce6dbff5add20ce65086769d32bce117"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#38a4eb32a5c1425119f290654b6a4b0e">ast_jb_destroy</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroys jitterbuffer on a channel.  <a href="#38a4eb32a5c1425119f290654b6a4b0e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#d3d628e70cc3a782b0017fe3e6b36fd4">ast_jb_do_usecheck</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *c0, struct <a class="el" href="structast__channel.html">ast_channel</a> *c1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks the need of a jb use in a generic bridge.  <a href="#d3d628e70cc3a782b0017fe3e6b36fd4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#7c4d2833527a961fc976861441579116">ast_jb_get_and_deliver</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *c0, struct <a class="el" href="structast__channel.html">ast_channel</a> *c1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deliver the queued frames that should be delivered now for both channels.  <a href="#7c4d2833527a961fc976861441579116"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#71dfdeacf8f93cdb1da1c5561ad4e631">ast_jb_get_config</a> (const struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a> *conf)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copies a channel's jitterbuffer configuration.  <a href="#71dfdeacf8f93cdb1da1c5561ad4e631"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#08b86b2a178bd6636b3f1b81a418af46">ast_jb_get_when_to_wakeup</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *c0, struct <a class="el" href="structast__channel.html">ast_channel</a> *c1, int time_left)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculates the time, left to the closest delivery moment in a bridge.  <a href="#08b86b2a178bd6636b3f1b81a418af46"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#01a93200bfbbbe54704b408154bbd877">ast_jb_put</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, struct <a class="el" href="structast__frame.html">ast_frame</a> *<a class="el" href="format__g726_8c.html#85b9b17a7dd34a3638c560bc9152473b">f</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Puts a frame into a channel jitterbuffer.  <a href="#01a93200bfbbbe54704b408154bbd877"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#a68ca1bdf604d26cdd06c79334055a16">ast_jb_read_conf</a> (struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a> *conf, char *varname, char *value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets jitterbuffer configuration property.  <a href="#a68ca1bdf604d26cdd06c79334055a16"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#cd36b3c6b09fa926fdeaadb452a04fd4">create_jb</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, struct <a class="el" href="structast__frame.html">ast_frame</a> *first_frame)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#7dba3123573f5de4c69a766f78f54547">get_now</a> (struct <a class="el" href="structast__jb.html">ast_jb</a> *jb, struct timeval *<a class="el" href="time_8h.html#c9a1fdac6e082dd89e7173244f34d7b3">tv</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#129d7f3d1d1f1e937049e859dabaac4f">jb_choose_impl</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#3213e9bbf579731a144d74cb16b8f4e9">jb_create_adaptive</a> (struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a> *general_config, long resynch_threshold)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#f88012ebf072bdcd7e860f52e0993ec7">jb_create_fixed</a> (struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a> *general_config, long resynch_threshold)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#65dd8384c665c4b9694235a1b483f25f">jb_destroy_adaptive</a> (void *jb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#eb37e73985316b28509d60f726810c23">jb_destroy_fixed</a> (void *jb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#aa744cb22f39ccbd704d400c052ffa10">jb_force_resynch_adaptive</a> (void *jb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#59667ddc5dcd8f88dc926b2914f70953">jb_force_resynch_fixed</a> (void *jb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#21a215df7778ad86367d78eefedf42e2">jb_get_adaptive</a> (void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> **fout, long now, long interpl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#376aacc74650767f9aa1e7cb9fc6684c">jb_get_and_deliver</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#4d3e41e8f1a7baff053c35886ce2f1b4">jb_get_fixed</a> (void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> **fout, long now, long interpl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#98edef77550e29279f641b20a3cd810a">jb_next_adaptive</a> (void *jb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#c8b43a2c1bfd2b22d188940cc516db7a">jb_next_fixed</a> (void *jb)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#e920e1aaea3da9063df03e6320759b87">jb_put_adaptive</a> (void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> *fin, long now)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#6ecad726046a381a223c4b97bd971ae0">jb_put_first_adaptive</a> (void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> *fin, long now)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#8603421717c75170468cfa1aa243b208">jb_put_first_fixed</a> (void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> *fin, long now)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#0d51cab6b707f310631b15dbaa56936b">jb_put_fixed</a> (void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> *fin, long now)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#45171e70f126b475cfc6891a5b8ba373">jb_remove_adaptive</a> (void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> **fout)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#e97e00979323be2fc770fef0fbaf09e0">jb_remove_fixed</a> (void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> **fout)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#695c5c2d1adcc9f5e3a0003c52fa3bbe">adaptive_to_abstract_code</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structast__jb__impl.html">ast_jb_impl</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#6b8fee22e2006ec98aa7402c9b20b8aa">avail_impl</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#be3b9f661237251adffe48a07508e677">default_impl</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#0dc69744528e5ff402e3c83332502ba7">fixed_to_abstract_code</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="abstract__jb_8c.html#2f1c5231abf8192001831e787ecfa018">jb_get_actions</a> [] = {&quot;Delivered&quot;, &quot;Dropped&quot;, &quot;Interpolated&quot;, &quot;No&quot;}</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Common implementation-independent jitterbuffer stuff. 
<p>
<dl compact><dt><b>Author:</b></dt><dd>Slav Klenov &lt;<a href="mailto:slav@securax.org">slav@securax.org</a>&gt; </dd></dl>

<p>
Definition in file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="6707a65d86cea2d7224e4b79e003a8ab"></a><!-- doxytag: member="abstract_jb.c::jb_framelog" ref="6707a65d86cea2d7224e4b79e003a8ab" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define jb_framelog          </td>
          <td class="md" valign="top">(&nbsp;</td>
&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Macros for the frame log files. 
<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00159">159</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
Referenced by <a class="el" href="abstract__jb_8c-source.html#l00299">ast_jb_put()</a>, <a class="el" href="abstract__jb_8c-source.html#l00445">create_jb()</a>, and <a class="el" href="abstract__jb_8c-source.html#l00381">jb_get_and_deliver()</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="99cf8bb08ec78ce162025e63399d12dd"></a><!-- doxytag: member="abstract_jb.c::jb_create_impl" ref="99cf8bb08ec78ce162025e63399d12dd" args=")(struct ast_jb_conf *general_config, long resynch_threshold)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef void*(* <a class="el" href="abstract__jb_8c.html#99cf8bb08ec78ce162025e63399d12dd">jb_create_impl</a>)(struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a> *general_config, long resynch_threshold)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create. 
<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00058">58</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="9f759a4576c3f7cc522c5d7c98d5ddd1"></a><!-- doxytag: member="abstract_jb.c::jb_destroy_impl" ref="9f759a4576c3f7cc522c5d7c98d5ddd1" args=")(void *jb)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef void(* <a class="el" href="abstract__jb_8c.html#9f759a4576c3f7cc522c5d7c98d5ddd1">jb_destroy_impl</a>)(void *jb)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destroy. 
<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00060">60</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="5bb4ff7d15d833fc5985d0f9952b5f86"></a><!-- doxytag: member="abstract_jb.c::jb_force_resynch_impl" ref="5bb4ff7d15d833fc5985d0f9952b5f86" args=")(void *jb)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef void(* <a class="el" href="abstract__jb_8c.html#5bb4ff7d15d833fc5985d0f9952b5f86">jb_force_resynch_impl</a>)(void *jb)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Force resynch. 
<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00072">72</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="945a24a30919c89bfdf46db452a07ec9"></a><!-- doxytag: member="abstract_jb.c::jb_get_impl" ref="945a24a30919c89bfdf46db452a07ec9" args=")(void *jb, struct ast_frame **fout, long now, long interpl)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef int(* <a class="el" href="abstract__jb_8c.html#945a24a30919c89bfdf46db452a07ec9">jb_get_impl</a>)(void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> **fout, long now, long interpl)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get frame for now. 
<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00066">66</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ff98f995738838d7166e1d1d34b59126"></a><!-- doxytag: member="abstract_jb.c::jb_next_impl" ref="ff98f995738838d7166e1d1d34b59126" args=")(void *jb)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef long(* <a class="el" href="abstract__jb_8c.html#ff98f995738838d7166e1d1d34b59126">jb_next_impl</a>)(void *jb)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get next. 
<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00068">68</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="e725e9c8b3bda9b642d2dd9ed0157cce"></a><!-- doxytag: member="abstract_jb.c::jb_put_first_impl" ref="e725e9c8b3bda9b642d2dd9ed0157cce" args=")(void *jb, struct ast_frame *fin, long now)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef int(* <a class="el" href="abstract__jb_8c.html#e725e9c8b3bda9b642d2dd9ed0157cce">jb_put_first_impl</a>)(void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> *fin, long now)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Put first frame. 
<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00062">62</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b65e8658e94d05e15a9c84a3cd125de1"></a><!-- doxytag: member="abstract_jb.c::jb_put_impl" ref="b65e8658e94d05e15a9c84a3cd125de1" args=")(void *jb, struct ast_frame *fin, long now)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef int(* <a class="el" href="abstract__jb_8c.html#b65e8658e94d05e15a9c84a3cd125de1">jb_put_impl</a>)(void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> *fin, long now)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Put frame. 
<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00064">64</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="59aaa391857718678f6e9b446617eb6a"></a><!-- doxytag: member="abstract_jb.c::jb_remove_impl" ref="59aaa391857718678f6e9b446617eb6a" args=")(void *jb, struct ast_frame **fout)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef int(* <a class="el" href="abstract__jb_8c.html#59aaa391857718678f6e9b446617eb6a">jb_remove_impl</a>)(void *jb, struct <a class="el" href="structast__frame.html">ast_frame</a> **fout)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Remove first frame. 
<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00070">70</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.    </td>
  </tr>
</table>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="dca29a1140aadadfd92b34a02fa516ef"></a><!-- doxytag: member="abstract_jb.c::@0" ref="dca29a1140aadadfd92b34a02fa516ef" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">anonymous enum          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Internal jb flags <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f"></a><!-- doxytag: member="JB_USE" ref="dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f" args="" -->JB_USE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="dca29a1140aadadfd92b34a02fa516efd895cb3810122ea90b27e9ce1176e623"></a><!-- doxytag: member="JB_TIMEBASE_INITIALIZED" ref="dca29a1140aadadfd92b34a02fa516efd895cb3810122ea90b27e9ce1176e623" args="" -->JB_TIMEBASE_INITIALIZED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692"></a><!-- doxytag: member="JB_CREATED" ref="dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692" args="" -->JB_CREATED</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00049">49</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.<div class="fragment"><pre class="fragment"><a name="l00049"></a>00049      {
<a name="l00050"></a>00050    <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f">JB_USE</a> =                  (1 &lt;&lt; 0),
<a name="l00051"></a>00051    <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516efd895cb3810122ea90b27e9ce1176e623">JB_TIMEBASE_INITIALIZED</a> = (1 &lt;&lt; 1),
<a name="l00052"></a>00052    <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a> =              (1 &lt;&lt; 2)
<a name="l00053"></a>00053 };
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="68986ab776eb5d6b5a809a1c005a7300"></a><!-- doxytag: member="abstract_jb.c::@1" ref="68986ab776eb5d6b5a809a1c005a7300" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">anonymous enum          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Abstract return codes <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8"></a><!-- doxytag: member="JB_IMPL_OK" ref="68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8" args="" -->JB_IMPL_OK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="68986ab776eb5d6b5a809a1c005a730069f14b763b659b3c924a0818a673bb27"></a><!-- doxytag: member="JB_IMPL_DROP" ref="68986ab776eb5d6b5a809a1c005a730069f14b763b659b3c924a0818a673bb27" args="" -->JB_IMPL_DROP</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="68986ab776eb5d6b5a809a1c005a7300d7f335805ebddd6de9e8b7bd14153290"></a><!-- doxytag: member="JB_IMPL_INTERP" ref="68986ab776eb5d6b5a809a1c005a7300d7f335805ebddd6de9e8b7bd14153290" args="" -->JB_IMPL_INTERP</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="68986ab776eb5d6b5a809a1c005a7300604a98df1f81ff29fc48e301100cd8bf"></a><!-- doxytag: member="JB_IMPL_NOFRAME" ref="68986ab776eb5d6b5a809a1c005a7300604a98df1f81ff29fc48e301100cd8bf" args="" -->JB_IMPL_NOFRAME</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00142">142</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.<div class="fragment"><pre class="fragment"><a name="l00142"></a>00142      {
<a name="l00143"></a>00143    <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8">JB_IMPL_OK</a>,
<a name="l00144"></a>00144    <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a730069f14b763b659b3c924a0818a673bb27">JB_IMPL_DROP</a>,
<a name="l00145"></a>00145    <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300d7f335805ebddd6de9e8b7bd14153290">JB_IMPL_INTERP</a>,
<a name="l00146"></a>00146    <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300604a98df1f81ff29fc48e301100cd8bf">JB_IMPL_NOFRAME</a>
<a name="l00147"></a>00147 };
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ce6dbff5add20ce65086769d32bce117"></a><!-- doxytag: member="abstract_jb.c::ast_jb_configure" ref="ce6dbff5add20ce65086769d32bce117" args="(struct ast_channel *chan, const struct ast_jb_conf *conf)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_jb_configure           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>conf</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Configures a jitterbuffer on a channel. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>channel to configure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>conf</em>&nbsp;</td><td>configuration to apply.</td></tr>
  </table>
</dl>
Called from a channel driver when a channel is created and its jitterbuffer needs to be configured. 
<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00601">601</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="abstract__jb_8h-source.html#l00087">ast_jb::conf</a>, and <a class="el" href="channel_8h-source.html#l00488">ast_channel::jb</a>.
<p>
Referenced by <a class="el" href="chan__h323_8c-source.html#l00962">__oh323_rtp_create()</a>, <a class="el" href="chan__h323_8c-source.html#l00342">__oh323_update_info()</a>, <a class="el" href="chan__alsa_8c-source.html#l00790">alsa_new()</a>, <a class="el" href="chan__gtalk_8c-source.html#l00902">gtalk_new()</a>, <a class="el" href="chan__jingle_8c-source.html#l00759">jingle_new()</a>, <a class="el" href="chan__mgcp_8c-source.html#l01457">mgcp_new()</a>, <a class="el" href="chan__oss_8c-source.html#l01020">oss_new()</a>, <a class="el" href="chan__sip_8c-source.html#l04179">sip_new()</a>, <a class="el" href="chan__skinny_8c-source.html#l02823">skinny_new()</a>, and <a class="el" href="chan__zap_8c-source.html#l05516">zt_new()</a>.<div class="fragment"><pre class="fragment"><a name="l00602"></a>00602 {
<a name="l00603"></a>00603    memcpy(&amp;chan-&gt;<a class="code" href="structast__channel.html#c4a6c07a8a2d7c804a5776d9d039428a">jb</a>.<a class="code" href="structast__jb.html#3a8e4c06e471595f6eb262bb9b5582d9">conf</a>, conf, <span class="keyword">sizeof</span>(*conf));
<a name="l00604"></a>00604 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="38a4eb32a5c1425119f290654b6a4b0e"></a><!-- doxytag: member="abstract_jb.c::ast_jb_destroy" ref="38a4eb32a5c1425119f290654b6a4b0e" args="(struct ast_channel *chan)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_jb_destroy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>chan</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destroys jitterbuffer on a channel. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>channel.</td></tr>
  </table>
</dl>
Called from <a class="el" href="channel_8c.html#230a804b09060fecdf699c2c9613fff7">ast_channel_free()</a> when a channel is destroyed. 
<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00525">525</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="utils_8h-source.html#l00081">ast_clear_flag</a>, <a class="el" href="frame_8h-source.html#l00396">ast_frfree()</a>, <a class="el" href="utils_8h-source.html#l00067">ast_test_flag</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="abstract__jb_8c-source.html#l00082">ast_jb_impl::destroy</a>, <a class="el" href="format__g726_8c-source.html#l00193">f</a>, <a class="el" href="abstract__jb_8h-source.html#l00089">ast_jb::impl</a>, <a class="el" href="channel_8h-source.html#l00488">ast_channel::jb</a>, <a class="el" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>, <a class="el" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8">JB_IMPL_OK</a>, <a class="el" href="abstract__jb_8h-source.html#l00091">ast_jb::jbobj</a>, <a class="el" href="abstract__jb_8h-source.html#l00099">ast_jb::logfile</a>, <a class="el" href="abstract__jb_8c-source.html#l00080">ast_jb_impl::name</a>, <a class="el" href="asterisk_8c-source.html#l00163">option_verbose</a>, <a class="el" href="abstract__jb_8c-source.html#l00087">ast_jb_impl::remove</a>, and <a class="el" href="logger_8h-source.html#l00045">VERBOSE_PREFIX_3</a>.
<p>
Referenced by <a class="el" href="channel_8c-source.html#l01069">ast_channel_free()</a>.<div class="fragment"><pre class="fragment"><a name="l00526"></a>00526 {
<a name="l00527"></a>00527    <span class="keyword">struct </span><a class="code" href="structast__jb.html">ast_jb</a> *jb = &amp;chan-&gt;<a class="code" href="structast__channel.html#c4a6c07a8a2d7c804a5776d9d039428a">jb</a>;
<a name="l00528"></a>00528    <span class="keyword">struct </span><a class="code" href="structast__jb__impl.html">ast_jb_impl</a> *jbimpl = jb-&gt;<a class="code" href="structast__jb.html#86ccec3d9ff0e9c0514506e982cdc08b">impl</a>;
<a name="l00529"></a>00529    <span class="keywordtype">void</span> *jbobj = jb-&gt;<a class="code" href="structast__jb.html#7b92b77c8d7f50c74bb2dfa489e9c107">jbobj</a>;
<a name="l00530"></a>00530    <span class="keyword">struct </span><a class="code" href="structast__frame.html">ast_frame</a> *<a class="code" href="format__g726_8c.html#85b9b17a7dd34a3638c560bc9152473b">f</a>;
<a name="l00531"></a>00531 
<a name="l00532"></a>00532    <span class="keywordflow">if</span> (jb-&gt;<a class="code" href="structast__jb.html#d6d33a322371f070c69ac715abda8fda">logfile</a>) {
<a name="l00533"></a>00533       fclose(jb-&gt;<a class="code" href="structast__jb.html#d6d33a322371f070c69ac715abda8fda">logfile</a>);
<a name="l00534"></a>00534       jb-&gt;<a class="code" href="structast__jb.html#d6d33a322371f070c69ac715abda8fda">logfile</a> = NULL;
<a name="l00535"></a>00535    }
<a name="l00536"></a>00536    
<a name="l00537"></a>00537    <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>)) {
<a name="l00538"></a>00538       <span class="comment">/* Remove and free all frames still queued in jb */</span>
<a name="l00539"></a>00539       <span class="keywordflow">while</span> (jbimpl-&gt;<a class="code" href="structast__jb__impl.html#0f6969d7052da9261e31ddb6e88c136e">remove</a>(jbobj, &amp;f) == <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8">JB_IMPL_OK</a>) {
<a name="l00540"></a>00540          <a class="code" href="frame_8h.html#506c759ec4950e7f7465e8f090a6252b">ast_frfree</a>(f);
<a name="l00541"></a>00541       }
<a name="l00542"></a>00542       
<a name="l00543"></a>00543       jbimpl-&gt;<a class="code" href="structast__jb__impl.html#fb14982288108e1fbd6207ef55f05027">destroy</a>(jbobj);
<a name="l00544"></a>00544       jb-&gt;<a class="code" href="structast__jb.html#7b92b77c8d7f50c74bb2dfa489e9c107">jbobj</a> = NULL;
<a name="l00545"></a>00545       
<a name="l00546"></a>00546       <a class="code" href="utils_8h.html#c2399a33be6ffb658bcf7c6a35531732">ast_clear_flag</a>(jb, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>);
<a name="l00547"></a>00547 
<a name="l00548"></a>00548       <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 2)
<a name="l00549"></a>00549          <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<a class="code" href="logger_8h.html#aefd5a67b7464040f5352e4ecdc535ca">VERBOSE_PREFIX_3</a> <span class="stringliteral">"%s jitterbuffer destroyed on channel %s\n"</span>, jbimpl-&gt;<a class="code" href="structast__jb__impl.html#ce4d1de512662e067650e00ac1c3e1d5">name</a>, chan-&gt;name);
<a name="l00550"></a>00550    }
<a name="l00551"></a>00551 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d3d628e70cc3a782b0017fe3e6b36fd4"></a><!-- doxytag: member="abstract_jb.c::ast_jb_do_usecheck" ref="d3d628e70cc3a782b0017fe3e6b36fd4" args="(struct ast_channel *c0, struct ast_channel *c1)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_jb_do_usecheck           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>c0</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>c1</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Checks the need of a jb use in a generic bridge. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>c0</em>&nbsp;</td><td>first bridged channel. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>c1</em>&nbsp;</td><td>second bridged channel.</td></tr>
  </table>
</dl>
Called from <a class="el" href="channel_8c.html#4f79ef2dc27d26c29b18b9ab40b5d56b">ast_generic_bridge()</a> when two channels are entering in a bridge. The function checks the need of a jitterbuffer, depending on both channel's configuration and technology properties. As a result, this function sets appropriate internal jb flags to the channels, determining further behaviour of the bridged jitterbuffers.<p>
<dl compact><dt><b>Returns:</b></dt><dd>zero if there are no jitter buffers in use, non-zero if there are </dd></dl>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00198">198</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="channel_8h.html#dca29a1140aadadfd92b34a02fa516ef00a93b525e73f48b2060014487b2b98c">AST_CHAN_TP_CREATESJITTER</a>, <a class="el" href="channel_8h.html#dca29a1140aadadfd92b34a02fa516efe7ae5478ca756cfa996e94241fbbc3b2">AST_CHAN_TP_WANTSJITTER</a>, <a class="el" href="abstract__jb_8h.html#dca29a1140aadadfd92b34a02fa516efe16353c00a54d901328597ac1a1519b1">AST_JB_ENABLED</a>, <a class="el" href="abstract__jb_8h.html#dca29a1140aadadfd92b34a02fa516efec2dc7257f02903a83fa0314d3311ec8">AST_JB_FORCED</a>, <a class="el" href="utils_8h-source.html#l00074">ast_set_flag</a>, <a class="el" href="utils_8h-source.html#l00067">ast_test_flag</a>, <a class="el" href="abstract__jb_8h-source.html#l00087">ast_jb::conf</a>, <a class="el" href="pbx__gtkconsole_8c-source.html#l00059">inuse</a>, <a class="el" href="channel_8h-source.html#l00488">ast_channel::jb</a>, <a class="el" href="abstract__jb_8c-source.html#l00177">jb_choose_impl()</a>, <a class="el" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>, <a class="el" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516efd895cb3810122ea90b27e9ce1176e623">JB_TIMEBASE_INITIALIZED</a>, <a class="el" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f">JB_USE</a>, <a class="el" href="channel_8h-source.html#l00240">ast_channel_tech::properties</a>, <a class="el" href="channel_8h-source.html#l00385">ast_channel::tech</a>, and <a class="el" href="abstract__jb_8h-source.html#l00093">ast_jb::timebase</a>.
<p>
Referenced by <a class="el" href="channel_8c-source.html#l03797">ast_generic_bridge()</a>.<div class="fragment"><pre class="fragment"><a name="l00199"></a>00199 {
<a name="l00200"></a>00200    <span class="keyword">struct </span><a class="code" href="structast__jb.html">ast_jb</a> *jb0 = &amp;c0-&gt;<a class="code" href="structast__channel.html#c4a6c07a8a2d7c804a5776d9d039428a">jb</a>;
<a name="l00201"></a>00201    <span class="keyword">struct </span><a class="code" href="structast__jb.html">ast_jb</a> *jb1 = &amp;c1-&gt;<a class="code" href="structast__channel.html#c4a6c07a8a2d7c804a5776d9d039428a">jb</a>;
<a name="l00202"></a>00202    <span class="keyword">struct </span><a class="code" href="structast__jb__conf.html">ast_jb_conf</a> *conf0 = &amp;jb0-&gt;<a class="code" href="structast__jb.html#3a8e4c06e471595f6eb262bb9b5582d9">conf</a>;
<a name="l00203"></a>00203    <span class="keyword">struct </span><a class="code" href="structast__jb__conf.html">ast_jb_conf</a> *conf1 = &amp;jb1-&gt;<a class="code" href="structast__jb.html#3a8e4c06e471595f6eb262bb9b5582d9">conf</a>;
<a name="l00204"></a>00204    <span class="keywordtype">int</span> c0_wants_jitter = c0-&gt;<a class="code" href="structast__channel.html#d9f9133fb120cd6096870bc2b496805b">tech</a>-&gt;<a class="code" href="structast__channel__tech.html#74693d2fc58b46bd06410f278e39aa71">properties</a> &amp; <a class="code" href="channel_8h.html#dca29a1140aadadfd92b34a02fa516efe7ae5478ca756cfa996e94241fbbc3b2">AST_CHAN_TP_WANTSJITTER</a>;
<a name="l00205"></a>00205    <span class="keywordtype">int</span> c0_creates_jitter = c0-&gt;<a class="code" href="structast__channel.html#d9f9133fb120cd6096870bc2b496805b">tech</a>-&gt;<a class="code" href="structast__channel__tech.html#74693d2fc58b46bd06410f278e39aa71">properties</a> &amp; <a class="code" href="channel_8h.html#dca29a1140aadadfd92b34a02fa516ef00a93b525e73f48b2060014487b2b98c">AST_CHAN_TP_CREATESJITTER</a>;
<a name="l00206"></a>00206    <span class="keywordtype">int</span> c0_jb_enabled = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(conf0, <a class="code" href="abstract__jb_8h.html#dca29a1140aadadfd92b34a02fa516efe16353c00a54d901328597ac1a1519b1">AST_JB_ENABLED</a>);
<a name="l00207"></a>00207    <span class="keywordtype">int</span> c0_force_jb = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(conf0, <a class="code" href="abstract__jb_8h.html#dca29a1140aadadfd92b34a02fa516efec2dc7257f02903a83fa0314d3311ec8">AST_JB_FORCED</a>);
<a name="l00208"></a>00208    <span class="keywordtype">int</span> c0_jb_timebase_initialized = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb0, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516efd895cb3810122ea90b27e9ce1176e623">JB_TIMEBASE_INITIALIZED</a>);
<a name="l00209"></a>00209    <span class="keywordtype">int</span> c0_jb_created = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb0, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>);
<a name="l00210"></a>00210    <span class="keywordtype">int</span> c1_wants_jitter = c1-&gt;<a class="code" href="structast__channel.html#d9f9133fb120cd6096870bc2b496805b">tech</a>-&gt;<a class="code" href="structast__channel__tech.html#74693d2fc58b46bd06410f278e39aa71">properties</a> &amp; <a class="code" href="channel_8h.html#dca29a1140aadadfd92b34a02fa516efe7ae5478ca756cfa996e94241fbbc3b2">AST_CHAN_TP_WANTSJITTER</a>;
<a name="l00211"></a>00211    <span class="keywordtype">int</span> c1_creates_jitter = c1-&gt;<a class="code" href="structast__channel.html#d9f9133fb120cd6096870bc2b496805b">tech</a>-&gt;<a class="code" href="structast__channel__tech.html#74693d2fc58b46bd06410f278e39aa71">properties</a> &amp; <a class="code" href="channel_8h.html#dca29a1140aadadfd92b34a02fa516ef00a93b525e73f48b2060014487b2b98c">AST_CHAN_TP_CREATESJITTER</a>;
<a name="l00212"></a>00212    <span class="keywordtype">int</span> c1_jb_enabled = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(conf1, <a class="code" href="abstract__jb_8h.html#dca29a1140aadadfd92b34a02fa516efe16353c00a54d901328597ac1a1519b1">AST_JB_ENABLED</a>);
<a name="l00213"></a>00213    <span class="keywordtype">int</span> c1_force_jb = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(conf1, <a class="code" href="abstract__jb_8h.html#dca29a1140aadadfd92b34a02fa516efec2dc7257f02903a83fa0314d3311ec8">AST_JB_FORCED</a>);
<a name="l00214"></a>00214    <span class="keywordtype">int</span> c1_jb_timebase_initialized = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb1, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516efd895cb3810122ea90b27e9ce1176e623">JB_TIMEBASE_INITIALIZED</a>);
<a name="l00215"></a>00215    <span class="keywordtype">int</span> c1_jb_created = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb1, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>);
<a name="l00216"></a>00216    <span class="keywordtype">int</span> <a class="code" href="pbx__gtkconsole_8c.html#9ac84af00bd68fa1e4441a101c6b6305">inuse</a> = 0;
<a name="l00217"></a>00217 
<a name="l00218"></a>00218    <span class="comment">/* Determine whether audio going to c0 needs a jitter buffer */</span>
<a name="l00219"></a>00219    <span class="keywordflow">if</span> (((!c0_wants_jitter &amp;&amp; c1_creates_jitter) || (c0_force_jb &amp;&amp; c1_creates_jitter)) &amp;&amp; c0_jb_enabled) {
<a name="l00220"></a>00220       <a class="code" href="utils_8h.html#3208623241ff7b4c93907944487502a1">ast_set_flag</a>(jb0, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f">JB_USE</a>);
<a name="l00221"></a>00221       <span class="keywordflow">if</span> (!c0_jb_timebase_initialized) {
<a name="l00222"></a>00222          <span class="keywordflow">if</span> (c1_jb_timebase_initialized) {
<a name="l00223"></a>00223             memcpy(&amp;jb0-&gt;<a class="code" href="structast__jb.html#404687903bcfd5c916de12f961fc5ebe">timebase</a>, &amp;jb1-&gt;<a class="code" href="structast__jb.html#404687903bcfd5c916de12f961fc5ebe">timebase</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> timeval));
<a name="l00224"></a>00224          } <span class="keywordflow">else</span> {
<a name="l00225"></a>00225             gettimeofday(&amp;jb0-&gt;<a class="code" href="structast__jb.html#404687903bcfd5c916de12f961fc5ebe">timebase</a>, NULL);
<a name="l00226"></a>00226          }
<a name="l00227"></a>00227          <a class="code" href="utils_8h.html#3208623241ff7b4c93907944487502a1">ast_set_flag</a>(jb0, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516efd895cb3810122ea90b27e9ce1176e623">JB_TIMEBASE_INITIALIZED</a>);
<a name="l00228"></a>00228       }
<a name="l00229"></a>00229       
<a name="l00230"></a>00230       <span class="keywordflow">if</span> (!c0_jb_created) {
<a name="l00231"></a>00231          <a class="code" href="abstract__jb_8c.html#129d7f3d1d1f1e937049e859dabaac4f">jb_choose_impl</a>(c0);
<a name="l00232"></a>00232       }
<a name="l00233"></a>00233 
<a name="l00234"></a>00234       inuse = 1;
<a name="l00235"></a>00235    }
<a name="l00236"></a>00236    
<a name="l00237"></a>00237    <span class="comment">/* Determine whether audio going to c1 needs a jitter buffer */</span>
<a name="l00238"></a>00238    <span class="keywordflow">if</span> (((!c1_wants_jitter &amp;&amp; c0_creates_jitter) || (c1_force_jb &amp;&amp; c0_creates_jitter)) &amp;&amp; c1_jb_enabled) {
<a name="l00239"></a>00239       <a class="code" href="utils_8h.html#3208623241ff7b4c93907944487502a1">ast_set_flag</a>(jb1, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f">JB_USE</a>);
<a name="l00240"></a>00240       <span class="keywordflow">if</span> (!c1_jb_timebase_initialized) {
<a name="l00241"></a>00241          <span class="keywordflow">if</span> (c0_jb_timebase_initialized) {
<a name="l00242"></a>00242             memcpy(&amp;jb1-&gt;<a class="code" href="structast__jb.html#404687903bcfd5c916de12f961fc5ebe">timebase</a>, &amp;jb0-&gt;<a class="code" href="structast__jb.html#404687903bcfd5c916de12f961fc5ebe">timebase</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> timeval));
<a name="l00243"></a>00243          } <span class="keywordflow">else</span> {
<a name="l00244"></a>00244             gettimeofday(&amp;jb1-&gt;<a class="code" href="structast__jb.html#404687903bcfd5c916de12f961fc5ebe">timebase</a>, NULL);
<a name="l00245"></a>00245          }
<a name="l00246"></a>00246          <a class="code" href="utils_8h.html#3208623241ff7b4c93907944487502a1">ast_set_flag</a>(jb1, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516efd895cb3810122ea90b27e9ce1176e623">JB_TIMEBASE_INITIALIZED</a>);
<a name="l00247"></a>00247       }
<a name="l00248"></a>00248       
<a name="l00249"></a>00249       <span class="keywordflow">if</span> (!c1_jb_created) {
<a name="l00250"></a>00250          <a class="code" href="abstract__jb_8c.html#129d7f3d1d1f1e937049e859dabaac4f">jb_choose_impl</a>(c1);
<a name="l00251"></a>00251       }
<a name="l00252"></a>00252 
<a name="l00253"></a>00253       inuse = 1;
<a name="l00254"></a>00254    }
<a name="l00255"></a>00255 
<a name="l00256"></a>00256    <span class="keywordflow">return</span> inuse;
<a name="l00257"></a>00257 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="7c4d2833527a961fc976861441579116"></a><!-- doxytag: member="abstract_jb.c::ast_jb_get_and_deliver" ref="7c4d2833527a961fc976861441579116" args="(struct ast_channel *c0, struct ast_channel *c1)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_jb_get_and_deliver           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>c0</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>c1</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Deliver the queued frames that should be delivered now for both channels. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>c0</em>&nbsp;</td><td>first bridged channel. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>c1</em>&nbsp;</td><td>second bridged channel.</td></tr>
  </table>
</dl>
Called from <a class="el" href="channel_8c.html#4f79ef2dc27d26c29b18b9ab40b5d56b">ast_generic_bridge()</a> to deliver any frames, that should be delivered for the moment of invocation. Does nothing if neihter of the channels is using jb or has any frames currently queued in. The function delivers frames usig <a class="el" href="channel_8c.html#57a74c4c7b7e25ad61a4f461e3c73158">ast_write()</a> each of the channels. 
<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00364">364</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="utils_8h-source.html#l00067">ast_test_flag</a>, <a class="el" href="channel_8h-source.html#l00488">ast_channel::jb</a>, <a class="el" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>, <a class="el" href="abstract__jb_8c-source.html#l00381">jb_get_and_deliver()</a>, and <a class="el" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f">JB_USE</a>.
<p>
Referenced by <a class="el" href="channel_8c-source.html#l03797">ast_generic_bridge()</a>.<div class="fragment"><pre class="fragment"><a name="l00365"></a>00365 {
<a name="l00366"></a>00366    <span class="keyword">struct </span><a class="code" href="structast__jb.html">ast_jb</a> *jb0 = &amp;c0-&gt;<a class="code" href="structast__channel.html#c4a6c07a8a2d7c804a5776d9d039428a">jb</a>;
<a name="l00367"></a>00367    <span class="keyword">struct </span><a class="code" href="structast__jb.html">ast_jb</a> *jb1 = &amp;c1-&gt;<a class="code" href="structast__channel.html#c4a6c07a8a2d7c804a5776d9d039428a">jb</a>;
<a name="l00368"></a>00368    <span class="keywordtype">int</span> c0_use_jb = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb0, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f">JB_USE</a>);
<a name="l00369"></a>00369    <span class="keywordtype">int</span> c0_jb_is_created = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb0, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>);
<a name="l00370"></a>00370    <span class="keywordtype">int</span> c1_use_jb = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb1, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f">JB_USE</a>);
<a name="l00371"></a>00371    <span class="keywordtype">int</span> c1_jb_is_created = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb1, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>);
<a name="l00372"></a>00372    
<a name="l00373"></a>00373    <span class="keywordflow">if</span> (c0_use_jb &amp;&amp; c0_jb_is_created)
<a name="l00374"></a>00374       <a class="code" href="abstract__jb_8c.html#376aacc74650767f9aa1e7cb9fc6684c">jb_get_and_deliver</a>(c0);
<a name="l00375"></a>00375    
<a name="l00376"></a>00376    <span class="keywordflow">if</span> (c1_use_jb &amp;&amp; c1_jb_is_created)
<a name="l00377"></a>00377       <a class="code" href="abstract__jb_8c.html#376aacc74650767f9aa1e7cb9fc6684c">jb_get_and_deliver</a>(c1);
<a name="l00378"></a>00378 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="71dfdeacf8f93cdb1da1c5561ad4e631"></a><!-- doxytag: member="abstract_jb.c::ast_jb_get_config" ref="71dfdeacf8f93cdb1da1c5561ad4e631" args="(const struct ast_channel *chan, struct ast_jb_conf *conf)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_jb_get_config           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>conf</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Copies a channel's jitterbuffer configuration. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>channel. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>conf</em>&nbsp;</td><td>destination. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00607">607</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="abstract__jb_8h-source.html#l00087">ast_jb::conf</a>, and <a class="el" href="channel_8h-source.html#l00488">ast_channel::jb</a>.<div class="fragment"><pre class="fragment"><a name="l00608"></a>00608 {
<a name="l00609"></a>00609    memcpy(conf, &amp;chan-&gt;<a class="code" href="structast__channel.html#c4a6c07a8a2d7c804a5776d9d039428a">jb</a>.<a class="code" href="structast__jb.html#3a8e4c06e471595f6eb262bb9b5582d9">conf</a>, <span class="keyword">sizeof</span>(*conf));
<a name="l00610"></a>00610 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="08b86b2a178bd6636b3f1b81a418af46"></a><!-- doxytag: member="abstract_jb.c::ast_jb_get_when_to_wakeup" ref="08b86b2a178bd6636b3f1b81a418af46" args="(struct ast_channel *c0, struct ast_channel *c1, int time_left)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_jb_get_when_to_wakeup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>c0</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>c1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>time_left</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Calculates the time, left to the closest delivery moment in a bridge. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>c0</em>&nbsp;</td><td>first bridged channel. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>c1</em>&nbsp;</td><td>second bridged channel. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>time_left</em>&nbsp;</td><td>bridge time limit, or -1 if not set.</td></tr>
  </table>
</dl>
Called from <a class="el" href="channel_8c.html#4f79ef2dc27d26c29b18b9ab40b5d56b">ast_generic_bridge()</a> to determine the maximum time to wait for activity in <a class="el" href="channel_8c.html#96a31a1429603c4049e5ef10d7ce2470">ast_waitfor_n()</a> call. If neihter of the channels is using jb, this function returns the time limit passed.<p>
<dl compact><dt><b>Returns:</b></dt><dd>maximum time to wait. </dd></dl>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00259">259</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="utils_8h-source.html#l00067">ast_test_flag</a>, <a class="el" href="abstract__jb_8c-source.html#l00554">get_now()</a>, <a class="el" href="channel_8h-source.html#l00488">ast_channel::jb</a>, <a class="el" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>, <a class="el" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f">JB_USE</a>, and <a class="el" href="abstract__jb_8h-source.html#l00095">ast_jb::next</a>.
<p>
Referenced by <a class="el" href="channel_8c-source.html#l03797">ast_generic_bridge()</a>.<div class="fragment"><pre class="fragment"><a name="l00260"></a>00260 {
<a name="l00261"></a>00261    <span class="keyword">struct </span><a class="code" href="structast__jb.html">ast_jb</a> *jb0 = &amp;c0-&gt;<a class="code" href="structast__channel.html#c4a6c07a8a2d7c804a5776d9d039428a">jb</a>;
<a name="l00262"></a>00262    <span class="keyword">struct </span><a class="code" href="structast__jb.html">ast_jb</a> *jb1 = &amp;c1-&gt;<a class="code" href="structast__channel.html#c4a6c07a8a2d7c804a5776d9d039428a">jb</a>;
<a name="l00263"></a>00263    <span class="keywordtype">int</span> c0_use_jb = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb0, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f">JB_USE</a>);
<a name="l00264"></a>00264    <span class="keywordtype">int</span> c0_jb_is_created = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb0, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>);
<a name="l00265"></a>00265    <span class="keywordtype">int</span> c1_use_jb = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb1, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f">JB_USE</a>);
<a name="l00266"></a>00266    <span class="keywordtype">int</span> c1_jb_is_created = <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb1, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>);
<a name="l00267"></a>00267    <span class="keywordtype">int</span> wait, wait0, wait1;
<a name="l00268"></a>00268    <span class="keyword">struct </span>timeval tv_now;
<a name="l00269"></a>00269    
<a name="l00270"></a>00270    <span class="keywordflow">if</span> (time_left == 0) {
<a name="l00271"></a>00271       <span class="comment">/* No time left - the bridge will be retried */</span>
<a name="l00272"></a>00272       <span class="comment">/* TODO: Test disable this */</span>
<a name="l00273"></a>00273       <span class="comment">/*return 0;*/</span>
<a name="l00274"></a>00274    }
<a name="l00275"></a>00275    
<a name="l00276"></a>00276    <span class="keywordflow">if</span> (time_left &lt; 0) {
<a name="l00277"></a>00277       time_left = INT_MAX;
<a name="l00278"></a>00278    }
<a name="l00279"></a>00279    
<a name="l00280"></a>00280    gettimeofday(&amp;tv_now, NULL);
<a name="l00281"></a>00281    
<a name="l00282"></a>00282    wait0 = (c0_use_jb &amp;&amp; c0_jb_is_created) ? jb0-&gt;<a class="code" href="structast__jb.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> - <a class="code" href="abstract__jb_8c.html#7dba3123573f5de4c69a766f78f54547">get_now</a>(jb0, &amp;tv_now) : time_left;
<a name="l00283"></a>00283    wait1 = (c1_use_jb &amp;&amp; c1_jb_is_created) ? jb1-&gt;<a class="code" href="structast__jb.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> - <a class="code" href="abstract__jb_8c.html#7dba3123573f5de4c69a766f78f54547">get_now</a>(jb1, &amp;tv_now) : time_left;
<a name="l00284"></a>00284    
<a name="l00285"></a>00285    wait = wait0 &lt; wait1 ? wait0 : wait1;
<a name="l00286"></a>00286    wait = wait &lt; time_left ? wait : time_left;
<a name="l00287"></a>00287    
<a name="l00288"></a>00288    <span class="keywordflow">if</span> (wait == INT_MAX) {
<a name="l00289"></a>00289       wait = -1;
<a name="l00290"></a>00290    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (wait &lt; 1) {
<a name="l00291"></a>00291       <span class="comment">/* don't let wait=0, because this can cause the pbx thread to loop without any sleeping at all */</span>
<a name="l00292"></a>00292       wait = 1;
<a name="l00293"></a>00293    }
<a name="l00294"></a>00294    
<a name="l00295"></a>00295    <span class="keywordflow">return</span> wait;
<a name="l00296"></a>00296 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="01a93200bfbbbe54704b408154bbd877"></a><!-- doxytag: member="abstract_jb.c::ast_jb_put" ref="01a93200bfbbbe54704b408154bbd877" args="(struct ast_channel *chan, struct ast_frame *f)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_jb_put           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__frame.html">ast_frame</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>f</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Puts a frame into a channel jitterbuffer. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>channel. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>f</em>&nbsp;</td><td>frame.</td></tr>
  </table>
</dl>
Called from <a class="el" href="channel_8c.html#4f79ef2dc27d26c29b18b9ab40b5d56b">ast_generic_bridge()</a> to put a frame into a channel's jitterbuffer. The function will successfuly enqueue a frame if and only if: 1. the channel is using a jitterbuffer (as determined by <a class="el" href="abstract__jb_8c.html#d3d628e70cc3a782b0017fe3e6b36fd4">ast_jb_do_usecheck()</a>), 2. the frame's type is AST_FRAME_VOICE, 3. the frame has timing info set and has length &gt;= 2 ms, 4. there is no some internal error happened (like failed memory allocation). Frames, successfuly queued, should be delivered by the channel's jitterbuffer, when their delivery time has came. Frames, not successfuly queued, should be delivered immediately. Dropped by the jb implementation frames are considered successfuly enqueued as far as they should not be delivered at all.<p>
<dl compact><dt><b>Returns:</b></dt><dd>zero if the frame was queued, -1 if not. </dd></dl>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00299">299</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="utils_8h-source.html#l00081">ast_clear_flag</a>, <a class="el" href="frame_8h-source.html#l00125">AST_FRAME_DTMF</a>, <a class="el" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f9264fc4720a7b3982e2d4bf246fe3d9924">AST_FRAME_VOICE</a>, <a class="el" href="frame_8c-source.html#l00439">ast_frdup()</a>, <a class="el" href="frame_8h-source.html#l00396">ast_frfree()</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="utils_8h-source.html#l00074">ast_set_flag</a>, <a class="el" href="utils_8h-source.html#l00067">ast_test_flag</a>, <a class="el" href="abstract__jb_8c-source.html#l00445">create_jb()</a>, <a class="el" href="abstract__jb_8c-source.html#l00088">ast_jb_impl::force_resync</a>, <a class="el" href="frame_8h-source.html#l00131">ast_frame::frametype</a>, <a class="el" href="abstract__jb_8c-source.html#l00554">get_now()</a>, <a class="el" href="frame_8h-source.html#l00153">ast_frame::has_timing_info</a>, <a class="el" href="abstract__jb_8h-source.html#l00089">ast_jb::impl</a>, <a class="el" href="channel_8h-source.html#l00488">ast_channel::jb</a>, <a class="el" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>, <a class="el" href="abstract__jb_8c-source.html#l00159">jb_framelog</a>, <a class="el" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f">JB_USE</a>, <a class="el" href="abstract__jb_8h-source.html#l00091">ast_jb::jbobj</a>, <a class="el" href="frame_8h-source.html#l00157">ast_frame::len</a>, <a class="el" href="logger_8h-source.html#l00118">LOG_ERROR</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="abstract__jb_8h-source.html#l00095">ast_jb::next</a>, <a class="el" href="abstract__jb_8c-source.html#l00086">ast_jb_impl::next</a>, <a class="el" href="abstract__jb_8c-source.html#l00084">ast_jb_impl::put</a>, <a class="el" href="frame_8h-source.html#l00145">ast_frame::src</a>, and <a class="el" href="frame_8h-source.html#l00155">ast_frame::ts</a>.
<p>
Referenced by <a class="el" href="channel_8c-source.html#l03797">ast_generic_bridge()</a>.<div class="fragment"><pre class="fragment"><a name="l00300"></a>00300 {
<a name="l00301"></a>00301    <span class="keyword">struct </span><a class="code" href="structast__jb.html">ast_jb</a> *jb = &amp;chan-&gt;<a class="code" href="structast__channel.html#c4a6c07a8a2d7c804a5776d9d039428a">jb</a>;
<a name="l00302"></a>00302    <span class="keyword">struct </span><a class="code" href="structast__jb__impl.html">ast_jb_impl</a> *jbimpl = jb-&gt;<a class="code" href="structast__jb.html#86ccec3d9ff0e9c0514506e982cdc08b">impl</a>;
<a name="l00303"></a>00303    <span class="keywordtype">void</span> *jbobj = jb-&gt;<a class="code" href="structast__jb.html#7b92b77c8d7f50c74bb2dfa489e9c107">jbobj</a>;
<a name="l00304"></a>00304    <span class="keyword">struct </span><a class="code" href="structast__frame.html">ast_frame</a> *frr;
<a name="l00305"></a>00305    <span class="keywordtype">long</span> now = 0;
<a name="l00306"></a>00306    
<a name="l00307"></a>00307    <span class="keywordflow">if</span> (!<a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f">JB_USE</a>))
<a name="l00308"></a>00308       <span class="keywordflow">return</span> -1;
<a name="l00309"></a>00309 
<a name="l00310"></a>00310    <span class="keywordflow">if</span> (f-&gt;<a class="code" href="structast__frame.html#9574009b02f8256934a1a25cbac10e1d">frametype</a> != <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f9264fc4720a7b3982e2d4bf246fe3d9924">AST_FRAME_VOICE</a>) {
<a name="l00311"></a>00311       <span class="keywordflow">if</span> (f-&gt;<a class="code" href="structast__frame.html#9574009b02f8256934a1a25cbac10e1d">frametype</a> == <a class="code" href="frame_8h.html#41e7a80287a24ece13159c2d8b1b9375">AST_FRAME_DTMF</a> &amp;&amp; <a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>)) {
<a name="l00312"></a>00312          <a class="code" href="abstract__jb_8c.html#6707a65d86cea2d7224e4b79e003a8ab">jb_framelog</a>(<span class="stringliteral">"JB_PUT {now=%ld}: Received DTMF frame. Force resynching jb...\n"</span>, now);
<a name="l00313"></a>00313          jbimpl-&gt;<a class="code" href="structast__jb__impl.html#309c7613647dcec4a2cc5afd2a82180d">force_resync</a>(jbobj);
<a name="l00314"></a>00314       }
<a name="l00315"></a>00315       
<a name="l00316"></a>00316       <span class="keywordflow">return</span> -1;
<a name="l00317"></a>00317    }
<a name="l00318"></a>00318 
<a name="l00319"></a>00319    <span class="comment">/* We consider an enabled jitterbuffer should receive frames with valid timing info. */</span>
<a name="l00320"></a>00320    <span class="keywordflow">if</span> (!f-&gt;<a class="code" href="structast__frame.html#138bb3d6497bbfe1604b93aef03d5f09">has_timing_info</a> || f-&gt;<a class="code" href="structast__frame.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a> &lt; 2 || f-&gt;<a class="code" href="structast__frame.html#4d682ec4eed27c53849758bc13b6e179">ts</a> &lt; 0) {
<a name="l00321"></a>00321       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"%s recieved frame with invalid timing info: "</span>
<a name="l00322"></a>00322          <span class="stringliteral">"has_timing_info=%d, len=%ld, ts=%ld, src=%s\n"</span>,
<a name="l00323"></a>00323          chan-&gt;name, f-&gt;<a class="code" href="structast__frame.html#138bb3d6497bbfe1604b93aef03d5f09">has_timing_info</a>, f-&gt;<a class="code" href="structast__frame.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>, f-&gt;<a class="code" href="structast__frame.html#4d682ec4eed27c53849758bc13b6e179">ts</a>, f-&gt;<a class="code" href="structast__frame.html#25d902c24283ab8cfbac54dfa101ad31">src</a>);
<a name="l00324"></a>00324       <span class="keywordflow">return</span> -1;
<a name="l00325"></a>00325    }
<a name="l00326"></a>00326 
<a name="l00327"></a>00327    frr = <a class="code" href="frame_8c.html#e7f7f3d8f817e56bbaf43b0b1ecf8997">ast_frdup</a>(f);
<a name="l00328"></a>00328 
<a name="l00329"></a>00329    <span class="keywordflow">if</span> (!frr) {
<a name="l00330"></a>00330       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#4490aa3d29644e716440fada68f54032">LOG_ERROR</a>, <span class="stringliteral">"Failed to isolate frame for the jitterbuffer on channel '%s'\n"</span>, chan-&gt;name);
<a name="l00331"></a>00331       <span class="keywordflow">return</span> -1;
<a name="l00332"></a>00332    }
<a name="l00333"></a>00333 
<a name="l00334"></a>00334    <span class="keywordflow">if</span> (!<a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jb, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>)) {
<a name="l00335"></a>00335       <span class="keywordflow">if</span> (<a class="code" href="abstract__jb_8c.html#cd36b3c6b09fa926fdeaadb452a04fd4">create_jb</a>(chan, frr)) {
<a name="l00336"></a>00336          <a class="code" href="frame_8h.html#506c759ec4950e7f7465e8f090a6252b">ast_frfree</a>(frr);
<a name="l00337"></a>00337          <span class="comment">/* Disable the jitterbuffer */</span>
<a name="l00338"></a>00338          <a class="code" href="utils_8h.html#c2399a33be6ffb658bcf7c6a35531732">ast_clear_flag</a>(jb, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516ef7a6171b733379c1b029f14b2d98a356f">JB_USE</a>);
<a name="l00339"></a>00339          <span class="keywordflow">return</span> -1;
<a name="l00340"></a>00340       }
<a name="l00341"></a>00341 
<a name="l00342"></a>00342       <a class="code" href="utils_8h.html#3208623241ff7b4c93907944487502a1">ast_set_flag</a>(jb, <a class="code" href="abstract__jb_8c.html#dca29a1140aadadfd92b34a02fa516effc5d39f0d9a9c1902ccfb56ace77e692">JB_CREATED</a>);
<a name="l00343"></a>00343       <span class="keywordflow">return</span> 0;
<a name="l00344"></a>00344    } <span class="keywordflow">else</span> {
<a name="l00345"></a>00345       now = <a class="code" href="abstract__jb_8c.html#7dba3123573f5de4c69a766f78f54547">get_now</a>(jb, NULL);
<a name="l00346"></a>00346       <span class="keywordflow">if</span> (jbimpl-&gt;<a class="code" href="structast__jb__impl.html#8e13ffc9fd9d6a6761231a764bdf106b">put</a>(jbobj, frr, now) != <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8">JB_IMPL_OK</a>) {
<a name="l00347"></a>00347          <a class="code" href="abstract__jb_8c.html#6707a65d86cea2d7224e4b79e003a8ab">jb_framelog</a>(<span class="stringliteral">"JB_PUT {now=%ld}: Dropped frame with ts=%ld and len=%ld\n"</span>, now, frr-&gt;<a class="code" href="structast__frame.html#4d682ec4eed27c53849758bc13b6e179">ts</a>, frr-&gt;<a class="code" href="structast__frame.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>);
<a name="l00348"></a>00348          <a class="code" href="frame_8h.html#506c759ec4950e7f7465e8f090a6252b">ast_frfree</a>(frr);
<a name="l00349"></a>00349          <span class="comment">/*return -1;*/</span>
<a name="l00350"></a>00350          <span class="comment">/* TODO: Check this fix - should return 0 here, because the dropped frame shouldn't </span>
<a name="l00351"></a>00351 <span class="comment">            be delivered at all */</span>
<a name="l00352"></a>00352          <span class="keywordflow">return</span> 0;
<a name="l00353"></a>00353       }
<a name="l00354"></a>00354 
<a name="l00355"></a>00355       jb-&gt;<a class="code" href="structast__jb.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = jbimpl-&gt;<a class="code" href="structast__jb__impl.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>(jbobj);
<a name="l00356"></a>00356 
<a name="l00357"></a>00357       <a class="code" href="abstract__jb_8c.html#6707a65d86cea2d7224e4b79e003a8ab">jb_framelog</a>(<span class="stringliteral">"JB_PUT {now=%ld}: Queued frame with ts=%ld and len=%ld\n"</span>, now, frr-&gt;<a class="code" href="structast__frame.html#4d682ec4eed27c53849758bc13b6e179">ts</a>, frr-&gt;<a class="code" href="structast__frame.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>);
<a name="l00358"></a>00358 
<a name="l00359"></a>00359       <span class="keywordflow">return</span> 0;
<a name="l00360"></a>00360    }
<a name="l00361"></a>00361 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a68ca1bdf604d26cdd06c79334055a16"></a><!-- doxytag: member="abstract_jb.c::ast_jb_read_conf" ref="a68ca1bdf604d26cdd06c79334055a16" args="(struct ast_jb_conf *conf, char *varname, char *value)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_jb_read_conf           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>conf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>varname</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>value</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets jitterbuffer configuration property. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>conf</em>&nbsp;</td><td>configuration to store the property in. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>varname</em>&nbsp;</td><td>property name. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>property value.</td></tr>
  </table>
</dl>
Called from a channel driver to build a jitterbuffer configuration tipically when reading a configuration file. It is not neccessary for a channel driver to know each of the jb configuration property names. The jitterbuffer itself knows them. The channel driver can pass each config var it reads through this function. It will return 0 if the variable was consumed from the jb conf.<p>
<dl compact><dt><b>Returns:</b></dt><dd>zero if the property was set to the configuration, -1 if not. </dd></dl>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00567">567</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="abstract__jb_8h-source.html#l00070">AST_JB_CONF_ENABLE</a>, <a class="el" href="abstract__jb_8h-source.html#l00071">AST_JB_CONF_FORCE</a>, <a class="el" href="abstract__jb_8h-source.html#l00074">AST_JB_CONF_IMPL</a>, <a class="el" href="abstract__jb_8h-source.html#l00075">AST_JB_CONF_LOG</a>, <a class="el" href="abstract__jb_8h-source.html#l00072">AST_JB_CONF_MAX_SIZE</a>, <a class="el" href="abstract__jb_8h-source.html#l00069">AST_JB_CONF_PREFIX</a>, <a class="el" href="abstract__jb_8h-source.html#l00073">AST_JB_CONF_RESYNCH_THRESHOLD</a>, <a class="el" href="abstract__jb_8h.html#dca29a1140aadadfd92b34a02fa516efe16353c00a54d901328597ac1a1519b1">AST_JB_ENABLED</a>, <a class="el" href="abstract__jb_8h.html#dca29a1140aadadfd92b34a02fa516efec2dc7257f02903a83fa0314d3311ec8">AST_JB_FORCED</a>, <a class="el" href="abstract__jb_8h.html#dca29a1140aadadfd92b34a02fa516ef3f91d759cde3385674bbed8cc6661876">AST_JB_LOG</a>, <a class="el" href="utils_8h-source.html#l00098">ast_set2_flag</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="utils_8c-source.html#l00724">ast_true()</a>, <a class="el" href="abstract__jb_8h-source.html#l00064">ast_jb_conf::impl</a>, <a class="el" href="abstract__jb_8h-source.html#l00060">ast_jb_conf::max_size</a>, <a class="el" href="callerid_8c-source.html#l01043">name</a>, and <a class="el" href="abstract__jb_8h-source.html#l00062">ast_jb_conf::resync_threshold</a>.
<p>
Referenced by <a class="el" href="chan__gtalk_8c-source.html#l01703">gtalk_load_config()</a>, <a class="el" href="chan__jingle_8c-source.html#l01561">jingle_load_config()</a>, <a class="el" href="chan__alsa_8c-source.html#l01087">load_module()</a>, <a class="el" href="chan__zap_8c-source.html#l11882">process_zap()</a>, <a class="el" href="chan__h323_8c-source.html#l02809">reload_config()</a>, and <a class="el" href="chan__oss_8c-source.html#l01489">store_config()</a>.<div class="fragment"><pre class="fragment"><a name="l00568"></a>00568 {
<a name="l00569"></a>00569    <span class="keywordtype">int</span> prefixlen = <span class="keyword">sizeof</span>(<a class="code" href="abstract__jb_8h.html#d945a25517b769f6d87c1b93ced32aeb">AST_JB_CONF_PREFIX</a>) - 1;
<a name="l00570"></a>00570    <span class="keywordtype">char</span> *<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>;
<a name="l00571"></a>00571    <span class="keywordtype">int</span> tmp;
<a name="l00572"></a>00572    
<a name="l00573"></a>00573    <span class="keywordflow">if</span> (strncasecmp(<a class="code" href="abstract__jb_8h.html#d945a25517b769f6d87c1b93ced32aeb">AST_JB_CONF_PREFIX</a>, varname, prefixlen))
<a name="l00574"></a>00574       <span class="keywordflow">return</span> -1;
<a name="l00575"></a>00575    
<a name="l00576"></a>00576    <a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a> = varname + prefixlen;
<a name="l00577"></a>00577    
<a name="l00578"></a>00578    <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, <a class="code" href="abstract__jb_8h.html#cc60524bcbe8be44e64b723da452ff9b">AST_JB_CONF_ENABLE</a>)) {
<a name="l00579"></a>00579       <a class="code" href="utils_8h.html#006f8c62b98bc7acf13ee1584ce5a1ce">ast_set2_flag</a>(conf, <a class="code" href="utils_8c.html#63bb02e4d6f18c1dbeca92dc63310685">ast_true</a>(value), <a class="code" href="abstract__jb_8h.html#dca29a1140aadadfd92b34a02fa516efe16353c00a54d901328597ac1a1519b1">AST_JB_ENABLED</a>);
<a name="l00580"></a>00580    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, <a class="code" href="abstract__jb_8h.html#2a964e70bb2ca628a148946bfa547f59">AST_JB_CONF_FORCE</a>)) {
<a name="l00581"></a>00581       <a class="code" href="utils_8h.html#006f8c62b98bc7acf13ee1584ce5a1ce">ast_set2_flag</a>(conf, <a class="code" href="utils_8c.html#63bb02e4d6f18c1dbeca92dc63310685">ast_true</a>(value), <a class="code" href="abstract__jb_8h.html#dca29a1140aadadfd92b34a02fa516efec2dc7257f02903a83fa0314d3311ec8">AST_JB_FORCED</a>);
<a name="l00582"></a>00582    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, <a class="code" href="abstract__jb_8h.html#0b886665e777946b6f15d28319e3bcb1">AST_JB_CONF_MAX_SIZE</a>)) {
<a name="l00583"></a>00583       <span class="keywordflow">if</span> ((tmp = atoi(value)) &gt; 0)
<a name="l00584"></a>00584          conf-&gt;<a class="code" href="structast__jb__conf.html#da3260a0e11612d46e4ebab5d03fd4dd">max_size</a> = tmp;
<a name="l00585"></a>00585    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, <a class="code" href="abstract__jb_8h.html#8fa2464ea5aad64360a6e9ea2f31405a">AST_JB_CONF_RESYNCH_THRESHOLD</a>)) {
<a name="l00586"></a>00586       <span class="keywordflow">if</span> ((tmp = atoi(value)) &gt; 0)
<a name="l00587"></a>00587          conf-&gt;<a class="code" href="structast__jb__conf.html#d97eebcde281eba2855bbe1308ef0944">resync_threshold</a> = tmp;
<a name="l00588"></a>00588    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, <a class="code" href="abstract__jb_8h.html#183df55f41ce8148bd63473cce4572e0">AST_JB_CONF_IMPL</a>)) {
<a name="l00589"></a>00589       <span class="keywordflow">if</span> (!<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(value))
<a name="l00590"></a>00590          snprintf(conf-&gt;<a class="code" href="structast__jb__conf.html#2734295cf6476ca77aba906324a46286">impl</a>, <span class="keyword">sizeof</span>(conf-&gt;<a class="code" href="structast__jb__conf.html#2734295cf6476ca77aba906324a46286">impl</a>), <span class="stringliteral">"%s"</span>, value);
<a name="l00591"></a>00591    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, <a class="code" href="abstract__jb_8h.html#93ceeae2b06bff91729a6309250ff576">AST_JB_CONF_LOG</a>)) {
<a name="l00592"></a>00592       <a class="code" href="utils_8h.html#006f8c62b98bc7acf13ee1584ce5a1ce">ast_set2_flag</a>(conf, <a class="code" href="utils_8c.html#63bb02e4d6f18c1dbeca92dc63310685">ast_true</a>(value), <a class="code" href="abstract__jb_8h.html#dca29a1140aadadfd92b34a02fa516ef3f91d759cde3385674bbed8cc6661876">AST_JB_LOG</a>);
<a name="l00593"></a>00593    } <span class="keywordflow">else</span> {
<a name="l00594"></a>00594       <span class="keywordflow">return</span> -1;
<a name="l00595"></a>00595    }
<a name="l00596"></a>00596    
<a name="l00597"></a>00597    <span class="keywordflow">return</span> 0;
<a name="l00598"></a>00598 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="cd36b3c6b09fa926fdeaadb452a04fd4"></a><!-- doxytag: member="abstract_jb.c::create_jb" ref="cd36b3c6b09fa926fdeaadb452a04fd4" args="(struct ast_channel *chan, struct ast_frame *first_frame)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int create_jb           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__frame.html">ast_frame</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>first_frame</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00445">445</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="channel_8c-source.html#l03754">ast_bridged_channel()</a>, <a class="el" href="channel_8h-source.html#l00141">AST_CHANNEL_NAME</a>, <a class="el" href="frame_8h-source.html#l00396">ast_frfree()</a>, <a class="el" href="abstract__jb_8h-source.html#l00050">AST_JB_IMPL_NAME_SIZE</a>, <a class="el" href="abstract__jb_8h.html#dca29a1140aadadfd92b34a02fa516ef3f91d759cde3385674bbed8cc6661876">AST_JB_LOG</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="utils_8h-source.html#l00067">ast_test_flag</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="abstract__jb_8h-source.html#l00087">ast_jb::conf</a>, <a class="el" href="channel_8h-source.html#l01384">CRASH</a>, <a class="el" href="abstract__jb_8c-source.html#l00081">ast_jb_impl::create</a>, <a class="el" href="abstract__jb_8c-source.html#l00554">get_now()</a>, <a class="el" href="abstract__jb_8h-source.html#l00089">ast_jb::impl</a>, <a class="el" href="channel_8h-source.html#l00488">ast_channel::jb</a>, <a class="el" href="abstract__jb_8c-source.html#l00159">jb_framelog</a>, <a class="el" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8">JB_IMPL_OK</a>, <a class="el" href="abstract__jb_8h-source.html#l00091">ast_jb::jbobj</a>, <a class="el" href="abstract__jb_8h-source.html#l00097">ast_jb::last_format</a>, <a class="el" href="frame_8h-source.html#l00157">ast_frame::len</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="abstract__jb_8h-source.html#l00099">ast_jb::logfile</a>, <a class="el" href="abstract__jb_8c-source.html#l00080">ast_jb_impl::name</a>, <a class="el" href="abstract__jb_8c-source.html#l00086">ast_jb_impl::next</a>, <a class="el" href="abstract__jb_8h-source.html#l00095">ast_jb::next</a>, <a class="el" href="asterisk_8c-source.html#l00163">option_verbose</a>, <a class="el" href="abstract__jb_8c-source.html#l00083">ast_jb_impl::put_first</a>, <a class="el" href="abstract__jb_8h-source.html#l00062">ast_jb_conf::resync_threshold</a>, <a class="el" href="frame_8h-source.html#l00133">ast_frame::subclass</a>, <a class="el" href="frame_8h-source.html#l00155">ast_frame::ts</a>, and <a class="el" href="logger_8h-source.html#l00045">VERBOSE_PREFIX_3</a>.
<p>
Referenced by <a class="el" href="abstract__jb_8c-source.html#l00299">ast_jb_put()</a>.<div class="fragment"><pre class="fragment"><a name="l00446"></a>00446 {
<a name="l00447"></a>00447    <span class="keyword">struct </span><a class="code" href="structast__jb.html">ast_jb</a> *jb = &amp;chan-&gt;<a class="code" href="structast__channel.html#c4a6c07a8a2d7c804a5776d9d039428a">jb</a>;
<a name="l00448"></a>00448    <span class="keyword">struct </span><a class="code" href="structast__jb__conf.html">ast_jb_conf</a> *jbconf = &amp;jb-&gt;<a class="code" href="structast__jb.html#3a8e4c06e471595f6eb262bb9b5582d9">conf</a>;
<a name="l00449"></a>00449    <span class="keyword">struct </span><a class="code" href="structast__jb__impl.html">ast_jb_impl</a> *jbimpl = jb-&gt;<a class="code" href="structast__jb.html#86ccec3d9ff0e9c0514506e982cdc08b">impl</a>;
<a name="l00450"></a>00450    <span class="keywordtype">void</span> *jbobj;
<a name="l00451"></a>00451    <span class="keyword">struct </span><a class="code" href="structast__channel.html">ast_channel</a> *bridged;
<a name="l00452"></a>00452    <span class="keywordtype">long</span> now;
<a name="l00453"></a>00453    <span class="keywordtype">char</span> logfile_pathname[20 + <a class="code" href="abstract__jb_8h.html#9d99ea6e3d5cbb9afee56e6295c0dd0b">AST_JB_IMPL_NAME_SIZE</a> + 2*<a class="code" href="channel_8h.html#57fb43d64b209037cdc198f3db578d39">AST_CHANNEL_NAME</a> + 1];
<a name="l00454"></a>00454    <span class="keywordtype">char</span> name1[<a class="code" href="channel_8h.html#57fb43d64b209037cdc198f3db578d39">AST_CHANNEL_NAME</a>], name2[<a class="code" href="channel_8h.html#57fb43d64b209037cdc198f3db578d39">AST_CHANNEL_NAME</a>], *tmp;
<a name="l00455"></a>00455    <span class="keywordtype">int</span> res;
<a name="l00456"></a>00456 
<a name="l00457"></a>00457    jbobj = jb-&gt;<a class="code" href="structast__jb.html#7b92b77c8d7f50c74bb2dfa489e9c107">jbobj</a> = jbimpl-&gt;<a class="code" href="structast__jb__impl.html#76ea0bebb3c22822b4f0dd9c9fd021c5">create</a>(jbconf, jbconf-&gt;<a class="code" href="structast__jb__conf.html#d97eebcde281eba2855bbe1308ef0944">resync_threshold</a>);
<a name="l00458"></a>00458    <span class="keywordflow">if</span> (!jbobj) {
<a name="l00459"></a>00459       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Failed to create jitterbuffer on channel '%s'\n"</span>, chan-&gt;name);
<a name="l00460"></a>00460       <span class="keywordflow">return</span> -1;
<a name="l00461"></a>00461    }
<a name="l00462"></a>00462    
<a name="l00463"></a>00463    now = <a class="code" href="abstract__jb_8c.html#7dba3123573f5de4c69a766f78f54547">get_now</a>(jb, NULL);
<a name="l00464"></a>00464    res = jbimpl-&gt;<a class="code" href="structast__jb__impl.html#bbeebef1254fbcb5dc1ba91aa4038ee2">put_first</a>(jbobj, frr, now);
<a name="l00465"></a>00465    
<a name="l00466"></a>00466    <span class="comment">/* The result of putting the first frame should not differ from OK. However, its possible</span>
<a name="l00467"></a>00467 <span class="comment">      some implementations (i.e. adaptive's when resynch_threshold is specified) to drop it. */</span>
<a name="l00468"></a>00468    <span class="keywordflow">if</span> (res != <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8">JB_IMPL_OK</a>) {
<a name="l00469"></a>00469       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Failed to put first frame in the jitterbuffer on channel '%s'\n"</span>, chan-&gt;name);
<a name="l00470"></a>00470       <span class="comment">/*</span>
<a name="l00471"></a>00471 <span class="comment">      jbimpl-&gt;destroy(jbobj);</span>
<a name="l00472"></a>00472 <span class="comment">      return -1;</span>
<a name="l00473"></a>00473 <span class="comment">      */</span>
<a name="l00474"></a>00474    }
<a name="l00475"></a>00475    
<a name="l00476"></a>00476    <span class="comment">/* Init next */</span>
<a name="l00477"></a>00477    jb-&gt;<a class="code" href="structast__jb.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = jbimpl-&gt;<a class="code" href="structast__jb__impl.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>(jbobj);
<a name="l00478"></a>00478    
<a name="l00479"></a>00479    <span class="comment">/* Init last format for a first time. */</span>
<a name="l00480"></a>00480    jb-&gt;<a class="code" href="structast__jb.html#71a38f4cd0dc1438c6d9c308d49be0c1">last_format</a> = frr-&gt;subclass;
<a name="l00481"></a>00481    
<a name="l00482"></a>00482    <span class="comment">/* Create a frame log file */</span>
<a name="l00483"></a>00483    <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(jbconf, <a class="code" href="abstract__jb_8h.html#dca29a1140aadadfd92b34a02fa516ef3f91d759cde3385674bbed8cc6661876">AST_JB_LOG</a>)) {
<a name="l00484"></a>00484       snprintf(name2, <span class="keyword">sizeof</span>(name2), <span class="stringliteral">"%s"</span>, chan-&gt;name);
<a name="l00485"></a>00485       tmp = strchr(name2, <span class="charliteral">'/'</span>);
<a name="l00486"></a>00486       <span class="keywordflow">if</span> (tmp)
<a name="l00487"></a>00487          *tmp = <span class="charliteral">'#'</span>;
<a name="l00488"></a>00488       
<a name="l00489"></a>00489       bridged = <a class="code" href="channel_8c.html#8f80b59690710acfe4fc82cfcbbf9ee9">ast_bridged_channel</a>(chan);
<a name="l00490"></a>00490       <span class="keywordflow">if</span> (!bridged) {
<a name="l00491"></a>00491          <span class="comment">/* We should always have bridged chan if a jitterbuffer is in use */</span>
<a name="l00492"></a>00492          <a class="code" href="channel_8h.html#cef2f26f7da88da7db20faa12bd436c4">CRASH</a>;
<a name="l00493"></a>00493       }
<a name="l00494"></a>00494       snprintf(name1, <span class="keyword">sizeof</span>(name1), <span class="stringliteral">"%s"</span>, bridged-&gt;name);
<a name="l00495"></a>00495       tmp = strchr(name1, <span class="charliteral">'/'</span>);
<a name="l00496"></a>00496       <span class="keywordflow">if</span> (tmp)
<a name="l00497"></a>00497          *tmp = <span class="charliteral">'#'</span>;
<a name="l00498"></a>00498       
<a name="l00499"></a>00499       snprintf(logfile_pathname, <span class="keyword">sizeof</span>(logfile_pathname),
<a name="l00500"></a>00500          <span class="stringliteral">"/tmp/ast_%s_jb_%s--%s.log"</span>, jbimpl-&gt;<a class="code" href="structast__jb__impl.html#ce4d1de512662e067650e00ac1c3e1d5">name</a>, name1, name2);
<a name="l00501"></a>00501       jb-&gt;<a class="code" href="structast__jb.html#d6d33a322371f070c69ac715abda8fda">logfile</a> = fopen(logfile_pathname, <span class="stringliteral">"w+b"</span>);
<a name="l00502"></a>00502       
<a name="l00503"></a>00503       <span class="keywordflow">if</span> (!jb-&gt;<a class="code" href="structast__jb.html#d6d33a322371f070c69ac715abda8fda">logfile</a>)
<a name="l00504"></a>00504          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Failed to create frame log file with pathname '%s'\n"</span>, logfile_pathname);
<a name="l00505"></a>00505       
<a name="l00506"></a>00506       <span class="keywordflow">if</span> (res == <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8">JB_IMPL_OK</a>)
<a name="l00507"></a>00507          <a class="code" href="abstract__jb_8c.html#6707a65d86cea2d7224e4b79e003a8ab">jb_framelog</a>(<span class="stringliteral">"JB_PUT_FIRST {now=%ld}: Queued frame with ts=%ld and len=%ld\n"</span>,
<a name="l00508"></a>00508             now, frr-&gt;ts, frr-&gt;len);
<a name="l00509"></a>00509       <span class="keywordflow">else</span>
<a name="l00510"></a>00510          <a class="code" href="abstract__jb_8c.html#6707a65d86cea2d7224e4b79e003a8ab">jb_framelog</a>(<span class="stringliteral">"JB_PUT_FIRST {now=%ld}: Dropped frame with ts=%ld and len=%ld\n"</span>,
<a name="l00511"></a>00511             now, frr-&gt;ts, frr-&gt;len);
<a name="l00512"></a>00512    }
<a name="l00513"></a>00513 
<a name="l00514"></a>00514    <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 2) 
<a name="l00515"></a>00515       <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<a class="code" href="logger_8h.html#aefd5a67b7464040f5352e4ecdc535ca">VERBOSE_PREFIX_3</a> <span class="stringliteral">"%s jitterbuffer created on channel %s\n"</span>, jbimpl-&gt;<a class="code" href="structast__jb__impl.html#ce4d1de512662e067650e00ac1c3e1d5">name</a>, chan-&gt;name);
<a name="l00516"></a>00516    
<a name="l00517"></a>00517    <span class="comment">/* Free the frame if it has not been queued in the jb */</span>
<a name="l00518"></a>00518    <span class="keywordflow">if</span> (res != <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8">JB_IMPL_OK</a>)
<a name="l00519"></a>00519       <a class="code" href="frame_8h.html#506c759ec4950e7f7465e8f090a6252b">ast_frfree</a>(frr);
<a name="l00520"></a>00520    
<a name="l00521"></a>00521    <span class="keywordflow">return</span> 0;
<a name="l00522"></a>00522 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="7dba3123573f5de4c69a766f78f54547"></a><!-- doxytag: member="abstract_jb.c::get_now" ref="7dba3123573f5de4c69a766f78f54547" args="(struct ast_jb *jb, struct timeval *tv)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static long get_now           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__jb.html">ast_jb</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>jb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct timeval *&nbsp;</td>
          <td class="mdname" nowrap> <em>tv</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00554">554</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="abstract__jb_8h-source.html#l00093">ast_jb::timebase</a>.
<p>
Referenced by <a class="el" href="abstract__jb_8c-source.html#l00259">ast_jb_get_when_to_wakeup()</a>, <a class="el" href="abstract__jb_8c-source.html#l00299">ast_jb_put()</a>, <a class="el" href="abstract__jb_8c-source.html#l00445">create_jb()</a>, and <a class="el" href="abstract__jb_8c-source.html#l00381">jb_get_and_deliver()</a>.<div class="fragment"><pre class="fragment"><a name="l00555"></a>00555 {
<a name="l00556"></a>00556    <span class="keyword">struct </span>timeval now;
<a name="l00557"></a>00557 
<a name="l00558"></a>00558    <span class="keywordflow">if</span> (!tv) {
<a name="l00559"></a>00559       <a class="code" href="time_8h.html#c9a1fdac6e082dd89e7173244f34d7b3">tv</a> = &amp;now;
<a name="l00560"></a>00560       gettimeofday(tv, NULL);
<a name="l00561"></a>00561    }
<a name="l00562"></a>00562 
<a name="l00563"></a>00563    <span class="keywordflow">return</span> ast_tvdiff_ms(*tv, jb-&gt;<a class="code" href="structast__jb.html#404687903bcfd5c916de12f961fc5ebe">timebase</a>);
<a name="l00564"></a>00564 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="129d7f3d1d1f1e937049e859dabaac4f"></a><!-- doxytag: member="abstract_jb.c::jb_choose_impl" ref="129d7f3d1d1f1e937049e859dabaac4f" args="(struct ast_channel *chan)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void jb_choose_impl           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>chan</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00177">177</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="abstract__jb_8h-source.html#l00087">ast_jb::conf</a>, <a class="el" href="abstract__jb_8h-source.html#l00064">ast_jb_conf::impl</a>, <a class="el" href="abstract__jb_8h-source.html#l00089">ast_jb::impl</a>, <a class="el" href="channel_8h-source.html#l00488">ast_channel::jb</a>, and <a class="el" href="abstract__jb_8c-source.html#l00080">ast_jb_impl::name</a>.
<p>
Referenced by <a class="el" href="abstract__jb_8c-source.html#l00198">ast_jb_do_usecheck()</a>.<div class="fragment"><pre class="fragment"><a name="l00178"></a>00178 {
<a name="l00179"></a>00179    <span class="keyword">struct </span><a class="code" href="structast__jb.html">ast_jb</a> *jb = &amp;chan-&gt;<a class="code" href="structast__channel.html#c4a6c07a8a2d7c804a5776d9d039428a">jb</a>;
<a name="l00180"></a>00180    <span class="keyword">struct </span><a class="code" href="structast__jb__conf.html">ast_jb_conf</a> *jbconf = &amp;jb-&gt;<a class="code" href="structast__jb.html#3a8e4c06e471595f6eb262bb9b5582d9">conf</a>;
<a name="l00181"></a>00181    <span class="keyword">struct </span><a class="code" href="structast__jb__impl.html">ast_jb_impl</a> *test_impl;
<a name="l00182"></a>00182    <span class="keywordtype">int</span> i, avail_impl_count = <span class="keyword">sizeof</span>(<a class="code" href="abstract__jb_8c.html#6b8fee22e2006ec98aa7402c9b20b8aa">avail_impl</a>) / <span class="keyword">sizeof</span>(<a class="code" href="abstract__jb_8c.html#6b8fee22e2006ec98aa7402c9b20b8aa">avail_impl</a>[0]);
<a name="l00183"></a>00183    
<a name="l00184"></a>00184    jb-&gt;<a class="code" href="structast__jb.html#86ccec3d9ff0e9c0514506e982cdc08b">impl</a> = &amp;avail_impl[<a class="code" href="abstract__jb_8c.html#be3b9f661237251adffe48a07508e677">default_impl</a>];
<a name="l00185"></a>00185    
<a name="l00186"></a>00186    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(jbconf-&gt;<a class="code" href="structast__jb__conf.html#2734295cf6476ca77aba906324a46286">impl</a>))
<a name="l00187"></a>00187       <span class="keywordflow">return</span>;
<a name="l00188"></a>00188       
<a name="l00189"></a>00189    <span class="keywordflow">for</span> (i = 0; i &lt; avail_impl_count; i++) {
<a name="l00190"></a>00190       test_impl = &amp;avail_impl[i];
<a name="l00191"></a>00191       <span class="keywordflow">if</span> (!strcasecmp(jbconf-&gt;<a class="code" href="structast__jb__conf.html#2734295cf6476ca77aba906324a46286">impl</a>, test_impl-&gt;<a class="code" href="structast__jb__impl.html#ce4d1de512662e067650e00ac1c3e1d5">name</a>)) {
<a name="l00192"></a>00192          jb-&gt;<a class="code" href="structast__jb.html#86ccec3d9ff0e9c0514506e982cdc08b">impl</a> = test_impl;
<a name="l00193"></a>00193          <span class="keywordflow">return</span>;
<a name="l00194"></a>00194       }
<a name="l00195"></a>00195    }
<a name="l00196"></a>00196 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="3213e9bbf579731a144d74cb16b8f4e9"></a><!-- doxytag: member="abstract_jb.c::jb_create_adaptive" ref="3213e9bbf579731a144d74cb16b8f4e9" args="(struct ast_jb_conf *general_config, long resynch_threshold)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void * jb_create_adaptive           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>general_config</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>resynch_threshold</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00703">703</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="jitterbuf_8c-source.html#l00087">jb_new()</a>, <a class="el" href="jitterbuf_8c-source.html#l00828">jb_setconf()</a>, <a class="el" href="jitterbuf_8h-source.html#l00060">jb_conf::max_contig_interp</a>, <a class="el" href="jitterbuf_8h-source.html#l00058">jb_conf::max_jitterbuf</a>, <a class="el" href="abstract__jb_8h-source.html#l00060">ast_jb_conf::max_size</a>, <a class="el" href="abstract__jb_8h-source.html#l00062">ast_jb_conf::resync_threshold</a>, and <a class="el" href="jitterbuf_8h-source.html#l00059">jb_conf::resync_threshold</a>.<div class="fragment"><pre class="fragment"><a name="l00704"></a>00704 {
<a name="l00705"></a>00705    <a class="code" href="structjb__conf.html">jb_conf</a> jbconf;
<a name="l00706"></a>00706    <a class="code" href="structjitterbuf.html">jitterbuf</a> *adaptivejb;
<a name="l00707"></a>00707 
<a name="l00708"></a>00708    adaptivejb = <a class="code" href="jitterbuf_8c.html#442330556f64870f68ff52541c306a2f">jb_new</a>();
<a name="l00709"></a>00709    <span class="keywordflow">if</span> (adaptivejb) {
<a name="l00710"></a>00710       jbconf.<a class="code" href="structjb__conf.html#2900c3dcf33f27aab1a7dedd7e6880a0">max_jitterbuf</a> = general_config-&gt;<a class="code" href="structast__jb__conf.html#da3260a0e11612d46e4ebab5d03fd4dd">max_size</a>;
<a name="l00711"></a>00711       jbconf.<a class="code" href="structjb__conf.html#d97eebcde281eba2855bbe1308ef0944">resync_threshold</a> = general_config-&gt;<a class="code" href="structast__jb__conf.html#d97eebcde281eba2855bbe1308ef0944">resync_threshold</a>;
<a name="l00712"></a>00712       jbconf.<a class="code" href="structjb__conf.html#0f7ad522ab5d92ca98aadc2965b1ee47">max_contig_interp</a> = 10;
<a name="l00713"></a>00713       <a class="code" href="jitterbuf_8c.html#3b89e4b511067f91c9198c34e45e2ab4">jb_setconf</a>(adaptivejb, &amp;jbconf);
<a name="l00714"></a>00714    }
<a name="l00715"></a>00715    
<a name="l00716"></a>00716    <span class="keywordflow">return</span> adaptivejb;
<a name="l00717"></a>00717 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="f88012ebf072bdcd7e860f52e0993ec7"></a><!-- doxytag: member="abstract_jb.c::jb_create_fixed" ref="f88012ebf072bdcd7e860f52e0993ec7" args="(struct ast_jb_conf *general_config, long resynch_threshold)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void * jb_create_fixed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__jb__conf.html">ast_jb_conf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>general_config</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>resynch_threshold</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00617">617</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="fixedjitterbuf_8c-source.html#l00102">fixed_jb_new()</a>, <a class="el" href="fixedjitterbuf_8h-source.html#l00051">fixed_jb_conf::jbsize</a>, <a class="el" href="abstract__jb_8h-source.html#l00060">ast_jb_conf::max_size</a>, and <a class="el" href="fixedjitterbuf_8h-source.html#l00052">fixed_jb_conf::resync_threshold</a>.<div class="fragment"><pre class="fragment"><a name="l00618"></a>00618 {
<a name="l00619"></a>00619    <span class="keyword">struct </span><a class="code" href="structfixed__jb__conf.html">fixed_jb_conf</a> conf;
<a name="l00620"></a>00620    
<a name="l00621"></a>00621    conf.<a class="code" href="structfixed__jb__conf.html#2be1cc52550fdf7cfa300e45caeda190">jbsize</a> = general_config-&gt;<a class="code" href="structast__jb__conf.html#da3260a0e11612d46e4ebab5d03fd4dd">max_size</a>;
<a name="l00622"></a>00622    conf.<a class="code" href="structfixed__jb__conf.html#d97eebcde281eba2855bbe1308ef0944">resync_threshold</a> = resynch_threshold;
<a name="l00623"></a>00623    
<a name="l00624"></a>00624    <span class="keywordflow">return</span> <a class="code" href="fixedjitterbuf_8c.html#3bd412880139360169908c9c9ad7ff7a">fixed_jb_new</a>(&amp;conf);
<a name="l00625"></a>00625 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="65dd8384c665c4b9694235a1b483f25f"></a><!-- doxytag: member="abstract_jb.c::jb_destroy_adaptive" ref="65dd8384c665c4b9694235a1b483f25f" args="(void *jb)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void jb_destroy_adaptive           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>jb</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00720">720</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="jitterbuf_8c-source.html#l00100">jb_destroy()</a>.<div class="fragment"><pre class="fragment"><a name="l00721"></a>00721 {
<a name="l00722"></a>00722    <a class="code" href="structjitterbuf.html">jitterbuf</a> *adaptivejb = (<a class="code" href="structjitterbuf.html">jitterbuf</a> *) jb;
<a name="l00723"></a>00723    
<a name="l00724"></a>00724    <a class="code" href="jitterbuf_8c.html#e06a29c5463655025c826a363bb92ec8">jb_destroy</a>(adaptivejb);
<a name="l00725"></a>00725 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="eb37e73985316b28509d60f726810c23"></a><!-- doxytag: member="abstract_jb.c::jb_destroy_fixed" ref="eb37e73985316b28509d60f726810c23" args="(void *jb)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void jb_destroy_fixed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>jb</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00628">628</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="fixedjitterbuf_8c-source.html#l00129">fixed_jb_destroy()</a>.<div class="fragment"><pre class="fragment"><a name="l00629"></a>00629 {
<a name="l00630"></a>00630    <span class="keyword">struct </span><a class="code" href="structfixed__jb.html">fixed_jb</a> *fixedjb = (<span class="keyword">struct </span><a class="code" href="structfixed__jb.html">fixed_jb</a> *) jb;
<a name="l00631"></a>00631    
<a name="l00632"></a>00632    <span class="comment">/* destroy the jb */</span>
<a name="l00633"></a>00633    <a class="code" href="fixedjitterbuf_8c.html#6d6949ffa517b3fad3ce4583cca264f0">fixed_jb_destroy</a>(fixedjb);
<a name="l00634"></a>00634 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="aa744cb22f39ccbd704d400c052ffa10"></a><!-- doxytag: member="abstract_jb.c::jb_force_resynch_adaptive" ref="aa744cb22f39ccbd704d400c052ffa10" args="(void *jb)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void jb_force_resynch_adaptive           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>jb</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00779">779</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.<div class="fragment"><pre class="fragment"><a name="l00780"></a>00780 {
<a name="l00781"></a>00781 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="59667ddc5dcd8f88dc926b2914f70953"></a><!-- doxytag: member="abstract_jb.c::jb_force_resynch_fixed" ref="59667ddc5dcd8f88dc926b2914f70953" args="(void *jb)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void jb_force_resynch_fixed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>jb</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00693">693</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="fixedjitterbuf_8c-source.html#l00181">fixed_jb_set_force_resynch()</a>.<div class="fragment"><pre class="fragment"><a name="l00694"></a>00694 {
<a name="l00695"></a>00695    <span class="keyword">struct </span><a class="code" href="structfixed__jb.html">fixed_jb</a> *fixedjb = (<span class="keyword">struct </span><a class="code" href="structfixed__jb.html">fixed_jb</a> *) jb;
<a name="l00696"></a>00696    
<a name="l00697"></a>00697    <a class="code" href="fixedjitterbuf_8c.html#ffe2410d86051de9ea5b1009d8d1f612">fixed_jb_set_force_resynch</a>(fixedjb);
<a name="l00698"></a>00698 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="21a215df7778ad86367d78eefedf42e2"></a><!-- doxytag: member="abstract_jb.c::jb_get_adaptive" ref="21a215df7778ad86367d78eefedf42e2" args="(void *jb, struct ast_frame **fout, long now, long interpl)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int jb_get_adaptive           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap> <em>jb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__frame.html">ast_frame</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>fout</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>now</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>interpl</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00745">745</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="abstract__jb_8c-source.html#l00152">adaptive_to_abstract_code</a>, <a class="el" href="frame_8h-source.html#l00147">ast_frame::data</a>, and <a class="el" href="jitterbuf_8c-source.html#l00788">jb_get()</a>.<div class="fragment"><pre class="fragment"><a name="l00746"></a>00746 {
<a name="l00747"></a>00747    <a class="code" href="structjitterbuf.html">jitterbuf</a> *adaptivejb = (<a class="code" href="structjitterbuf.html">jitterbuf</a> *) jb;
<a name="l00748"></a>00748    <a class="code" href="structjb__frame.html">jb_frame</a> frame;
<a name="l00749"></a>00749    <span class="keywordtype">int</span> res;
<a name="l00750"></a>00750    
<a name="l00751"></a>00751    res = <a class="code" href="jitterbuf_8c.html#8b0b4e5e0294978ea073142efe6b02e8">jb_get</a>(adaptivejb, &amp;frame, now, interpl);
<a name="l00752"></a>00752    *fout = frame.<a class="code" href="structast__frame.html#8d777f385d3dfec8815d20f7496026dc">data</a>;
<a name="l00753"></a>00753    
<a name="l00754"></a>00754    <span class="keywordflow">return</span> <a class="code" href="abstract__jb_8c.html#695c5c2d1adcc9f5e3a0003c52fa3bbe">adaptive_to_abstract_code</a>[res];
<a name="l00755"></a>00755 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="376aacc74650767f9aa1e7cb9fc6684c"></a><!-- doxytag: member="abstract_jb.c::jb_get_and_deliver" ref="376aacc74650767f9aa1e7cb9fc6684c" args="(struct ast_channel *chan)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void jb_get_and_deliver           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>chan</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00381">381</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="frame_8h-source.html#l00561">ast_codec_interp_len()</a>, <a class="el" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f9264fc4720a7b3982e2d4bf246fe3d9924">AST_FRAME_VOICE</a>, <a class="el" href="frame_8h-source.html#l00396">ast_frfree()</a>, <a class="el" href="frame_8h-source.html#l00181">AST_FRIENDLY_OFFSET</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="utils_8c-source.html#l00778">ast_tvadd()</a>, <a class="el" href="channel_8c-source.html#l02660">ast_write()</a>, <a class="el" href="channel_8h-source.html#l01384">CRASH</a>, <a class="el" href="frame_8h-source.html#l00147">ast_frame::data</a>, <a class="el" href="frame_8h-source.html#l00135">ast_frame::datalen</a>, <a class="el" href="frame_8h-source.html#l00149">ast_frame::delivery</a>, <a class="el" href="format__g726_8c-source.html#l00193">f</a>, <a class="el" href="frame_8h-source.html#l00131">ast_frame::frametype</a>, <a class="el" href="abstract__jb_8c-source.html#l00085">ast_jb_impl::get</a>, <a class="el" href="abstract__jb_8c-source.html#l00554">get_now()</a>, <a class="el" href="abstract__jb_8h-source.html#l00089">ast_jb::impl</a>, <a class="el" href="channel_8h-source.html#l00488">ast_channel::jb</a>, <a class="el" href="abstract__jb_8c-source.html#l00159">jb_framelog</a>, <a class="el" href="abstract__jb_8c-source.html#l00156">jb_get_actions</a>, <a class="el" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a730069f14b763b659b3c924a0818a673bb27">JB_IMPL_DROP</a>, <a class="el" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300d7f335805ebddd6de9e8b7bd14153290">JB_IMPL_INTERP</a>, <a class="el" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300604a98df1f81ff29fc48e301100cd8bf">JB_IMPL_NOFRAME</a>, <a class="el" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8">JB_IMPL_OK</a>, <a class="el" href="abstract__jb_8h-source.html#l00091">ast_jb::jbobj</a>, <a class="el" href="abstract__jb_8h-source.html#l00097">ast_jb::last_format</a>, <a class="el" href="frame_8h-source.html#l00157">ast_frame::len</a>, <a class="el" href="logger_8h-source.html#l00118">LOG_ERROR</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="frame_8h-source.html#l00139">ast_frame::mallocd</a>, <a class="el" href="abstract__jb_8c-source.html#l00080">ast_jb_impl::name</a>, <a class="el" href="abstract__jb_8c-source.html#l00086">ast_jb_impl::next</a>, <a class="el" href="abstract__jb_8h-source.html#l00095">ast_jb::next</a>, <a class="el" href="frame_8h-source.html#l00143">ast_frame::offset</a>, <a class="el" href="frame_8h-source.html#l00137">ast_frame::samples</a>, <a class="el" href="frame_8h-source.html#l00145">ast_frame::src</a>, <a class="el" href="frame_8h-source.html#l00133">ast_frame::subclass</a>, <a class="el" href="abstract__jb_8h-source.html#l00093">ast_jb::timebase</a>, and <a class="el" href="frame_8h-source.html#l00155">ast_frame::ts</a>.
<p>
Referenced by <a class="el" href="abstract__jb_8c-source.html#l00364">ast_jb_get_and_deliver()</a>.<div class="fragment"><pre class="fragment"><a name="l00382"></a>00382 {
<a name="l00383"></a>00383    <span class="keyword">struct </span><a class="code" href="structast__jb.html">ast_jb</a> *jb = &amp;chan-&gt;<a class="code" href="structast__channel.html#c4a6c07a8a2d7c804a5776d9d039428a">jb</a>;
<a name="l00384"></a>00384    <span class="keyword">struct </span><a class="code" href="structast__jb__impl.html">ast_jb_impl</a> *jbimpl = jb-&gt;<a class="code" href="structast__jb.html#86ccec3d9ff0e9c0514506e982cdc08b">impl</a>;
<a name="l00385"></a>00385    <span class="keywordtype">void</span> *jbobj = jb-&gt;<a class="code" href="structast__jb.html#7b92b77c8d7f50c74bb2dfa489e9c107">jbobj</a>;
<a name="l00386"></a>00386    <span class="keyword">struct </span><a class="code" href="structast__frame.html">ast_frame</a> *<a class="code" href="format__g726_8c.html#85b9b17a7dd34a3638c560bc9152473b">f</a>, finterp;
<a name="l00387"></a>00387    <span class="keywordtype">long</span> now;
<a name="l00388"></a>00388    <span class="keywordtype">int</span> interpolation_len, res;
<a name="l00389"></a>00389    
<a name="l00390"></a>00390    now = <a class="code" href="abstract__jb_8c.html#7dba3123573f5de4c69a766f78f54547">get_now</a>(jb, NULL);
<a name="l00391"></a>00391    jb-&gt;<a class="code" href="structast__jb.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = jbimpl-&gt;<a class="code" href="structast__jb__impl.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>(jbobj);
<a name="l00392"></a>00392    <span class="keywordflow">if</span> (now &lt; jb-&gt;next) {
<a name="l00393"></a>00393       <a class="code" href="abstract__jb_8c.html#6707a65d86cea2d7224e4b79e003a8ab">jb_framelog</a>(<span class="stringliteral">"\tJB_GET {now=%ld}: now &lt; next=%ld\n"</span>, now, jb-&gt;<a class="code" href="structast__jb.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>);
<a name="l00394"></a>00394       <span class="keywordflow">return</span>;
<a name="l00395"></a>00395    }
<a name="l00396"></a>00396    
<a name="l00397"></a>00397    <span class="keywordflow">while</span> (now &gt;= jb-&gt;<a class="code" href="structast__jb.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l00398"></a>00398       interpolation_len = <a class="code" href="frame_8h.html#ba8b30f56c36a1e77180728bdb29ab3f">ast_codec_interp_len</a>(jb-&gt;<a class="code" href="structast__jb.html#71a38f4cd0dc1438c6d9c308d49be0c1">last_format</a>);
<a name="l00399"></a>00399       
<a name="l00400"></a>00400       res = jbimpl-&gt;<a class="code" href="structast__jb__impl.html#b5eda0a74558a342cf659187f06f746f">get</a>(jbobj, &amp;f, now, interpolation_len);
<a name="l00401"></a>00401       
<a name="l00402"></a>00402       <span class="keywordflow">switch</span> (res) {
<a name="l00403"></a>00403       <span class="keywordflow">case</span> <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8">JB_IMPL_OK</a>:
<a name="l00404"></a>00404          <span class="comment">/* deliver the frame */</span>
<a name="l00405"></a>00405          <a class="code" href="channel_8c.html#57a74c4c7b7e25ad61a4f461e3c73158">ast_write</a>(chan, f);
<a name="l00406"></a>00406       <span class="keywordflow">case</span> <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a730069f14b763b659b3c924a0818a673bb27">JB_IMPL_DROP</a>:
<a name="l00407"></a>00407          <a class="code" href="abstract__jb_8c.html#6707a65d86cea2d7224e4b79e003a8ab">jb_framelog</a>(<span class="stringliteral">"\tJB_GET {now=%ld}: %s frame with ts=%ld and len=%ld\n"</span>,
<a name="l00408"></a>00408             now, <a class="code" href="abstract__jb_8c.html#2f1c5231abf8192001831e787ecfa018">jb_get_actions</a>[res], f-&gt;<a class="code" href="structast__frame.html#4d682ec4eed27c53849758bc13b6e179">ts</a>, f-&gt;<a class="code" href="structast__frame.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>);
<a name="l00409"></a>00409          jb-&gt;<a class="code" href="structast__jb.html#71a38f4cd0dc1438c6d9c308d49be0c1">last_format</a> = f-&gt;<a class="code" href="structast__frame.html#c00578b472e008b51fd24237785fa428">subclass</a>;
<a name="l00410"></a>00410          <a class="code" href="frame_8h.html#506c759ec4950e7f7465e8f090a6252b">ast_frfree</a>(f);
<a name="l00411"></a>00411          <span class="keywordflow">break</span>;
<a name="l00412"></a>00412       <span class="keywordflow">case</span> <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300d7f335805ebddd6de9e8b7bd14153290">JB_IMPL_INTERP</a>:
<a name="l00413"></a>00413          <span class="comment">/* interpolate a frame */</span>
<a name="l00414"></a>00414          f = &amp;finterp;
<a name="l00415"></a>00415          f-&gt;<a class="code" href="structast__frame.html#9574009b02f8256934a1a25cbac10e1d">frametype</a> = <a class="code" href="frame_8h.html#006fc84d03b57b7c7d571d6c0db69f9264fc4720a7b3982e2d4bf246fe3d9924">AST_FRAME_VOICE</a>;
<a name="l00416"></a>00416          f-&gt;<a class="code" href="structast__frame.html#c00578b472e008b51fd24237785fa428">subclass</a> = jb-&gt;<a class="code" href="structast__jb.html#71a38f4cd0dc1438c6d9c308d49be0c1">last_format</a>;
<a name="l00417"></a>00417          f-&gt;<a class="code" href="structast__frame.html#106553e2afb20bec4268dd6bd02c952d">datalen</a>  = 0;
<a name="l00418"></a>00418          f-&gt;<a class="code" href="structast__frame.html#6ef9161b900632671022358216c7dfe7">samples</a>  = interpolation_len * 8;
<a name="l00419"></a>00419          f-&gt;<a class="code" href="structast__frame.html#21ad8fb6783b76b648f5178a208fb3d4">mallocd</a>  = 0;
<a name="l00420"></a>00420          f-&gt;<a class="code" href="structast__frame.html#25d902c24283ab8cfbac54dfa101ad31">src</a>  = <span class="stringliteral">"JB interpolation"</span>;
<a name="l00421"></a>00421          f-&gt;<a class="code" href="structast__frame.html#8d777f385d3dfec8815d20f7496026dc">data</a>  = NULL;
<a name="l00422"></a>00422          f-&gt;<a class="code" href="structast__frame.html#7108537956afa2a526f96cc9da7b0c36">delivery</a> = <a class="code" href="utils_8c.html#f3d6e948bdc914615d61b50418162c81">ast_tvadd</a>(jb-&gt;<a class="code" href="structast__jb.html#404687903bcfd5c916de12f961fc5ebe">timebase</a>, ast_samp2tv(jb-&gt;<a class="code" href="structast__jb.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>, 1000));
<a name="l00423"></a>00423          f-&gt;<a class="code" href="structast__frame.html#7a86c157ee9713c34fbd7a1ee40f0c5a">offset</a> = <a class="code" href="frame_8h.html#2d81423482d14a11460b216109864d5b">AST_FRIENDLY_OFFSET</a>;
<a name="l00424"></a>00424          <span class="comment">/* deliver the interpolated frame */</span>
<a name="l00425"></a>00425          <a class="code" href="channel_8c.html#57a74c4c7b7e25ad61a4f461e3c73158">ast_write</a>(chan, f);
<a name="l00426"></a>00426          <a class="code" href="abstract__jb_8c.html#6707a65d86cea2d7224e4b79e003a8ab">jb_framelog</a>(<span class="stringliteral">"\tJB_GET {now=%ld}: Interpolated frame with len=%d\n"</span>, now, interpolation_len);
<a name="l00427"></a>00427          <span class="keywordflow">break</span>;
<a name="l00428"></a>00428       <span class="keywordflow">case</span> <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300604a98df1f81ff29fc48e301100cd8bf">JB_IMPL_NOFRAME</a>:
<a name="l00429"></a>00429          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>,
<a name="l00430"></a>00430             <span class="stringliteral">"JB_IMPL_NOFRAME is retuned from the %s jb when now=%ld &gt;= next=%ld, jbnext=%ld!\n"</span>,
<a name="l00431"></a>00431             jbimpl-&gt;<a class="code" href="structast__jb__impl.html#ce4d1de512662e067650e00ac1c3e1d5">name</a>, now, jb-&gt;<a class="code" href="structast__jb.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>, jbimpl-&gt;<a class="code" href="structast__jb__impl.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>(jbobj));
<a name="l00432"></a>00432          <a class="code" href="abstract__jb_8c.html#6707a65d86cea2d7224e4b79e003a8ab">jb_framelog</a>(<span class="stringliteral">"\tJB_GET {now=%ld}: No frame for now!?\n"</span>, now);
<a name="l00433"></a>00433          <span class="keywordflow">return</span>;
<a name="l00434"></a>00434       <span class="keywordflow">default</span>:
<a name="l00435"></a>00435          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#4490aa3d29644e716440fada68f54032">LOG_ERROR</a>, <span class="stringliteral">"This should never happen!\n"</span>);
<a name="l00436"></a>00436          <a class="code" href="channel_8h.html#cef2f26f7da88da7db20faa12bd436c4">CRASH</a>;
<a name="l00437"></a>00437          <span class="keywordflow">break</span>;
<a name="l00438"></a>00438       }
<a name="l00439"></a>00439       
<a name="l00440"></a>00440       jb-&gt;<a class="code" href="structast__jb.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = jbimpl-&gt;<a class="code" href="structast__jb__impl.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>(jbobj);
<a name="l00441"></a>00441    }
<a name="l00442"></a>00442 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="4d3e41e8f1a7baff053c35886ce2f1b4"></a><!-- doxytag: member="abstract_jb.c::jb_get_fixed" ref="4d3e41e8f1a7baff053c35886ce2f1b4" args="(void *jb, struct ast_frame **fout, long now, long interpl)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int jb_get_fixed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap> <em>jb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__frame.html">ast_frame</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>fout</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>now</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>interpl</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00659">659</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="frame_8h-source.html#l00147">ast_frame::data</a>, <a class="el" href="fixedjitterbuf_8c-source.html#l00294">fixed_jb_get()</a>, and <a class="el" href="abstract__jb_8c-source.html#l00150">fixed_to_abstract_code</a>.<div class="fragment"><pre class="fragment"><a name="l00660"></a>00660 {
<a name="l00661"></a>00661    <span class="keyword">struct </span><a class="code" href="structfixed__jb.html">fixed_jb</a> *fixedjb = (<span class="keyword">struct </span><a class="code" href="structfixed__jb.html">fixed_jb</a> *) jb;
<a name="l00662"></a>00662    <span class="keyword">struct</span> <a class="code" href="structfixed__jb__frame.html">fixed_jb_frame</a> frame;
<a name="l00663"></a>00663    <span class="keywordtype">int</span> res;
<a name="l00664"></a>00664    
<a name="l00665"></a>00665    res = <a class="code" href="fixedjitterbuf_8c.html#0472f4d69dbcd187714e36ae6f8d1970">fixed_jb_get</a>(fixedjb, &amp;frame, now, interpl);
<a name="l00666"></a>00666    *fout = frame.<a class="code" href="structast__frame.html#8d777f385d3dfec8815d20f7496026dc">data</a>;
<a name="l00667"></a>00667    
<a name="l00668"></a>00668    <span class="keywordflow">return</span> <a class="code" href="abstract__jb_8c.html#0dc69744528e5ff402e3c83332502ba7">fixed_to_abstract_code</a>[res];
<a name="l00669"></a>00669 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="98edef77550e29279f641b20a3cd810a"></a><!-- doxytag: member="abstract_jb.c::jb_next_adaptive" ref="98edef77550e29279f641b20a3cd810a" args="(void *jb)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static long jb_next_adaptive           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>jb</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00758">758</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="jitterbuf_8c-source.html#l00770">jb_next()</a>.<div class="fragment"><pre class="fragment"><a name="l00759"></a>00759 {
<a name="l00760"></a>00760    <a class="code" href="structjitterbuf.html">jitterbuf</a> *adaptivejb = (<a class="code" href="structjitterbuf.html">jitterbuf</a> *) jb;
<a name="l00761"></a>00761    
<a name="l00762"></a>00762    <span class="keywordflow">return</span> <a class="code" href="jitterbuf_8c.html#af5594d9cfe17c618ad8bb155b6d129b">jb_next</a>(adaptivejb);
<a name="l00763"></a>00763 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c8b43a2c1bfd2b22d188940cc516db7a"></a><!-- doxytag: member="abstract_jb.c::jb_next_fixed" ref="c8b43a2c1bfd2b22d188940cc516db7a" args="(void *jb)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static long jb_next_fixed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>jb</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00672">672</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="fixedjitterbuf_8c-source.html#l00337">fixed_jb_next()</a>.<div class="fragment"><pre class="fragment"><a name="l00673"></a>00673 {
<a name="l00674"></a>00674    <span class="keyword">struct </span><a class="code" href="structfixed__jb.html">fixed_jb</a> *fixedjb = (<span class="keyword">struct </span><a class="code" href="structfixed__jb.html">fixed_jb</a> *) jb;
<a name="l00675"></a>00675    
<a name="l00676"></a>00676    <span class="keywordflow">return</span> <a class="code" href="fixedjitterbuf_8c.html#1d21993c8b505b23d887208da5cf2175">fixed_jb_next</a>(fixedjb);
<a name="l00677"></a>00677 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e920e1aaea3da9063df03e6320759b87"></a><!-- doxytag: member="abstract_jb.c::jb_put_adaptive" ref="e920e1aaea3da9063df03e6320759b87" args="(void *jb, struct ast_frame *fin, long now)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int jb_put_adaptive           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap> <em>jb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__frame.html">ast_frame</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>fin</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>now</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00734">734</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="abstract__jb_8c-source.html#l00152">adaptive_to_abstract_code</a>, <a class="el" href="jitterbuf_8c-source.html#l00513">jb_put()</a>, <a class="el" href="jitterbuf_8h.html#c5605e62bb981e98a342b8f9fe7f1f23fba690e11a4437569af666ce76f03d9e">JB_TYPE_VOICE</a>, <a class="el" href="frame_8h-source.html#l00157">ast_frame::len</a>, and <a class="el" href="frame_8h-source.html#l00155">ast_frame::ts</a>.
<p>
Referenced by <a class="el" href="abstract__jb_8c-source.html#l00728">jb_put_first_adaptive()</a>.<div class="fragment"><pre class="fragment"><a name="l00735"></a>00735 {
<a name="l00736"></a>00736    <a class="code" href="structjitterbuf.html">jitterbuf</a> *adaptivejb = (<a class="code" href="structjitterbuf.html">jitterbuf</a> *) jb;
<a name="l00737"></a>00737    <span class="keywordtype">int</span> res;
<a name="l00738"></a>00738    
<a name="l00739"></a>00739    res = <a class="code" href="jitterbuf_8c.html#218b07dc639e9850a05a81d8d334f07a">jb_put</a>(adaptivejb, fin, <a class="code" href="jitterbuf_8h.html#c5605e62bb981e98a342b8f9fe7f1f23fba690e11a4437569af666ce76f03d9e">JB_TYPE_VOICE</a>, fin-&gt;<a class="code" href="structast__frame.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>, fin-&gt;<a class="code" href="structast__frame.html#4d682ec4eed27c53849758bc13b6e179">ts</a>, now);
<a name="l00740"></a>00740    
<a name="l00741"></a>00741    <span class="keywordflow">return</span> <a class="code" href="abstract__jb_8c.html#695c5c2d1adcc9f5e3a0003c52fa3bbe">adaptive_to_abstract_code</a>[res];
<a name="l00742"></a>00742 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="6ecad726046a381a223c4b97bd971ae0"></a><!-- doxytag: member="abstract_jb.c::jb_put_first_adaptive" ref="6ecad726046a381a223c4b97bd971ae0" args="(void *jb, struct ast_frame *fin, long now)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int jb_put_first_adaptive           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap> <em>jb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__frame.html">ast_frame</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>fin</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>now</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00728">728</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="abstract__jb_8c-source.html#l00734">jb_put_adaptive()</a>.<div class="fragment"><pre class="fragment"><a name="l00729"></a>00729 {
<a name="l00730"></a>00730    <span class="keywordflow">return</span> <a class="code" href="abstract__jb_8c.html#e920e1aaea3da9063df03e6320759b87">jb_put_adaptive</a>(jb, fin, now);
<a name="l00731"></a>00731 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="8603421717c75170468cfa1aa243b208"></a><!-- doxytag: member="abstract_jb.c::jb_put_first_fixed" ref="8603421717c75170468cfa1aa243b208" args="(void *jb, struct ast_frame *fin, long now)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int jb_put_first_fixed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap> <em>jb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__frame.html">ast_frame</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>fin</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>now</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00637">637</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="fixedjitterbuf_8c-source.html#l00187">fixed_jb_put_first()</a>, <a class="el" href="abstract__jb_8c-source.html#l00150">fixed_to_abstract_code</a>, <a class="el" href="frame_8h-source.html#l00157">ast_frame::len</a>, and <a class="el" href="frame_8h-source.html#l00155">ast_frame::ts</a>.<div class="fragment"><pre class="fragment"><a name="l00638"></a>00638 {
<a name="l00639"></a>00639    <span class="keyword">struct </span><a class="code" href="structfixed__jb.html">fixed_jb</a> *fixedjb = (<span class="keyword">struct </span><a class="code" href="structfixed__jb.html">fixed_jb</a> *) jb;
<a name="l00640"></a>00640    <span class="keywordtype">int</span> res;
<a name="l00641"></a>00641    
<a name="l00642"></a>00642    res = <a class="code" href="fixedjitterbuf_8c.html#52159a974ec077dd6d5590965901c6dd">fixed_jb_put_first</a>(fixedjb, fin, fin-&gt;<a class="code" href="structast__frame.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>, fin-&gt;<a class="code" href="structast__frame.html#4d682ec4eed27c53849758bc13b6e179">ts</a>, now);
<a name="l00643"></a>00643    
<a name="l00644"></a>00644    <span class="keywordflow">return</span> <a class="code" href="abstract__jb_8c.html#0dc69744528e5ff402e3c83332502ba7">fixed_to_abstract_code</a>[res];
<a name="l00645"></a>00645 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="0d51cab6b707f310631b15dbaa56936b"></a><!-- doxytag: member="abstract_jb.c::jb_put_fixed" ref="0d51cab6b707f310631b15dbaa56936b" args="(void *jb, struct ast_frame *fin, long now)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int jb_put_fixed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap> <em>jb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__frame.html">ast_frame</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>fin</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>now</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00648">648</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="fixedjitterbuf_8c-source.html#l00200">fixed_jb_put()</a>, <a class="el" href="abstract__jb_8c-source.html#l00150">fixed_to_abstract_code</a>, <a class="el" href="frame_8h-source.html#l00157">ast_frame::len</a>, and <a class="el" href="frame_8h-source.html#l00155">ast_frame::ts</a>.<div class="fragment"><pre class="fragment"><a name="l00649"></a>00649 {
<a name="l00650"></a>00650    <span class="keyword">struct </span><a class="code" href="structfixed__jb.html">fixed_jb</a> *fixedjb = (<span class="keyword">struct </span><a class="code" href="structfixed__jb.html">fixed_jb</a> *) jb;
<a name="l00651"></a>00651    <span class="keywordtype">int</span> res;
<a name="l00652"></a>00652    
<a name="l00653"></a>00653    res = <a class="code" href="fixedjitterbuf_8c.html#5677f07248abad11c3f8535b1eda0842">fixed_jb_put</a>(fixedjb, fin, fin-&gt;<a class="code" href="structast__frame.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>, fin-&gt;<a class="code" href="structast__frame.html#4d682ec4eed27c53849758bc13b6e179">ts</a>, now);
<a name="l00654"></a>00654    
<a name="l00655"></a>00655    <span class="keywordflow">return</span> <a class="code" href="abstract__jb_8c.html#0dc69744528e5ff402e3c83332502ba7">fixed_to_abstract_code</a>[res];
<a name="l00656"></a>00656 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="45171e70f126b475cfc6891a5b8ba373"></a><!-- doxytag: member="abstract_jb.c::jb_remove_adaptive" ref="45171e70f126b475cfc6891a5b8ba373" args="(void *jb, struct ast_frame **fout)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int jb_remove_adaptive           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap> <em>jb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__frame.html">ast_frame</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>fout</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00766">766</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="abstract__jb_8c-source.html#l00152">adaptive_to_abstract_code</a>, <a class="el" href="frame_8h-source.html#l00147">ast_frame::data</a>, and <a class="el" href="jitterbuf_8c-source.html#l00804">jb_getall()</a>.<div class="fragment"><pre class="fragment"><a name="l00767"></a>00767 {
<a name="l00768"></a>00768    <a class="code" href="structjitterbuf.html">jitterbuf</a> *adaptivejb = (<a class="code" href="structjitterbuf.html">jitterbuf</a> *) jb;
<a name="l00769"></a>00769    <a class="code" href="structjb__frame.html">jb_frame</a> frame;
<a name="l00770"></a>00770    <span class="keywordtype">int</span> res;
<a name="l00771"></a>00771    
<a name="l00772"></a>00772    res = <a class="code" href="jitterbuf_8c.html#b9a275a51047f5bff6a4887c4c89cae3">jb_getall</a>(adaptivejb, &amp;frame);
<a name="l00773"></a>00773    *fout = frame.<a class="code" href="structast__frame.html#8d777f385d3dfec8815d20f7496026dc">data</a>;
<a name="l00774"></a>00774    
<a name="l00775"></a>00775    <span class="keywordflow">return</span> <a class="code" href="abstract__jb_8c.html#695c5c2d1adcc9f5e3a0003c52fa3bbe">adaptive_to_abstract_code</a>[res];
<a name="l00776"></a>00776 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e97e00979323be2fc770fef0fbaf09e0"></a><!-- doxytag: member="abstract_jb.c::jb_remove_fixed" ref="e97e00979323be2fc770fef0fbaf09e0" args="(void *jb, struct ast_frame **fout)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int jb_remove_fixed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap> <em>jb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__frame.html">ast_frame</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>fout</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00680">680</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
References <a class="el" href="frame_8h-source.html#l00147">ast_frame::data</a>, <a class="el" href="fixedjitterbuf_8c-source.html#l00343">fixed_jb_remove()</a>, and <a class="el" href="abstract__jb_8c-source.html#l00150">fixed_to_abstract_code</a>.<div class="fragment"><pre class="fragment"><a name="l00681"></a>00681 {
<a name="l00682"></a>00682    <span class="keyword">struct </span><a class="code" href="structfixed__jb.html">fixed_jb</a> *fixedjb = (<span class="keyword">struct </span><a class="code" href="structfixed__jb.html">fixed_jb</a> *) jb;
<a name="l00683"></a>00683    <span class="keyword">struct</span> <a class="code" href="structfixed__jb__frame.html">fixed_jb_frame</a> frame;
<a name="l00684"></a>00684    <span class="keywordtype">int</span> res;
<a name="l00685"></a>00685    
<a name="l00686"></a>00686    res = <a class="code" href="fixedjitterbuf_8c.html#309be910248fdadcb05a3ba8c63e1211">fixed_jb_remove</a>(fixedjb, &amp;frame);
<a name="l00687"></a>00687    *fout = frame.<a class="code" href="structast__frame.html#8d777f385d3dfec8815d20f7496026dc">data</a>;
<a name="l00688"></a>00688    
<a name="l00689"></a>00689    <span class="keywordflow">return</span> <a class="code" href="abstract__jb_8c.html#0dc69744528e5ff402e3c83332502ba7">fixed_to_abstract_code</a>[res];
<a name="l00690"></a>00690 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="695c5c2d1adcc9f5e3a0003c52fa3bbe"></a><!-- doxytag: member="abstract_jb.c::adaptive_to_abstract_code" ref="695c5c2d1adcc9f5e3a0003c52fa3bbe" args="[]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="abstract__jb_8c.html#695c5c2d1adcc9f5e3a0003c52fa3bbe">adaptive_to_abstract_code</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment">
   {<a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8">JB_IMPL_OK</a>, <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300604a98df1f81ff29fc48e301100cd8bf">JB_IMPL_NOFRAME</a>, JB_IMPL_NOFRAME, <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300d7f335805ebddd6de9e8b7bd14153290">JB_IMPL_INTERP</a>, <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a730069f14b763b659b3c924a0818a673bb27">JB_IMPL_DROP</a>, <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8">JB_IMPL_OK</a>}
</pre></div>
<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00152">152</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
Referenced by <a class="el" href="abstract__jb_8c-source.html#l00745">jb_get_adaptive()</a>, <a class="el" href="abstract__jb_8c-source.html#l00734">jb_put_adaptive()</a>, and <a class="el" href="abstract__jb_8c-source.html#l00766">jb_remove_adaptive()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="6b8fee22e2006ec98aa7402c9b20b8aa"></a><!-- doxytag: member="abstract_jb.c::avail_impl" ref="6b8fee22e2006ec98aa7402c9b20b8aa" args="[]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__jb__impl.html">ast_jb_impl</a> <a class="el" href="abstract__jb_8c.html#6b8fee22e2006ec98aa7402c9b20b8aa">avail_impl</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00112">112</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="be3b9f661237251adffe48a07508e677"></a><!-- doxytag: member="abstract_jb.c::default_impl" ref="be3b9f661237251adffe48a07508e677" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="abstract__jb_8c.html#be3b9f661237251adffe48a07508e677">default_impl</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00138">138</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="0dc69744528e5ff402e3c83332502ba7"></a><!-- doxytag: member="abstract_jb.c::fixed_to_abstract_code" ref="0dc69744528e5ff402e3c83332502ba7" args="[]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="abstract__jb_8c.html#0dc69744528e5ff402e3c83332502ba7">fixed_to_abstract_code</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment">
   {<a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300c6bca3e87869fab3539cf2c83e62cee8">JB_IMPL_OK</a>, <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a730069f14b763b659b3c924a0818a673bb27">JB_IMPL_DROP</a>, <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300d7f335805ebddd6de9e8b7bd14153290">JB_IMPL_INTERP</a>, <a class="code" href="abstract__jb_8c.html#68986ab776eb5d6b5a809a1c005a7300604a98df1f81ff29fc48e301100cd8bf">JB_IMPL_NOFRAME</a>}
</pre></div>
<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00150">150</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
Referenced by <a class="el" href="abstract__jb_8c-source.html#l00659">jb_get_fixed()</a>, <a class="el" href="abstract__jb_8c-source.html#l00637">jb_put_first_fixed()</a>, <a class="el" href="abstract__jb_8c-source.html#l00648">jb_put_fixed()</a>, and <a class="el" href="abstract__jb_8c-source.html#l00680">jb_remove_fixed()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="2f1c5231abf8192001831e787ecfa018"></a><!-- doxytag: member="abstract_jb.c::jb_get_actions" ref="2f1c5231abf8192001831e787ecfa018" args="[]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* <a class="el" href="abstract__jb_8c.html#2f1c5231abf8192001831e787ecfa018">jb_get_actions</a>[] = {&quot;Delivered&quot;, &quot;Dropped&quot;, &quot;Interpolated&quot;, &quot;No&quot;}<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="abstract__jb_8c-source.html#l00156">156</a> of file <a class="el" href="abstract__jb_8c-source.html">abstract_jb.c</a>.
<p>
Referenced by <a class="el" href="abstract__jb_8c-source.html#l00381">jb_get_and_deliver()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu May 24 22:26:52 2007 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
