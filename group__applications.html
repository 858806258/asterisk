<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (24 May 2007)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Thu May 24 22:27:57 2007</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<h1>Module: Dial plan applications</h1>Applications support the dialplan. They register dynamically with <a class="el" href="pbx_8c.html#f8e9b339fed38c405332f222cceeec40">ast_register_application()</a> and unregister with <a class="el" href="pbx_8c.html#4fc9ac8a7093a1f73637df0b9d6d6de9">ast_unregister_application()</a>.  
<a href="#_details">More...</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Files</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__adsiprog_8c.html">app_adsiprog.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Program Asterisk ADSI Scripts into phone. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__alarmreceiver_8c.html">app_alarmreceiver.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Central Station Alarm receiver for Ademco Contact ID. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__authenticate_8c.html">app_authenticate.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Execute arbitrary authenticate commands. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__cdr_8c.html">app_cdr.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Applications connected with CDR engine. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__chanisavail_8c.html">app_chanisavail.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if Channel is Available. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__channelredirect_8c.html">app_channelredirect.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ChannelRedirect application. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__chanspy_8c.html">app_chanspy.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ChanSpy: Listen in on any channel. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__controlplayback_8c.html">app_controlplayback.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Trivial application to control playback of a sound file. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__db_8c.html">app_db.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Database access functions. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__dial_8c.html">app_dial.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">dial() &amp; retrydial() - Trivial application to dial a channel and send an URL on answer <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__dictate_8c.html">app_dictate.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Virtual Dictation Machine Application For Asterisk. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__directed__pickup_8c.html">app_directed_pickup.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Directed Call Pickup Support. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__directory_8c.html">app_directory.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Provide a directory of extensions. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__disa_8c.html">app_disa.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">DISA -- Direct Inward System Access Application. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__dumpchan_8c.html">app_dumpchan.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Application to dump channel variables. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__echo_8c.html">app_echo.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Echo application -- play back what you hear to evaluate latency. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__exec_8c.html">app_exec.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Exec application. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__externalivr_8c.html">app_externalivr.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">External IVR application interface. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__festival_8c.html">app_festival.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Connect to festival. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__flash_8c.html">app_flash.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">App to flash a zap trunk. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__followme_8c.html">app_followme.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find-Me Follow-Me application. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__forkcdr_8c.html">app_forkcdr.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fork CDR application. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__getcpeid_8c.html">app_getcpeid.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get ADSI CPE ID. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__ices_8c.html">app_ices.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stream to an icecast server via ICES (see contrib/asterisk-ices.xml). <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__image_8c.html">app_image.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">App to transmit an image. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__ivrdemo_8c.html">app_ivrdemo.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">IVR Demo application. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__macro_8c.html">app_macro.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dial plan macro Implementation. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__meetme_8c.html">app_meetme.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Meet me conference bridge and Shared Line Appearances. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__milliwatt_8c.html">app_milliwatt.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Digital Milliwatt Test. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__minivm_8c.html">app_minivm.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">MiniVoiceMail - A Minimal Voicemail System for Asterisk. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__mixmonitor_8c.html">app_mixmonitor.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">MixMonitor() - Record a call and mix the audio during the recording. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__morsecode_8c.html">app_morsecode.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Morsecode application. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__mp3_8c.html">app_mp3.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Silly application to play an MP3 file -- uses mpg123. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__nbscat_8c.html">app_nbscat.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Silly application to play an NBScat file -- uses nbscat8k. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__osplookup_8c.html">app_osplookup.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open Settlement Protocol (OSP) Applications. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__page_8c.html">app_page.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="adsistub_8c.html#71860c77c6745379b0d44304d66b6a13">page()</a> - Paging application <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__parkandannounce_8c.html">app_parkandannounce.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ParkAndAnnounce application for Asterisk. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__playback_8c.html">app_playback.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Trivial application to playback a sound file. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__privacy_8c.html">app_privacy.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Block all calls without Caller*ID, require phone # to be entered. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__queue_8c.html">app_queue.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True call queues with optional send URL on answer. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__read_8c.html">app_read.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Trivial application to read a variable. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__readfile_8c.html">app_readfile.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ReadFile application -- Reads in a File for you. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__record_8c.html">app_record.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Trivial application to record a sound file. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__sayunixtime_8c.html">app_sayunixtime.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">SayUnixTime application. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__senddtmf_8c.html">app_senddtmf.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">App to send DTMF digits. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__sendtext_8c.html">app_sendtext.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">App to transmit a text message. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__setcallerid_8c.html">app_setcallerid.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">App to set callerid presentation. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__skel_8c.html">app_skel.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Skeleton application. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__sms_8c.html">app_sms.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">SMS application - ETSI ES 201 912 protocol 1 implementation. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__softhangup_8c.html">app_softhangup.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">SoftHangup application. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__speech__utils_8c.html">app_speech_utils.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Speech Recognition Utility Applications. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__stack_8c.html">app_stack.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stack applications Gosub, Return, etc. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__system_8c.html">app_system.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Execute arbitrary system commands. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__talkdetect_8c.html">app_talkdetect.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Playback a file with audio detect. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__test_8c.html">app_test.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Applications to test connection and produce report in text file. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__transfer_8c.html">app_transfer.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Transfer a caller. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__url_8c.html">app_url.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">App to transmit a URL. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__userevent_8c.html">app_userevent.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">UserEvent application -- send manager event. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__verbose_8c.html">app_verbose.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Verbose logging application. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__voicemail_8c.html">app_voicemail.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Comedian Mail - Voicemail System. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__waitforring_8c.html">app_waitforring.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait for Ring Application. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__waitforsilence_8c.html">app_waitforsilence.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait for Silence<ul>
<li>Waits for up to 'x' milliseconds of silence, 'y' times <br>
</li><li>WaitForSilence(500,2) will wait for 1/2 second of silence, twice <br>
</li><li>WaitForSilence(1000,1) will wait for 1 second of silence, once <br>
</li><li>WaitForSilence(300,3,10) will wait for 300ms of silence, 3 times, and return after 10sec <br>
. </li></ul>
<br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__while_8c.html">app_while.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">While Loop Implementation. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__zapateller_8c.html">app_zapateller.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Playback the special information tone to get rid of telemarketers. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__zapbarge_8c.html">app_zapbarge.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Zap Barge support. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__zapras_8c.html">app_zapras.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Execute an ISDN RAS. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__zapscan_8c.html">app_zapscan.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Zap Scanner. <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__realtime_8c.html">res_realtime.c</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">RealTime CLI. <br></td></tr>

<p>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__applications.html#gda3addba90830e6694a17448d210ac7c">iax2_prov_app</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, void *data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__applications.html#g9e8b90360b71c32339740438dadbc9b7">pbx_builtin_answer</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *, void *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__applications.html#gd4c3c76462c301612abf961fb2610a87">pbx_builtin_background</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *, void *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__applications.html#g8224c9f80e837c7f2f815ddd5b18aee6">pbx_builtin_busy</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *, void *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__applications.html#gba7a6211f869def5ad321c8c89825e82">pbx_builtin_congestion</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *, void *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__applications.html#ga8b2a99ff270289f2f4bd7b800d945bc">pbx_builtin_execiftime</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *, void *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__applications.html#g810e6cb9f297016b6c6e22171fba4458">pbx_builtin_goto</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *, void *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__applications.html#ga7c5739e43ec98bbb1df5e22a3d9fcda">pbx_builtin_gotoiftime</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *, void *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__applications.html#g048e8de501777ba14f7528f09d4cc9aa">pbx_builtin_hangup</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *, void *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__applications.html#ge86c7e57c3acc2b6caee0443da456f95">pbx_builtin_progress</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *, void *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__applications.html#gabae899e725428c8520f8c9dea9dc5fd">pbx_builtin_resetcdr</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *, void *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__applications.html#gbff0064869864e134fce7646a4c60c41">pbx_builtin_ringing</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *, void *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__applications.html#gbe127431377bef549315ff7f89087767">pbx_builtin_setamaflags</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *, void *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__applications.html#gdee0c48cbf7f9525689d12c23452752c">pbx_builtin_wait</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *, void *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__applications.html#g15e89afaf5b7b1ccfc3ffe71892508ef">pbx_builtin_waitexten</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *, void *)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Applications support the dialplan. They register dynamically with <a class="el" href="pbx_8c.html#f8e9b339fed38c405332f222cceeec40">ast_register_application()</a> and unregister with <a class="el" href="pbx_8c.html#4fc9ac8a7093a1f73637df0b9d6d6de9">ast_unregister_application()</a>. 
<p>
<h2><a class="anchor" name="app_generic">
Asterisk Dial Plan Applications</a></h2>
<dl compact><dt><b>See also</b></dt><dd><ul>
<li><a class="el" href="group__functions.html">Module: Dial plan functions</a> </li>
</ul>
</dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="gda3addba90830e6694a17448d210ac7c"></a><!-- doxytag: member="chan_iax2.c::iax2_prov_app" ref="gda3addba90830e6694a17448d210ac7c" args="(struct ast_channel *chan, void *data)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int iax2_prov_app           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
iax2provision 
<p>
Definition at line <a class="el" href="chan__iax2_8c-source.html#l08137">8137</a> of file <a class="el" href="chan__iax2_8c-source.html">chan_iax2.c</a>.
<p>
References <a class="el" href="utils_8c-source.html#l00493">ast_inet_ntoa()</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="chan__iax2_8c-source.html#l08076">iax2_provision()</a>, <a class="el" href="asterisk_8c-source.html#l00163">option_verbose</a>, <a class="el" href="chan__iax2_8c-source.html#l00118">PTR_TO_CALLNO</a>, <a class="el" href="channel_8h-source.html#l00385">ast_channel::tech</a>, <a class="el" href="channel_8h-source.html#l00388">ast_channel::tech_pvt</a>, and <a class="el" href="logger_8h-source.html#l00045">VERBOSE_PREFIX_3</a>.
<p>
Referenced by <a class="el" href="chan__iax2_8c-source.html#l10425">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l08138"></a>08138 {
<a name="l08139"></a>08139    <span class="keywordtype">int</span> res;
<a name="l08140"></a>08140    <span class="keywordtype">char</span> *sdata;
<a name="l08141"></a>08141    <span class="keywordtype">char</span> *opts;
<a name="l08142"></a>08142    <span class="keywordtype">int</span> force =0;
<a name="l08143"></a>08143    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> callno = <a class="code" href="chan__iax2_8c.html#637f3c1252d1f164fae7615fc3ff0aec">PTR_TO_CALLNO</a>(chan-&gt;<a class="code" href="structast__channel.html#25ab83fd9a6fe57f4133e359f88bb9d1">tech_pvt</a>);
<a name="l08144"></a>08144    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(data))
<a name="l08145"></a>08145       data = <span class="stringliteral">"default"</span>;
<a name="l08146"></a>08146    sdata = <a class="code" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>(data);
<a name="l08147"></a>08147    opts = strchr(sdata, <span class="charliteral">'|'</span>);
<a name="l08148"></a>08148    <span class="keywordflow">if</span> (opts)
<a name="l08149"></a>08149       *opts=<span class="charliteral">'\0'</span>;
<a name="l08150"></a>08150 
<a name="l08151"></a>08151    <span class="keywordflow">if</span> (chan-&gt;<a class="code" href="structast__channel.html#d9f9133fb120cd6096870bc2b496805b">tech</a> != &amp;<a class="code" href="chan__iax2_8c.html#2e7d35def7cc5d1c7c177bafca57ab12">iax2_tech</a>) {
<a name="l08152"></a>08152       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#bbf95aad74d847cd4bcb129604f798cd">LOG_NOTICE</a>, <span class="stringliteral">"Can't provision a non-IAX device!\n"</span>);
<a name="l08153"></a>08153       <span class="keywordflow">return</span> -1;
<a name="l08154"></a>08154    } 
<a name="l08155"></a>08155    <span class="keywordflow">if</span> (!callno || !<a class="code" href="chan__iax2_8c.html#424855a0008435fabcfc0abc96feb2d1">iaxs</a>[callno] || !<a class="code" href="chan__iax2_8c.html#424855a0008435fabcfc0abc96feb2d1">iaxs</a>[callno]-&gt;addr.sin_addr.s_addr) {
<a name="l08156"></a>08156       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#bbf95aad74d847cd4bcb129604f798cd">LOG_NOTICE</a>, <span class="stringliteral">"Can't provision something with no IP?\n"</span>);
<a name="l08157"></a>08157       <span class="keywordflow">return</span> -1;
<a name="l08158"></a>08158    }
<a name="l08159"></a>08159    res = <a class="code" href="chan__iax2_8c.html#8d0cc699a7e646d225fe9b709506a5f7">iax2_provision</a>(&amp;<a class="code" href="chan__iax2_8c.html#424855a0008435fabcfc0abc96feb2d1">iaxs</a>[callno]-&gt;addr, <a class="code" href="chan__iax2_8c.html#424855a0008435fabcfc0abc96feb2d1">iaxs</a>[callno]-&gt;sockfd, NULL, sdata, force);
<a name="l08160"></a>08160    <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 2)
<a name="l08161"></a>08161       <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<a class="code" href="logger_8h.html#aefd5a67b7464040f5352e4ecdc535ca">VERBOSE_PREFIX_3</a> <span class="stringliteral">"Provisioned IAXY at '%s' with '%s'= %d\n"</span>, 
<a name="l08162"></a>08162       <a class="code" href="utils_8c.html#d5490a9b672272bd2f20ee1e5b72c11e">ast_inet_ntoa</a>(<a class="code" href="chan__iax2_8c.html#424855a0008435fabcfc0abc96feb2d1">iaxs</a>[callno]-&gt;addr.sin_addr),
<a name="l08163"></a>08163       sdata, res);
<a name="l08164"></a>08164    <span class="keywordflow">return</span> res;
<a name="l08165"></a>08165 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="g9e8b90360b71c32339740438dadbc9b7"></a><!-- doxytag: member="pbx.c::pbx_builtin_answer" ref="g9e8b90360b71c32339740438dadbc9b7" args="(struct ast_channel *, void *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pbx_builtin_answer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="pbx_8c-source.html#l05422">5422</a> of file <a class="el" href="pbx_8c-source.html">pbx.c</a>.
<p>
References <a class="el" href="channel_8c-source.html#l01682">__ast_answer()</a>, <a class="el" href="channel_8h-source.html#l00435">ast_channel::_state</a>, <a class="el" href="channel_8h.html#c04acac682ff0cff5eda96378318b87aea66d48cb3e294b70a35486fb5fe2ce6">AST_STATE_UP</a>, and <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>.<div class="fragment"><pre class="fragment"><a name="l05423"></a>05423 {
<a name="l05424"></a>05424    <span class="keywordtype">int</span> delay = 0;
<a name="l05425"></a>05425 
<a name="l05426"></a>05426    <span class="keywordflow">if</span> ((chan-&gt;<a class="code" href="structast__channel.html#fb303761f789500fe4c0c9938c1c0245">_state</a> != <a class="code" href="channel_8h.html#c04acac682ff0cff5eda96378318b87aea66d48cb3e294b70a35486fb5fe2ce6">AST_STATE_UP</a>) &amp;&amp; !<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(data))
<a name="l05427"></a>05427       delay = atoi(data);
<a name="l05428"></a>05428 
<a name="l05429"></a>05429    <span class="keywordflow">return</span> <a class="code" href="channel_8c.html#71deef3d79d1ff4755afdf2b2cfffdda">__ast_answer</a>(chan, delay);
<a name="l05430"></a>05430 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="gd4c3c76462c301612abf961fb2610a87"></a><!-- doxytag: member="pbx.c::pbx_builtin_background" ref="gd4c3c76462c301612abf961fb2610a87" args="(struct ast_channel *, void *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pbx_builtin_background           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="pbx_8c-source.html#l05642">5642</a> of file <a class="el" href="pbx_8c-source.html">pbx.c</a>.
<p>
References <a class="el" href="channel_8h-source.html#l00435">ast_channel::_state</a>, <a class="el" href="channel_8c-source.html#l01724">ast_answer()</a>, <a class="el" href="app_8h-source.html#l00246">AST_APP_ARG</a>, <a class="el" href="app_8c-source.html#l01378">ast_app_parse_options()</a>, <a class="el" href="app_8h-source.html#l00263">AST_DECLARE_APP_ARGS</a>, <a class="el" href="file_8h-source.html#l00040">AST_DIGIT_ANY</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="app_8h-source.html#l00279">AST_STANDARD_APP_ARGS</a>, <a class="el" href="channel_8h.html#c04acac682ff0cff5eda96378318b87aea66d48cb3e294b70a35486fb5fe2ce6">AST_STATE_UP</a>, <a class="el" href="file_8c-source.html#l00131">ast_stopstream()</a>, <a class="el" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>, <a class="el" href="file_8c-source.html#l00781">ast_streamfile()</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="utils_8h-source.html#l00067">ast_test_flag</a>, <a class="el" href="file_8c-source.html#l01089">ast_waitstream()</a>, <a class="el" href="file_8c-source.html#l01100">ast_waitstream_exten()</a>, <a class="el" href="pbx_8c-source.html#l00093">BACKGROUND_MATCHEXTEN</a>, <a class="el" href="pbx_8c-source.html#l00092">BACKGROUND_NOANSWER</a>, <a class="el" href="pbx_8c-source.html#l00094">BACKGROUND_PLAYBACK</a>, <a class="el" href="pbx_8c-source.html#l00091">BACKGROUND_SKIP</a>, <a class="el" href="channel_8h-source.html#l00441">ast_channel::context</a>, <a class="el" href="channel_8h-source.html#l00442">ast_channel::exten</a>, <a class="el" href="utils_8h-source.html#l00147">ast_flags::flags</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="chan__mgcp_8c-source.html#l01734">parse()</a>, <a class="el" href="pbx_8c-source.html#l05821">pbx_builtin_setvar_helper()</a>, <a class="el" href="channel_8h-source.html#l00443">ast_channel::priority</a>, and <a class="el" href="strcompat_8c-source.html#l00035">strsep()</a>.<div class="fragment"><pre class="fragment"><a name="l05643"></a>05643 {
<a name="l05644"></a>05644    <span class="keywordtype">int</span> res = 0;
<a name="l05645"></a>05645    <span class="keywordtype">int</span> mres = 0;
<a name="l05646"></a>05646    <span class="keyword">struct </span><a class="code" href="structast__flags.html">ast_flags</a> flags = {0};
<a name="l05647"></a>05647    <span class="keywordtype">char</span> *<a class="code" href="chan__mgcp_8c.html#96d2a4ae057584ce23ca92b03303bd2f">parse</a>;
<a name="l05648"></a>05648    <a class="code" href="app_8h.html#f2237dba0ffbe2f9ec8209c3f9fe82a7">AST_DECLARE_APP_ARGS</a>(args,
<a name="l05649"></a>05649       <a class="code" href="app_8h.html#a6b5292002b488b8ce11fedacb317800">AST_APP_ARG</a>(filename);
<a name="l05650"></a>05650       <a class="code" href="app_8h.html#a6b5292002b488b8ce11fedacb317800">AST_APP_ARG</a>(options);
<a name="l05651"></a>05651       <a class="code" href="app_8h.html#a6b5292002b488b8ce11fedacb317800">AST_APP_ARG</a>(lang);
<a name="l05652"></a>05652       <a class="code" href="app_8h.html#a6b5292002b488b8ce11fedacb317800">AST_APP_ARG</a>(<a class="code" href="chan__alsa_8c.html#c1ae8ba118483c4c23841d72b5e7ebbb">context</a>);
<a name="l05653"></a>05653    );
<a name="l05654"></a>05654 
<a name="l05655"></a>05655    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(data)) {
<a name="l05656"></a>05656       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Background requires an argument (filename)\n"</span>);
<a name="l05657"></a>05657       <span class="keywordflow">return</span> -1;
<a name="l05658"></a>05658    }
<a name="l05659"></a>05659 
<a name="l05660"></a>05660    parse = <a class="code" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>(data);
<a name="l05661"></a>05661 
<a name="l05662"></a>05662    <a class="code" href="app_8h.html#c086f828d1f39897759c5668a4d20127">AST_STANDARD_APP_ARGS</a>(args, parse);
<a name="l05663"></a>05663 
<a name="l05664"></a>05664    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(args.lang))
<a name="l05665"></a>05665       args.lang = (<span class="keywordtype">char</span> *)chan-&gt;language; <span class="comment">/* XXX this is const */</span>
<a name="l05666"></a>05666 
<a name="l05667"></a>05667    if (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(args.context))
<a name="l05668"></a>05668       args.<a class="code" href="structast__channel.html#c1ae8ba118483c4c23841d72b5e7ebbb">context</a> = chan-&gt;<a class="code" href="structast__channel.html#c1ae8ba118483c4c23841d72b5e7ebbb">context</a>;
<a name="l05669"></a>05669 
<a name="l05670"></a>05670    <span class="keywordflow">if</span> (args.options) {
<a name="l05671"></a>05671       <span class="keywordflow">if</span> (!strcasecmp(args.options, <span class="stringliteral">"skip"</span>))
<a name="l05672"></a>05672          flags.<a class="code" href="structast__flags.html#4e5868d676cb634aa75b125a0f741abf">flags</a> = <a class="code" href="pbx_8c.html#47b32a985ce6a66e0eec79f36b8e34db">BACKGROUND_SKIP</a>;
<a name="l05673"></a>05673       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(args.options, <span class="stringliteral">"noanswer"</span>))
<a name="l05674"></a>05674          flags.<a class="code" href="structast__flags.html#4e5868d676cb634aa75b125a0f741abf">flags</a> = <a class="code" href="pbx_8c.html#c178c7499d370e08f7562414095a17fc">BACKGROUND_NOANSWER</a>;
<a name="l05675"></a>05675       <span class="keywordflow">else</span>
<a name="l05676"></a>05676          <a class="code" href="app_8c.html#54fd988ba7570b2d55d749d4d07372d3">ast_app_parse_options</a>(background_opts, &amp;flags, NULL, args.options);
<a name="l05677"></a>05677    }
<a name="l05678"></a>05678 
<a name="l05679"></a>05679    <span class="comment">/* Answer if need be */</span>
<a name="l05680"></a>05680    <span class="keywordflow">if</span> (chan-&gt;<a class="code" href="structast__channel.html#fb303761f789500fe4c0c9938c1c0245">_state</a> != <a class="code" href="channel_8h.html#c04acac682ff0cff5eda96378318b87aea66d48cb3e294b70a35486fb5fe2ce6">AST_STATE_UP</a>) {
<a name="l05681"></a>05681       <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(&amp;flags, <a class="code" href="pbx_8c.html#47b32a985ce6a66e0eec79f36b8e34db">BACKGROUND_SKIP</a>)) {
<a name="l05682"></a>05682          <span class="keywordflow">goto</span> done;
<a name="l05683"></a>05683       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(&amp;flags, <a class="code" href="pbx_8c.html#c178c7499d370e08f7562414095a17fc">BACKGROUND_NOANSWER</a>)) {
<a name="l05684"></a>05684          res = <a class="code" href="channel_8c.html#9e089c979b071a1df466a09497fdfa31">ast_answer</a>(chan);
<a name="l05685"></a>05685       }
<a name="l05686"></a>05686    }
<a name="l05687"></a>05687 
<a name="l05688"></a>05688    <span class="keywordflow">if</span> (!res) {
<a name="l05689"></a>05689       <span class="keywordtype">char</span> *back = args.filename;
<a name="l05690"></a>05690       <span class="keywordtype">char</span> *front;
<a name="l05691"></a>05691 
<a name="l05692"></a>05692       <a class="code" href="file_8c.html#460c61941bbb0132a2513ec9d5529e0c">ast_stopstream</a>(chan);      <span class="comment">/* Stop anything playing */</span>
<a name="l05693"></a>05693       <span class="comment">/* Stream the list of files */</span>
<a name="l05694"></a>05694       <span class="keywordflow">while</span> (!res &amp;&amp; (front = <a class="code" href="strcompat_8c.html#a541370456ac872bdb4bdcc462fc6a6e">strsep</a>(&amp;back, <span class="stringliteral">"&amp;"</span>)) ) {
<a name="l05695"></a>05695          <span class="keywordflow">if</span> ( (res = <a class="code" href="file_8c.html#323e58584ef6ab2486be5b347b23ebe0">ast_streamfile</a>(chan, front, args.lang)) ) {
<a name="l05696"></a>05696             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"ast_streamfile failed on %s for %s\n"</span>, chan-&gt;name, (<span class="keywordtype">char</span>*)data);
<a name="l05697"></a>05697             res = 0;
<a name="l05698"></a>05698             mres = 1;
<a name="l05699"></a>05699             <span class="keywordflow">break</span>;
<a name="l05700"></a>05700          }
<a name="l05701"></a>05701          <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(&amp;flags, <a class="code" href="pbx_8c.html#f26f6fb0e3fec99d25e1193b93b50e7e">BACKGROUND_PLAYBACK</a>)) {
<a name="l05702"></a>05702             res = <a class="code" href="file_8c.html#634a25400a6a724d278b9129b9b5181b">ast_waitstream</a>(chan, <span class="stringliteral">""</span>);
<a name="l05703"></a>05703          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(&amp;flags, <a class="code" href="pbx_8c.html#a0215904ef3bd64698051c47911b09e8">BACKGROUND_MATCHEXTEN</a>)) {
<a name="l05704"></a>05704             res = <a class="code" href="file_8c.html#24c25c9a9f196587f0ad5f466c059d22">ast_waitstream_exten</a>(chan, args.<a class="code" href="structast__channel.html#c1ae8ba118483c4c23841d72b5e7ebbb">context</a>);
<a name="l05705"></a>05705          } <span class="keywordflow">else</span> {
<a name="l05706"></a>05706             res = <a class="code" href="file_8c.html#634a25400a6a724d278b9129b9b5181b">ast_waitstream</a>(chan, <a class="code" href="file_8h.html#4da2b9e8d896d755e4003168efa23b45">AST_DIGIT_ANY</a>);
<a name="l05707"></a>05707          }
<a name="l05708"></a>05708          <a class="code" href="file_8c.html#460c61941bbb0132a2513ec9d5529e0c">ast_stopstream</a>(chan);
<a name="l05709"></a>05709       }
<a name="l05710"></a>05710    }
<a name="l05711"></a>05711    <span class="keywordflow">if</span> (args.context != chan-&gt;<a class="code" href="structast__channel.html#c1ae8ba118483c4c23841d72b5e7ebbb">context</a> &amp;&amp; res) {
<a name="l05712"></a>05712       snprintf(chan-&gt;<a class="code" href="structast__channel.html#5aedfeaeaac21e5e5f297360633ea9a3">exten</a>, <span class="keyword">sizeof</span>(chan-&gt;<a class="code" href="structast__channel.html#5aedfeaeaac21e5e5f297360633ea9a3">exten</a>), <span class="stringliteral">"%c"</span>, res);
<a name="l05713"></a>05713       ast_copy_string(chan-&gt;<a class="code" href="structast__channel.html#c1ae8ba118483c4c23841d72b5e7ebbb">context</a>, args.context, <span class="keyword">sizeof</span>(chan-&gt;<a class="code" href="structast__channel.html#c1ae8ba118483c4c23841d72b5e7ebbb">context</a>));
<a name="l05714"></a>05714       chan-&gt;<a class="code" href="structast__channel.html#b988295c268025b49dfb3df26171ddc3">priority</a> = 0;
<a name="l05715"></a>05715       res = 0;
<a name="l05716"></a>05716    }
<a name="l05717"></a>05717 done:
<a name="l05718"></a>05718    <a class="code" href="pbx_8c.html#64407c916a2de6ae3f0efeca471c1b1d">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">"BACKGROUNDSTATUS"</span>, mres ? <span class="stringliteral">"FAILED"</span> : <span class="stringliteral">"SUCCESS"</span>);
<a name="l05719"></a>05719    <span class="keywordflow">return</span> res;
<a name="l05720"></a>05720 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="g8224c9f80e837c7f2f815ddd5b18aee6"></a><!-- doxytag: member="pbx.c::pbx_builtin_busy" ref="g8224c9f80e837c7f2f815ddd5b18aee6" args="(struct ast_channel *, void *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pbx_builtin_busy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="pbx_8c-source.html#l05394">5394</a> of file <a class="el" href="pbx_8c-source.html">pbx.c</a>.
<p>
References <a class="el" href="channel_8h-source.html#l00435">ast_channel::_state</a>, <a class="el" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f3898c0ff5febeb7ff9d8880e2bc7f1d6ca1">AST_CONTROL_BUSY</a>, <a class="el" href="channel_8c-source.html#l02448">ast_indicate()</a>, <a class="el" href="channel_8c-source.html#l03728">ast_setstate()</a>, <a class="el" href="channel_8h.html#c04acac682ff0cff5eda96378318b87a2081397aa15f6ea9b289237043aa1d1b">AST_STATE_BUSY</a>, <a class="el" href="channel_8h.html#c04acac682ff0cff5eda96378318b87aea66d48cb3e294b70a35486fb5fe2ce6">AST_STATE_UP</a>, and <a class="el" href="pbx_8c-source.html#l05351">wait_for_hangup()</a>.
<p>
Referenced by <a class="el" href="pbx_8c-source.html#l02250">__ast_pbx_run()</a>.<div class="fragment"><pre class="fragment"><a name="l05395"></a>05395 {
<a name="l05396"></a>05396    <a class="code" href="channel_8c.html#90b88ba4c6f05bc0b655583c899c0269">ast_indicate</a>(chan, <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f3898c0ff5febeb7ff9d8880e2bc7f1d6ca1">AST_CONTROL_BUSY</a>);
<a name="l05397"></a>05397    <span class="comment">/* Don't change state of an UP channel, just indicate</span>
<a name="l05398"></a>05398 <span class="comment">      busy in audio */</span>
<a name="l05399"></a>05399    <span class="keywordflow">if</span> (chan-&gt;<a class="code" href="structast__channel.html#fb303761f789500fe4c0c9938c1c0245">_state</a> != <a class="code" href="channel_8h.html#c04acac682ff0cff5eda96378318b87aea66d48cb3e294b70a35486fb5fe2ce6">AST_STATE_UP</a>)
<a name="l05400"></a>05400       <a class="code" href="channel_8c.html#c3e562760bdf7c23ebd561ce1352399e">ast_setstate</a>(chan, <a class="code" href="channel_8h.html#c04acac682ff0cff5eda96378318b87a2081397aa15f6ea9b289237043aa1d1b">AST_STATE_BUSY</a>);
<a name="l05401"></a>05401    <a class="code" href="pbx_8c.html#b69d22624170b4f0d028586dceca5c98">wait_for_hangup</a>(chan, data);
<a name="l05402"></a>05402    <span class="keywordflow">return</span> -1;
<a name="l05403"></a>05403 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="gba7a6211f869def5ad321c8c89825e82"></a><!-- doxytag: member="pbx.c::pbx_builtin_congestion" ref="gba7a6211f869def5ad321c8c89825e82" args="(struct ast_channel *, void *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pbx_builtin_congestion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="pbx_8c-source.html#l05408">5408</a> of file <a class="el" href="pbx_8c-source.html">pbx.c</a>.
<p>
References <a class="el" href="channel_8h-source.html#l00435">ast_channel::_state</a>, <a class="el" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389fafe5e503d0d74218854b57e66282419">AST_CONTROL_CONGESTION</a>, <a class="el" href="channel_8c-source.html#l02448">ast_indicate()</a>, <a class="el" href="channel_8c-source.html#l03728">ast_setstate()</a>, <a class="el" href="channel_8h.html#c04acac682ff0cff5eda96378318b87a2081397aa15f6ea9b289237043aa1d1b">AST_STATE_BUSY</a>, <a class="el" href="channel_8h.html#c04acac682ff0cff5eda96378318b87aea66d48cb3e294b70a35486fb5fe2ce6">AST_STATE_UP</a>, and <a class="el" href="pbx_8c-source.html#l05351">wait_for_hangup()</a>.
<p>
Referenced by <a class="el" href="pbx_8c-source.html#l02250">__ast_pbx_run()</a>.<div class="fragment"><pre class="fragment"><a name="l05409"></a>05409 {
<a name="l05410"></a>05410    <a class="code" href="channel_8c.html#90b88ba4c6f05bc0b655583c899c0269">ast_indicate</a>(chan, <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389fafe5e503d0d74218854b57e66282419">AST_CONTROL_CONGESTION</a>);
<a name="l05411"></a>05411    <span class="comment">/* Don't change state of an UP channel, just indicate</span>
<a name="l05412"></a>05412 <span class="comment">      congestion in audio */</span>
<a name="l05413"></a>05413    <span class="keywordflow">if</span> (chan-&gt;<a class="code" href="structast__channel.html#fb303761f789500fe4c0c9938c1c0245">_state</a> != <a class="code" href="channel_8h.html#c04acac682ff0cff5eda96378318b87aea66d48cb3e294b70a35486fb5fe2ce6">AST_STATE_UP</a>)
<a name="l05414"></a>05414       <a class="code" href="channel_8c.html#c3e562760bdf7c23ebd561ce1352399e">ast_setstate</a>(chan, <a class="code" href="channel_8h.html#c04acac682ff0cff5eda96378318b87a2081397aa15f6ea9b289237043aa1d1b">AST_STATE_BUSY</a>);
<a name="l05415"></a>05415    <a class="code" href="pbx_8c.html#b69d22624170b4f0d028586dceca5c98">wait_for_hangup</a>(chan, data);
<a name="l05416"></a>05416    <span class="keywordflow">return</span> -1;
<a name="l05417"></a>05417 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga8b2a99ff270289f2f4bd7b800d945bc"></a><!-- doxytag: member="pbx.c::pbx_builtin_execiftime" ref="ga8b2a99ff270289f2f4bd7b800d945bc" args="(struct ast_channel *, void *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pbx_builtin_execiftime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="pbx_8c-source.html#l05525">5525</a> of file <a class="el" href="pbx_8c-source.html">pbx.c</a>.
<p>
References <a class="el" href="pbx_8c-source.html#l04236">ast_build_timing()</a>, <a class="el" href="pbx_8c-source.html#l04262">ast_check_timing()</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="pbx_8c-source.html#l00509">pbx_exec()</a>, <a class="el" href="pbx_8c-source.html#l00547">pbx_findapp()</a>, <a class="el" href="aesopt_8h-source.html#l00399">s</a>, <a class="el" href="strings_8h-source.html#l00045">S_OR</a>, and <a class="el" href="strcompat_8c-source.html#l00035">strsep()</a>.<div class="fragment"><pre class="fragment"><a name="l05526"></a>05526 {
<a name="l05527"></a>05527    <span class="keywordtype">char</span> *<a class="code" href="aesopt_8h.html#8d6242bc80162ac99dd4d368eabe77cc">s</a>, *appname;
<a name="l05528"></a>05528    <span class="keyword">struct </span><a class="code" href="structast__timing.html">ast_timing</a> timing;
<a name="l05529"></a>05529    <span class="keyword">struct </span><a class="code" href="structast__app.html">ast_app</a> *<a class="code" href="adsistub_8c.html#d2a57dc1d883fd21fb9951699df71cc7">app</a>;
<a name="l05530"></a>05530    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *usage = <span class="stringliteral">"ExecIfTime requires an argument:\n  &lt;time range&gt;|&lt;days of week&gt;|&lt;days of month&gt;|&lt;months&gt;?&lt;appname&gt;[|&lt;appargs&gt;]"</span>;
<a name="l05531"></a>05531 
<a name="l05532"></a>05532    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(data)) {
<a name="l05533"></a>05533       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"%s\n"</span>, usage);
<a name="l05534"></a>05534       <span class="keywordflow">return</span> -1;
<a name="l05535"></a>05535    }
<a name="l05536"></a>05536 
<a name="l05537"></a>05537    appname = <a class="code" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>(data);
<a name="l05538"></a>05538 
<a name="l05539"></a>05539    s = <a class="code" href="strcompat_8c.html#a541370456ac872bdb4bdcc462fc6a6e">strsep</a>(&amp;appname,<span class="stringliteral">"?"</span>);  <span class="comment">/* Separate the timerange and application name/data */</span>
<a name="l05540"></a>05540    <span class="keywordflow">if</span> (!appname) {   <span class="comment">/* missing application */</span>
<a name="l05541"></a>05541       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"%s\n"</span>, usage);
<a name="l05542"></a>05542       <span class="keywordflow">return</span> -1;
<a name="l05543"></a>05543    }
<a name="l05544"></a>05544 
<a name="l05545"></a>05545    <span class="keywordflow">if</span> (!<a class="code" href="pbx_8c.html#b45b278cc04e70970e83433d6e9c60a8">ast_build_timing</a>(&amp;timing, s)) {
<a name="l05546"></a>05546       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Invalid Time Spec: %s\nCorrect usage: %s\n"</span>, s, usage);
<a name="l05547"></a>05547       <span class="keywordflow">return</span> -1;
<a name="l05548"></a>05548    }
<a name="l05549"></a>05549 
<a name="l05550"></a>05550    <span class="keywordflow">if</span> (!<a class="code" href="pbx_8c.html#4dee27d639900ebea4f8b3c0366a197f">ast_check_timing</a>(&amp;timing))  <span class="comment">/* outside the valid time window, just return */</span>
<a name="l05551"></a>05551       <span class="keywordflow">return</span> 0;
<a name="l05552"></a>05552 
<a name="l05553"></a>05553    <span class="comment">/* now split appname|appargs */</span>
<a name="l05554"></a>05554    <span class="keywordflow">if</span> ((s = strchr(appname, <span class="charliteral">'|'</span>)))
<a name="l05555"></a>05555       *s++ = <span class="charliteral">'\0'</span>;
<a name="l05556"></a>05556 
<a name="l05557"></a>05557    <span class="keywordflow">if</span> ((app = <a class="code" href="pbx_8c.html#d407cf204ec8fc50e5a578c8c17e0cb5">pbx_findapp</a>(appname))) {
<a name="l05558"></a>05558       <span class="keywordflow">return</span> <a class="code" href="pbx_8c.html#5970fbcb6a776848d11bf1c8ddb1c948">pbx_exec</a>(chan, app, <a class="code" href="strings_8h.html#a5b939153ec133be2de0e3647df143f4">S_OR</a>(s, <span class="stringliteral">""</span>));
<a name="l05559"></a>05559    } <span class="keywordflow">else</span> {
<a name="l05560"></a>05560       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Cannot locate application %s\n"</span>, appname);
<a name="l05561"></a>05561       <span class="keywordflow">return</span> -1;
<a name="l05562"></a>05562    }
<a name="l05563"></a>05563 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="g810e6cb9f297016b6c6e22171fba4458"></a><!-- doxytag: member="pbx.c::pbx_builtin_goto" ref="g810e6cb9f297016b6c6e22171fba4458" args="(struct ast_channel *, void *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pbx_builtin_goto           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Goto 
<p>
Definition at line <a class="el" href="pbx_8c-source.html#l05725">5725</a> of file <a class="el" href="pbx_8c-source.html">pbx.c</a>.
<p>
References <a class="el" href="pbx_8c-source.html#l06287">ast_parseable_goto()</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="channel_8h-source.html#l00441">ast_channel::context</a>, <a class="el" href="channel_8h-source.html#l00442">ast_channel::exten</a>, <a class="el" href="asterisk_8c-source.html#l00163">option_verbose</a>, <a class="el" href="channel_8h-source.html#l00443">ast_channel::priority</a>, and <a class="el" href="logger_8h-source.html#l00045">VERBOSE_PREFIX_3</a>.
<p>
Referenced by <a class="el" href="pbx_8c-source.html#l05957">pbx_builtin_gotoif()</a>, and <a class="el" href="pbx_8c-source.html#l05499">pbx_builtin_gotoiftime()</a>.<div class="fragment"><pre class="fragment"><a name="l05726"></a>05726 {
<a name="l05727"></a>05727    <span class="keywordtype">int</span> res = <a class="code" href="pbx_8c.html#86eba1ec3178373f61c082e1f1f12b68">ast_parseable_goto</a>(chan, data);
<a name="l05728"></a>05728    <span class="keywordflow">if</span> (!res &amp;&amp; (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 2))
<a name="l05729"></a>05729       <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>( <a class="code" href="logger_8h.html#aefd5a67b7464040f5352e4ecdc535ca">VERBOSE_PREFIX_3</a> <span class="stringliteral">"Goto (%s,%s,%d)\n"</span>, chan-&gt;<a class="code" href="structast__channel.html#c1ae8ba118483c4c23841d72b5e7ebbb">context</a>,chan-&gt;<a class="code" href="structast__channel.html#5aedfeaeaac21e5e5f297360633ea9a3">exten</a>, chan-&gt;<a class="code" href="structast__channel.html#b988295c268025b49dfb3df26171ddc3">priority</a>+1);
<a name="l05730"></a>05730    <span class="keywordflow">return</span> res;
<a name="l05731"></a>05731 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga7c5739e43ec98bbb1df5e22a3d9fcda"></a><!-- doxytag: member="pbx.c::pbx_builtin_gotoiftime" ref="ga7c5739e43ec98bbb1df5e22a3d9fcda" args="(struct ast_channel *, void *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pbx_builtin_gotoiftime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="pbx_8c-source.html#l05499">5499</a> of file <a class="el" href="pbx_8c-source.html">pbx.c</a>.
<p>
References <a class="el" href="pbx_8c-source.html#l04236">ast_build_timing()</a>, <a class="el" href="pbx_8c-source.html#l04262">ast_check_timing()</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="pbx_8c-source.html#l05725">pbx_builtin_goto()</a>, <a class="el" href="aesopt_8h-source.html#l00399">s</a>, and <a class="el" href="strcompat_8c-source.html#l00035">strsep()</a>.<div class="fragment"><pre class="fragment"><a name="l05500"></a>05500 {
<a name="l05501"></a>05501    <span class="keywordtype">int</span> res=0;
<a name="l05502"></a>05502    <span class="keywordtype">char</span> *<a class="code" href="aesopt_8h.html#8d6242bc80162ac99dd4d368eabe77cc">s</a>, *ts;
<a name="l05503"></a>05503    <span class="keyword">struct </span><a class="code" href="structast__timing.html">ast_timing</a> timing;
<a name="l05504"></a>05504 
<a name="l05505"></a>05505    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(data)) {
<a name="l05506"></a>05506       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"GotoIfTime requires an argument:\n  &lt;time range&gt;|&lt;days of week&gt;|&lt;days of month&gt;|&lt;months&gt;?[[context|]extension|]priority\n"</span>);
<a name="l05507"></a>05507       <span class="keywordflow">return</span> -1;
<a name="l05508"></a>05508    }
<a name="l05509"></a>05509 
<a name="l05510"></a>05510    ts = s = <a class="code" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>(data);
<a name="l05511"></a>05511 
<a name="l05512"></a>05512    <span class="comment">/* Separate the Goto path */</span>
<a name="l05513"></a>05513    <a class="code" href="strcompat_8c.html#a541370456ac872bdb4bdcc462fc6a6e">strsep</a>(&amp;ts,<span class="stringliteral">"?"</span>);
<a name="l05514"></a>05514 
<a name="l05515"></a>05515    <span class="comment">/* struct ast_include include contained garbage here, fixed by zeroing it on get_timerange */</span>
<a name="l05516"></a>05516    <span class="keywordflow">if</span> (<a class="code" href="pbx_8c.html#b45b278cc04e70970e83433d6e9c60a8">ast_build_timing</a>(&amp;timing, s) &amp;&amp; <a class="code" href="pbx_8c.html#4dee27d639900ebea4f8b3c0366a197f">ast_check_timing</a>(&amp;timing))
<a name="l05517"></a>05517       res = <a class="code" href="group__applications.html#g810e6cb9f297016b6c6e22171fba4458">pbx_builtin_goto</a>(chan, ts);
<a name="l05518"></a>05518    
<a name="l05519"></a>05519    <span class="keywordflow">return</span> res;
<a name="l05520"></a>05520 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="g048e8de501777ba14f7528f09d4cc9aa"></a><!-- doxytag: member="pbx.c::pbx_builtin_hangup" ref="g048e8de501777ba14f7528f09d4cc9aa" args="(struct ast_channel *, void *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pbx_builtin_hangup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="pbx_8c-source.html#l05469">5469</a> of file <a class="el" href="pbx_8c-source.html">pbx.c</a>.
<p>
References <a class="el" href="causes_8h-source.html#l00094">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="channel_8c-source.html#l00509">ast_str2cause()</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="channel_8h-source.html#l00466">ast_channel::hangupcause</a>, and <a class="el" href="logger_8h-source.html#l00106">LOG_NOTICE</a>.<div class="fragment"><pre class="fragment"><a name="l05470"></a>05470 {
<a name="l05471"></a>05471    <span class="keywordflow">if</span> (!<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(data)) {
<a name="l05472"></a>05472       <span class="keywordtype">int</span> cause;
<a name="l05473"></a>05473       <span class="keywordtype">char</span> *endptr;
<a name="l05474"></a>05474 
<a name="l05475"></a>05475       <span class="keywordflow">if</span> ((cause = <a class="code" href="channel_8c.html#708c594c181120493746e2a7eac5527e">ast_str2cause</a>(data)) &gt; -1) {
<a name="l05476"></a>05476          chan-&gt;<a class="code" href="structast__channel.html#8be5f831332d8ff714e90c2cf85171fe">hangupcause</a> = cause;
<a name="l05477"></a>05477          <span class="keywordflow">return</span> -1;
<a name="l05478"></a>05478       }
<a name="l05479"></a>05479       
<a name="l05480"></a>05480       cause = strtol((<span class="keyword">const</span> <span class="keywordtype">char</span> *) data, &amp;endptr, 10);
<a name="l05481"></a>05481       <span class="keywordflow">if</span> (cause != 0 || (data != endptr)) {
<a name="l05482"></a>05482          chan-&gt;<a class="code" href="structast__channel.html#8be5f831332d8ff714e90c2cf85171fe">hangupcause</a> = cause;
<a name="l05483"></a>05483          <span class="keywordflow">return</span> -1;
<a name="l05484"></a>05484       }
<a name="l05485"></a>05485          
<a name="l05486"></a>05486       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#bbf95aad74d847cd4bcb129604f798cd">LOG_NOTICE</a>, <span class="stringliteral">"Invalid cause given to Hangup(): \"%s\"\n"</span>, (<span class="keywordtype">char</span> *) data);
<a name="l05487"></a>05487    }
<a name="l05488"></a>05488 
<a name="l05489"></a>05489    <span class="keywordflow">if</span> (!chan-&gt;<a class="code" href="structast__channel.html#8be5f831332d8ff714e90c2cf85171fe">hangupcause</a>) {
<a name="l05490"></a>05490       chan-&gt;<a class="code" href="structast__channel.html#8be5f831332d8ff714e90c2cf85171fe">hangupcause</a> = <a class="code" href="causes_8h.html#61909c9e8fcb106af7ca5b45729980f7">AST_CAUSE_NORMAL_CLEARING</a>;
<a name="l05491"></a>05491    }
<a name="l05492"></a>05492 
<a name="l05493"></a>05493    <span class="keywordflow">return</span> -1;
<a name="l05494"></a>05494 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ge86c7e57c3acc2b6caee0443da456f95"></a><!-- doxytag: member="pbx.c::pbx_builtin_progress" ref="ge86c7e57c3acc2b6caee0443da456f95" args="(struct ast_channel *, void *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pbx_builtin_progress           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="pbx_8c-source.html#l05376">5376</a> of file <a class="el" href="pbx_8c-source.html">pbx.c</a>.
<p>
References <a class="el" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389ba3a8e0de0c6348205ffdc9e446af14f">AST_CONTROL_PROGRESS</a>, and <a class="el" href="channel_8c-source.html#l02448">ast_indicate()</a>.<div class="fragment"><pre class="fragment"><a name="l05377"></a>05377 {
<a name="l05378"></a>05378    <a class="code" href="channel_8c.html#90b88ba4c6f05bc0b655583c899c0269">ast_indicate</a>(chan, <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389ba3a8e0de0c6348205ffdc9e446af14f">AST_CONTROL_PROGRESS</a>);
<a name="l05379"></a>05379    <span class="keywordflow">return</span> 0;
<a name="l05380"></a>05380 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="gabae899e725428c8520f8c9dea9dc5fd"></a><!-- doxytag: member="pbx.c::pbx_builtin_resetcdr" ref="gabae899e725428c8520f8c9dea9dc5fd" args="(struct ast_channel *, void *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pbx_builtin_resetcdr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="pbx_8c-source.html#l05441">5441</a> of file <a class="el" href="pbx_8c-source.html">pbx.c</a>.
<p>
References <a class="el" href="app_8c-source.html#l01378">ast_app_parse_options()</a>, <a class="el" href="cdr_8c-source.html#l00942">ast_cdr_reset()</a>, <a class="el" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, and <a class="el" href="channel_8h-source.html#l00451">ast_channel::cdr</a>.<div class="fragment"><pre class="fragment"><a name="l05442"></a>05442 {
<a name="l05443"></a>05443    <span class="keywordtype">char</span> *args;
<a name="l05444"></a>05444    <span class="keyword">struct </span><a class="code" href="structast__flags.html">ast_flags</a> flags = { 0 };
<a name="l05445"></a>05445 
<a name="l05446"></a>05446    <span class="keywordflow">if</span> (!<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(data)) {
<a name="l05447"></a>05447       args = <a class="code" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>(data);
<a name="l05448"></a>05448       <a class="code" href="app_8c.html#54fd988ba7570b2d55d749d4d07372d3">ast_app_parse_options</a>(resetcdr_opts, &amp;flags, NULL, args);
<a name="l05449"></a>05449    }
<a name="l05450"></a>05450 
<a name="l05451"></a>05451    <a class="code" href="cdr_8c.html#32799fa5951db39f7b0a4016bee27cf5">ast_cdr_reset</a>(chan-&gt;<a class="code" href="structast__channel.html#30491931d0d510243046864dbc71a8c9">cdr</a>, &amp;flags);
<a name="l05452"></a>05452 
<a name="l05453"></a>05453    <span class="keywordflow">return</span> 0;
<a name="l05454"></a>05454 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="gbff0064869864e134fce7646a4c60c41"></a><!-- doxytag: member="pbx.c::pbx_builtin_ringing" ref="gbff0064869864e134fce7646a4c60c41" args="(struct ast_channel *, void *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pbx_builtin_ringing           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="pbx_8c-source.html#l05385">5385</a> of file <a class="el" href="pbx_8c-source.html">pbx.c</a>.
<p>
References <a class="el" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f3895749da867c771f2391b19ce9e08f0149">AST_CONTROL_RINGING</a>, and <a class="el" href="channel_8c-source.html#l02448">ast_indicate()</a>.<div class="fragment"><pre class="fragment"><a name="l05386"></a>05386 {
<a name="l05387"></a>05387    <a class="code" href="channel_8c.html#90b88ba4c6f05bc0b655583c899c0269">ast_indicate</a>(chan, <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f3895749da867c771f2391b19ce9e08f0149">AST_CONTROL_RINGING</a>);
<a name="l05388"></a>05388    <span class="keywordflow">return</span> 0;
<a name="l05389"></a>05389 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="gbe127431377bef549315ff7f89087767"></a><!-- doxytag: member="pbx.c::pbx_builtin_setamaflags" ref="gbe127431377bef549315ff7f89087767" args="(struct ast_channel *, void *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pbx_builtin_setamaflags           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="pbx_8c-source.html#l05459">5459</a> of file <a class="el" href="pbx_8c-source.html">pbx.c</a>.
<p>
References <a class="el" href="cdr_8c-source.html#l00847">ast_cdr_setamaflags()</a>.<div class="fragment"><pre class="fragment"><a name="l05460"></a>05460 {
<a name="l05461"></a>05461    <span class="comment">/* Copy the AMA Flags as specified */</span>
<a name="l05462"></a>05462    <a class="code" href="cdr_8c.html#bd37082ab07fdd3034531761378154ca">ast_cdr_setamaflags</a>(chan, data ? data : <span class="stringliteral">""</span>);
<a name="l05463"></a>05463    <span class="keywordflow">return</span> 0;
<a name="l05464"></a>05464 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="gdee0c48cbf7f9525689d12c23452752c"></a><!-- doxytag: member="pbx.c::pbx_builtin_wait" ref="gdee0c48cbf7f9525689d12c23452752c" args="(struct ast_channel *, void *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pbx_builtin_wait           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="pbx_8c-source.html#l05568">5568</a> of file <a class="el" href="pbx_8c-source.html">pbx.c</a>.
<p>
References <a class="el" href="channel_8c-source.html#l01048">ast_safe_sleep()</a>, and <a class="el" href="aesopt_8h-source.html#l00399">s</a>.<div class="fragment"><pre class="fragment"><a name="l05569"></a>05569 {
<a name="l05570"></a>05570    <span class="keywordtype">double</span> <a class="code" href="aesopt_8h.html#8d6242bc80162ac99dd4d368eabe77cc">s</a>;
<a name="l05571"></a>05571    <span class="keywordtype">int</span> ms;
<a name="l05572"></a>05572 
<a name="l05573"></a>05573    <span class="comment">/* Wait for "n" seconds */</span>
<a name="l05574"></a>05574    <span class="keywordflow">if</span> (data &amp;&amp; (s = atof(data)) &gt; 0.0) {
<a name="l05575"></a>05575       ms = s*1000.0;
<a name="l05576"></a>05576       <span class="keywordflow">return</span> <a class="code" href="channel_8c.html#24a36b04429e3cdef17e161363c13900">ast_safe_sleep</a>(chan, ms);
<a name="l05577"></a>05577    }
<a name="l05578"></a>05578    <span class="keywordflow">return</span> 0;
<a name="l05579"></a>05579 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="g15e89afaf5b7b1ccfc3ffe71892508ef"></a><!-- doxytag: member="pbx.c::pbx_builtin_waitexten" ref="g15e89afaf5b7b1ccfc3ffe71892508ef" args="(struct ast_channel *, void *)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pbx_builtin_waitexten           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="pbx_8c-source.html#l05584">5584</a> of file <a class="el" href="pbx_8c-source.html">pbx.c</a>.
<p>
References <a class="el" href="app_8h-source.html#l00246">AST_APP_ARG</a>, <a class="el" href="app_8c-source.html#l01378">ast_app_parse_options()</a>, <a class="el" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389dcaa1b03a8c60073c53c1b662418697f">AST_CONTROL_HOLD</a>, <a class="el" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389582c81bc89b064f8093864a6c023a823">AST_CONTROL_UNHOLD</a>, <a class="el" href="app_8h-source.html#l00263">AST_DECLARE_APP_ARGS</a>, <a class="el" href="pbx_8c-source.html#l02183">ast_exists_extension()</a>, <a class="el" href="channel_8c-source.html#l02448">ast_indicate()</a>, <a class="el" href="channel_8c-source.html#l02453">ast_indicate_data()</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="app_8h-source.html#l00279">AST_STANDARD_APP_ARGS</a>, <a class="el" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="utils_8h-source.html#l00067">ast_test_flag</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="channel_8c-source.html#l01963">ast_waitfordigit()</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="asterisk_8c-source.html#l00163">option_verbose</a>, <a class="el" href="chan__mgcp_8c-source.html#l01734">parse()</a>, <a class="el" href="aesopt_8h-source.html#l00399">s</a>, <a class="el" href="pbx_8c-source.html#l02214">set_ext_pri()</a>, <a class="el" href="logger_8h-source.html#l00045">VERBOSE_PREFIX_3</a>, and <a class="el" href="pbx_8c-source.html#l00103">WAITEXTEN_MOH</a>.<div class="fragment"><pre class="fragment"><a name="l05585"></a>05585 {
<a name="l05586"></a>05586    <span class="keywordtype">int</span> ms, res;
<a name="l05587"></a>05587    <span class="keywordtype">double</span> <a class="code" href="aesopt_8h.html#8d6242bc80162ac99dd4d368eabe77cc">s</a>;
<a name="l05588"></a>05588    <span class="keyword">struct </span><a class="code" href="structast__flags.html">ast_flags</a> flags = {0};
<a name="l05589"></a>05589    <span class="keywordtype">char</span> *opts[1] = { NULL };
<a name="l05590"></a>05590    <span class="keywordtype">char</span> *<a class="code" href="chan__mgcp_8c.html#96d2a4ae057584ce23ca92b03303bd2f">parse</a>;
<a name="l05591"></a>05591    <a class="code" href="app_8h.html#f2237dba0ffbe2f9ec8209c3f9fe82a7">AST_DECLARE_APP_ARGS</a>(args,
<a name="l05592"></a>05592       <a class="code" href="app_8h.html#a6b5292002b488b8ce11fedacb317800">AST_APP_ARG</a>(timeout);
<a name="l05593"></a>05593       <a class="code" href="app_8h.html#a6b5292002b488b8ce11fedacb317800">AST_APP_ARG</a>(options);
<a name="l05594"></a>05594    );
<a name="l05595"></a>05595 
<a name="l05596"></a>05596    <span class="keywordflow">if</span> (!<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(data)) {
<a name="l05597"></a>05597       parse = <a class="code" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>(data);
<a name="l05598"></a>05598       <a class="code" href="app_8h.html#c086f828d1f39897759c5668a4d20127">AST_STANDARD_APP_ARGS</a>(args, parse);
<a name="l05599"></a>05599    } <span class="keywordflow">else</span>
<a name="l05600"></a>05600       memset(&amp;args, 0, <span class="keyword">sizeof</span>(args));
<a name="l05601"></a>05601 
<a name="l05602"></a>05602    <span class="keywordflow">if</span> (args.options)
<a name="l05603"></a>05603       <a class="code" href="app_8c.html#54fd988ba7570b2d55d749d4d07372d3">ast_app_parse_options</a>(waitexten_opts, &amp;flags, opts, args.options);
<a name="l05604"></a>05604    
<a name="l05605"></a>05605    <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(&amp;flags, <a class="code" href="pbx_8c.html#6e4590710fad4ff778fdd12b9ee916d2">WAITEXTEN_MOH</a>) &amp;&amp; !opts[0] ) {
<a name="l05606"></a>05606       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"The 'm' option has been specified for WaitExten without a class.\n"</span>); 
<a name="l05607"></a>05607    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(&amp;flags, <a class="code" href="pbx_8c.html#6e4590710fad4ff778fdd12b9ee916d2">WAITEXTEN_MOH</a>))
<a name="l05608"></a>05608       <a class="code" href="channel_8c.html#f1b18b170d0068311ca47c2e0d0ede5c">ast_indicate_data</a>(chan, <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389dcaa1b03a8c60073c53c1b662418697f">AST_CONTROL_HOLD</a>, opts[0], strlen(opts[0]));
<a name="l05609"></a>05609 
<a name="l05610"></a>05610    <span class="comment">/* Wait for "n" seconds */</span>
<a name="l05611"></a>05611    <span class="keywordflow">if</span> (args.timeout &amp;&amp; (s = atof(args.timeout)) &gt; 0)
<a name="l05612"></a>05612        ms = s * 1000.0;
<a name="l05613"></a>05613    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (chan-&gt;pbx)
<a name="l05614"></a>05614       ms = chan-&gt;pbx-&gt;rtimeout * 1000;
<a name="l05615"></a>05615    <span class="keywordflow">else</span>
<a name="l05616"></a>05616       ms = 10000;
<a name="l05617"></a>05617 
<a name="l05618"></a>05618    res = <a class="code" href="channel_8c.html#b02063e7425e3cfb63ba24edf8081835">ast_waitfordigit</a>(chan, ms);
<a name="l05619"></a>05619    <span class="keywordflow">if</span> (!res) {
<a name="l05620"></a>05620       <span class="keywordflow">if</span> (<a class="code" href="pbx_8c.html#90b58be34145fcfd99652f0c3ae7377d">ast_exists_extension</a>(chan, chan-&gt;context, chan-&gt;exten, chan-&gt;priority + 1, chan-&gt;cid.cid_num)) {
<a name="l05621"></a>05621          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 2)
<a name="l05622"></a>05622             <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<a class="code" href="logger_8h.html#aefd5a67b7464040f5352e4ecdc535ca">VERBOSE_PREFIX_3</a> <span class="stringliteral">"Timeout on %s, continuing...\n"</span>, chan-&gt;name);
<a name="l05623"></a>05623       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="pbx_8c.html#90b58be34145fcfd99652f0c3ae7377d">ast_exists_extension</a>(chan, chan-&gt;context, <span class="stringliteral">"t"</span>, 1, chan-&gt;cid.cid_num)) {
<a name="l05624"></a>05624          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 2)
<a name="l05625"></a>05625             <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<a class="code" href="logger_8h.html#aefd5a67b7464040f5352e4ecdc535ca">VERBOSE_PREFIX_3</a> <span class="stringliteral">"Timeout on %s, going to 't'\n"</span>, chan-&gt;name);
<a name="l05626"></a>05626          <a class="code" href="pbx_8c.html#09e258d284c6e074e06ec6e73fb5886e">set_ext_pri</a>(chan, <span class="stringliteral">"t"</span>, 0); <span class="comment">/* XXX is the 0 correct ? */</span>
<a name="l05627"></a>05627       } <span class="keywordflow">else</span> {
<a name="l05628"></a>05628          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Timeout but no rule 't' in context '%s'\n"</span>, chan-&gt;context);
<a name="l05629"></a>05629          res = -1;
<a name="l05630"></a>05630       }
<a name="l05631"></a>05631    }
<a name="l05632"></a>05632 
<a name="l05633"></a>05633    <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#d26671e9d352536be0df3d41a800bb83">ast_test_flag</a>(&amp;flags, <a class="code" href="pbx_8c.html#6e4590710fad4ff778fdd12b9ee916d2">WAITEXTEN_MOH</a>))
<a name="l05634"></a>05634       <a class="code" href="channel_8c.html#90b88ba4c6f05bc0b655583c899c0269">ast_indicate</a>(chan, <a class="code" href="frame_8h.html#2d127e187c7a98c4396c337f2d76f389582c81bc89b064f8093864a6c023a823">AST_CONTROL_UNHOLD</a>);
<a name="l05635"></a>05635 
<a name="l05636"></a>05636    <span class="keywordflow">return</span> res;
<a name="l05637"></a>05637 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu May 24 22:27:58 2007 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
