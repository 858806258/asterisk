<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (24 May 2007)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Thu May 24 22:27:47 2007</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Finclude_2F.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Finclude_2Fasterisk_2F.html">asterisk</a></div>
<h1>stringfields.h File Reference</h1>String fields in structures. <a href="#_details">More...</a>
<p>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;stdarg.h&gt;</code><br>
<code>#include &lt;stddef.h&gt;</code><br>
<code>#include &quot;<a class="el" href="inline__api_8h-source.html">asterisk/inline_api.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="compiler_8h-source.html">asterisk/compiler.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="compat_8h-source.html">asterisk/compat.h</a>&quot;</code><br>

<p>
<a href="stringfields_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structast__string__field__mgr.html">ast_string_field_mgr</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structast__string__field__pool.html">ast_string_field_pool</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#1030a0090da9718ad03f89e779cedb7a">AST_DECLARE_STRING_FIELDS</a>(field_list)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declare the fields needed in a structure.  <a href="#1030a0090da9718ad03f89e779cedb7a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#bb7a2c8f844f3e6ba68bd8ceda335e92">AST_STRING_FIELD</a>(<a class="el" href="cdr__tds_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>)&nbsp;&nbsp;&nbsp;const <a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a> <a class="el" href="cdr__tds_8c.html#b068931cc450442b63f5b3d276ea4297">name</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declare a string field.  <a href="#bb7a2c8f844f3e6ba68bd8ceda335e92"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#4bcfc9a923120ec2704f7c6049e497f7">ast_string_field_build</a>(x, field, <a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>, args...)&nbsp;&nbsp;&nbsp;ast_string_field_index_build(x, ast_string_field_index(x, field), <a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>, args)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set a field to a complex (built) value.  <a href="#4bcfc9a923120ec2704f7c6049e497f7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#3c5e6dc0f1ef6c2e2c9dac4ee837d108">ast_string_field_build_va</a>(x, field, <a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>, args1, args2)&nbsp;&nbsp;&nbsp;ast_string_field_index_build_va(x, ast_string_field_index(x, field), <a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>, args1, args2)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set a field to a complex (built) value.  <a href="#3c5e6dc0f1ef6c2e2c9dac4ee837d108"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#72e99302c667e889009017cc43256b09">ast_string_field_count</a>(x)&nbsp;&nbsp;&nbsp;(offsetof(typeof(*(x)), __end_field) - offsetof(typeof(*(x)), __begin_field)) / sizeof(<a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of string fields in a structure.  <a href="#72e99302c667e889009017cc43256b09"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#71bb2665ec0ea8c6ec6a18e863454d51">ast_string_field_free</a>(x, field)&nbsp;&nbsp;&nbsp;ast_string_field_index_free(x, ast_string_field_index(x, field))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free a field's value.  <a href="#71bb2665ec0ea8c6ec6a18e863454d51"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#d2684a1b6bdc65b6ea7c94b07d25a7a0">ast_string_field_free_all</a>(x)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free the stringfields in a structure.  <a href="#d2684a1b6bdc65b6ea7c94b07d25a7a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#772cf76139a5b96f329a48ae8307e142">ast_string_field_free_pools</a>(x)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free the stringfield storage pools attached to a structure.  <a href="#772cf76139a5b96f329a48ae8307e142"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#773e45484cd6370579016acf24da7ba9">ast_string_field_index</a>(x, field)&nbsp;&nbsp;&nbsp;(offsetof(typeof(*x), field) - offsetof(typeof(*x), __begin_field)) / sizeof(<a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the index of a field in a structure.  <a href="#773e45484cd6370579016acf24da7ba9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#82c948e92a923c49f853b0b9e9ec538d">ast_string_field_index_build</a>(x, index, <a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>, args...)&nbsp;&nbsp;&nbsp;__ast_string_field_index_build(&amp;(x)-&gt;__field_mgr, &amp;(x)-&gt;__begin_field[0], ast_string_field_count(x), index, <a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>, args)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set a field to a complex (built) value.  <a href="#82c948e92a923c49f853b0b9e9ec538d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#4ba35d772554e91b27a013e5c5a010b3">ast_string_field_index_build_va</a>(x, index, <a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>, args1, args2)&nbsp;&nbsp;&nbsp;__ast_string_field_index_build_va(&amp;(x)-&gt;__field_mgr, &amp;(x)-&gt;__begin_field[0], ast_string_field_count(x), index, <a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>, args1, args2)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set a field to a complex (built) value with prebuilt va_lists.  <a href="#4ba35d772554e91b27a013e5c5a010b3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#9be6e34a05fbfcb1f5e80c1e5944cf37">ast_string_field_index_free</a>(x, index)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free a field's value.  <a href="#9be6e34a05fbfcb1f5e80c1e5944cf37"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#b617766fb8bc89512a2c328bb7a5e8fe">ast_string_field_index_set</a>(x, index, data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set a field to a simple string value.  <a href="#b617766fb8bc89512a2c328bb7a5e8fe"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#1b408288de2c46a54ecd65b3f3f8a51c">ast_string_field_init</a>(x, size)&nbsp;&nbsp;&nbsp;__ast_string_field_init(&amp;(x)-&gt;__field_mgr, size, &amp;(x)-&gt;__begin_field[0], ast_string_field_count(x))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize a field pool and fields.  <a href="#1b408288de2c46a54ecd65b3f3f8a51c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#af456e04e9e17dd8a300d1d3cd75b65a">ast_string_field_set</a>(x, field, data)&nbsp;&nbsp;&nbsp;ast_string_field_index_set(x, ast_string_field_index(x, field), data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set a field to a simple string value.  <a href="#af456e04e9e17dd8a300d1d3cd75b65a"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#aa37932c37fa17263a27678aaedcfdd5">__ast_string_field_alloc_space</a> (struct <a class="el" href="structast__string__field__mgr.html">ast_string_field_mgr</a> *mgr, size_t needed, <a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a> *fields, int num_fields)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#b4781bd4317422012235e4546fb0c533">__ast_string_field_index_build</a> (struct <a class="el" href="structast__string__field__mgr.html">ast_string_field_mgr</a> *mgr, <a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a> *fields, int num_fields, int index, const char *<a class="el" href="cdr__custom_8c.html#b954976e6264c40232046aacb5b7c390">format</a>,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#93ae06609b07050ae59fcf330f8e5f08">__ast_string_field_index_build_va</a> (struct <a class="el" href="structast__string__field__mgr.html">ast_string_field_mgr</a> *mgr, <a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a> *fields, int num_fields, int index, const char *<a class="el" href="cdr__custom_8c.html#b954976e6264c40232046aacb5b7c390">format</a>, va_list a1, va_list a2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#310f86ebc44c9bef971fd5bedfbec7df">__ast_string_field_init</a> (struct <a class="el" href="structast__string__field__mgr.html">ast_string_field_mgr</a> *mgr, size_t size, <a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a> *fields, int num_fields)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="stringfields_8h.html#81e80e3876c62b53029a14beb5c952a0">__ast_string_field_empty</a> []</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
String fields in structures. 
<p>
This file contains objects and macros used to manage string fields in structures without requiring them to be allocated as fixed-size buffers or requiring individual allocations for for each field.<p>
Using this functionality is quite simple... an example structure with three fields is defined like this:<p>
<div class="fragment"><pre class="fragment">  <span class="keyword">struct </span>sample_fields {
     <span class="keywordtype">int</span> x1;
     <a class="code" href="stringfields_8h.html#1030a0090da9718ad03f89e779cedb7a">AST_DECLARE_STRING_FIELDS</a>(
        <a class="code" href="stringfields_8h.html#bb7a2c8f844f3e6ba68bd8ceda335e92">AST_STRING_FIELD</a>(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>);
        <a class="code" href="stringfields_8h.html#bb7a2c8f844f3e6ba68bd8ceda335e92">AST_STRING_FIELD</a>(address);
        <a class="code" href="stringfields_8h.html#bb7a2c8f844f3e6ba68bd8ceda335e92">AST_STRING_FIELD</a>(<a class="code" href="cdr__odbc_8c.html#5f4dcc3b5aa765d61d8327deb882cf99">password</a>);
     );
     <span class="keywordtype">long</span> x2;
  };
</pre></div><p>
When an instance of this structure is allocated, the fields (and the pool of storage for them) must be initialized:<p>
<div class="fragment"><pre class="fragment">  <span class="keyword">struct </span>sample_fields *sample;
  
  sample = <a class="code" href="astmm_8h.html#b9d011ff8b105f2850962f2003da06d9">calloc</a>(1, <span class="keyword">sizeof</span>(*sample));
  <span class="keywordflow">if</span> (sample) {
     <span class="keywordflow">if</span> (<a class="code" href="stringfields_8h.html#1b408288de2c46a54ecd65b3f3f8a51c">ast_string_field_init</a>(sample, 256)) {
        <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(sample);
        sample = NULL;
     }
  }
  
  <span class="keywordflow">if</span> (!sample) {
  ...
  }
</pre></div><p>
Fields will default to pointing to an empty string, and will revert to that when <a class="el" href="stringfields_8h.html#71bb2665ec0ea8c6ec6a18e863454d51">ast_string_field_free()</a> is called. This means that a string field will <b>never</b> contain NULL.<p>
Using the fields is much like using regular 'char *' fields in the structure, except that writing into them must be done using wrapper macros defined in this file.<p>
Storing simple values into fields can be done using <a class="el" href="stringfields_8h.html#af456e04e9e17dd8a300d1d3cd75b65a">ast_string_field_set()</a>; more complex values (using printf-style format strings) can be stored using <a class="el" href="stringfields_8h.html#4bcfc9a923120ec2704f7c6049e497f7">ast_string_field_build()</a>.<p>
When the structure instance is no longer needed, the fields and their storage pool must be freed:<p>
<div class="fragment"><pre class="fragment">  <a class="code" href="stringfields_8h.html#d2684a1b6bdc65b6ea7c94b07d25a7a0">ast_string_field_free_all</a>(sample);
  <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(sample);
</pre></div> 
<p>
Definition in file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="1030a0090da9718ad03f89e779cedb7a"></a><!-- doxytag: member="stringfields.h::AST_DECLARE_STRING_FIELDS" ref="1030a0090da9718ad03f89e779cedb7a" args="(field_list)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define AST_DECLARE_STRING_FIELDS          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">field_list&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a> __begin_field[0]; \
   field_list \
   <a class="code" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a> __end_field[0]; \
   <span class="keyword">struct </span><a class="code" href="structast__string__field__mgr.html">ast_string_field_mgr</a> __field_mgr
</pre></div>Declare the fields needed in a structure. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>field_list</em>&nbsp;</td><td>The list of fields to declare, using <a class="el" href="stringfields_8h.html#bb7a2c8f844f3e6ba68bd8ceda335e92">AST_STRING_FIELD()</a> for each one </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00196">196</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="bb7a2c8f844f3e6ba68bd8ceda335e92"></a><!-- doxytag: member="stringfields.h::AST_STRING_FIELD" ref="bb7a2c8f844f3e6ba68bd8ceda335e92" args="(name)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define AST_STRING_FIELD          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="cdr__tds_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;const <a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a> <a class="el" href="cdr__tds_8c.html#b068931cc450442b63f5b3d276ea4297">name</a></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Declare a string field. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>The field name </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00190">190</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="4bcfc9a923120ec2704f7c6049e497f7"></a><!-- doxytag: member="stringfields.h::ast_string_field_build" ref="4bcfc9a923120ec2704f7c6049e497f7" args="(x, field, fmt, args...)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_string_field_build          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>field,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>args...&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;ast_string_field_index_build(x, ast_string_field_index(x, field), <a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>, args)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set a field to a complex (built) value. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>Pointer to a structure containing fields </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>field</em>&nbsp;</td><td>Name of the field to set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>printf-style format string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>args</em>&nbsp;</td><td>Arguments for format string </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing </dd></dl>

<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00314">314</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.
<p>
Referenced by <a class="el" href="channel_8c-source.html#l00632">ast_channel_alloc()</a>, <a class="el" href="chan__sip_8c-source.html#l04625">build_callid_pvt()</a>, <a class="el" href="chan__sip_8c-source.html#l04636">build_callid_registry()</a>, <a class="el" href="chan__sip_8c-source.html#l07218">build_contact()</a>, <a class="el" href="chan__sip_8c-source.html#l07228">build_rpid()</a>, <a class="el" href="chan__sip_8c-source.html#l01943">build_via()</a>, <a class="el" href="chan__sip_8c-source.html#l08703">check_auth()</a>, <a class="el" href="chan__sip_8c-source.html#l02968">create_addr_from_peer()</a>, <a class="el" href="chan__sip_8c-source.html#l15240">handle_request_subscribe()</a>, <a class="el" href="chan__sip_8c-source.html#l13135">handle_response()</a>, <a class="el" href="chan__mgcp_8c-source.html#l01457">mgcp_new()</a>, <a class="el" href="chan__sip_8c-source.html#l12501">parse_moved_contact()</a>, <a class="el" href="chan__sip_8c-source.html#l08437">parse_register_contact()</a>, <a class="el" href="chan__sip_8c-source.html#l02552">sip_sendhtml()</a>, <a class="el" href="chan__sip_8c-source.html#l18152">sip_sipredirect()</a>, <a class="el" href="chan__sip_8c-source.html#l08927">transmit_fake_auth_response()</a>, and <a class="el" href="chan__misdn_8c-source.html#l03221">update_name()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="3c5e6dc0f1ef6c2e2c9dac4ee837d108"></a><!-- doxytag: member="stringfields.h::ast_string_field_build_va" ref="3c5e6dc0f1ef6c2e2c9dac4ee837d108" args="(x, field, fmt, args1, args2)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_string_field_build_va          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>field,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>args1,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>args2&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;ast_string_field_index_build_va(x, ast_string_field_index(x, field), <a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>, args1, args2)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set a field to a complex (built) value. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>Pointer to a structure containing fields </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>field</em>&nbsp;</td><td>Name of the field to set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>printf-style format string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>argslist</em>&nbsp;</td><td>a va_list of the args </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing </dd></dl>

<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00325">325</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.
<p>
Referenced by <a class="el" href="channel_8c-source.html#l00632">ast_channel_alloc()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="72e99302c667e889009017cc43256b09"></a><!-- doxytag: member="stringfields.h::ast_string_field_count" ref="72e99302c667e889009017cc43256b09" args="(x)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_string_field_count          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(offsetof(typeof(*(x)), __end_field) - offsetof(typeof(*(x)), __begin_field)) / sizeof(<a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a>)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the number of string fields in a structure. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>Pointer to a structure containing fields </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the number of fields in the structure's definition </dd></dl>

<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00207">207</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="71bb2665ec0ea8c6ec6a18e863454d51"></a><!-- doxytag: member="stringfields.h::ast_string_field_free" ref="71bb2665ec0ea8c6ec6a18e863454d51" args="(x, field)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_string_field_free          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>field&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;ast_string_field_index_free(x, ast_string_field_index(x, field))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Free a field's value. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>Pointer to a structure containing fields </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>field</em>&nbsp;</td><td>Name of the field to free </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>Because of the storage pool used, the memory occupied by the field's value is <b>not</b> recovered; the field pointer is just changed to point to an empty string. </dd></dl>

<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00352">352</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.
<p>
Referenced by <a class="el" href="chan__sip_8c-source.html#l09851">check_peer_ok()</a>, <a class="el" href="chan__sip_8c-source.html#l14098">handle_request_invite()</a>, <a class="el" href="chan__sip_8c-source.html#l12569">handle_response_invite()</a>, <a class="el" href="chan__sip_8c-source.html#l06162">reqprep()</a>, <a class="el" href="chan__sip_8c-source.html#l06108">respprep()</a>, <a class="el" href="chan__sip_8c-source.html#l16326">sip_request_call()</a>, and <a class="el" href="chan__sip_8c-source.html#l07883">transmit_register()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d2684a1b6bdc65b6ea7c94b07d25a7a0"></a><!-- doxytag: member="stringfields.h::ast_string_field_free_all" ref="d2684a1b6bdc65b6ea7c94b07d25a7a0" args="(x)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_string_field_free_all          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Free the stringfields in a structure. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>Pointer to a structure containing fields </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing</dd></dl>
After calling this macro, the most recently allocated pool attached to the structure will be available for use by stringfields again. 
<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00381">381</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.
<p>
Referenced by <a class="el" href="app__meetme_8c-source.html#l04461">destroy_station()</a>, <a class="el" href="app__meetme_8c-source.html#l04447">destroy_trunk()</a>, and <a class="el" href="chan__sip_8c-source.html#l06313">transmit_response_using_temp()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="772cf76139a5b96f329a48ae8307e142"></a><!-- doxytag: member="stringfields.h::ast_string_field_free_pools" ref="772cf76139a5b96f329a48ae8307e142" args="(x)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_string_field_free_pools          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Free the stringfield storage pools attached to a structure. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>Pointer to a structure containing fields </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing</dd></dl>
After calling this macro, fields can no longer be accessed in structure; it should only be called immediately before freeing the structure itself. 
<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00364">364</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.
<p>
Referenced by <a class="el" href="chan__sip_8c-source.html#l03286">__sip_destroy()</a>, <a class="el" href="channel_8c-source.html#l00632">ast_channel_alloc()</a>, <a class="el" href="channel_8c-source.html#l01069">ast_channel_free()</a>, <a class="el" href="chan__iax2_8c-source.html#l08607">build_peer()</a>, <a class="el" href="chan__iax2_8c-source.html#l08854">build_user()</a>, <a class="el" href="chan__iax2_8c-source.html#l09131">destroy_peer()</a>, <a class="el" href="chan__iax2_8c-source.html#l01823">iax2_destroy()</a>, <a class="el" href="chan__sip_8c-source.html#l03261">sip_registry_destroy()</a>, and <a class="el" href="chan__sip_8c-source.html#l06303">temp_pvt_cleanup()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="773e45484cd6370579016acf24da7ba9"></a><!-- doxytag: member="stringfields.h::ast_string_field_index" ref="773e45484cd6370579016acf24da7ba9" args="(x, field)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_string_field_index          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>field&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(offsetof(typeof(*x), field) - offsetof(typeof(*x), __begin_field)) / sizeof(<a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a>)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the index of a field in a structure. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>Pointer to a structure containing fields </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>field</em>&nbsp;</td><td>Name of the field to locate </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the position (index) of the field within the structure's array of fields </dd></dl>

<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00217">217</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.
<p>
Referenced by <a class="el" href="chan__sip_8c-source.html#l12002">reply_digest()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="82c948e92a923c49f853b0b9e9ec538d"></a><!-- doxytag: member="stringfields.h::ast_string_field_index_build" ref="82c948e92a923c49f853b0b9e9ec538d" args="(x, index, fmt, args...)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_string_field_index_build          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>index,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>args...&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;__ast_string_field_index_build(&amp;(x)-&gt;__field_mgr, &amp;(x)-&gt;__begin_field[0], ast_string_field_count(x), index, <a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>, args)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set a field to a complex (built) value. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>Pointer to a structure containing fields </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>Index position of the field within the structure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>printf-style format string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>args</em>&nbsp;</td><td>Arguments for format string </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing </dd></dl>

<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00291">291</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="4ba35d772554e91b27a013e5c5a010b3"></a><!-- doxytag: member="stringfields.h::ast_string_field_index_build_va" ref="4ba35d772554e91b27a013e5c5a010b3" args="(x, index, fmt, args1, args2)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_string_field_index_build_va          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>index,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>args1,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>args2&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;__ast_string_field_index_build_va(&amp;(x)-&gt;__field_mgr, &amp;(x)-&gt;__begin_field[0], ast_string_field_count(x), index, <a class="el" href="strings_8h.html#7631454338ff70b1a6b1262f5f36beac">fmt</a>, args1, args2)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set a field to a complex (built) value with prebuilt va_lists. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>Pointer to a structure containing fields </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>Index position of the field within the structure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>printf-style format string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>args1</em>&nbsp;</td><td>Arguments for format string in va_list format </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>args2</em>&nbsp;</td><td>a second copy of the va_list for the sake of bsd, with no va_list copy operation </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing </dd></dl>

<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00303">303</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="9be6e34a05fbfcb1f5e80c1e5944cf37"></a><!-- doxytag: member="stringfields.h::ast_string_field_index_free" ref="9be6e34a05fbfcb1f5e80c1e5944cf37" args="(x, index)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_string_field_index_free          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>index&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
   (x)-&gt;__begin_field[index] = <a class="code" href="utils_8c.html#81e80e3876c62b53029a14beb5c952a0">__ast_string_field_empty</a>; \
   } <span class="keywordflow">while</span>(0)
</pre></div>Free a field's value. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>Pointer to a structure containing fields </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>Index position of the field within the structure </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>Because of the storage pool used, the memory occupied by the field's value is <b>not</b> recovered; the field pointer is just changed to point to an empty string. </dd></dl>

<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00338">338</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b617766fb8bc89512a2c328bb7a5e8fe"></a><!-- doxytag: member="stringfields.h::ast_string_field_index_set" ref="b617766fb8bc89512a2c328bb7a5e8fe" args="(x, index, data)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_string_field_index_set          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>index,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>data&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set a field to a simple string value. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>Pointer to a structure containing fields </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>Index position of the field within the structure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>String value to be copied into the field </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing </dd></dl>

<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00236">236</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.
<p>
Referenced by <a class="el" href="chan__sip_8c-source.html#l12002">reply_digest()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="1b408288de2c46a54ecd65b3f3f8a51c"></a><!-- doxytag: member="stringfields.h::ast_string_field_init" ref="1b408288de2c46a54ecd65b3f3f8a51c" args="(x, size)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_string_field_init          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>size&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;__ast_string_field_init(&amp;(x)-&gt;__field_mgr, size, &amp;(x)-&gt;__begin_field[0], ast_string_field_count(x))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize a field pool and fields. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>Pointer to a structure containing fields </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Amount of storage to allocate </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, non-zero on failure </dd></dl>

<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00226">226</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.
<p>
Referenced by <a class="el" href="channel_8c-source.html#l00632">ast_channel_alloc()</a>, <a class="el" href="chan__iax2_8c-source.html#l08607">build_peer()</a>, <a class="el" href="chan__iax2_8c-source.html#l08854">build_user()</a>, <a class="el" href="chan__zap_8c-source.html#l12765">load_module()</a>, <a class="el" href="chan__iax2_8c-source.html#l01141">new_iax()</a>, <a class="el" href="chan__sip_8c-source.html#l04652">sip_alloc()</a>, <a class="el" href="chan__sip_8c-source.html#l04922">sip_register()</a>, <a class="el" href="app__meetme_8c-source.html#l04662">sla_build_station()</a>, <a class="el" href="app__meetme_8c-source.html#l04527">sla_build_trunk()</a>, and <a class="el" href="chan__sip_8c-source.html#l06295">temp_pvt_init()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="af456e04e9e17dd8a300d1d3cd75b65a"></a><!-- doxytag: member="stringfields.h::ast_string_field_set" ref="af456e04e9e17dd8a300d1d3cd75b65a" args="(x, field, data)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define ast_string_field_set          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>field,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>data&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;ast_string_field_index_set(x, ast_string_field_index(x, field), data)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set a field to a simple string value. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>Pointer to a structure containing fields </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>field</em>&nbsp;</td><td>Name of the field to set </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>String value to be copied into the field </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing </dd></dl>

<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00275">275</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.
<p>
Referenced by <a class="el" href="chan__h323_8c-source.html#l01010">__oh323_new()</a>, <a class="el" href="chan__iax2_8c-source.html#l10027">acf_channel_write()</a>, <a class="el" href="chan__agent_8c-source.html#l00909">agent_new()</a>, <a class="el" href="chan__alsa_8c-source.html#l00790">alsa_new()</a>, <a class="el" href="cdr_8c-source.html#l00834">ast_cdr_setaccount()</a>, <a class="el" href="channel_8c-source.html#l03335">ast_change_name()</a>, <a class="el" href="channel_8c-source.html#l00632">ast_channel_alloc()</a>, <a class="el" href="channel_8c-source.html#l03406">ast_do_masquerade()</a>, <a class="el" href="chan__iax2_8c-source.html#l03426">ast_iax2_new()</a>, <a class="el" href="chan__iax2_8c-source.html#l05318">authenticate_reply()</a>, <a class="el" href="chan__iax2_8c-source.html#l04990">authenticate_request()</a>, <a class="el" href="chan__iax2_8c-source.html#l05042">authenticate_verify()</a>, <a class="el" href="dial_8c-source.html#l00236">begin_dial()</a>, <a class="el" href="chan__iax2_8c-source.html#l08607">build_peer()</a>, <a class="el" href="chan__sip_8c-source.html#l07228">build_rpid()</a>, <a class="el" href="chan__iax2_8c-source.html#l08854">build_user()</a>, <a class="el" href="chan__iax2_8c-source.html#l09624">cache_get_callno_locked()</a>, <a class="el" href="chan__iax2_8c-source.html#l04758">check_access()</a>, <a class="el" href="chan__sip_8c-source.html#l09851">check_peer_ok()</a>, <a class="el" href="chan__sip_8c-source.html#l09982">check_user_full()</a>, <a class="el" href="chan__sip_8c-source.html#l09745">check_user_ok()</a>, <a class="el" href="chan__sip_8c-source.html#l03085">create_addr()</a>, <a class="el" href="chan__sip_8c-source.html#l02968">create_addr_from_peer()</a>, <a class="el" href="app__dial_8c-source.html#l01184">dial_exec_full()</a>, <a class="el" href="app__dial_8c-source.html#l00430">do_forward()</a>, <a class="el" href="chan__sip_8c-source.html#l07203">extract_uri()</a>, <a class="el" href="chan__features_8c-source.html#l00334">features_call()</a>, <a class="el" href="chan__iax2_8c-source.html#l01308">find_callno()</a>, <a class="el" href="chan__sip_8c-source.html#l09533">get_also_info()</a>, <a class="el" href="chan__sip_8c-source.html#l09207">get_destination()</a>, <a class="el" href="chan__sip_8c-source.html#l09150">get_rdnis()</a>, <a class="el" href="chan__gtalk_8c-source.html#l00902">gtalk_new()</a>, <a class="el" href="chan__sip_8c-source.html#l15588">handle_request()</a>, <a class="el" href="chan__sip_8c-source.html#l15145">handle_request_bye()</a>, <a class="el" href="chan__sip_8c-source.html#l14098">handle_request_invite()</a>, <a class="el" href="chan__sip_8c-source.html#l13913">handle_request_options()</a>, <a class="el" href="chan__sip_8c-source.html#l15240">handle_request_subscribe()</a>, <a class="el" href="chan__sip_8c-source.html#l13135">handle_response()</a>, <a class="el" href="chan__iax2_8c-source.html#l02914">iax2_call()</a>, <a class="el" href="chan__iax2_8c-source.html#l08278">iax2_request()</a>, <a class="el" href="chan__sip_8c-source.html#l07307">initreqprep()</a>, <a class="el" href="chan__jingle_8c-source.html#l00759">jingle_new()</a>, <a class="el" href="chan__zap_8c-source.html#l12765">load_module()</a>, <a class="el" href="chan__local_8c-source.html#l00446">local_call()</a>, <a class="el" href="chan__mgcp_8c-source.html#l01457">mgcp_new()</a>, <a class="el" href="res__musiconhold_8c-source.html#l00632">moh2_exec()</a>, <a class="el" href="dial_8c-source.html#l00440">monitor_dial()</a>, <a class="el" href="chan__nbs_8c-source.html#l00233">nbs_new()</a>, <a class="el" href="chan__iax2_8c-source.html#l01141">new_iax()</a>, <a class="el" href="chan__oss_8c-source.html#l01020">oss_new()</a>, <a class="el" href="chan__sip_8c-source.html#l12501">parse_moved_contact()</a>, <a class="el" href="chan__sip_8c-source.html#l08374">parse_ok_contact()</a>, <a class="el" href="chan__phone_8c-source.html#l00864">phone_new()</a>, <a class="el" href="chan__misdn_8c-source.html#l01714">read_config()</a>, <a class="el" href="chan__iax2_8c-source.html#l05119">register_verify()</a>, <a class="el" href="chan__iax2_8c-source.html#l05878">registry_authrequest()</a>, <a class="el" href="chan__sip_8c-source.html#l09731">replace_cid()</a>, <a class="el" href="chan__sip_8c-source.html#l12002">reply_digest()</a>, <a class="el" href="chan__iax2_8c-source.html#l06400">save_osptoken()</a>, <a class="el" href="chan__sip_8c-source.html#l04652">sip_alloc()</a>, <a class="el" href="chan__sip_8c-source.html#l03169">sip_call()</a>, <a class="el" href="chan__sip_8c-source.html#l04179">sip_new()</a>, <a class="el" href="chan__sip_8c-source.html#l16161">sip_poke_peer()</a>, <a class="el" href="chan__sip_8c-source.html#l04922">sip_register()</a>, <a class="el" href="chan__sip_8c-source.html#l16326">sip_request_call()</a>, <a class="el" href="chan__sip_8c-source.html#l09120">sip_set_redirstr()</a>, <a class="el" href="chan__skinny_8c-source.html#l02823">skinny_new()</a>, <a class="el" href="app__meetme_8c-source.html#l04662">sla_build_station()</a>, <a class="el" href="app__meetme_8c-source.html#l04527">sla_build_trunk()</a>, <a class="el" href="chan__sip_8c-source.html#l08100">transmit_refer()</a>, <a class="el" href="chan__sip_8c-source.html#l07883">transmit_register()</a>, <a class="el" href="chan__sip_8c-source.html#l06313">transmit_response_using_temp()</a>, <a class="el" href="app__voicemail_8c-source.html#l06398">vm_execmain()</a>, <a class="el" href="app__queue_8c-source.html#l01950">wait_for_answer()</a>, and <a class="el" href="chan__zap_8c-source.html#l05516">zt_new()</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="2d79148c6dc2f7a8138afa0a85770cbc"></a><!-- doxytag: member="stringfields.h::ast_string_field" ref="2d79148c6dc2f7a8138afa0a85770cbc" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef const char* <a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="stringfields_8h-source.html#l00100">100</a> of file <a class="el" href="stringfields_8h-source.html">stringfields.h</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="aa37932c37fa17263a27678aaedcfdd5"></a><!-- doxytag: member="stringfields.h::__ast_string_field_alloc_space" ref="aa37932c37fa17263a27678aaedcfdd5" args="(struct ast_string_field_mgr *mgr, size_t needed, ast_string_field *fields, int num_fields)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a> __ast_string_field_alloc_space           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__string__field__mgr.html">ast_string_field_mgr</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap> <em>needed</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>fields</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>num_fields</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utils_8c-source.html#l00900">900</a> of file <a class="el" href="utils_8c-source.html">utils.c</a>.
<p>
References <a class="el" href="utils_8c-source.html#l00870">add_string_pool()</a>, <a class="el" href="stringfields_8h-source.html#l00114">ast_string_field_pool::base</a>, <a class="el" href="stringfields_8h-source.html#l00122">ast_string_field_mgr::pool</a>, <a class="el" href="cdr__pgsql_8c-source.html#l00071">result</a>, <a class="el" href="stringfields_8h-source.html#l00123">ast_string_field_mgr::size</a>, <a class="el" href="stringfields_8h-source.html#l00124">ast_string_field_mgr::space</a>, and <a class="el" href="stringfields_8h-source.html#l00125">ast_string_field_mgr::used</a>.<div class="fragment"><pre class="fragment"><a name="l00902"></a>00902 {
<a name="l00903"></a>00903    <span class="keywordtype">char</span> *<a class="code" href="cdr__pgsql_8c.html#b4a88417b3d0170d754c647c30b7216a">result</a> = NULL;
<a name="l00904"></a>00904 
<a name="l00905"></a>00905    <span class="keywordflow">if</span> (__builtin_expect(needed &gt; mgr-&gt;<a class="code" href="structast__string__field__mgr.html#ff2364a0be3d20e46cc69efb36afe9a5">space</a>, 0)) {
<a name="l00906"></a>00906       size_t new_size = mgr-&gt;<a class="code" href="structast__string__field__mgr.html#f7bd60b75b29d79b660a2859395c1a24">size</a> * 2;
<a name="l00907"></a>00907 
<a name="l00908"></a>00908       <span class="keywordflow">while</span> (new_size &lt; needed)
<a name="l00909"></a>00909          new_size *= 2;
<a name="l00910"></a>00910 
<a name="l00911"></a>00911       <span class="keywordflow">if</span> (<a class="code" href="utils_8c.html#c167a6ca0bda45af949abe019acd3a5a">add_string_pool</a>(mgr, new_size))
<a name="l00912"></a>00912          <span class="keywordflow">return</span> NULL;
<a name="l00913"></a>00913    }
<a name="l00914"></a>00914 
<a name="l00915"></a>00915    result = mgr-&gt;<a class="code" href="structast__string__field__mgr.html#b10a8c0bede9eb4ea771b04db3149f28">pool</a>-&gt;<a class="code" href="structast__string__field__pool.html#0cae4e06e49a3dae64bdf038332d3aa7">base</a> + mgr-&gt;<a class="code" href="structast__string__field__mgr.html#1aec9c5d0644e11fd9dd0f9fb36009fb">used</a>;
<a name="l00916"></a>00916    mgr-&gt;<a class="code" href="structast__string__field__mgr.html#1aec9c5d0644e11fd9dd0f9fb36009fb">used</a> += needed;
<a name="l00917"></a>00917    mgr-&gt;<a class="code" href="structast__string__field__mgr.html#ff2364a0be3d20e46cc69efb36afe9a5">space</a> -= needed;
<a name="l00918"></a>00918    <span class="keywordflow">return</span> result;
<a name="l00919"></a>00919 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b4781bd4317422012235e4546fb0c533"></a><!-- doxytag: member="stringfields.h::__ast_string_field_index_build" ref="b4781bd4317422012235e4546fb0c533" args="(struct ast_string_field_mgr *mgr, ast_string_field *fields, int num_fields, int index, const char *format,...)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void __ast_string_field_index_build           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__string__field__mgr.html">ast_string_field_mgr</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>fields</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>num_fields</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utils_8c-source.html#l00948">948</a> of file <a class="el" href="utils_8c-source.html">utils.c</a>.
<p>
References <a class="el" href="utils_8c-source.html#l00921">__ast_string_field_index_build_va()</a>.<div class="fragment"><pre class="fragment"><a name="l00951"></a>00951 {
<a name="l00952"></a>00952    va_list ap1, ap2;
<a name="l00953"></a>00953 
<a name="l00954"></a>00954    va_start(ap1, <a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>);
<a name="l00955"></a>00955    va_start(ap2, <a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>);     <span class="comment">/* va_copy does not exist on FreeBSD */</span>
<a name="l00956"></a>00956 
<a name="l00957"></a>00957    <a class="code" href="utils_8c.html#e2abb27018db42554ea1f663ca29e884">__ast_string_field_index_build_va</a>(mgr, fields, num_fields, index, <a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>, ap1, ap2);
<a name="l00958"></a>00958 
<a name="l00959"></a>00959    va_end(ap1);
<a name="l00960"></a>00960    va_end(ap2);
<a name="l00961"></a>00961 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="93ae06609b07050ae59fcf330f8e5f08"></a><!-- doxytag: member="stringfields.h::__ast_string_field_index_build_va" ref="93ae06609b07050ae59fcf330f8e5f08" args="(struct ast_string_field_mgr *mgr, ast_string_field *fields, int num_fields, int index, const char *format, va_list a1, va_list a2)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void __ast_string_field_index_build_va           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__string__field__mgr.html">ast_string_field_mgr</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>fields</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>num_fields</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>format</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>va_list&nbsp;</td>
          <td class="mdname" nowrap> <em>a1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>va_list&nbsp;</td>
          <td class="mdname" nowrap> <em>a2</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utils_8c-source.html#l00921">921</a> of file <a class="el" href="utils_8c-source.html">utils.c</a>.
<p>
References <a class="el" href="utils_8c-source.html#l00870">add_string_pool()</a>, <a class="el" href="stringfields_8h-source.html#l00114">ast_string_field_pool::base</a>, <a class="el" href="stringfields_8h-source.html#l00122">ast_string_field_mgr::pool</a>, <a class="el" href="stringfields_8h-source.html#l00123">ast_string_field_mgr::size</a>, <a class="el" href="stringfields_8h-source.html#l00124">ast_string_field_mgr::space</a>, and <a class="el" href="stringfields_8h-source.html#l00125">ast_string_field_mgr::used</a>.
<p>
Referenced by <a class="el" href="utils_8c-source.html#l00948">__ast_string_field_index_build()</a>.<div class="fragment"><pre class="fragment"><a name="l00924"></a>00924 {
<a name="l00925"></a>00925    size_t needed;
<a name="l00926"></a>00926 
<a name="l00927"></a>00927    needed = vsnprintf(mgr-&gt;<a class="code" href="structast__string__field__mgr.html#b10a8c0bede9eb4ea771b04db3149f28">pool</a>-&gt;<a class="code" href="structast__string__field__pool.html#0cae4e06e49a3dae64bdf038332d3aa7">base</a> + mgr-&gt;<a class="code" href="structast__string__field__mgr.html#1aec9c5d0644e11fd9dd0f9fb36009fb">used</a>, mgr-&gt;<a class="code" href="structast__string__field__mgr.html#ff2364a0be3d20e46cc69efb36afe9a5">space</a>, <a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>, ap1) + 1;
<a name="l00928"></a>00928 
<a name="l00929"></a>00929    va_end(ap1);
<a name="l00930"></a>00930 
<a name="l00931"></a>00931    <span class="keywordflow">if</span> (needed &gt; mgr-&gt;<a class="code" href="structast__string__field__mgr.html#ff2364a0be3d20e46cc69efb36afe9a5">space</a>) {
<a name="l00932"></a>00932       size_t new_size = mgr-&gt;<a class="code" href="structast__string__field__mgr.html#f7bd60b75b29d79b660a2859395c1a24">size</a> * 2;
<a name="l00933"></a>00933 
<a name="l00934"></a>00934       <span class="keywordflow">while</span> (new_size &lt; needed)
<a name="l00935"></a>00935          new_size *= 2;
<a name="l00936"></a>00936 
<a name="l00937"></a>00937       <span class="keywordflow">if</span> (<a class="code" href="utils_8c.html#c167a6ca0bda45af949abe019acd3a5a">add_string_pool</a>(mgr, new_size))
<a name="l00938"></a>00938          <span class="keywordflow">return</span>;
<a name="l00939"></a>00939 
<a name="l00940"></a>00940       vsprintf(mgr-&gt;<a class="code" href="structast__string__field__mgr.html#b10a8c0bede9eb4ea771b04db3149f28">pool</a>-&gt;<a class="code" href="structast__string__field__pool.html#0cae4e06e49a3dae64bdf038332d3aa7">base</a> + mgr-&gt;<a class="code" href="structast__string__field__mgr.html#1aec9c5d0644e11fd9dd0f9fb36009fb">used</a>, <a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>, ap2);
<a name="l00941"></a>00941    }
<a name="l00942"></a>00942 
<a name="l00943"></a>00943    fields[index] = mgr-&gt;<a class="code" href="structast__string__field__mgr.html#b10a8c0bede9eb4ea771b04db3149f28">pool</a>-&gt;<a class="code" href="structast__string__field__pool.html#0cae4e06e49a3dae64bdf038332d3aa7">base</a> + mgr-&gt;<a class="code" href="structast__string__field__mgr.html#1aec9c5d0644e11fd9dd0f9fb36009fb">used</a>;
<a name="l00944"></a>00944    mgr-&gt;<a class="code" href="structast__string__field__mgr.html#1aec9c5d0644e11fd9dd0f9fb36009fb">used</a> += needed;
<a name="l00945"></a>00945    mgr-&gt;<a class="code" href="structast__string__field__mgr.html#ff2364a0be3d20e46cc69efb36afe9a5">space</a> -= needed;
<a name="l00946"></a>00946 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="310f86ebc44c9bef971fd5bedfbec7df"></a><!-- doxytag: member="stringfields.h::__ast_string_field_init" ref="310f86ebc44c9bef971fd5bedfbec7df" args="(struct ast_string_field_mgr *mgr, size_t size, ast_string_field *fields, int num_fields)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int __ast_string_field_init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__string__field__mgr.html">ast_string_field_mgr</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="stringfields_8h.html#2d79148c6dc2f7a8138afa0a85770cbc">ast_string_field</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>fields</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>num_fields</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utils_8c-source.html#l00886">886</a> of file <a class="el" href="utils_8c-source.html">utils.c</a>.
<p>
References <a class="el" href="utils_8c-source.html#l00868">__ast_string_field_empty</a>, and <a class="el" href="utils_8c-source.html#l00870">add_string_pool()</a>.<div class="fragment"><pre class="fragment"><a name="l00888"></a>00888 {
<a name="l00889"></a>00889    <span class="keywordtype">int</span> index;
<a name="l00890"></a>00890 
<a name="l00891"></a>00891    <span class="keywordflow">if</span> (<a class="code" href="utils_8c.html#c167a6ca0bda45af949abe019acd3a5a">add_string_pool</a>(mgr, <a class="code" href="structast__string__field__mgr.html#f7bd60b75b29d79b660a2859395c1a24">size</a>))
<a name="l00892"></a>00892       <span class="keywordflow">return</span> -1;
<a name="l00893"></a>00893 
<a name="l00894"></a>00894    <span class="keywordflow">for</span> (index = 0; index &lt; num_fields; index++)
<a name="l00895"></a>00895       fields[index] = <a class="code" href="utils_8c.html#81e80e3876c62b53029a14beb5c952a0">__ast_string_field_empty</a>;
<a name="l00896"></a>00896 
<a name="l00897"></a>00897    <span class="keywordflow">return</span> 0;
<a name="l00898"></a>00898 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="81e80e3876c62b53029a14beb5c952a0"></a><!-- doxytag: member="stringfields.h::__ast_string_field_empty" ref="81e80e3876c62b53029a14beb5c952a0" args="[]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char <a class="el" href="stringfields_8h.html#81e80e3876c62b53029a14beb5c952a0">__ast_string_field_empty</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utils_8c-source.html#l00868">868</a> of file <a class="el" href="utils_8c-source.html">utils.c</a>.
<p>
Referenced by <a class="el" href="utils_8c-source.html#l00886">__ast_string_field_init()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu May 24 22:27:47 2007 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
