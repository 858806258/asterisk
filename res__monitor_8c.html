<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (24 May 2007)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Thu May 24 22:27:44 2007</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Fres_2F.html">res</a></div>
<h1>res_monitor.c File Reference</h1>PBX channel monitoring. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="asterisk_8h-source.html">asterisk.h</a>&quot;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;errno.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;sys/types.h&gt;</code><br>
<code>#include &lt;sys/stat.h&gt;</code><br>
<code>#include &lt;libgen.h&gt;</code><br>
<code>#include &quot;<a class="el" href="lock_8h-source.html">asterisk/lock.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="channel_8h-source.html">asterisk/channel.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="logger_8h-source.html">asterisk/logger.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="file_8h-source.html">asterisk/file.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="pbx_8h-source.html">asterisk/pbx.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="module_8h-source.html">asterisk/module.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="manager_8h-source.html">asterisk/manager.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="cli_8h-source.html">asterisk/cli.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="monitor_8h-source.html">asterisk/monitor.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="app_8h-source.html">asterisk/app.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="utils_8h-source.html">asterisk/utils.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="config_8h-source.html">asterisk/config.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="options_8h-source.html">asterisk/options.h</a>&quot;</code><br>

<p>
<a href="res__monitor_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#f90045c6b3e543bfe3b3e5b57445f319">LOCK_IF_NEEDED</a>(<a class="el" href="app__queue_8c.html#dce7c4174ce9323904a934a486c41288">lock</a>, needed)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#39a6544f75f8deaf513a27d704765af9">UNLOCK_IF_NEEDED</a>(<a class="el" href="app__queue_8c.html#dce7c4174ce9323904a934a486c41288">lock</a>, needed)</td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#b3c2654283d3b96950e8b01662a31808">MONITOR_PAUSING_ACTION</a> { <a class="el" href="res__monitor_8c.html#b3c2654283d3b96950e8b01662a31808d5249337a1ee77f3527aa8a4e9d147a3">MONITOR_ACTION_PAUSE</a>, 
<a class="el" href="res__monitor_8c.html#b3c2654283d3b96950e8b01662a31808f66a95032107278b7f7d6a0fcc34b330">MONITOR_ACTION_UNPAUSE</a>
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#e526f01e00dbb61dff23c2bd1c12738b">AST_MODULE_INFO</a> (ASTERISK_GPL_KEY, AST_MODFLAG_GLOBAL_SYMBOLS,&quot;Call Monitoring Resource&quot;,.load=load_module,.unload=unload_module,)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#b920883a248d93215cda31effa692ed3">ast_monitor_change_fname</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, const char *fname_base, int need_lock)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#ce422ff6a5850f68e038e967a5b094ce">ast_monitor_pause</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#53d963ce0ac197ee3969ae6c81e4e87b">ast_monitor_set_state</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, int <a class="el" href="structstate.html">state</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#21b1d71c9387ac99b6c5a7066a8a845c">ast_monitor_setjoinfiles</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, int turnon)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#4f4e162179064c9f0c8444a33f6fe27d">ast_monitor_start</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, const char *format_spec, const char *fname_base, int need_lock)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#0105c193291bd5aa095b584f2f4ea126">ast_monitor_stop</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, int need_lock)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#7cfb30d07bb72866508802173a655ba1">ast_monitor_unpause</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#5fff4acf485534628f477d1fedf86931">AST_MUTEX_DEFINE_STATIC</a> (monitorlock)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#5ea0fb3c84d771342d01a92f9234a6da">change_monitor_action</a> (struct <a class="el" href="structmansession.html">mansession</a> *s, const struct <a class="el" href="structmessage.html">message</a> *m)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#8493693fbf9d36a242c39c5dfa74866e">change_monitor_exec</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, void *data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#826d389d5bb7319e0a39ed9fa42d7b5f">do_pause_or_unpause</a> (struct <a class="el" href="structmansession.html">mansession</a> *s, const struct <a class="el" href="structmessage.html">message</a> *m, int action)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#50adae321837c2e2dfbfb1c620ce8f78">get_soxmix_format</a> (const char *<a class="el" href="cdr__custom_8c.html#b954976e6264c40232046aacb5b7c390">format</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#8c304b271325d497b3ce1886465a1abe">load_module</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#9a5d6283c7e1dce6f1eb3e36c0f8d91a">pause_monitor_action</a> (struct <a class="el" href="structmansession.html">mansession</a> *s, const struct <a class="el" href="structmessage.html">message</a> *m)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#1ee3ab9d4dd8fc24b6150e2ff24be88d">pause_monitor_exec</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, void *data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#26c78b57678e4241fab801599b3913ba">start_monitor_action</a> (struct <a class="el" href="structmansession.html">mansession</a> *s, const struct <a class="el" href="structmessage.html">message</a> *m)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#8c8ffb4a06ac76e2003ebad5e996b7df">start_monitor_exec</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, void *data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#58b9d45bc3bee946151e63afd5e3af82">stop_monitor_action</a> (struct <a class="el" href="structmansession.html">mansession</a> *s, const struct <a class="el" href="structmessage.html">message</a> *m)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#00b0c4e9a4b3dd7484dde4e70ac92280">stop_monitor_exec</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, void *data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#eaf793e807a29b69460b0c6c94a79a0b">unload_module</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#7d893f85ee899d6ea8a678f3c7073497">unpause_monitor_action</a> (struct <a class="el" href="structmansession.html">mansession</a> *s, const struct <a class="el" href="structmessage.html">message</a> *m)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#d841652a300b977fad6ff263c0351b0f">unpause_monitor_exec</a> (struct <a class="el" href="structast__channel.html">ast_channel</a> *<a class="el" href="adsistub_8c.html#26c322652770620e64ac90682eb6504c">chan</a>, void *data)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#860d493d5f2c49f9c46d3b0370087e63">change_monitor_action_help</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#3451fedc38324771782eb144504a0755">changemonitor_descrip</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#a975422a90da2977d2baccceac5ff7bd">changemonitor_synopsis</a> = &quot;Change monitoring filename of a channel&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#681043e0ddb4a9a1836d8ec08412eca8">monitor_descrip</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#df3922cb467d96b1aae7041602d12c35">monitor_synopsis</a> = &quot;Monitor a channel&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#6c3d197ea8953d85e1c9c07e03f469cf">pause_monitor_action_help</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#361f387bf41f76944e8dd79fd2cc6419">pausemonitor_descrip</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#9d89d89fe7cdc2abd6ef1ead4b4a52d7">pausemonitor_synopsis</a> = &quot;Pause monitoring of a channel&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#e068c2de26d760f20cf10afc4b87ef0f">seq</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#75e51867ced5678ac326cfc1405fd83b">start_monitor_action_help</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#648a6d4f8e9ae37c4ef2bf38149a0f95">stop_monitor_action_help</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#8809f3d6c94380a4882693904571dcc7">stopmonitor_descrip</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#d9cb00ce4df1736a36231353bfa99331">stopmonitor_synopsis</a> = &quot;Stop monitoring a channel&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#4300d9ae52421248c07e1dccf8a8db92">unpause_monitor_action_help</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#ff764e2301f43fd063914051e1ff3eed">unpausemonitor_descrip</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="res__monitor_8c.html#ac04a66d69ebd954ce39f054d6fbcf94">unpausemonitor_synopsis</a> = &quot;Unpause monitoring of a channel&quot;</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
PBX channel monitoring. 
<p>
<dl compact><dt><b>Author:</b></dt><dd>Mark Spencer &lt;<a href="mailto:markster@digium.com">markster@digium.com</a>&gt; </dd></dl>

<p>
Definition in file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="f90045c6b3e543bfe3b3e5b57445f319"></a><!-- doxytag: member="res_monitor.c::LOCK_IF_NEEDED" ref="f90045c6b3e543bfe3b3e5b57445f319" args="(lock, needed)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define LOCK_IF_NEEDED          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="app__queue_8c.html#dce7c4174ce9323904a934a486c41288">lock</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>needed&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
   <span class="keywordflow">if</span> (needed) \
      <a class="code" href="lock_8h.html#0a2d3319a8f002f769ab38110cef9699">ast_channel_lock</a>(<a class="code" href="event_8c.html#dce7c4174ce9323904a934a486c41288">lock</a>); \
   } <span class="keywordflow">while</span>(0)
</pre></div>
<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00054">54</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00358">ast_monitor_change_fname()</a>, <a class="el" href="res__monitor_8c-source.html#l00114">ast_monitor_set_state()</a>, <a class="el" href="res__monitor_8c-source.html#l00127">ast_monitor_start()</a>, and <a class="el" href="res__monitor_8c-source.html#l00254">ast_monitor_stop()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="39a6544f75f8deaf513a27d704765af9"></a><!-- doxytag: member="res_monitor.c::UNLOCK_IF_NEEDED" ref="39a6544f75f8deaf513a27d704765af9" args="(lock, needed)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define UNLOCK_IF_NEEDED          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="app__queue_8c.html#dce7c4174ce9323904a934a486c41288">lock</a>,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>needed&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
   <span class="keywordflow">if</span> (needed) \
      <a class="code" href="lock_8h.html#a2fac4e1b143bef3b1ac807e0ab48f9f">ast_channel_unlock</a>(<a class="code" href="event_8c.html#dce7c4174ce9323904a934a486c41288">lock</a>); \
   } <span class="keywordflow">while</span> (0)
</pre></div>
<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00059">59</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00358">ast_monitor_change_fname()</a>, <a class="el" href="res__monitor_8c-source.html#l00114">ast_monitor_set_state()</a>, <a class="el" href="res__monitor_8c-source.html#l00127">ast_monitor_start()</a>, and <a class="el" href="res__monitor_8c-source.html#l00254">ast_monitor_stop()</a>.    </td>
  </tr>
</table>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="b3c2654283d3b96950e8b01662a31808"></a><!-- doxytag: member="res_monitor.c::MONITOR_PAUSING_ACTION" ref="b3c2654283d3b96950e8b01662a31808" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="res__monitor_8c.html#b3c2654283d3b96950e8b01662a31808">MONITOR_PAUSING_ACTION</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="b3c2654283d3b96950e8b01662a31808d5249337a1ee77f3527aa8a4e9d147a3"></a><!-- doxytag: member="MONITOR_ACTION_PAUSE" ref="b3c2654283d3b96950e8b01662a31808d5249337a1ee77f3527aa8a4e9d147a3" args="" -->MONITOR_ACTION_PAUSE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="b3c2654283d3b96950e8b01662a31808f66a95032107278b7f7d6a0fcc34b330"></a><!-- doxytag: member="MONITOR_ACTION_UNPAUSE" ref="b3c2654283d3b96950e8b01662a31808f66a95032107278b7f7d6a0fcc34b330" args="" -->MONITOR_ACTION_UNPAUSE</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00600">600</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.<div class="fragment"><pre class="fragment"><a name="l00601"></a>00601 {
<a name="l00602"></a>00602    <a class="code" href="res__monitor_8c.html#b3c2654283d3b96950e8b01662a31808d5249337a1ee77f3527aa8a4e9d147a3">MONITOR_ACTION_PAUSE</a>,
<a name="l00603"></a>00603    <a class="code" href="res__monitor_8c.html#b3c2654283d3b96950e8b01662a31808f66a95032107278b7f7d6a0fcc34b330">MONITOR_ACTION_UNPAUSE</a>
<a name="l00604"></a>00604 };
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="e526f01e00dbb61dff23c2bd1c12738b"></a><!-- doxytag: member="res_monitor.c::AST_MODULE_INFO" ref="e526f01e00dbb61dff23c2bd1c12738b" args="(ASTERISK_GPL_KEY, AST_MODFLAG_GLOBAL_SYMBOLS,&quot;Call Monitoring Resource&quot;,.load=load_module,.unload=unload_module,)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">AST_MODULE_INFO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ASTERISK_GPL_KEY&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>AST_MODFLAG_GLOBAL_SYMBOLS&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&quot;Call Monitoring Resource&quot;&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>.&nbsp;</td>
          <td class="mdname" nowrap> <em>load</em> = <code>load_module</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>.&nbsp;</td>
          <td class="mdname" nowrap> <em>unload</em> = <code>unload_module</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b920883a248d93215cda31effa692ed3"></a><!-- doxytag: member="res_monitor.c::ast_monitor_change_fname" ref="b920883a248d93215cda31effa692ed3" args="(struct ast_channel *chan, const char *fname_base, int need_lock)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_monitor_change_fname           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>fname_base</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>need_lock</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00358">358</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="asterisk_8c-source.html#l00214">ast_config_AST_MONITOR_DIR</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="asterisk_8c-source.html#l00746">ast_safe_system()</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="monitor_8h-source.html#l00039">ast_channel_monitor::filename_base</a>, <a class="el" href="monitor_8h-source.html#l00040">ast_channel_monitor::filename_changed</a>, <a class="el" href="private_8h-source.html#l00144">FILENAME_MAX</a>, <a class="el" href="astmm_8h-source.html#l00069">free</a>, <a class="el" href="res__monitor_8c-source.html#l00054">LOCK_IF_NEEDED</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="channel_8h-source.html#l00457">ast_channel::monitor</a>, <a class="el" href="callerid_8c-source.html#l01043">name</a>, <a class="el" href="astmm_8h-source.html#l00075">strdup</a>, and <a class="el" href="res__monitor_8c-source.html#l00059">UNLOCK_IF_NEEDED</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00566">change_monitor_action()</a>, <a class="el" href="res__monitor_8c-source.html#l00462">change_monitor_exec()</a>, <a class="el" href="res__monitor_8c-source.html#l00481">start_monitor_action()</a>, and <a class="el" href="res__monitor_8c-source.html#l00389">start_monitor_exec()</a>.<div class="fragment"><pre class="fragment"><a name="l00359"></a>00359 {
<a name="l00360"></a>00360    <span class="keywordtype">char</span> tmp[256];
<a name="l00361"></a>00361    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(fname_base)) {
<a name="l00362"></a>00362       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Cannot change monitor filename of channel %s to null\n"</span>, chan-&gt;name);
<a name="l00363"></a>00363       <span class="keywordflow">return</span> -1;
<a name="l00364"></a>00364    }
<a name="l00365"></a>00365 
<a name="l00366"></a>00366    <a class="code" href="res__monitor_8c.html#f90045c6b3e543bfe3b3e5b57445f319">LOCK_IF_NEEDED</a>(chan, need_lock);
<a name="l00367"></a>00367 
<a name="l00368"></a>00368    <span class="keywordflow">if</span> (chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>) {
<a name="l00369"></a>00369       <span class="keywordtype">int</span> directory = strchr(fname_base, <span class="charliteral">'/'</span>) ? 1 : 0;
<a name="l00370"></a>00370       <span class="comment">/* try creating the directory just in case it doesn't exist */</span>
<a name="l00371"></a>00371       <span class="keywordflow">if</span> (directory) {
<a name="l00372"></a>00372          <span class="keywordtype">char</span> *<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a> = <a class="code" href="astmm_8h.html#17881997a89ddffd239268f0476567d0">strdup</a>(fname_base);
<a name="l00373"></a>00373          snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">"mkdir -p %s"</span>,dirname(name));
<a name="l00374"></a>00374          <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(name);
<a name="l00375"></a>00375          <a class="code" href="asterisk_8c.html#ceb3925bf8c3e3d21d9246872548f5df">ast_safe_system</a>(tmp);
<a name="l00376"></a>00376       }
<a name="l00377"></a>00377 
<a name="l00378"></a>00378       snprintf(chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#cc4efa60a835b6bc8d83a75e15eaa1eb">filename_base</a>, <a class="code" href="private_8h.html#69c2543ab0f552b97b44602a910e7cce">FILENAME_MAX</a>, <span class="stringliteral">"%s/%s"</span>, directory ? <span class="stringliteral">""</span> : <a class="code" href="asterisk_8c.html#e30f110a2a02a50a63b05fe5ba3206b6">ast_config_AST_MONITOR_DIR</a>, fname_base);
<a name="l00379"></a>00379       chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#df66eb304be2a1bf4a34beba678a82fd">filename_changed</a> = 1;
<a name="l00380"></a>00380    } <span class="keywordflow">else</span> {
<a name="l00381"></a>00381       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Cannot change monitor filename of channel %s to %s, monitoring not started\n"</span>, chan-&gt;name, fname_base);
<a name="l00382"></a>00382    }
<a name="l00383"></a>00383 
<a name="l00384"></a>00384    <a class="code" href="res__monitor_8c.html#39a6544f75f8deaf513a27d704765af9">UNLOCK_IF_NEEDED</a>(chan, need_lock);
<a name="l00385"></a>00385 
<a name="l00386"></a>00386    <span class="keywordflow">return</span> 0;
<a name="l00387"></a>00387 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ce422ff6a5850f68e038e967a5b094ce"></a><!-- doxytag: member="res_monitor.c::ast_monitor_pause" ref="ce422ff6a5850f68e038e967a5b094ce" args="(struct ast_channel *chan)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_monitor_pause           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>chan</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00336">336</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="monitor_8h.html#68c252a4174f79a63bcedd9f1c005088894eaba5a4c66fafb46b0c82d8f68996">AST_MONITOR_PAUSED</a>, and <a class="el" href="res__monitor_8c-source.html#l00114">ast_monitor_set_state()</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00606">do_pause_or_unpause()</a>, and <a class="el" href="res__monitor_8c-source.html#l00347">pause_monitor_exec()</a>.<div class="fragment"><pre class="fragment"><a name="l00337"></a>00337 {
<a name="l00338"></a>00338    <span class="keywordflow">return</span> <a class="code" href="res__monitor_8c.html#53d963ce0ac197ee3969ae6c81e4e87b">ast_monitor_set_state</a>(chan, <a class="code" href="monitor_8h.html#68c252a4174f79a63bcedd9f1c005088894eaba5a4c66fafb46b0c82d8f68996">AST_MONITOR_PAUSED</a>);
<a name="l00339"></a>00339 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="53d963ce0ac197ee3969ae6c81e4e87b"></a><!-- doxytag: member="res_monitor.c::ast_monitor_set_state" ref="53d963ce0ac197ee3969ae6c81e4e87b" args="(struct ast_channel *chan, int state)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int ast_monitor_set_state           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>state</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00114">114</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="res__monitor_8c-source.html#l00054">LOCK_IF_NEEDED</a>, <a class="el" href="channel_8h-source.html#l00457">ast_channel::monitor</a>, <a class="el" href="monitor_8h-source.html#l00043">ast_channel_monitor::state</a>, and <a class="el" href="res__monitor_8c-source.html#l00059">UNLOCK_IF_NEEDED</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00336">ast_monitor_pause()</a>, <a class="el" href="res__monitor_8c-source.html#l00127">ast_monitor_start()</a>, and <a class="el" href="res__monitor_8c-source.html#l00342">ast_monitor_unpause()</a>.<div class="fragment"><pre class="fragment"><a name="l00115"></a>00115 {
<a name="l00116"></a>00116    <a class="code" href="res__monitor_8c.html#f90045c6b3e543bfe3b3e5b57445f319">LOCK_IF_NEEDED</a>(chan, 1);
<a name="l00117"></a>00117    <span class="keywordflow">if</span> (!chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>) {
<a name="l00118"></a>00118       <a class="code" href="res__monitor_8c.html#39a6544f75f8deaf513a27d704765af9">UNLOCK_IF_NEEDED</a>(chan, 1);
<a name="l00119"></a>00119       <span class="keywordflow">return</span> -1;
<a name="l00120"></a>00120    }
<a name="l00121"></a>00121    chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#9ed39e2ea931586b6a985a6942ef573e">state</a> = <a class="code" href="structstate.html">state</a>;
<a name="l00122"></a>00122    <a class="code" href="res__monitor_8c.html#39a6544f75f8deaf513a27d704765af9">UNLOCK_IF_NEEDED</a>(chan, 1);
<a name="l00123"></a>00123    <span class="keywordflow">return</span> 0;
<a name="l00124"></a>00124 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="21b1d71c9387ac99b6c5a7066a8a845c"></a><!-- doxytag: member="res_monitor.c::ast_monitor_setjoinfiles" ref="21b1d71c9387ac99b6c5a7066a8a845c" args="(struct ast_channel *chan, int turnon)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_monitor_setjoinfiles           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>turnon</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00594">594</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="monitor_8h-source.html#l00042">ast_channel_monitor::joinfiles</a>, and <a class="el" href="channel_8h-source.html#l00457">ast_channel::monitor</a>.
<p>
Referenced by <a class="el" href="chan__agent_8c-source.html#l00394">__agent_start_monitoring()</a>, <a class="el" href="res__monitor_8c-source.html#l00481">start_monitor_action()</a>, <a class="el" href="res__monitor_8c-source.html#l00389">start_monitor_exec()</a>, and <a class="el" href="app__queue_8c-source.html#l02421">try_calling()</a>.<div class="fragment"><pre class="fragment"><a name="l00595"></a>00595 {
<a name="l00596"></a>00596    <span class="keywordflow">if</span> (chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>)
<a name="l00597"></a>00597       chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#55dc53055b6d97c2c86b93c76c625b85">joinfiles</a> = turnon;
<a name="l00598"></a>00598 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="4f4e162179064c9f0c8444a33f6fe27d"></a><!-- doxytag: member="res_monitor.c::ast_monitor_start" ref="4f4e162179064c9f0c8444a33f6fe27d" args="(struct ast_channel *chan, const char *format_spec, const char *fname_base, int need_lock)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_monitor_start           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>format_spec</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>fname_base</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>need_lock</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00127">127</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>, <a class="el" href="file_8c-source.html#l00701">ast_closestream()</a>, <a class="el" href="asterisk_8c-source.html#l00214">ast_config_AST_MONITOR_DIR</a>, <a class="el" href="asterisk_8h-source.html#l00041">AST_FILE_MODE</a>, <a class="el" href="file_8c-source.html#l00766">ast_filedelete()</a>, <a class="el" href="file_8c-source.html#l00752">ast_fileexists()</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="monitor_8h.html#68c252a4174f79a63bcedd9f1c0050884352f541f9b1e83d30923f2cec1777ef">AST_MONITOR_RUNNING</a>, <a class="el" href="res__monitor_8c-source.html#l00114">ast_monitor_set_state()</a>, <a class="el" href="res__monitor_8c-source.html#l00254">ast_monitor_stop()</a>, <a class="el" href="lock_8h-source.html#l00530">ast_mutex_lock()</a>, <a class="el" href="lock_8h-source.html#l00520">ast_mutex_unlock()</a>, <a class="el" href="asterisk_8c-source.html#l00746">ast_safe_system()</a>, <a class="el" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="file_8c-source.html#l00856">ast_writefile()</a>, <a class="el" href="private_8h-source.html#l00144">FILENAME_MAX</a>, <a class="el" href="astmm_8h-source.html#l00069">free</a>, <a class="el" href="res__monitor_8c-source.html#l00054">LOCK_IF_NEEDED</a>, <a class="el" href="logger_8h-source.html#l00094">LOG_DEBUG</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="chan__phone_8c-source.html#l00111">monitor</a>, <a class="el" href="channel_8h-source.html#l00457">ast_channel::monitor</a>, <a class="el" href="callerid_8c-source.html#l01043">name</a>, <a class="el" href="asterisk_8c-source.html#l00164">option_debug</a>, <a class="el" href="pbx_8c-source.html#l05821">pbx_builtin_setvar_helper()</a>, <a class="el" href="app__sms_8c-source.html#l00072">seq</a>, <a class="el" href="astmm_8h-source.html#l00075">strdup</a>, and <a class="el" href="res__monitor_8c-source.html#l00059">UNLOCK_IF_NEEDED</a>.
<p>
Referenced by <a class="el" href="chan__agent_8c-source.html#l00394">__agent_start_monitoring()</a>, <a class="el" href="res__monitor_8c-source.html#l00481">start_monitor_action()</a>, <a class="el" href="res__monitor_8c-source.html#l00389">start_monitor_exec()</a>, and <a class="el" href="app__queue_8c-source.html#l02421">try_calling()</a>.<div class="fragment"><pre class="fragment"><a name="l00129"></a>00129 {
<a name="l00130"></a>00130    <span class="keywordtype">int</span> res = 0;
<a name="l00131"></a>00131    <span class="keywordtype">char</span> tmp[256];
<a name="l00132"></a>00132 
<a name="l00133"></a>00133    <a class="code" href="res__monitor_8c.html#f90045c6b3e543bfe3b3e5b57445f319">LOCK_IF_NEEDED</a>(chan, need_lock);
<a name="l00134"></a>00134 
<a name="l00135"></a>00135    <span class="keywordflow">if</span> (!(chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>)) {
<a name="l00136"></a>00136       <span class="keyword">struct </span><a class="code" href="structast__channel__monitor.html">ast_channel_monitor</a> *<a class="code" href="chan__phone_8c.html#08b5411f848a2581a41672a759c87380">monitor</a>;
<a name="l00137"></a>00137       <span class="keywordtype">char</span> *channel_name, *p;
<a name="l00138"></a>00138 
<a name="l00139"></a>00139       <span class="comment">/* Create monitoring directory if needed */</span>
<a name="l00140"></a>00140       <span class="keywordflow">if</span> (mkdir(<a class="code" href="asterisk_8c.html#e30f110a2a02a50a63b05fe5ba3206b6">ast_config_AST_MONITOR_DIR</a>, 0770) &lt; 0) {
<a name="l00141"></a>00141          <span class="keywordflow">if</span> (errno != EEXIST) {
<a name="l00142"></a>00142             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Unable to create audio monitor directory: %s\n"</span>,
<a name="l00143"></a>00143                strerror(errno));
<a name="l00144"></a>00144          }
<a name="l00145"></a>00145       }
<a name="l00146"></a>00146 
<a name="l00147"></a>00147       <span class="keywordflow">if</span> (!(monitor = <a class="code" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*monitor)))) {
<a name="l00148"></a>00148          <a class="code" href="res__monitor_8c.html#39a6544f75f8deaf513a27d704765af9">UNLOCK_IF_NEEDED</a>(chan, need_lock);
<a name="l00149"></a>00149          <span class="keywordflow">return</span> -1;
<a name="l00150"></a>00150       }
<a name="l00151"></a>00151 
<a name="l00152"></a>00152       <span class="comment">/* Determine file names */</span>
<a name="l00153"></a>00153       <span class="keywordflow">if</span> (!<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(fname_base)) {
<a name="l00154"></a>00154          <span class="keywordtype">int</span> directory = strchr(fname_base, <span class="charliteral">'/'</span>) ? 1 : 0;
<a name="l00155"></a>00155          <span class="comment">/* try creating the directory just in case it doesn't exist */</span>
<a name="l00156"></a>00156          <span class="keywordflow">if</span> (directory) {
<a name="l00157"></a>00157             <span class="keywordtype">char</span> *<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a> = <a class="code" href="astmm_8h.html#17881997a89ddffd239268f0476567d0">strdup</a>(fname_base);
<a name="l00158"></a>00158             snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">"mkdir -p \"%s\""</span>,dirname(name));
<a name="l00159"></a>00159             <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(name);
<a name="l00160"></a>00160             <a class="code" href="asterisk_8c.html#ceb3925bf8c3e3d21d9246872548f5df">ast_safe_system</a>(tmp);
<a name="l00161"></a>00161          }
<a name="l00162"></a>00162          snprintf(monitor-&gt;read_filename, <a class="code" href="private_8h.html#69c2543ab0f552b97b44602a910e7cce">FILENAME_MAX</a>, <span class="stringliteral">"%s/%s-in"</span>,
<a name="l00163"></a>00163                   directory ? <span class="stringliteral">""</span> : <a class="code" href="asterisk_8c.html#e30f110a2a02a50a63b05fe5ba3206b6">ast_config_AST_MONITOR_DIR</a>, fname_base);
<a name="l00164"></a>00164          snprintf(monitor-&gt;write_filename, <a class="code" href="private_8h.html#69c2543ab0f552b97b44602a910e7cce">FILENAME_MAX</a>, <span class="stringliteral">"%s/%s-out"</span>,
<a name="l00165"></a>00165                   directory ? <span class="stringliteral">""</span> : <a class="code" href="asterisk_8c.html#e30f110a2a02a50a63b05fe5ba3206b6">ast_config_AST_MONITOR_DIR</a>, fname_base);
<a name="l00166"></a>00166          ast_copy_string(monitor-&gt;filename_base, fname_base, <span class="keyword">sizeof</span>(monitor-&gt;filename_base));
<a name="l00167"></a>00167       } <span class="keywordflow">else</span> {
<a name="l00168"></a>00168          <a class="code" href="lock_8h.html#b3c5e3093b325167f88db93c8b4b2421">ast_mutex_lock</a>(&amp;monitorlock);
<a name="l00169"></a>00169          snprintf(monitor-&gt;read_filename, <a class="code" href="private_8h.html#69c2543ab0f552b97b44602a910e7cce">FILENAME_MAX</a>, <span class="stringliteral">"%s/audio-in-%ld"</span>,
<a name="l00170"></a>00170                   <a class="code" href="asterisk_8c.html#e30f110a2a02a50a63b05fe5ba3206b6">ast_config_AST_MONITOR_DIR</a>, <a class="code" href="app__sms_8c.html#e068c2de26d760f20cf10afc4b87ef0f">seq</a>);
<a name="l00171"></a>00171          snprintf(monitor-&gt;write_filename, <a class="code" href="private_8h.html#69c2543ab0f552b97b44602a910e7cce">FILENAME_MAX</a>, <span class="stringliteral">"%s/audio-out-%ld"</span>,
<a name="l00172"></a>00172                   <a class="code" href="asterisk_8c.html#e30f110a2a02a50a63b05fe5ba3206b6">ast_config_AST_MONITOR_DIR</a>, <a class="code" href="app__sms_8c.html#e068c2de26d760f20cf10afc4b87ef0f">seq</a>);
<a name="l00173"></a>00173          <a class="code" href="app__sms_8c.html#e068c2de26d760f20cf10afc4b87ef0f">seq</a>++;
<a name="l00174"></a>00174          <a class="code" href="lock_8h.html#1d33e3caf152f0901c5ebdb69c2d4d26">ast_mutex_unlock</a>(&amp;monitorlock);
<a name="l00175"></a>00175 
<a name="l00176"></a>00176          channel_name = <a class="code" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>(chan-&gt;name);
<a name="l00177"></a>00177          <span class="keywordflow">while</span> ((p = strchr(channel_name, <span class="charliteral">'/'</span>))) {
<a name="l00178"></a>00178             *p = <span class="charliteral">'-'</span>;
<a name="l00179"></a>00179          }
<a name="l00180"></a>00180          snprintf(monitor-&gt;filename_base, <a class="code" href="private_8h.html#69c2543ab0f552b97b44602a910e7cce">FILENAME_MAX</a>, <span class="stringliteral">"%s/%d-%s"</span>,
<a name="l00181"></a>00181                 <a class="code" href="asterisk_8c.html#e30f110a2a02a50a63b05fe5ba3206b6">ast_config_AST_MONITOR_DIR</a>, (<span class="keywordtype">int</span>)time(NULL), channel_name);
<a name="l00182"></a>00182          monitor-&gt;filename_changed = 1;
<a name="l00183"></a>00183       }
<a name="l00184"></a>00184 
<a name="l00185"></a>00185       monitor-&gt;stop = <a class="code" href="monitor_8h.html#0105c193291bd5aa095b584f2f4ea126">ast_monitor_stop</a>;
<a name="l00186"></a>00186 
<a name="l00187"></a>00187       <span class="comment">/* Determine file format */</span>
<a name="l00188"></a>00188       <span class="keywordflow">if</span> (!<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(format_spec)) {
<a name="l00189"></a>00189          monitor-&gt;format = <a class="code" href="astmm_8h.html#17881997a89ddffd239268f0476567d0">strdup</a>(format_spec);
<a name="l00190"></a>00190       } <span class="keywordflow">else</span> {
<a name="l00191"></a>00191          monitor-&gt;format = <a class="code" href="astmm_8h.html#17881997a89ddffd239268f0476567d0">strdup</a>(<span class="stringliteral">"wav"</span>);
<a name="l00192"></a>00192       }
<a name="l00193"></a>00193       
<a name="l00194"></a>00194       <span class="comment">/* open files */</span>
<a name="l00195"></a>00195       <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#5a3ec0398dc377f7850e62edc9e093df">ast_fileexists</a>(monitor-&gt;read_filename, NULL, NULL) &gt; 0) {
<a name="l00196"></a>00196          <a class="code" href="file_8c.html#5a0cbe1f8c9ff2126997209a785679d5">ast_filedelete</a>(monitor-&gt;read_filename, NULL);
<a name="l00197"></a>00197       }
<a name="l00198"></a>00198       <span class="keywordflow">if</span> (!(monitor-&gt;read_stream = <a class="code" href="file_8c.html#863a5fc977919f88d566c68efc408f7a">ast_writefile</a>(monitor-&gt;read_filename,
<a name="l00199"></a>00199                   monitor-&gt;format, NULL,
<a name="l00200"></a>00200                   O_CREAT|O_TRUNC|O_WRONLY, 0, <a class="code" href="asterisk_8h.html#40c72ca4a20a53b69eb99c554e214a82">AST_FILE_MODE</a>))) {
<a name="l00201"></a>00201          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Could not create file %s\n"</span>,
<a name="l00202"></a>00202                   monitor-&gt;read_filename);
<a name="l00203"></a>00203          <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(monitor);
<a name="l00204"></a>00204          <a class="code" href="res__monitor_8c.html#39a6544f75f8deaf513a27d704765af9">UNLOCK_IF_NEEDED</a>(chan, need_lock);
<a name="l00205"></a>00205          <span class="keywordflow">return</span> -1;
<a name="l00206"></a>00206       }
<a name="l00207"></a>00207       <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#5a3ec0398dc377f7850e62edc9e093df">ast_fileexists</a>(monitor-&gt;write_filename, NULL, NULL) &gt; 0) {
<a name="l00208"></a>00208          <a class="code" href="file_8c.html#5a0cbe1f8c9ff2126997209a785679d5">ast_filedelete</a>(monitor-&gt;write_filename, NULL);
<a name="l00209"></a>00209       }
<a name="l00210"></a>00210       <span class="keywordflow">if</span> (!(monitor-&gt;write_stream = <a class="code" href="file_8c.html#863a5fc977919f88d566c68efc408f7a">ast_writefile</a>(monitor-&gt;write_filename,
<a name="l00211"></a>00211                   monitor-&gt;format, NULL,
<a name="l00212"></a>00212                   O_CREAT|O_TRUNC|O_WRONLY, 0, <a class="code" href="asterisk_8h.html#40c72ca4a20a53b69eb99c554e214a82">AST_FILE_MODE</a>))) {
<a name="l00213"></a>00213          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Could not create file %s\n"</span>,
<a name="l00214"></a>00214                   monitor-&gt;write_filename);
<a name="l00215"></a>00215          <a class="code" href="file_8c.html#8d18ac7b6bb79201e6321c4b5cfadde2">ast_closestream</a>(monitor-&gt;read_stream);
<a name="l00216"></a>00216          <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(monitor);
<a name="l00217"></a>00217          <a class="code" href="res__monitor_8c.html#39a6544f75f8deaf513a27d704765af9">UNLOCK_IF_NEEDED</a>(chan, need_lock);
<a name="l00218"></a>00218          <span class="keywordflow">return</span> -1;
<a name="l00219"></a>00219       }
<a name="l00220"></a>00220       chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a> = monitor;
<a name="l00221"></a>00221       <a class="code" href="res__monitor_8c.html#53d963ce0ac197ee3969ae6c81e4e87b">ast_monitor_set_state</a>(chan, <a class="code" href="monitor_8h.html#68c252a4174f79a63bcedd9f1c0050884352f541f9b1e83d30923f2cec1777ef">AST_MONITOR_RUNNING</a>);
<a name="l00222"></a>00222       <span class="comment">/* so we know this call has been monitored in case we need to bill for it or something */</span>
<a name="l00223"></a>00223       <a class="code" href="pbx_8c.html#64407c916a2de6ae3f0efeca471c1b1d">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">"__MONITORED"</span>,<span class="stringliteral">"true"</span>);
<a name="l00224"></a>00224    } <span class="keywordflow">else</span> {
<a name="l00225"></a>00225       <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00226"></a>00226          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>,<span class="stringliteral">"Cannot start monitoring %s, already monitored\n"</span>,
<a name="l00227"></a>00227                   chan-&gt;name);
<a name="l00228"></a>00228       res = -1;
<a name="l00229"></a>00229    }
<a name="l00230"></a>00230 
<a name="l00231"></a>00231    <a class="code" href="res__monitor_8c.html#39a6544f75f8deaf513a27d704765af9">UNLOCK_IF_NEEDED</a>(chan, need_lock);
<a name="l00232"></a>00232 
<a name="l00233"></a>00233    <span class="keywordflow">return</span> res;
<a name="l00234"></a>00234 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="0105c193291bd5aa095b584f2f4ea126"></a><!-- doxytag: member="res_monitor.c::ast_monitor_stop" ref="0105c193291bd5aa095b584f2f4ea126" args="(struct ast_channel *chan, int need_lock)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_monitor_stop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>need_lock</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00254">254</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="file_8c-source.html#l00701">ast_closestream()</a>, <a class="el" href="asterisk_8c-source.html#l00214">ast_config_AST_MONITOR_DIR</a>, <a class="el" href="file_8c-source.html#l00766">ast_filedelete()</a>, <a class="el" href="file_8c-source.html#l00752">ast_fileexists()</a>, <a class="el" href="file_8c-source.html#l00771">ast_filerename()</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="asterisk_8c-source.html#l00746">ast_safe_system()</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="adsistub_8c-source.html#l00083">dir</a>, <a class="el" href="monitor_8h-source.html#l00039">ast_channel_monitor::filename_base</a>, <a class="el" href="monitor_8h-source.html#l00040">ast_channel_monitor::filename_changed</a>, <a class="el" href="private_8h-source.html#l00144">FILENAME_MAX</a>, <a class="el" href="chan__alsa_8c-source.html#l00103">format</a>, <a class="el" href="monitor_8h-source.html#l00041">ast_channel_monitor::format</a>, <a class="el" href="astmm_8h-source.html#l00069">free</a>, <a class="el" href="res__monitor_8c-source.html#l00241">get_soxmix_format()</a>, <a class="el" href="monitor_8h-source.html#l00042">ast_channel_monitor::joinfiles</a>, <a class="el" href="res__monitor_8c-source.html#l00054">LOCK_IF_NEEDED</a>, <a class="el" href="logger_8h-source.html#l00094">LOG_DEBUG</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="channel_8h-source.html#l00457">ast_channel::monitor</a>, <a class="el" href="callerid_8c-source.html#l01043">name</a>, <a class="el" href="asterisk_8c-source.html#l00164">option_debug</a>, <a class="el" href="pbx_8c-source.html#l05762">pbx_builtin_getvar_helper()</a>, <a class="el" href="monitor_8h-source.html#l00037">ast_channel_monitor::read_filename</a>, <a class="el" href="monitor_8h-source.html#l00035">ast_channel_monitor::read_stream</a>, <a class="el" href="res__monitor_8c-source.html#l00059">UNLOCK_IF_NEEDED</a>, <a class="el" href="monitor_8h-source.html#l00038">ast_channel_monitor::write_filename</a>, and <a class="el" href="monitor_8h-source.html#l00036">ast_channel_monitor::write_stream</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00127">ast_monitor_start()</a>, <a class="el" href="res__features_8c-source.html#l00562">builtin_automonitor()</a>, <a class="el" href="res__monitor_8c-source.html#l00534">stop_monitor_action()</a>, and <a class="el" href="res__monitor_8c-source.html#l00457">stop_monitor_exec()</a>.<div class="fragment"><pre class="fragment"><a name="l00255"></a>00255 {
<a name="l00256"></a>00256    <span class="keywordtype">int</span> delfiles = 0;
<a name="l00257"></a>00257 
<a name="l00258"></a>00258    <a class="code" href="res__monitor_8c.html#f90045c6b3e543bfe3b3e5b57445f319">LOCK_IF_NEEDED</a>(chan, need_lock);
<a name="l00259"></a>00259 
<a name="l00260"></a>00260    <span class="keywordflow">if</span> (chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>) {
<a name="l00261"></a>00261       <span class="keywordtype">char</span> filename[ <a class="code" href="private_8h.html#69c2543ab0f552b97b44602a910e7cce">FILENAME_MAX</a> ];
<a name="l00262"></a>00262 
<a name="l00263"></a>00263       <span class="keywordflow">if</span> (chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#0e9a7813e068d30d39010f7446e89aa8">read_stream</a>) {
<a name="l00264"></a>00264          <a class="code" href="file_8c.html#8d18ac7b6bb79201e6321c4b5cfadde2">ast_closestream</a>(chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#0e9a7813e068d30d39010f7446e89aa8">read_stream</a>);
<a name="l00265"></a>00265       }
<a name="l00266"></a>00266       <span class="keywordflow">if</span> (chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#439686cdff7be7eda400c1d1ed373c9d">write_stream</a>) {
<a name="l00267"></a>00267          <a class="code" href="file_8c.html#8d18ac7b6bb79201e6321c4b5cfadde2">ast_closestream</a>(chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#439686cdff7be7eda400c1d1ed373c9d">write_stream</a>);
<a name="l00268"></a>00268       }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270       <span class="keywordflow">if</span> (chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#df66eb304be2a1bf4a34beba678a82fd">filename_changed</a> &amp;&amp; !<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#cc4efa60a835b6bc8d83a75e15eaa1eb">filename_base</a>)) {
<a name="l00271"></a>00271          <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#5a3ec0398dc377f7850e62edc9e093df">ast_fileexists</a>(chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#beceae96d98e2e5f6809f1e67b3a3ed4">read_filename</a>,NULL,NULL) &gt; 0) {
<a name="l00272"></a>00272             snprintf(filename, <a class="code" href="private_8h.html#69c2543ab0f552b97b44602a910e7cce">FILENAME_MAX</a>, <span class="stringliteral">"%s-in"</span>, chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#cc4efa60a835b6bc8d83a75e15eaa1eb">filename_base</a>);
<a name="l00273"></a>00273             <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#5a3ec0398dc377f7850e62edc9e093df">ast_fileexists</a>(filename, NULL, NULL) &gt; 0) {
<a name="l00274"></a>00274                <a class="code" href="file_8c.html#5a0cbe1f8c9ff2126997209a785679d5">ast_filedelete</a>(filename, NULL);
<a name="l00275"></a>00275             }
<a name="l00276"></a>00276             <a class="code" href="file_8c.html#6550c411c28c65446c5ad2a8307b50eb">ast_filerename</a>(chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#beceae96d98e2e5f6809f1e67b3a3ed4">read_filename</a>, filename, chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>);
<a name="l00277"></a>00277          } <span class="keywordflow">else</span> {
<a name="l00278"></a>00278             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"File %s not found\n"</span>, chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#beceae96d98e2e5f6809f1e67b3a3ed4">read_filename</a>);
<a name="l00279"></a>00279          }
<a name="l00280"></a>00280 
<a name="l00281"></a>00281          <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#5a3ec0398dc377f7850e62edc9e093df">ast_fileexists</a>(chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#b32b44f84aea16ad38db9c9fda514d41">write_filename</a>,NULL,NULL) &gt; 0) {
<a name="l00282"></a>00282             snprintf(filename, <a class="code" href="private_8h.html#69c2543ab0f552b97b44602a910e7cce">FILENAME_MAX</a>, <span class="stringliteral">"%s-out"</span>, chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#cc4efa60a835b6bc8d83a75e15eaa1eb">filename_base</a>);
<a name="l00283"></a>00283             <span class="keywordflow">if</span> (<a class="code" href="file_8c.html#5a3ec0398dc377f7850e62edc9e093df">ast_fileexists</a>(filename, NULL, NULL) &gt; 0) {
<a name="l00284"></a>00284                <a class="code" href="file_8c.html#5a0cbe1f8c9ff2126997209a785679d5">ast_filedelete</a>(filename, NULL);
<a name="l00285"></a>00285             }
<a name="l00286"></a>00286             <a class="code" href="file_8c.html#6550c411c28c65446c5ad2a8307b50eb">ast_filerename</a>(chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#b32b44f84aea16ad38db9c9fda514d41">write_filename</a>, filename, chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>);
<a name="l00287"></a>00287          } <span class="keywordflow">else</span> {
<a name="l00288"></a>00288             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"File %s not found\n"</span>, chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#b32b44f84aea16ad38db9c9fda514d41">write_filename</a>);
<a name="l00289"></a>00289          }
<a name="l00290"></a>00290       }
<a name="l00291"></a>00291 
<a name="l00292"></a>00292       <span class="keywordflow">if</span> (chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#55dc53055b6d97c2c86b93c76c625b85">joinfiles</a> &amp;&amp; !<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#cc4efa60a835b6bc8d83a75e15eaa1eb">filename_base</a>)) {
<a name="l00293"></a>00293          <span class="keywordtype">char</span> tmp[1024];
<a name="l00294"></a>00294          <span class="keywordtype">char</span> tmp2[1024];
<a name="l00295"></a>00295          <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a> = !strcasecmp(chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>,<span class="stringliteral">"wav49"</span>) ? <span class="stringliteral">"WAV"</span> : chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>;
<a name="l00296"></a>00296          <span class="keywordtype">char</span> *<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a> = chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#cc4efa60a835b6bc8d83a75e15eaa1eb">filename_base</a>;
<a name="l00297"></a>00297          <span class="keywordtype">int</span> directory = strchr(name, <span class="charliteral">'/'</span>) ? 1 : 0;
<a name="l00298"></a>00298          <span class="keywordtype">char</span> *<a class="code" href="adsistub_8c.html#736007832d2167baaae763fd3a3f3cf1">dir</a> = directory ? <span class="stringliteral">""</span> : <a class="code" href="asterisk_8c.html#e30f110a2a02a50a63b05fe5ba3206b6">ast_config_AST_MONITOR_DIR</a>;
<a name="l00299"></a>00299          <span class="keyword">const</span> <span class="keywordtype">char</span> *execute, *execute_args;
<a name="l00300"></a>00300 
<a name="l00301"></a>00301          <span class="comment">/* Set the execute application */</span>
<a name="l00302"></a>00302          execute = <a class="code" href="pbx_8c.html#944d18aa90701f025b30e63d9644e448">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">"MONITOR_EXEC"</span>);
<a name="l00303"></a>00303          <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(execute)) { 
<a name="l00304"></a>00304             execute = <span class="stringliteral">"nice -n 19 soxmix"</span>;
<a name="l00305"></a>00305             format = <a class="code" href="res__monitor_8c.html#50adae321837c2e2dfbfb1c620ce8f78">get_soxmix_format</a>(format);
<a name="l00306"></a>00306             delfiles = 1;
<a name="l00307"></a>00307          } 
<a name="l00308"></a>00308          execute_args = <a class="code" href="pbx_8c.html#944d18aa90701f025b30e63d9644e448">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">"MONITOR_EXEC_ARGS"</span>);
<a name="l00309"></a>00309          <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(execute_args)) {
<a name="l00310"></a>00310             execute_args = <span class="stringliteral">""</span>;
<a name="l00311"></a>00311          }
<a name="l00312"></a>00312          
<a name="l00313"></a>00313          snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">"%s \"%s/%s-in.%s\" \"%s/%s-out.%s\" \"%s/%s.%s\" %s &amp;"</span>, execute, dir, name, format, dir, name, format, dir, name, format,execute_args);
<a name="l00314"></a>00314          <span class="keywordflow">if</span> (delfiles) {
<a name="l00315"></a>00315             snprintf(tmp2,<span class="keyword">sizeof</span>(tmp2), <span class="stringliteral">"( %s&amp; rm -f \"%s/%s-\"* ) &amp;"</span>,tmp, dir ,name); <span class="comment">/* remove legs when done mixing */</span>
<a name="l00316"></a>00316             ast_copy_string(tmp, tmp2, <span class="keyword">sizeof</span>(tmp));
<a name="l00317"></a>00317          }
<a name="l00318"></a>00318          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00319"></a>00319             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>,<span class="stringliteral">"monitor executing %s\n"</span>,tmp);
<a name="l00320"></a>00320          <span class="keywordflow">if</span> (<a class="code" href="asterisk_8c.html#ceb3925bf8c3e3d21d9246872548f5df">ast_safe_system</a>(tmp) == -1)
<a name="l00321"></a>00321             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Execute of %s failed.\n"</span>,tmp);
<a name="l00322"></a>00322       }
<a name="l00323"></a>00323       
<a name="l00324"></a>00324       <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>-&gt;<a class="code" href="structast__channel__monitor.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>);
<a name="l00325"></a>00325       <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a>);
<a name="l00326"></a>00326       chan-&gt;<a class="code" href="structast__channel.html#08b5411f848a2581a41672a759c87380">monitor</a> = NULL;
<a name="l00327"></a>00327    }
<a name="l00328"></a>00328 
<a name="l00329"></a>00329    <a class="code" href="res__monitor_8c.html#39a6544f75f8deaf513a27d704765af9">UNLOCK_IF_NEEDED</a>(chan, need_lock);
<a name="l00330"></a>00330 
<a name="l00331"></a>00331    <span class="keywordflow">return</span> 0;
<a name="l00332"></a>00332 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="7cfb30d07bb72866508802173a655ba1"></a><!-- doxytag: member="res_monitor.c::ast_monitor_unpause" ref="7cfb30d07bb72866508802173a655ba1" args="(struct ast_channel *chan)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_monitor_unpause           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>chan</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00342">342</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="monitor_8h.html#68c252a4174f79a63bcedd9f1c0050884352f541f9b1e83d30923f2cec1777ef">AST_MONITOR_RUNNING</a>, and <a class="el" href="res__monitor_8c-source.html#l00114">ast_monitor_set_state()</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00606">do_pause_or_unpause()</a>, and <a class="el" href="res__monitor_8c-source.html#l00352">unpause_monitor_exec()</a>.<div class="fragment"><pre class="fragment"><a name="l00343"></a>00343 {
<a name="l00344"></a>00344    <span class="keywordflow">return</span> <a class="code" href="res__monitor_8c.html#53d963ce0ac197ee3969ae6c81e4e87b">ast_monitor_set_state</a>(chan, <a class="code" href="monitor_8h.html#68c252a4174f79a63bcedd9f1c0050884352f541f9b1e83d30923f2cec1777ef">AST_MONITOR_RUNNING</a>);
<a name="l00345"></a>00345 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="5fff4acf485534628f477d1fedf86931"></a><!-- doxytag: member="res_monitor.c::AST_MUTEX_DEFINE_STATIC" ref="5fff4acf485534628f477d1fedf86931" args="(monitorlock)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">AST_MUTEX_DEFINE_STATIC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">monitorlock&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="5ea0fb3c84d771342d01a92f9234a6da"></a><!-- doxytag: member="res_monitor.c::change_monitor_action" ref="5ea0fb3c84d771342d01a92f9234a6da" args="(struct mansession *s, const struct message *m)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int change_monitor_action           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structmansession.html">mansession</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const struct <a class="el" href="structmessage.html">message</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00566">566</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="lock_8h.html#a2fac4e1b143bef3b1ac807e0ab48f9f">ast_channel_unlock</a>, <a class="el" href="channel_8c-source.html#l00995">ast_get_channel_by_name_locked()</a>, <a class="el" href="res__monitor_8c-source.html#l00358">ast_monitor_change_fname()</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="manager_8c-source.html#l00713">astman_get_header()</a>, <a class="el" href="manager_8c-source.html#l00864">astman_send_ack()</a>, <a class="el" href="manager_8c-source.html#l00859">astman_send_error()</a>, and <a class="el" href="callerid_8c-source.html#l01043">name</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00567"></a>00567 {
<a name="l00568"></a>00568    <span class="keyword">struct </span><a class="code" href="structast__channel.html">ast_channel</a> *c = NULL;
<a name="l00569"></a>00569    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a> = <a class="code" href="group__Group__AMI.html#gd208abe83c7bd47d8004134de94d1b4b">astman_get_header</a>(m, <span class="stringliteral">"Channel"</span>);
<a name="l00570"></a>00570    <span class="keyword">const</span> <span class="keywordtype">char</span> *fname = <a class="code" href="group__Group__AMI.html#gd208abe83c7bd47d8004134de94d1b4b">astman_get_header</a>(m, <span class="stringliteral">"File"</span>);
<a name="l00571"></a>00571    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(name)) {
<a name="l00572"></a>00572       <a class="code" href="group__Group__AMI.html#g23a27dba104a8df4bb1c6a217a71e7e7">astman_send_error</a>(s, m, <span class="stringliteral">"No channel specified"</span>);
<a name="l00573"></a>00573       <span class="keywordflow">return</span> 0;
<a name="l00574"></a>00574    }
<a name="l00575"></a>00575    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(fname)) {
<a name="l00576"></a>00576       <a class="code" href="group__Group__AMI.html#g23a27dba104a8df4bb1c6a217a71e7e7">astman_send_error</a>(s, m, <span class="stringliteral">"No filename specified"</span>);
<a name="l00577"></a>00577       <span class="keywordflow">return</span> 0;
<a name="l00578"></a>00578    }
<a name="l00579"></a>00579    c = <a class="code" href="channel_8c.html#e01fecb172f34785571d94adbc5c6558">ast_get_channel_by_name_locked</a>(name);
<a name="l00580"></a>00580    <span class="keywordflow">if</span> (!c) {
<a name="l00581"></a>00581       <a class="code" href="group__Group__AMI.html#g23a27dba104a8df4bb1c6a217a71e7e7">astman_send_error</a>(s, m, <span class="stringliteral">"No such channel"</span>);
<a name="l00582"></a>00582       <span class="keywordflow">return</span> 0;
<a name="l00583"></a>00583    }
<a name="l00584"></a>00584    <span class="keywordflow">if</span> (<a class="code" href="monitor_8h.html#b920883a248d93215cda31effa692ed3">ast_monitor_change_fname</a>(c, fname, 1)) {
<a name="l00585"></a>00585       <a class="code" href="group__Group__AMI.html#g23a27dba104a8df4bb1c6a217a71e7e7">astman_send_error</a>(s, m, <span class="stringliteral">"Could not change monitored filename of channel"</span>);
<a name="l00586"></a>00586       <a class="code" href="lock_8h.html#a2fac4e1b143bef3b1ac807e0ab48f9f">ast_channel_unlock</a>(c);
<a name="l00587"></a>00587       <span class="keywordflow">return</span> 0;
<a name="l00588"></a>00588    }
<a name="l00589"></a>00589    <a class="code" href="lock_8h.html#a2fac4e1b143bef3b1ac807e0ab48f9f">ast_channel_unlock</a>(c);
<a name="l00590"></a>00590    <a class="code" href="group__Group__AMI.html#g0c64878b307241bfe01cea67e09f49e2">astman_send_ack</a>(s, m, <span class="stringliteral">"Changed monitor filename"</span>);
<a name="l00591"></a>00591    <span class="keywordflow">return</span> 0;
<a name="l00592"></a>00592 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="8493693fbf9d36a242c39c5dfa74866e"></a><!-- doxytag: member="res_monitor.c::change_monitor_exec" ref="8493693fbf9d36a242c39c5dfa74866e" args="(struct ast_channel *chan, void *data)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int change_monitor_exec           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00462">462</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="res__monitor_8c-source.html#l00358">ast_monitor_change_fname()</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00463"></a>00463 {
<a name="l00464"></a>00464    <span class="keywordflow">return</span> <a class="code" href="monitor_8h.html#b920883a248d93215cda31effa692ed3">ast_monitor_change_fname</a>(chan, (<span class="keyword">const</span> <span class="keywordtype">char</span>*)<a class="code" href="structast__channel.html#8d777f385d3dfec8815d20f7496026dc">data</a>, 1);
<a name="l00465"></a>00465 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="826d389d5bb7319e0a39ed9fa42d7b5f"></a><!-- doxytag: member="res_monitor.c::do_pause_or_unpause" ref="826d389d5bb7319e0a39ed9fa42d7b5f" args="(struct mansession *s, const struct message *m, int action)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int do_pause_or_unpause           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structmansession.html">mansession</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const struct <a class="el" href="structmessage.html">message</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>action</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00606">606</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="lock_8h.html#a2fac4e1b143bef3b1ac807e0ab48f9f">ast_channel_unlock</a>, <a class="el" href="channel_8c-source.html#l00995">ast_get_channel_by_name_locked()</a>, <a class="el" href="res__monitor_8c-source.html#l00336">ast_monitor_pause()</a>, <a class="el" href="res__monitor_8c-source.html#l00342">ast_monitor_unpause()</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="manager_8c-source.html#l00713">astman_get_header()</a>, <a class="el" href="manager_8c-source.html#l00864">astman_send_ack()</a>, <a class="el" href="manager_8c-source.html#l00859">astman_send_error()</a>, <a class="el" href="res__monitor_8c.html#b3c2654283d3b96950e8b01662a31808d5249337a1ee77f3527aa8a4e9d147a3">MONITOR_ACTION_PAUSE</a>, and <a class="el" href="callerid_8c-source.html#l01043">name</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00638">pause_monitor_action()</a>, and <a class="el" href="res__monitor_8c-source.html#l00649">unpause_monitor_action()</a>.<div class="fragment"><pre class="fragment"><a name="l00607"></a>00607 {
<a name="l00608"></a>00608    <span class="keyword">struct </span><a class="code" href="structast__channel.html">ast_channel</a> *c = NULL;
<a name="l00609"></a>00609    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a> = <a class="code" href="group__Group__AMI.html#gd208abe83c7bd47d8004134de94d1b4b">astman_get_header</a>(m, <span class="stringliteral">"Channel"</span>);
<a name="l00610"></a>00610    
<a name="l00611"></a>00611    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(name)) {
<a name="l00612"></a>00612       <a class="code" href="group__Group__AMI.html#g23a27dba104a8df4bb1c6a217a71e7e7">astman_send_error</a>(s, m, <span class="stringliteral">"No channel specified"</span>);
<a name="l00613"></a>00613       <span class="keywordflow">return</span> -1;
<a name="l00614"></a>00614    }
<a name="l00615"></a>00615    
<a name="l00616"></a>00616    c = <a class="code" href="channel_8c.html#e01fecb172f34785571d94adbc5c6558">ast_get_channel_by_name_locked</a>(name);
<a name="l00617"></a>00617    <span class="keywordflow">if</span> (!c) {
<a name="l00618"></a>00618       <a class="code" href="group__Group__AMI.html#g23a27dba104a8df4bb1c6a217a71e7e7">astman_send_error</a>(s, m, <span class="stringliteral">"No such channel"</span>);
<a name="l00619"></a>00619       <span class="keywordflow">return</span> -1;
<a name="l00620"></a>00620    }
<a name="l00621"></a>00621 
<a name="l00622"></a>00622    <span class="keywordflow">if</span> (action == <a class="code" href="res__monitor_8c.html#b3c2654283d3b96950e8b01662a31808d5249337a1ee77f3527aa8a4e9d147a3">MONITOR_ACTION_PAUSE</a>)
<a name="l00623"></a>00623       <a class="code" href="monitor_8h.html#ce422ff6a5850f68e038e967a5b094ce">ast_monitor_pause</a>(c);
<a name="l00624"></a>00624    <span class="keywordflow">else</span>
<a name="l00625"></a>00625       <a class="code" href="monitor_8h.html#7cfb30d07bb72866508802173a655ba1">ast_monitor_unpause</a>(c);
<a name="l00626"></a>00626    
<a name="l00627"></a>00627    <a class="code" href="lock_8h.html#a2fac4e1b143bef3b1ac807e0ab48f9f">ast_channel_unlock</a>(c);
<a name="l00628"></a>00628    <a class="code" href="group__Group__AMI.html#g0c64878b307241bfe01cea67e09f49e2">astman_send_ack</a>(s, m, (action == <a class="code" href="res__monitor_8c.html#b3c2654283d3b96950e8b01662a31808d5249337a1ee77f3527aa8a4e9d147a3">MONITOR_ACTION_PAUSE</a> ? <span class="stringliteral">"Paused monitoring of the channel"</span> : <span class="stringliteral">"Unpaused monitoring of the channel"</span>));
<a name="l00629"></a>00629    <span class="keywordflow">return</span> 0;   
<a name="l00630"></a>00630 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="50adae321837c2e2dfbfb1c620ce8f78"></a><!-- doxytag: member="res_monitor.c::get_soxmix_format" ref="50adae321837c2e2dfbfb1c620ce8f78" args="(const char *format)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static const char* get_soxmix_format           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>format</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00241">241</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00254">ast_monitor_stop()</a>.<div class="fragment"><pre class="fragment"><a name="l00242"></a>00242 {
<a name="l00243"></a>00243    <span class="keyword">const</span> <span class="keywordtype">char</span> *res = <a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>;
<a name="l00244"></a>00244 
<a name="l00245"></a>00245    <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>,<span class="stringliteral">"ulaw"</span>))
<a name="l00246"></a>00246       res = <span class="stringliteral">"ul"</span>;
<a name="l00247"></a>00247    <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a>,<span class="stringliteral">"alaw"</span>))
<a name="l00248"></a>00248       res = <span class="stringliteral">"al"</span>;
<a name="l00249"></a>00249    
<a name="l00250"></a>00250    <span class="keywordflow">return</span> res;
<a name="l00251"></a>00251 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="8c304b271325d497b3ce1886465a1abe"></a><!-- doxytag: member="res_monitor.c::load_module" ref="8c304b271325d497b3ce1886465a1abe" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int load_module           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00655">655</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="manager_8c-source.html#l02694">ast_manager_register2()</a>, <a class="el" href="pbx_8c-source.html#l02875">ast_register_application()</a>, <a class="el" href="res__monitor_8c-source.html#l00566">change_monitor_action()</a>, <a class="el" href="res__monitor_8c-source.html#l00558">change_monitor_action_help</a>, <a class="el" href="res__monitor_8c-source.html#l00462">change_monitor_exec()</a>, <a class="el" href="res__monitor_8c-source.html#l00099">changemonitor_descrip</a>, <a class="el" href="res__monitor_8c-source.html#l00097">changemonitor_synopsis</a>, <a class="el" href="manager_8h-source.html#l00052">EVENT_FLAG_CALL</a>, <a class="el" href="res__monitor_8c-source.html#l00068">monitor_descrip</a>, <a class="el" href="res__monitor_8c-source.html#l00066">monitor_synopsis</a>, <a class="el" href="res__monitor_8c-source.html#l00638">pause_monitor_action()</a>, <a class="el" href="res__monitor_8c-source.html#l00632">pause_monitor_action_help</a>, <a class="el" href="res__monitor_8c-source.html#l00347">pause_monitor_exec()</a>, <a class="el" href="res__monitor_8c-source.html#l00105">pausemonitor_descrip</a>, <a class="el" href="res__monitor_8c-source.html#l00103">pausemonitor_synopsis</a>, <a class="el" href="res__monitor_8c-source.html#l00481">start_monitor_action()</a>, <a class="el" href="res__monitor_8c-source.html#l00467">start_monitor_action_help</a>, <a class="el" href="res__monitor_8c-source.html#l00389">start_monitor_exec()</a>, <a class="el" href="res__monitor_8c-source.html#l00534">stop_monitor_action()</a>, <a class="el" href="res__monitor_8c-source.html#l00529">stop_monitor_action_help</a>, <a class="el" href="res__monitor_8c-source.html#l00457">stop_monitor_exec()</a>, <a class="el" href="res__monitor_8c-source.html#l00094">stopmonitor_descrip</a>, <a class="el" href="res__monitor_8c-source.html#l00092">stopmonitor_synopsis</a>, <a class="el" href="res__monitor_8c-source.html#l00649">unpause_monitor_action()</a>, <a class="el" href="res__monitor_8c-source.html#l00643">unpause_monitor_action_help</a>, <a class="el" href="res__monitor_8c-source.html#l00352">unpause_monitor_exec()</a>, <a class="el" href="res__monitor_8c-source.html#l00110">unpausemonitor_descrip</a>, and <a class="el" href="res__monitor_8c-source.html#l00108">unpausemonitor_synopsis</a>.<div class="fragment"><pre class="fragment"><a name="l00656"></a>00656 {
<a name="l00657"></a>00657    <a class="code" href="pbx_8c.html#f8e9b339fed38c405332f222cceeec40">ast_register_application</a>(<span class="stringliteral">"Monitor"</span>, <a class="code" href="res__monitor_8c.html#8c8ffb4a06ac76e2003ebad5e996b7df">start_monitor_exec</a>, <a class="code" href="res__monitor_8c.html#df3922cb467d96b1aae7041602d12c35">monitor_synopsis</a>, <a class="code" href="res__monitor_8c.html#681043e0ddb4a9a1836d8ec08412eca8">monitor_descrip</a>);
<a name="l00658"></a>00658    <a class="code" href="pbx_8c.html#f8e9b339fed38c405332f222cceeec40">ast_register_application</a>(<span class="stringliteral">"StopMonitor"</span>, <a class="code" href="res__monitor_8c.html#00b0c4e9a4b3dd7484dde4e70ac92280">stop_monitor_exec</a>, <a class="code" href="res__monitor_8c.html#d9cb00ce4df1736a36231353bfa99331">stopmonitor_synopsis</a>, <a class="code" href="res__monitor_8c.html#8809f3d6c94380a4882693904571dcc7">stopmonitor_descrip</a>);
<a name="l00659"></a>00659    <a class="code" href="pbx_8c.html#f8e9b339fed38c405332f222cceeec40">ast_register_application</a>(<span class="stringliteral">"ChangeMonitor"</span>, <a class="code" href="res__monitor_8c.html#8493693fbf9d36a242c39c5dfa74866e">change_monitor_exec</a>, <a class="code" href="res__monitor_8c.html#a975422a90da2977d2baccceac5ff7bd">changemonitor_synopsis</a>, <a class="code" href="res__monitor_8c.html#3451fedc38324771782eb144504a0755">changemonitor_descrip</a>);
<a name="l00660"></a>00660    <a class="code" href="pbx_8c.html#f8e9b339fed38c405332f222cceeec40">ast_register_application</a>(<span class="stringliteral">"PauseMonitor"</span>, <a class="code" href="res__monitor_8c.html#1ee3ab9d4dd8fc24b6150e2ff24be88d">pause_monitor_exec</a>, <a class="code" href="res__monitor_8c.html#9d89d89fe7cdc2abd6ef1ead4b4a52d7">pausemonitor_synopsis</a>, <a class="code" href="res__monitor_8c.html#361f387bf41f76944e8dd79fd2cc6419">pausemonitor_descrip</a>);
<a name="l00661"></a>00661    <a class="code" href="pbx_8c.html#f8e9b339fed38c405332f222cceeec40">ast_register_application</a>(<span class="stringliteral">"UnpauseMonitor"</span>, <a class="code" href="res__monitor_8c.html#d841652a300b977fad6ff263c0351b0f">unpause_monitor_exec</a>, <a class="code" href="res__monitor_8c.html#ac04a66d69ebd954ce39f054d6fbcf94">unpausemonitor_synopsis</a>, <a class="code" href="res__monitor_8c.html#ff764e2301f43fd063914051e1ff3eed">unpausemonitor_descrip</a>);
<a name="l00662"></a>00662    <a class="code" href="group__Group__AMI.html#g84a70f66019d4cf74b8e203011d22431">ast_manager_register2</a>(<span class="stringliteral">"Monitor"</span>, <a class="code" href="manager_8h.html#c81a36aac6503176bd649993386b23e4">EVENT_FLAG_CALL</a>, <a class="code" href="res__monitor_8c.html#26c78b57678e4241fab801599b3913ba">start_monitor_action</a>, <a class="code" href="res__monitor_8c.html#df3922cb467d96b1aae7041602d12c35">monitor_synopsis</a>, <a class="code" href="res__monitor_8c.html#75e51867ced5678ac326cfc1405fd83b">start_monitor_action_help</a>);
<a name="l00663"></a>00663    <a class="code" href="group__Group__AMI.html#g84a70f66019d4cf74b8e203011d22431">ast_manager_register2</a>(<span class="stringliteral">"StopMonitor"</span>, <a class="code" href="manager_8h.html#c81a36aac6503176bd649993386b23e4">EVENT_FLAG_CALL</a>, <a class="code" href="res__monitor_8c.html#58b9d45bc3bee946151e63afd5e3af82">stop_monitor_action</a>, <a class="code" href="res__monitor_8c.html#d9cb00ce4df1736a36231353bfa99331">stopmonitor_synopsis</a>, <a class="code" href="res__monitor_8c.html#648a6d4f8e9ae37c4ef2bf38149a0f95">stop_monitor_action_help</a>);
<a name="l00664"></a>00664    <a class="code" href="group__Group__AMI.html#g84a70f66019d4cf74b8e203011d22431">ast_manager_register2</a>(<span class="stringliteral">"ChangeMonitor"</span>, <a class="code" href="manager_8h.html#c81a36aac6503176bd649993386b23e4">EVENT_FLAG_CALL</a>, <a class="code" href="res__monitor_8c.html#5ea0fb3c84d771342d01a92f9234a6da">change_monitor_action</a>, <a class="code" href="res__monitor_8c.html#a975422a90da2977d2baccceac5ff7bd">changemonitor_synopsis</a>, <a class="code" href="res__monitor_8c.html#860d493d5f2c49f9c46d3b0370087e63">change_monitor_action_help</a>);
<a name="l00665"></a>00665    <a class="code" href="group__Group__AMI.html#g84a70f66019d4cf74b8e203011d22431">ast_manager_register2</a>(<span class="stringliteral">"PauseMonitor"</span>, <a class="code" href="manager_8h.html#c81a36aac6503176bd649993386b23e4">EVENT_FLAG_CALL</a>, <a class="code" href="res__monitor_8c.html#9a5d6283c7e1dce6f1eb3e36c0f8d91a">pause_monitor_action</a>, <a class="code" href="res__monitor_8c.html#9d89d89fe7cdc2abd6ef1ead4b4a52d7">pausemonitor_synopsis</a>, <a class="code" href="res__monitor_8c.html#6c3d197ea8953d85e1c9c07e03f469cf">pause_monitor_action_help</a>);
<a name="l00666"></a>00666    <a class="code" href="group__Group__AMI.html#g84a70f66019d4cf74b8e203011d22431">ast_manager_register2</a>(<span class="stringliteral">"UnpauseMonitor"</span>, <a class="code" href="manager_8h.html#c81a36aac6503176bd649993386b23e4">EVENT_FLAG_CALL</a>, <a class="code" href="res__monitor_8c.html#7d893f85ee899d6ea8a678f3c7073497">unpause_monitor_action</a>, <a class="code" href="res__monitor_8c.html#ac04a66d69ebd954ce39f054d6fbcf94">unpausemonitor_synopsis</a>, <a class="code" href="res__monitor_8c.html#4300d9ae52421248c07e1dccf8a8db92">unpause_monitor_action_help</a>);
<a name="l00667"></a>00667 
<a name="l00668"></a>00668    <span class="keywordflow">return</span> 0;
<a name="l00669"></a>00669 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="9a5d6283c7e1dce6f1eb3e36c0f8d91a"></a><!-- doxytag: member="res_monitor.c::pause_monitor_action" ref="9a5d6283c7e1dce6f1eb3e36c0f8d91a" args="(struct mansession *s, const struct message *m)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pause_monitor_action           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structmansession.html">mansession</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const struct <a class="el" href="structmessage.html">message</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00638">638</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="res__monitor_8c-source.html#l00606">do_pause_or_unpause()</a>, and <a class="el" href="res__monitor_8c.html#b3c2654283d3b96950e8b01662a31808d5249337a1ee77f3527aa8a4e9d147a3">MONITOR_ACTION_PAUSE</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00639"></a>00639 {
<a name="l00640"></a>00640    <span class="keywordflow">return</span> <a class="code" href="res__monitor_8c.html#826d389d5bb7319e0a39ed9fa42d7b5f">do_pause_or_unpause</a>(s, m, <a class="code" href="res__monitor_8c.html#b3c2654283d3b96950e8b01662a31808d5249337a1ee77f3527aa8a4e9d147a3">MONITOR_ACTION_PAUSE</a>);
<a name="l00641"></a>00641 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="1ee3ab9d4dd8fc24b6150e2ff24be88d"></a><!-- doxytag: member="res_monitor.c::pause_monitor_exec" ref="1ee3ab9d4dd8fc24b6150e2ff24be88d" args="(struct ast_channel *chan, void *data)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int pause_monitor_exec           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00347">347</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="res__monitor_8c-source.html#l00336">ast_monitor_pause()</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00348"></a>00348 {
<a name="l00349"></a>00349    <span class="keywordflow">return</span> <a class="code" href="monitor_8h.html#ce422ff6a5850f68e038e967a5b094ce">ast_monitor_pause</a>(chan);
<a name="l00350"></a>00350 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="26c78b57678e4241fab801599b3913ba"></a><!-- doxytag: member="res_monitor.c::start_monitor_action" ref="26c78b57678e4241fab801599b3913ba" args="(struct mansession *s, const struct message *m)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int start_monitor_action           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structmansession.html">mansession</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const struct <a class="el" href="structmessage.html">message</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00481">481</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="lock_8h.html#a2fac4e1b143bef3b1ac807e0ab48f9f">ast_channel_unlock</a>, <a class="el" href="channel_8c-source.html#l00995">ast_get_channel_by_name_locked()</a>, <a class="el" href="res__monitor_8c-source.html#l00358">ast_monitor_change_fname()</a>, <a class="el" href="res__monitor_8c-source.html#l00594">ast_monitor_setjoinfiles()</a>, <a class="el" href="res__monitor_8c-source.html#l00127">ast_monitor_start()</a>, <a class="el" href="utils_8h.html#d67aacdb581292a9d103cf349d0d2862">ast_strdup</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="utils_8c-source.html#l00724">ast_true()</a>, <a class="el" href="manager_8c-source.html#l00713">astman_get_header()</a>, <a class="el" href="manager_8c-source.html#l00864">astman_send_ack()</a>, <a class="el" href="manager_8c-source.html#l00859">astman_send_error()</a>, <a class="el" href="chan__alsa_8c-source.html#l00103">format</a>, and <a class="el" href="callerid_8c-source.html#l01043">name</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00482"></a>00482 {
<a name="l00483"></a>00483    <span class="keyword">struct </span><a class="code" href="structast__channel.html">ast_channel</a> *c = NULL;
<a name="l00484"></a>00484    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a> = <a class="code" href="group__Group__AMI.html#gd208abe83c7bd47d8004134de94d1b4b">astman_get_header</a>(m, <span class="stringliteral">"Channel"</span>);
<a name="l00485"></a>00485    <span class="keyword">const</span> <span class="keywordtype">char</span> *fname = <a class="code" href="group__Group__AMI.html#gd208abe83c7bd47d8004134de94d1b4b">astman_get_header</a>(m, <span class="stringliteral">"File"</span>);
<a name="l00486"></a>00486    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a> = <a class="code" href="group__Group__AMI.html#gd208abe83c7bd47d8004134de94d1b4b">astman_get_header</a>(m, <span class="stringliteral">"Format"</span>);
<a name="l00487"></a>00487    <span class="keyword">const</span> <span class="keywordtype">char</span> *mix = <a class="code" href="group__Group__AMI.html#gd208abe83c7bd47d8004134de94d1b4b">astman_get_header</a>(m, <span class="stringliteral">"Mix"</span>);
<a name="l00488"></a>00488    <span class="keywordtype">char</span> *d;
<a name="l00489"></a>00489    
<a name="l00490"></a>00490    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(name)) {
<a name="l00491"></a>00491       <a class="code" href="group__Group__AMI.html#g23a27dba104a8df4bb1c6a217a71e7e7">astman_send_error</a>(s, m, <span class="stringliteral">"No channel specified"</span>);
<a name="l00492"></a>00492       <span class="keywordflow">return</span> 0;
<a name="l00493"></a>00493    }
<a name="l00494"></a>00494    c = <a class="code" href="channel_8c.html#e01fecb172f34785571d94adbc5c6558">ast_get_channel_by_name_locked</a>(name);
<a name="l00495"></a>00495    <span class="keywordflow">if</span> (!c) {
<a name="l00496"></a>00496       <a class="code" href="group__Group__AMI.html#g23a27dba104a8df4bb1c6a217a71e7e7">astman_send_error</a>(s, m, <span class="stringliteral">"No such channel"</span>);
<a name="l00497"></a>00497       <span class="keywordflow">return</span> 0;
<a name="l00498"></a>00498    }
<a name="l00499"></a>00499 
<a name="l00500"></a>00500    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(fname)) {
<a name="l00501"></a>00501       <span class="comment">/* No filename base specified, default to channel name as per CLI */</span>    
<a name="l00502"></a>00502       <span class="keywordflow">if</span> (!(fname = <a class="code" href="utils_8h.html#d67aacdb581292a9d103cf349d0d2862">ast_strdup</a>(c-&gt;name))) {
<a name="l00503"></a>00503          <a class="code" href="group__Group__AMI.html#g23a27dba104a8df4bb1c6a217a71e7e7">astman_send_error</a>(s, m, <span class="stringliteral">"Could not start monitoring channel"</span>);
<a name="l00504"></a>00504          <a class="code" href="lock_8h.html#a2fac4e1b143bef3b1ac807e0ab48f9f">ast_channel_unlock</a>(c);
<a name="l00505"></a>00505          <span class="keywordflow">return</span> 0;
<a name="l00506"></a>00506       }
<a name="l00507"></a>00507       <span class="comment">/* Channels have the format technology/channel_name - have to replace that /  */</span>
<a name="l00508"></a>00508       <span class="keywordflow">if</span> ((d = strchr(fname, <span class="charliteral">'/'</span>))) 
<a name="l00509"></a>00509          *d = <span class="charliteral">'-'</span>;
<a name="l00510"></a>00510    }
<a name="l00511"></a>00511    
<a name="l00512"></a>00512    <span class="keywordflow">if</span> (<a class="code" href="monitor_8h.html#4f4e162179064c9f0c8444a33f6fe27d">ast_monitor_start</a>(c, format, fname, 1)) {
<a name="l00513"></a>00513       <span class="keywordflow">if</span> (<a class="code" href="monitor_8h.html#b920883a248d93215cda31effa692ed3">ast_monitor_change_fname</a>(c, fname, 1)) {
<a name="l00514"></a>00514          <a class="code" href="group__Group__AMI.html#g23a27dba104a8df4bb1c6a217a71e7e7">astman_send_error</a>(s, m, <span class="stringliteral">"Could not start monitoring channel"</span>);
<a name="l00515"></a>00515          <a class="code" href="lock_8h.html#a2fac4e1b143bef3b1ac807e0ab48f9f">ast_channel_unlock</a>(c);
<a name="l00516"></a>00516          <span class="keywordflow">return</span> 0;
<a name="l00517"></a>00517       }
<a name="l00518"></a>00518    }
<a name="l00519"></a>00519 
<a name="l00520"></a>00520    <span class="keywordflow">if</span> (<a class="code" href="utils_8c.html#63bb02e4d6f18c1dbeca92dc63310685">ast_true</a>(mix)) {
<a name="l00521"></a>00521       <a class="code" href="monitor_8h.html#21b1d71c9387ac99b6c5a7066a8a845c">ast_monitor_setjoinfiles</a>(c, 1);
<a name="l00522"></a>00522    }
<a name="l00523"></a>00523 
<a name="l00524"></a>00524    <a class="code" href="lock_8h.html#a2fac4e1b143bef3b1ac807e0ab48f9f">ast_channel_unlock</a>(c);
<a name="l00525"></a>00525    <a class="code" href="group__Group__AMI.html#g0c64878b307241bfe01cea67e09f49e2">astman_send_ack</a>(s, m, <span class="stringliteral">"Started monitoring channel"</span>);
<a name="l00526"></a>00526    <span class="keywordflow">return</span> 0;
<a name="l00527"></a>00527 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="8c8ffb4a06ac76e2003ebad5e996b7df"></a><!-- doxytag: member="res_monitor.c::start_monitor_exec" ref="8c8ffb4a06ac76e2003ebad5e996b7df" args="(struct ast_channel *chan, void *data)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int start_monitor_exec           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00389">389</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="cdr_8c-source.html#l00460">ast_cdr_alloc()</a>, <a class="el" href="cdr_8c-source.html#l00859">ast_cdr_setuserfield()</a>, <a class="el" href="res__monitor_8c-source.html#l00358">ast_monitor_change_fname()</a>, <a class="el" href="res__monitor_8c-source.html#l00594">ast_monitor_setjoinfiles()</a>, <a class="el" href="res__monitor_8c-source.html#l00127">ast_monitor_start()</a>, <a class="el" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="channel_8h-source.html#l00451">ast_channel::cdr</a>, <a class="el" href="chan__alsa_8c-source.html#l00103">format</a>, <a class="el" href="monitor_8h-source.html#l00042">ast_channel_monitor::joinfiles</a>, <a class="el" href="pbx_8c-source.html#l05821">pbx_builtin_setvar_helper()</a>, and <a class="el" href="chan__agent_8c-source.html#l00157">urlprefix</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00390"></a>00390 {
<a name="l00391"></a>00391    <span class="keywordtype">char</span> *arg = NULL;
<a name="l00392"></a>00392    <span class="keywordtype">char</span> *<a class="code" href="chan__alsa_8c.html#1ddcb92ade31c8fbd370001f9b29a7d9">format</a> = NULL;
<a name="l00393"></a>00393    <span class="keywordtype">char</span> *fname_base = NULL;
<a name="l00394"></a>00394    <span class="keywordtype">char</span> *options = NULL;
<a name="l00395"></a>00395    <span class="keywordtype">char</span> *delay = NULL;
<a name="l00396"></a>00396    <span class="keywordtype">char</span> *<a class="code" href="chan__agent_8c.html#f9965ae528f5943624007b826db4fe90">urlprefix</a> = NULL;
<a name="l00397"></a>00397    <span class="keywordtype">char</span> tmp[256];
<a name="l00398"></a>00398    <span class="keywordtype">int</span> joinfiles = 0;
<a name="l00399"></a>00399    <span class="keywordtype">int</span> waitforbridge = 0;
<a name="l00400"></a>00400    <span class="keywordtype">int</span> res = 0;
<a name="l00401"></a>00401    
<a name="l00402"></a>00402    <span class="comment">/* Parse arguments. */</span>
<a name="l00403"></a>00403    <span class="keywordflow">if</span> (!<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>((<span class="keywordtype">char</span>*)<a class="code" href="structast__channel.html#8d777f385d3dfec8815d20f7496026dc">data</a>)) {
<a name="l00404"></a>00404       arg = <a class="code" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>((<span class="keywordtype">char</span>*)data);
<a name="l00405"></a>00405       format = arg;
<a name="l00406"></a>00406       fname_base = strchr(arg, <span class="charliteral">'|'</span>);
<a name="l00407"></a>00407       <span class="keywordflow">if</span> (fname_base) {
<a name="l00408"></a>00408          *fname_base = 0;
<a name="l00409"></a>00409          fname_base++;
<a name="l00410"></a>00410          <span class="keywordflow">if</span> ((options = strchr(fname_base, <span class="charliteral">'|'</span>))) {
<a name="l00411"></a>00411             *options = 0;
<a name="l00412"></a>00412             options++;
<a name="l00413"></a>00413             <span class="keywordflow">if</span> (strchr(options, <span class="charliteral">'m'</span>))
<a name="l00414"></a>00414                joinfiles = 1;
<a name="l00415"></a>00415             <span class="keywordflow">if</span> (strchr(options, <span class="charliteral">'b'</span>))
<a name="l00416"></a>00416                waitforbridge = 1;
<a name="l00417"></a>00417          }
<a name="l00418"></a>00418       }
<a name="l00419"></a>00419       arg = strchr(format,<span class="charliteral">':'</span>);
<a name="l00420"></a>00420       <span class="keywordflow">if</span> (arg) {
<a name="l00421"></a>00421          *arg++ = 0;
<a name="l00422"></a>00422          urlprefix = arg;
<a name="l00423"></a>00423       }
<a name="l00424"></a>00424    }
<a name="l00425"></a>00425    <span class="keywordflow">if</span> (urlprefix) {
<a name="l00426"></a>00426       snprintf(tmp,<span class="keyword">sizeof</span>(tmp) - 1,<span class="stringliteral">"%s/%s.%s"</span>,urlprefix,fname_base,
<a name="l00427"></a>00427          ((strcmp(format,<span class="stringliteral">"gsm"</span>)) ? <span class="stringliteral">"wav"</span> : <span class="stringliteral">"gsm"</span>));
<a name="l00428"></a>00428       <span class="keywordflow">if</span> (!chan-&gt;<a class="code" href="structast__channel.html#30491931d0d510243046864dbc71a8c9">cdr</a> &amp;&amp; !(chan-&gt;<a class="code" href="structast__channel.html#30491931d0d510243046864dbc71a8c9">cdr</a> = <a class="code" href="cdr_8c.html#0dd431954a27c67f78c6e13be8a0b136">ast_cdr_alloc</a>()))
<a name="l00429"></a>00429          <span class="keywordflow">return</span> -1;
<a name="l00430"></a>00430       <a class="code" href="cdr_8c.html#7faf485af47fef9299ce51da70c13c8b">ast_cdr_setuserfield</a>(chan, tmp);
<a name="l00431"></a>00431    }
<a name="l00432"></a>00432    <span class="keywordflow">if</span> (waitforbridge) {
<a name="l00433"></a>00433       <span class="comment">/* We must remove the "b" option if listed.  In principle none of</span>
<a name="l00434"></a>00434 <span class="comment">         the following could give NULL results, but we check just to</span>
<a name="l00435"></a>00435 <span class="comment">         be pedantic. Reconstructing with checks for 'm' option does not</span>
<a name="l00436"></a>00436 <span class="comment">         work if we end up adding more options than 'm' in the future. */</span>
<a name="l00437"></a>00437       delay = <a class="code" href="utils_8h.html#b38bbfc0f090d7e013ad805ff172a7d2">ast_strdupa</a>(data);
<a name="l00438"></a>00438       options = strrchr(delay, <span class="charliteral">'|'</span>);
<a name="l00439"></a>00439       <span class="keywordflow">if</span> (options) {
<a name="l00440"></a>00440          arg = strchr(options, <span class="charliteral">'b'</span>);
<a name="l00441"></a>00441          <span class="keywordflow">if</span> (arg) {
<a name="l00442"></a>00442             *arg = <span class="charliteral">'X'</span>;
<a name="l00443"></a>00443             <a class="code" href="pbx_8c.html#64407c916a2de6ae3f0efeca471c1b1d">pbx_builtin_setvar_helper</a>(chan,<span class="stringliteral">"AUTO_MONITOR"</span>,delay);
<a name="l00444"></a>00444          }
<a name="l00445"></a>00445       }
<a name="l00446"></a>00446       <span class="keywordflow">return</span> 0;
<a name="l00447"></a>00447    }
<a name="l00448"></a>00448 
<a name="l00449"></a>00449    res = <a class="code" href="monitor_8h.html#4f4e162179064c9f0c8444a33f6fe27d">ast_monitor_start</a>(chan, format, fname_base, 1);
<a name="l00450"></a>00450    <span class="keywordflow">if</span> (res &lt; 0)
<a name="l00451"></a>00451       res = <a class="code" href="monitor_8h.html#b920883a248d93215cda31effa692ed3">ast_monitor_change_fname</a>(chan, fname_base, 1);
<a name="l00452"></a>00452    <a class="code" href="monitor_8h.html#21b1d71c9387ac99b6c5a7066a8a845c">ast_monitor_setjoinfiles</a>(chan, joinfiles);
<a name="l00453"></a>00453 
<a name="l00454"></a>00454    <span class="keywordflow">return</span> res;
<a name="l00455"></a>00455 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="58b9d45bc3bee946151e63afd5e3af82"></a><!-- doxytag: member="res_monitor.c::stop_monitor_action" ref="58b9d45bc3bee946151e63afd5e3af82" args="(struct mansession *s, const struct message *m)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int stop_monitor_action           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structmansession.html">mansession</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const struct <a class="el" href="structmessage.html">message</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00534">534</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="lock_8h.html#a2fac4e1b143bef3b1ac807e0ab48f9f">ast_channel_unlock</a>, <a class="el" href="channel_8c-source.html#l00995">ast_get_channel_by_name_locked()</a>, <a class="el" href="res__monitor_8c-source.html#l00254">ast_monitor_stop()</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="manager_8c-source.html#l00713">astman_get_header()</a>, <a class="el" href="manager_8c-source.html#l00864">astman_send_ack()</a>, <a class="el" href="manager_8c-source.html#l00859">astman_send_error()</a>, and <a class="el" href="callerid_8c-source.html#l01043">name</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00535"></a>00535 {
<a name="l00536"></a>00536    <span class="keyword">struct </span><a class="code" href="structast__channel.html">ast_channel</a> *c = NULL;
<a name="l00537"></a>00537    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a> = <a class="code" href="group__Group__AMI.html#gd208abe83c7bd47d8004134de94d1b4b">astman_get_header</a>(m, <span class="stringliteral">"Channel"</span>);
<a name="l00538"></a>00538    <span class="keywordtype">int</span> res;
<a name="l00539"></a>00539    <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(name)) {
<a name="l00540"></a>00540       <a class="code" href="group__Group__AMI.html#g23a27dba104a8df4bb1c6a217a71e7e7">astman_send_error</a>(s, m, <span class="stringliteral">"No channel specified"</span>);
<a name="l00541"></a>00541       <span class="keywordflow">return</span> 0;
<a name="l00542"></a>00542    }
<a name="l00543"></a>00543    c = <a class="code" href="channel_8c.html#e01fecb172f34785571d94adbc5c6558">ast_get_channel_by_name_locked</a>(name);
<a name="l00544"></a>00544    <span class="keywordflow">if</span> (!c) {
<a name="l00545"></a>00545       <a class="code" href="group__Group__AMI.html#g23a27dba104a8df4bb1c6a217a71e7e7">astman_send_error</a>(s, m, <span class="stringliteral">"No such channel"</span>);
<a name="l00546"></a>00546       <span class="keywordflow">return</span> 0;
<a name="l00547"></a>00547    }
<a name="l00548"></a>00548    res = <a class="code" href="monitor_8h.html#0105c193291bd5aa095b584f2f4ea126">ast_monitor_stop</a>(c, 1);
<a name="l00549"></a>00549    <a class="code" href="lock_8h.html#a2fac4e1b143bef3b1ac807e0ab48f9f">ast_channel_unlock</a>(c);
<a name="l00550"></a>00550    <span class="keywordflow">if</span> (res) {
<a name="l00551"></a>00551       <a class="code" href="group__Group__AMI.html#g23a27dba104a8df4bb1c6a217a71e7e7">astman_send_error</a>(s, m, <span class="stringliteral">"Could not stop monitoring channel"</span>);
<a name="l00552"></a>00552       <span class="keywordflow">return</span> 0;
<a name="l00553"></a>00553    }
<a name="l00554"></a>00554    <a class="code" href="group__Group__AMI.html#g0c64878b307241bfe01cea67e09f49e2">astman_send_ack</a>(s, m, <span class="stringliteral">"Stopped monitoring channel"</span>);
<a name="l00555"></a>00555    <span class="keywordflow">return</span> 0;
<a name="l00556"></a>00556 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="00b0c4e9a4b3dd7484dde4e70ac92280"></a><!-- doxytag: member="res_monitor.c::stop_monitor_exec" ref="00b0c4e9a4b3dd7484dde4e70ac92280" args="(struct ast_channel *chan, void *data)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int stop_monitor_exec           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00457">457</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="res__monitor_8c-source.html#l00254">ast_monitor_stop()</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00458"></a>00458 {
<a name="l00459"></a>00459    <span class="keywordflow">return</span> <a class="code" href="monitor_8h.html#0105c193291bd5aa095b584f2f4ea126">ast_monitor_stop</a>(chan, 1);
<a name="l00460"></a>00460 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="eaf793e807a29b69460b0c6c94a79a0b"></a><!-- doxytag: member="res_monitor.c::unload_module" ref="eaf793e807a29b69460b0c6c94a79a0b" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int unload_module           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00671">671</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="manager_8c-source.html#l02633">ast_manager_unregister()</a>, and <a class="el" href="pbx_8c-source.html#l03849">ast_unregister_application()</a>.<div class="fragment"><pre class="fragment"><a name="l00672"></a>00672 {
<a name="l00673"></a>00673    <a class="code" href="pbx_8c.html#4fc9ac8a7093a1f73637df0b9d6d6de9">ast_unregister_application</a>(<span class="stringliteral">"Monitor"</span>);
<a name="l00674"></a>00674    <a class="code" href="pbx_8c.html#4fc9ac8a7093a1f73637df0b9d6d6de9">ast_unregister_application</a>(<span class="stringliteral">"StopMonitor"</span>);
<a name="l00675"></a>00675    <a class="code" href="pbx_8c.html#4fc9ac8a7093a1f73637df0b9d6d6de9">ast_unregister_application</a>(<span class="stringliteral">"ChangeMonitor"</span>);
<a name="l00676"></a>00676    <a class="code" href="pbx_8c.html#4fc9ac8a7093a1f73637df0b9d6d6de9">ast_unregister_application</a>(<span class="stringliteral">"PauseMonitor"</span>);
<a name="l00677"></a>00677    <a class="code" href="pbx_8c.html#4fc9ac8a7093a1f73637df0b9d6d6de9">ast_unregister_application</a>(<span class="stringliteral">"UnpauseMonitor"</span>);
<a name="l00678"></a>00678    <a class="code" href="group__Group__AMI.html#g2ec5f3830dfb4a55fdf0ad8e78bc0db6">ast_manager_unregister</a>(<span class="stringliteral">"Monitor"</span>);
<a name="l00679"></a>00679    <a class="code" href="group__Group__AMI.html#g2ec5f3830dfb4a55fdf0ad8e78bc0db6">ast_manager_unregister</a>(<span class="stringliteral">"StopMonitor"</span>);
<a name="l00680"></a>00680    <a class="code" href="group__Group__AMI.html#g2ec5f3830dfb4a55fdf0ad8e78bc0db6">ast_manager_unregister</a>(<span class="stringliteral">"ChangeMonitor"</span>);
<a name="l00681"></a>00681    <a class="code" href="group__Group__AMI.html#g2ec5f3830dfb4a55fdf0ad8e78bc0db6">ast_manager_unregister</a>(<span class="stringliteral">"PauseMonitor"</span>);
<a name="l00682"></a>00682    <a class="code" href="group__Group__AMI.html#g2ec5f3830dfb4a55fdf0ad8e78bc0db6">ast_manager_unregister</a>(<span class="stringliteral">"UnpauseMonitor"</span>);
<a name="l00683"></a>00683 
<a name="l00684"></a>00684    <span class="keywordflow">return</span> 0;
<a name="l00685"></a>00685 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="7d893f85ee899d6ea8a678f3c7073497"></a><!-- doxytag: member="res_monitor.c::unpause_monitor_action" ref="7d893f85ee899d6ea8a678f3c7073497" args="(struct mansession *s, const struct message *m)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int unpause_monitor_action           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structmansession.html">mansession</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const struct <a class="el" href="structmessage.html">message</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00649">649</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="res__monitor_8c-source.html#l00606">do_pause_or_unpause()</a>, and <a class="el" href="res__monitor_8c.html#b3c2654283d3b96950e8b01662a31808f66a95032107278b7f7d6a0fcc34b330">MONITOR_ACTION_UNPAUSE</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00650"></a>00650 {
<a name="l00651"></a>00651    <span class="keywordflow">return</span> <a class="code" href="res__monitor_8c.html#826d389d5bb7319e0a39ed9fa42d7b5f">do_pause_or_unpause</a>(s, m, <a class="code" href="res__monitor_8c.html#b3c2654283d3b96950e8b01662a31808f66a95032107278b7f7d6a0fcc34b330">MONITOR_ACTION_UNPAUSE</a>);
<a name="l00652"></a>00652 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d841652a300b977fad6ff263c0351b0f"></a><!-- doxytag: member="res_monitor.c::unpause_monitor_exec" ref="d841652a300b977fad6ff263c0351b0f" args="(struct ast_channel *chan, void *data)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int unpause_monitor_exec           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__channel.html">ast_channel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00352">352</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
References <a class="el" href="res__monitor_8c-source.html#l00342">ast_monitor_unpause()</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00353"></a>00353 {
<a name="l00354"></a>00354    <span class="keywordflow">return</span> <a class="code" href="monitor_8h.html#7cfb30d07bb72866508802173a655ba1">ast_monitor_unpause</a>(chan);
<a name="l00355"></a>00355 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="860d493d5f2c49f9c46d3b0370087e63"></a><!-- doxytag: member="res_monitor.c::change_monitor_action_help" ref="860d493d5f2c49f9c46d3b0370087e63" args="[]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="res__monitor_8c.html#860d493d5f2c49f9c46d3b0370087e63">change_monitor_action_help</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00558">558</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="3451fedc38324771782eb144504a0755"></a><!-- doxytag: member="res_monitor.c::changemonitor_descrip" ref="3451fedc38324771782eb144504a0755" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* <a class="el" href="res__monitor_8c.html#3451fedc38324771782eb144504a0755">changemonitor_descrip</a><code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <span class="stringliteral">"ChangeMonitor(filename_base)\n"</span>
   <span class="stringliteral">"Changes monitoring filename of a channel. Has no effect if the channel is not monitored\n"</span>
   <span class="stringliteral">"The argument is the new filename base to use for monitoring this channel.\n"</span>
</pre></div>
<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00099">99</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a975422a90da2977d2baccceac5ff7bd"></a><!-- doxytag: member="res_monitor.c::changemonitor_synopsis" ref="a975422a90da2977d2baccceac5ff7bd" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* <a class="el" href="res__monitor_8c.html#a975422a90da2977d2baccceac5ff7bd">changemonitor_synopsis</a> = &quot;Change monitoring filename of a channel&quot;<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00097">97</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="681043e0ddb4a9a1836d8ec08412eca8"></a><!-- doxytag: member="res_monitor.c::monitor_descrip" ref="681043e0ddb4a9a1836d8ec08412eca8" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* <a class="el" href="res__monitor_8c.html#681043e0ddb4a9a1836d8ec08412eca8">monitor_descrip</a><code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00068">68</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="df3922cb467d96b1aae7041602d12c35"></a><!-- doxytag: member="res_monitor.c::monitor_synopsis" ref="df3922cb467d96b1aae7041602d12c35" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* <a class="el" href="res__monitor_8c.html#df3922cb467d96b1aae7041602d12c35">monitor_synopsis</a> = &quot;Monitor a channel&quot;<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00066">66</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="6c3d197ea8953d85e1c9c07e03f469cf"></a><!-- doxytag: member="res_monitor.c::pause_monitor_action_help" ref="6c3d197ea8953d85e1c9c07e03f469cf" args="[]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="res__monitor_8c.html#6c3d197ea8953d85e1c9c07e03f469cf">pause_monitor_action_help</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment">
   <span class="stringliteral">"Description: The 'PauseMonitor' action may be used to temporarily stop the\n"</span>
   <span class="stringliteral">" recording of a channel.  The following parameters may\n"</span>
   <span class="stringliteral">" be used to control this:\n"</span>
   <span class="stringliteral">"  Channel     - Required.  Used to specify the channel to record.\n"</span>
</pre></div>
<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00632">632</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="361f387bf41f76944e8dd79fd2cc6419"></a><!-- doxytag: member="res_monitor.c::pausemonitor_descrip" ref="361f387bf41f76944e8dd79fd2cc6419" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* <a class="el" href="res__monitor_8c.html#361f387bf41f76944e8dd79fd2cc6419">pausemonitor_descrip</a><code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <span class="stringliteral">"PauseMonitor\n"</span>
   <span class="stringliteral">"Pauses monitoring of a channel until it is re-enabled by a call to UnpauseMonitor.\n"</span>
</pre></div>
<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00105">105</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="9d89d89fe7cdc2abd6ef1ead4b4a52d7"></a><!-- doxytag: member="res_monitor.c::pausemonitor_synopsis" ref="9d89d89fe7cdc2abd6ef1ead4b4a52d7" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* <a class="el" href="res__monitor_8c.html#9d89d89fe7cdc2abd6ef1ead4b4a52d7">pausemonitor_synopsis</a> = &quot;Pause monitoring of a channel&quot;<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00103">103</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="e068c2de26d760f20cf10afc4b87ef0f"></a><!-- doxytag: member="res_monitor.c::seq" ref="e068c2de26d760f20cf10afc4b87ef0f" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned long <a class="el" href="res__monitor_8c.html#e068c2de26d760f20cf10afc4b87ef0f">seq</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00064">64</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="75e51867ced5678ac326cfc1405fd83b"></a><!-- doxytag: member="res_monitor.c::start_monitor_action_help" ref="75e51867ced5678ac326cfc1405fd83b" args="[]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="res__monitor_8c.html#75e51867ced5678ac326cfc1405fd83b">start_monitor_action_help</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00467">467</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="648a6d4f8e9ae37c4ef2bf38149a0f95"></a><!-- doxytag: member="res_monitor.c::stop_monitor_action_help" ref="648a6d4f8e9ae37c4ef2bf38149a0f95" args="[]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="res__monitor_8c.html#648a6d4f8e9ae37c4ef2bf38149a0f95">stop_monitor_action_help</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment">
<span class="stringliteral">"Description: The 'StopMonitor' action may be used to end a previously\n"</span>
<span class="stringliteral">"  started 'Monitor' action.  The only parameter is 'Channel', the name\n"</span>
<span class="stringliteral">"  of the channel monitored.\n"</span>
</pre></div>
<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00529">529</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="8809f3d6c94380a4882693904571dcc7"></a><!-- doxytag: member="res_monitor.c::stopmonitor_descrip" ref="8809f3d6c94380a4882693904571dcc7" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* <a class="el" href="res__monitor_8c.html#8809f3d6c94380a4882693904571dcc7">stopmonitor_descrip</a><code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <span class="stringliteral">"StopMonitor\n"</span>
   <span class="stringliteral">"Stops monitoring a channel. Has no effect if the channel is not monitored\n"</span>
</pre></div>
<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00094">94</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d9cb00ce4df1736a36231353bfa99331"></a><!-- doxytag: member="res_monitor.c::stopmonitor_synopsis" ref="d9cb00ce4df1736a36231353bfa99331" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* <a class="el" href="res__monitor_8c.html#d9cb00ce4df1736a36231353bfa99331">stopmonitor_synopsis</a> = &quot;Stop monitoring a channel&quot;<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00092">92</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="4300d9ae52421248c07e1dccf8a8db92"></a><!-- doxytag: member="res_monitor.c::unpause_monitor_action_help" ref="4300d9ae52421248c07e1dccf8a8db92" args="[]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="res__monitor_8c.html#4300d9ae52421248c07e1dccf8a8db92">unpause_monitor_action_help</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment">
   <span class="stringliteral">"Description: The 'UnpauseMonitor' action may be used to re-enable recording\n"</span>
   <span class="stringliteral">"  of a channel after calling PauseMonitor.  The following parameters may\n"</span>
   <span class="stringliteral">"  be used to control this:\n"</span>
   <span class="stringliteral">"  Channel     - Required.  Used to specify the channel to record.\n"</span>
</pre></div>
<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00643">643</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ff764e2301f43fd063914051e1ff3eed"></a><!-- doxytag: member="res_monitor.c::unpausemonitor_descrip" ref="ff764e2301f43fd063914051e1ff3eed" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* <a class="el" href="res__monitor_8c.html#ff764e2301f43fd063914051e1ff3eed">unpausemonitor_descrip</a><code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> <span class="stringliteral">"UnpauseMonitor\n"</span>
   <span class="stringliteral">"Unpauses monitoring of a channel on which monitoring had\n"</span>
   <span class="stringliteral">"previously been paused with PauseMonitor.\n"</span>
</pre></div>
<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00110">110</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ac04a66d69ebd954ce39f054d6fbcf94"></a><!-- doxytag: member="res_monitor.c::unpausemonitor_synopsis" ref="ac04a66d69ebd954ce39f054d6fbcf94" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* <a class="el" href="res__monitor_8c.html#ac04a66d69ebd954ce39f054d6fbcf94">unpausemonitor_synopsis</a> = &quot;Unpause monitoring of a channel&quot;<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="res__monitor_8c-source.html#l00108">108</a> of file <a class="el" href="res__monitor_8c-source.html">res_monitor.c</a>.
<p>
Referenced by <a class="el" href="res__monitor_8c-source.html#l00655">load_module()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu May 24 22:27:44 2007 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
