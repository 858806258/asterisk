<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (24 May 2007)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Thu May 24 22:27:25 2007</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Fmain_2F.html">main</a></div>
<h1>config.c File Reference</h1>Configuration File Parser. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="asterisk_8h-source.html">asterisk.h</a>&quot;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;errno.h&gt;</code><br>
<code>#include &lt;<a class="el" href="time_8h-source.html">time.h</a>&gt;</code><br>
<code>#include &lt;sys/stat.h&gt;</code><br>
<code>#include &lt;glob.h&gt;</code><br>
<code>#include &quot;<a class="el" href="config_8h-source.html">asterisk/config.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="cli_8h-source.html">asterisk/cli.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="lock_8h-source.html">asterisk/lock.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="options_8h-source.html">asterisk/options.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="logger_8h-source.html">asterisk/logger.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="utils_8h-source.html">asterisk/utils.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="channel_8h-source.html">asterisk/channel.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="app_8h-source.html">asterisk/app.h</a>&quot;</code><br>

<p>
<a href="config_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structast__category.html">ast_category</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structast__comment.html">ast_comment</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Structure to keep comments for rewriting configuration files Structure to keep comments for rewriting configuration files.  <a href="structast__comment.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structast__config.html">ast_config</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structast__config__map.html">ast_config_map</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#01a112594a70a78b616d8baedbf338f2">AST_INCLUDE_GLOB</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#23ccbaefdb39a96e411cfe10920f659e">CB_INCR</a>&nbsp;&nbsp;&nbsp;250</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#d67d69b14a62f169369d93c74f3e209a">COMMENT_END</a>&nbsp;&nbsp;&nbsp;&quot;--;&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#8aa0ddd07cd9fdae41b117b326ecc53a">COMMENT_META</a>&nbsp;&nbsp;&nbsp;';'</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#b1241e84f56eea50528409e76134d4d7">COMMENT_START</a>&nbsp;&nbsp;&nbsp;&quot;;--&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#a63569aac36b87330444da4d5178b48e">COMMENT_TAG</a>&nbsp;&nbsp;&nbsp;'-'</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#b6f151aa4695612e66b73e3a73f8f5e7">MAX_INCLUDE_LEVEL</a>&nbsp;&nbsp;&nbsp;10</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#38c9b5e2f0c3da9a642fc180d2752277">MAX_NESTED_COMMENTS</a>&nbsp;&nbsp;&nbsp;128</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structast__comment.html">ast_comment</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#affab36d0133be1215ec9c64dc2ed41c">ALLOC_COMMENT</a> (const char *buffer)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#e1c001a173cb29aa6670c847c671ca03">append_mapping</a> (char *<a class="el" href="cdr__tds_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, char *driver, char *database, char *<a class="el" href="cdr__tds_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#9efd51e40d45378faf85951179110981">ast_category_append</a> (struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="res__indications_8c.html#71d63bae4fa3507f57ae4e35f6de4c63">config</a>, struct <a class="el" href="structast__category.html">ast_category</a> *category)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#38fbac9adb1c1bf165ecce251cb206a8">ast_category_browse</a> (struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="res__indications_8c.html#71d63bae4fa3507f57ae4e35f6de4c63">config</a>, const char *prev)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Goes through categories.  <a href="#38fbac9adb1c1bf165ecce251cb206a8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#8a891ee1cd71daa7ed06107874f3846c">ast_category_delete</a> (struct <a class="el" href="structast__config.html">ast_config</a> *cfg, const char *category)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#c7c9795016628bdecddab2fe767fa33f">ast_category_destroy</a> (struct <a class="el" href="structast__category.html">ast_category</a> *cat)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#f629e4926c28cfba5241eca4b8eec56f">ast_category_detach_variables</a> (struct <a class="el" href="structast__category.html">ast_category</a> *cat)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#b34a017f1b266ee61eaf206a1dd9aee3">ast_category_exist</a> (const struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="res__indications_8c.html#71d63bae4fa3507f57ae4e35f6de4c63">config</a>, const char *category_name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check for category duplicates.  <a href="#b34a017f1b266ee61eaf206a1dd9aee3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#a4d454598a4630cd3a810f7cecd25d41">ast_category_get</a> (const struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="res__indications_8c.html#71d63bae4fa3507f57ae4e35f6de4c63">config</a>, const char *category_name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve a category if it exists.  <a href="#a4d454598a4630cd3a810f7cecd25d41"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#7c91d609091f9ffcb3b4a9f8aaa82e7b">ast_category_new</a> (const char *<a class="el" href="cdr__tds_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#8629d76affd844c6b15a901eb2aa63d7">ast_category_rename</a> (struct <a class="el" href="structast__category.html">ast_category</a> *cat, const char *<a class="el" href="cdr__tds_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#f0d3c598d4ed9b462978022b65676af5">ast_check_realtime</a> (const char *family)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if realtime engine is configured for family returns 1 if family is configured in realtime and engine exists.  <a href="#f0d3c598d4ed9b462978022b65676af5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#ad84c9d29ca53758c2a113d057e221a0">ast_config_destroy</a> (struct <a class="el" href="structast__config.html">ast_config</a> *cfg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroys a config.  <a href="#ad84c9d29ca53758c2a113d057e221a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#8623aace9f1a314413e15da66d77839f">ast_config_engine_deregister</a> (struct <a class="el" href="structast__config__engine.html">ast_config_engine</a> *del)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deegister config engine.  <a href="#8623aace9f1a314413e15da66d77839f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#e2204638bef8e7bd5c552daf3b927b8c">ast_config_engine_register</a> (struct <a class="el" href="structast__config__engine.html">ast_config_engine</a> *new)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register config engine.  <a href="#e2204638bef8e7bd5c552daf3b927b8c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#d7d879dec5e500ef7bf3ef7c271bfd97">ast_config_get_current_category</a> (const struct <a class="el" href="structast__config.html">ast_config</a> *cfg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#c3ab4e0c51bb2d6537b62b9d8b997c0e">ast_config_internal_load</a> (const char *filename, struct <a class="el" href="structast__config.html">ast_config</a> *cfg, int withcomments)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#0ea8bde5422fa0db50302e0f710e18c1">ast_config_load</a> (const char *filename)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load a config file.  <a href="#0ea8bde5422fa0db50302e0f710e18c1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#2263d3aacd27024be95ac630a0a609dd">ast_config_load_with_comments</a> (const char *filename)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#5fee2f4a603882efcf21120190f2b803">ast_config_new</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#05b0e3a1447a0c19ed61a1b6cc0cf302">ast_config_option</a> (struct <a class="el" href="structast__config.html">ast_config</a> *cfg, const char *cat, const char *var)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#f32a68c11b4c0a2360b89ad97fd1dab0">ast_config_set_current_category</a> (struct <a class="el" href="structast__config.html">ast_config</a> *cfg, const struct <a class="el" href="structast__category.html">ast_category</a> *cat)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#54981322f94e622cbc9ba6a4ad0460d3">ast_destroy_realtime</a> (const char *family, const char *keyfield, const char *lookup,...)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy realtime configuration.  <a href="#54981322f94e622cbc9ba6a4ad0460d3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#7f0fcea9896b1ad5f093bdb7abbefe59">ast_load_realtime</a> (const char *family,...)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve realtime configuration.  <a href="#7f0fcea9896b1ad5f093bdb7abbefe59"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#bbe521ab27cc8dbae5c57e981f6f43ee">ast_load_realtime_all</a> (const char *family,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#321beae51e329a27c229832b064927f6">ast_load_realtime_helper</a> (const char *family, va_list ap)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#b6be1016c7903e9e35a84d899acad938">ast_load_realtime_multientry</a> (const char *family,...)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve realtime configuration.  <a href="#b6be1016c7903e9e35a84d899acad938"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#e2c55a1f291599c9235d281432f46e58">AST_MUTEX_DEFINE_STATIC</a> (config_lock)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#4d3672929087d58a0883217b9ade0091">ast_realtime_enabled</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if there's any realtime engines loaded.  <a href="#4d3672929087d58a0883217b9ade0091"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#320d12f71b6555578a4da7eb7def0433">ast_store_realtime</a> (const char *family,...)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create realtime configuration.  <a href="#320d12f71b6555578a4da7eb7def0433"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#abdc71633b03c33487b570669ab14285">ast_update_realtime</a> (const char *family, const char *keyfield, const char *lookup,...)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update realtime configuration.  <a href="#abdc71633b03c33487b570669ab14285"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#6b8deaf1a9df252e014d697e09cb68b9">ast_variable_append</a> (struct <a class="el" href="structast__category.html">ast_category</a> *category, struct <a class="el" href="structast__variable.html">ast_variable</a> *variable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#65ed813ca973e0e5dd3426804249db4f">ast_variable_browse</a> (const struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="res__indications_8c.html#71d63bae4fa3507f57ae4e35f6de4c63">config</a>, const char *category)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Goes through variables Somewhat similar in intent as the ast_category_browse. List variables of config file category.  <a href="#65ed813ca973e0e5dd3426804249db4f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#edbf64adfaa4adcef27cd5c6efe51be4">ast_variable_delete</a> (struct <a class="el" href="structast__category.html">ast_category</a> *category, const char *variable, const char *match)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#c21fb3a90ccd9ec4f8708c3b67b3c654">ast_variable_new</a> (const char *<a class="el" href="cdr__tds_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, const char *value)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#db24588ed54fb0d9d8f078b9d64bd0e1">ast_variable_retrieve</a> (const struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="res__indications_8c.html#71d63bae4fa3507f57ae4e35f6de4c63">config</a>, const char *category, const char *variable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets a variable.  <a href="#db24588ed54fb0d9d8f078b9d64bd0e1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#4fd56a903e50633096934f229d8a4340">ast_variable_update</a> (struct <a class="el" href="structast__category.html">ast_category</a> *category, const char *variable, const char *value, const char *match, unsigned int object)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#d616f18584600c70e8744e217c03407c">ast_variables_destroy</a> (struct <a class="el" href="structast__variable.html">ast_variable</a> *v)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free variable list.  <a href="#d616f18584600c70e8744e217c03407c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#ee8b81a06da990c27a429f1b455cd506">category_get</a> (const struct <a class="el" href="structast__config.html">ast_config</a> *<a class="el" href="res__indications_8c.html#71d63bae4fa3507f57ae4e35f6de4c63">config</a>, const char *category_name, int ignored)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#1667620b53c96fa480de61251ae92faa">CB_ADD</a> (char **comment_buffer, int *comment_buffer_size, char *str)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#06c916953d7b08f46b8a87548ae852ca">CB_ADD_LEN</a> (char **comment_buffer, int *comment_buffer_size, char *str, int len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#cd8c6041a6ec97c4c85c857c64f392cf">CB_INIT</a> (char **comment_buffer, int *comment_buffer_size, char **lline_buffer, int *lline_buffer_size)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#59b6e1ccd8d42533fc78dde5c7425b18">CB_RESET</a> (char **comment_buffer, char **lline_buffer)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#49d169eb931e065d2e9c381977da1803">clear_config_maps</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#955619459825475c170db0ce3eb981c9">config_command</a> (int fd, int argc, char **argv)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#1ad340c816ddf8ebb72fb95f25629eb6">config_text_file_load</a> (const char *database, const char *<a class="el" href="cdr__tds_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>, const char *filename, struct <a class="el" href="structast__config.html">ast_config</a> *cfg, int withcomments)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#509bc97b1300e42c8323c0d6122b9457">config_text_file_save</a> (const char *configfile, const struct <a class="el" href="structast__config.html">ast_config</a> *cfg, const char *generator)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structast__config__engine.html">ast_config_engine</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#a3c658c839064ba779b3fa38bc9c2bfc">find_engine</a> (const char *family, char *database, int dbsiz, char *<a class="el" href="cdr__tds_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>, int tabsiz)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find realtime engine for realtime family.  <a href="#a3c658c839064ba779b3fa38bc9c2bfc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#5abca42ddd46a24f1879a48bbb4b36b2">inherit_category</a> (struct <a class="el" href="structast__category.html">ast_category</a> *new, const struct <a class="el" href="structast__category.html">ast_category</a> *base)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#f3f955c58d5a5aaabe2d29d8d9506e5d">LLB_ADD</a> (char **lline_buffer, int *lline_buffer_size, char *str)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#399ebb89273e3bc9319a7f67e282d914">move_variables</a> (struct <a class="el" href="structast__category.html">ast_category</a> *old, struct <a class="el" href="structast__category.html">ast_category</a> *new)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#18038da37d2e7e66a9446b8e321ece05">next_available_category</a> (struct <a class="el" href="structast__category.html">ast_category</a> *cat)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#0758157f0559f0e96975d3dbddfc5e8a">process_text_line</a> (struct <a class="el" href="structast__config.html">ast_config</a> *cfg, struct <a class="el" href="structast__category.html">ast_category</a> **cat, char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>, int <a class="el" href="utils_8h.html#5525da36abafe9a243105119cea54be5">lineno</a>, const char *configfile, int withcomments, char **comment_buffer, int *comment_buffer_size, char **lline_buffer, int *lline_buffer_size)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#263cc1fff70675bd25498cb2f4c95431">read_config_maps</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#3387fcb9935a4ef90e5f08df980dde66">register_config_cli</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#711462f33726d46a7d76db3f374f27bb">variable_clone</a> (const struct <a class="el" href="structast__variable.html">ast_variable</a> *old)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structast__cli__entry.html">ast_cli_entry</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#84547cfd1c2ccb798e30a9c3e18f00a4">cli_config</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structast__config__engine.html">ast_config_engine</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#0531e578786fc476487425f62c18e84c">config_engine_list</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structast__config__map.html">ast_config_map</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#2eebecd119f3220c584c451fb5503460">extconfig_conf</a> = &quot;extconfig.conf&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#a2603a6c82cce02d9bd298d045f682ce">show_config_help</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structast__config__engine.html">ast_config_engine</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="config_8c.html#93ac5573470c14f563763c1dc15067eb">text_file_engine</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Configuration File Parser. 
<p>
<dl compact><dt><b>Author:</b></dt><dd>Mark Spencer &lt;<a href="mailto:markster@digium.com">markster@digium.com</a>&gt;</dd></dl>
Includes the Asterisk Realtime API - ARA See doc/realtime.txt and doc/extconfig.txt 
<p>
Definition in file <a class="el" href="config_8c-source.html">config.c</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="01a112594a70a78b616d8baedbf338f2"></a><!-- doxytag: member="config.c::AST_INCLUDE_GLOB" ref="01a112594a70a78b616d8baedbf338f2" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define AST_INCLUDE_GLOB&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00040">40</a> of file <a class="el" href="config_8c-source.html">config.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="23ccbaefdb39a96e411cfe10920f659e"></a><!-- doxytag: member="config.c::CB_INCR" ref="23ccbaefdb39a96e411cfe10920f659e" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define CB_INCR&nbsp;&nbsp;&nbsp;250          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00073">73</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00094">CB_ADD()</a>, <a class="el" href="config_8c-source.html#l00107">CB_ADD_LEN()</a>, <a class="el" href="config_8c-source.html#l00075">CB_INIT()</a>, and <a class="el" href="config_8c-source.html#l00121">LLB_ADD()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="d67d69b14a62f169369d93c74f3e209a"></a><!-- doxytag: member="config.c::COMMENT_END" ref="d67d69b14a62f169369d93c74f3e209a" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define COMMENT_END&nbsp;&nbsp;&nbsp;&quot;--;&quot;          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00059">59</a> of file <a class="el" href="config_8c-source.html">config.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="8aa0ddd07cd9fdae41b117b326ecc53a"></a><!-- doxytag: member="config.c::COMMENT_META" ref="8aa0ddd07cd9fdae41b117b326ecc53a" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define COMMENT_META&nbsp;&nbsp;&nbsp;';'          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00060">60</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00762">config_text_file_load()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b1241e84f56eea50528409e76134d4d7"></a><!-- doxytag: member="config.c::COMMENT_START" ref="b1241e84f56eea50528409e76134d4d7" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define COMMENT_START&nbsp;&nbsp;&nbsp;&quot;;--&quot;          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00058">58</a> of file <a class="el" href="config_8c-source.html">config.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a63569aac36b87330444da4d5178b48e"></a><!-- doxytag: member="config.c::COMMENT_TAG" ref="a63569aac36b87330444da4d5178b48e" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define COMMENT_TAG&nbsp;&nbsp;&nbsp;'-'          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00061">61</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00762">config_text_file_load()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b6f151aa4695612e66b73e3a73f8f5e7"></a><!-- doxytag: member="config.c::MAX_INCLUDE_LEVEL" ref="b6f151aa4695612e66b73e3a73f8f5e7" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define MAX_INCLUDE_LEVEL&nbsp;&nbsp;&nbsp;10          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00161">161</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00413">ast_config_new()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="38c9b5e2f0c3da9a642fc180d2752277"></a><!-- doxytag: member="config.c::MAX_NESTED_COMMENTS" ref="38c9b5e2f0c3da9a642fc180d2752277" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define MAX_NESTED_COMMENTS&nbsp;&nbsp;&nbsp;128          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00057">57</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00762">config_text_file_load()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="affab36d0133be1215ec9c64dc2ed41c"></a><!-- doxytag: member="config.c::ALLOC_COMMENT" ref="affab36d0133be1215ec9c64dc2ed41c" args="(const char *buffer)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static struct <a class="el" href="structast__comment.html">ast_comment</a>* ALLOC_COMMENT           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>buffer</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00141">141</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>, and <a class="el" href="config_8c-source.html#l00070">ast_comment::cmt</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00583">process_text_line()</a>.<div class="fragment"><pre class="fragment"><a name="l00142"></a>00142 { 
<a name="l00143"></a>00143    <span class="keyword">struct </span><a class="code" href="structast__comment.html">ast_comment</a> *x = <a class="code" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>(1,<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structast__comment.html">ast_comment</a>)+strlen(buffer)+1);
<a name="l00144"></a>00144    strcpy(x-&gt;<a class="code" href="structast__comment.html#347b72b0d84a81af1085ad9a6a8994e6">cmt</a>, buffer);
<a name="l00145"></a>00145    <span class="keywordflow">return</span> x;
<a name="l00146"></a>00146 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e1c001a173cb29aa6670c847c671ca03"></a><!-- doxytag: member="config.c::append_mapping" ref="e1c001a173cb29aa6670c847c671ca03" args="(char *name, char *driver, char *database, char *table)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int append_mapping           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>driver</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>database</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>table</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01055">1055</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a>, <a class="el" href="config_8c-source.html#l00153">ast_config_map::database</a>, <a class="el" href="config_8c-source.html#l00152">ast_config_map::driver</a>, <a class="el" href="misdn__config_8c-source.html#l00366">map</a>, <a class="el" href="config_8c-source.html#l00151">ast_config_map::name</a>, <a class="el" href="config_8c-source.html#l00150">ast_config_map::next</a>, <a class="el" href="asterisk_8c-source.html#l00163">option_verbose</a>, <a class="el" href="config_8c-source.html#l00155">ast_config_map::stuff</a>, <a class="el" href="config_8c-source.html#l00154">ast_config_map::table</a>, and <a class="el" href="logger_8h-source.html#l00044">VERBOSE_PREFIX_2</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l01090">read_config_maps()</a>.<div class="fragment"><pre class="fragment"><a name="l01056"></a>01056 {
<a name="l01057"></a>01057    <span class="keyword">struct </span><a class="code" href="structast__config__map.html">ast_config_map</a> *<a class="code" href="misdn__config_8c.html#1d78dc8ed51214e518b5114fe24490ae">map</a>;
<a name="l01058"></a>01058    <span class="keywordtype">int</span> length;
<a name="l01059"></a>01059 
<a name="l01060"></a>01060    length = <span class="keyword">sizeof</span>(*map);
<a name="l01061"></a>01061    length += strlen(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>) + 1;
<a name="l01062"></a>01062    length += strlen(<a class="code" href="structast__config__map.html#e2d45d57c7e2941b65c6ccd64af4223e">driver</a>) + 1;
<a name="l01063"></a>01063    length += strlen(<a class="code" href="structast__config__map.html#11e0eed8d3696c0a632f822df385ab3c">database</a>) + 1;
<a name="l01064"></a>01064    <span class="keywordflow">if</span> (<a class="code" href="cdr__odbc_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>)
<a name="l01065"></a>01065       length += strlen(<a class="code" href="cdr__odbc_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>) + 1;
<a name="l01066"></a>01066 
<a name="l01067"></a>01067    <span class="keywordflow">if</span> (!(map = <a class="code" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>(1, length)))
<a name="l01068"></a>01068       <span class="keywordflow">return</span> -1;
<a name="l01069"></a>01069 
<a name="l01070"></a>01070    map-&gt;<a class="code" href="structast__config__map.html#b068931cc450442b63f5b3d276ea4297">name</a> = map-&gt;<a class="code" href="structast__config__map.html#3d111ff6c918c5cbdf2b3e843726ec71">stuff</a>;
<a name="l01071"></a>01071    strcpy(map-&gt;<a class="code" href="structast__config__map.html#b068931cc450442b63f5b3d276ea4297">name</a>, <a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>);
<a name="l01072"></a>01072    map-&gt;<a class="code" href="structast__config__map.html#e2d45d57c7e2941b65c6ccd64af4223e">driver</a> = map-&gt;<a class="code" href="structast__config__map.html#b068931cc450442b63f5b3d276ea4297">name</a> + strlen(map-&gt;<a class="code" href="structast__config__map.html#b068931cc450442b63f5b3d276ea4297">name</a>) + 1;
<a name="l01073"></a>01073    strcpy(map-&gt;<a class="code" href="structast__config__map.html#e2d45d57c7e2941b65c6ccd64af4223e">driver</a>, <a class="code" href="structast__config__map.html#e2d45d57c7e2941b65c6ccd64af4223e">driver</a>);
<a name="l01074"></a>01074    map-&gt;<a class="code" href="structast__config__map.html#11e0eed8d3696c0a632f822df385ab3c">database</a> = map-&gt;<a class="code" href="structast__config__map.html#e2d45d57c7e2941b65c6ccd64af4223e">driver</a> + strlen(map-&gt;<a class="code" href="structast__config__map.html#e2d45d57c7e2941b65c6ccd64af4223e">driver</a>) + 1;
<a name="l01075"></a>01075    strcpy(map-&gt;<a class="code" href="structast__config__map.html#11e0eed8d3696c0a632f822df385ab3c">database</a>, <a class="code" href="structast__config__map.html#11e0eed8d3696c0a632f822df385ab3c">database</a>);
<a name="l01076"></a>01076    <span class="keywordflow">if</span> (<a class="code" href="cdr__odbc_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>) {
<a name="l01077"></a>01077       map-&gt;<a class="code" href="structast__config__map.html#aab9e1de16f38176f86d7a92ba337a8d">table</a> = map-&gt;<a class="code" href="structast__config__map.html#11e0eed8d3696c0a632f822df385ab3c">database</a> + strlen(map-&gt;<a class="code" href="structast__config__map.html#11e0eed8d3696c0a632f822df385ab3c">database</a>) + 1;
<a name="l01078"></a>01078       strcpy(map-&gt;<a class="code" href="structast__config__map.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>, <a class="code" href="cdr__odbc_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>);
<a name="l01079"></a>01079    }
<a name="l01080"></a>01080    map-&gt;<a class="code" href="structast__config__map.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = <a class="code" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a>;
<a name="l01081"></a>01081 
<a name="l01082"></a>01082    <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 1)
<a name="l01083"></a>01083       <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<a class="code" href="logger_8h.html#6e3640436a97291b451a8d264b5ab15d">VERBOSE_PREFIX_2</a> <span class="stringliteral">"Binding %s to %s/%s/%s\n"</span>,
<a name="l01084"></a>01084              map-&gt;<a class="code" href="structast__config__map.html#b068931cc450442b63f5b3d276ea4297">name</a>, map-&gt;<a class="code" href="structast__config__map.html#e2d45d57c7e2941b65c6ccd64af4223e">driver</a>, map-&gt;<a class="code" href="structast__config__map.html#11e0eed8d3696c0a632f822df385ab3c">database</a>, map-&gt;<a class="code" href="structast__config__map.html#aab9e1de16f38176f86d7a92ba337a8d">table</a> ? map-&gt;<a class="code" href="structast__config__map.html#aab9e1de16f38176f86d7a92ba337a8d">table</a> : map-&gt;<a class="code" href="structast__config__map.html#b068931cc450442b63f5b3d276ea4297">name</a>);
<a name="l01085"></a>01085 
<a name="l01086"></a>01086    <a class="code" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a> = map;
<a name="l01087"></a>01087    <span class="keywordflow">return</span> 0;
<a name="l01088"></a>01088 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="9efd51e40d45378faf85951179110981"></a><!-- doxytag: member="config.c::ast_category_append" ref="9efd51e40d45378faf85951179110981" args="(struct ast_config *config, struct ast_category *category)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_category_append           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>category</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00333">333</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00177">ast_config::current</a>, <a class="el" href="config_8c-source.html#l00166">ast_category::include_level</a>, <a class="el" href="config_8c-source.html#l00179">ast_config::include_level</a>, <a class="el" href="config_8c-source.html#l00176">ast_config::last</a>, <a class="el" href="config_8c-source.html#l00171">ast_category::next</a>, and <a class="el" href="config_8c-source.html#l00175">ast_config::root</a>.
<p>
Referenced by <a class="el" href="res__config__sqlite_8c-source.html#l00700">add_cfg_entry()</a>, <a class="el" href="res__config__sqlite_8c-source.html#l00942">add_rt_multi_cfg_entry()</a>, <a class="el" href="res__config__odbc_8c-source.html#l00483">config_odbc()</a>, <a class="el" href="res__config__pgsql_8c-source.html#l00457">config_pgsql()</a>, <a class="el" href="manager_8c-source.html#l01177">handle_updates()</a>, <a class="el" href="config_8c-source.html#l00583">process_text_line()</a>, <a class="el" href="app__directory_8c-source.html#l00342">realtime_directory()</a>, <a class="el" href="res__config__odbc_8c-source.html#l00204">realtime_multi_odbc()</a>, and <a class="el" href="res__config__pgsql_8c-source.html#l00208">realtime_multi_pgsql()</a>.<div class="fragment"><pre class="fragment"><a name="l00334"></a>00334 {
<a name="l00335"></a>00335    <span class="keywordflow">if</span> (config-&gt;<a class="code" href="structast__config.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>)
<a name="l00336"></a>00336       config-&gt;<a class="code" href="structast__config.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = category;
<a name="l00337"></a>00337    <span class="keywordflow">else</span>
<a name="l00338"></a>00338       config-&gt;<a class="code" href="structast__config.html#63a9f0ea7bb98050796b649e85481845">root</a> = category;
<a name="l00339"></a>00339    category-&gt;<a class="code" href="structast__category.html#a916719a7ef1dca56e8e080cae121e25">include_level</a> = config-&gt;<a class="code" href="structast__config.html#a916719a7ef1dca56e8e080cae121e25">include_level</a>;
<a name="l00340"></a>00340    config-&gt;<a class="code" href="structast__config.html#98bd1c45684cf587ac2347a92dd7bb51">last</a> = category;
<a name="l00341"></a>00341    config-&gt;<a class="code" href="structast__config.html#43b5c9175984c071f30b873fdce0a000">current</a> = category;
<a name="l00342"></a>00342 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="38fbac9adb1c1bf165ecce251cb206a8"></a><!-- doxytag: member="config.c::ast_category_browse" ref="38fbac9adb1c1bf165ecce251cb206a8" args="(struct ast_config *config, const char *prev)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* ast_category_browse           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>prev</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Goes through categories. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>Which config structure you wish to "browse" </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>prev</em>&nbsp;</td><td>A pointer to a previous category. This funtion is kind of non-intuitive in it's use. To begin, one passes NULL as the second arguement. It will return a pointer to the string of the first category in the file. From here on after, one must then pass the previous usage's return value as the second pointer, and it will return a pointer to the category name afterwards.</td></tr>
  </table>
</dl>
Returns a category on success, or NULL on failure/no-more-categories 
<p>
Definition at line <a class="el" href="config_8c-source.html#l00357">357</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00178">ast_config::last_browse</a>, <a class="el" href="config_8c-source.html#l00164">ast_category::name</a>, <a class="el" href="config_8c-source.html#l00171">ast_category::next</a>, <a class="el" href="config_8c-source.html#l00350">next_available_category()</a>, and <a class="el" href="config_8c-source.html#l00175">ast_config::root</a>.
<p>
Referenced by <a class="el" href="manager_8c-source.html#l01065">action_getconfig()</a>, <a class="el" href="manager_8c-source.html#l01114">action_getconfigjson()</a>, <a class="el" href="res__jabber_8c-source.html#l02275">aji_load_config()</a>, <a class="el" href="manager_8c-source.html#l00903">authenticate()</a>, <a class="el" href="chan__sip_8c-source.html#l11468">complete_sipnotify()</a>, <a class="el" href="app__directory_8c-source.html#l00400">do_directory()</a>, <a class="el" href="app__queue_8c-source.html#l01077">find_queue_by_name_rt()</a>, <a class="el" href="chan__gtalk_8c-source.html#l01703">gtalk_load_config()</a>, <a class="el" href="res__indications_8c-source.html#l00228">ind_load_module()</a>, <a class="el" href="manager_8c-source.html#l03215">init_manager()</a>, <a class="el" href="chan__jingle_8c-source.html#l01561">jingle_load_config()</a>, <a class="el" href="app__amd_8c-source.html#l00330">load_config()</a>, <a class="el" href="chan__oss_8c-source.html#l01581">load_module()</a>, <a class="el" href="res__musiconhold_8c-source.html#l01016">load_moh_classes()</a>, <a class="el" href="res__odbc_8c-source.html#l00207">load_odbc_config()</a>, <a class="el" href="cdr__manager_8c-source.html#l00052">loadconfigurationfile()</a>, <a class="el" href="misdn__config_8c-source.html#l01071">misdn_cfg_init()</a>, <a class="el" href="app__osplookup_8c-source.html#l01942">osp_load()</a>, <a class="el" href="pbx__config_8c-source.html#l01332">pbx_load_config()</a>, <a class="el" href="pbx__config_8c-source.html#l01510">pbx_load_users()</a>, <a class="el" href="app__directory_8c-source.html#l00342">realtime_directory()</a>, <a class="el" href="func__odbc_8c-source.html#l00630">reload()</a>, <a class="el" href="chan__h323_8c-source.html#l02809">reload_config()</a>, <a class="el" href="app__followme_8c-source.html#l00279">reload_followme()</a>, <a class="el" href="app__queue_8c-source.html#l03958">reload_queues()</a>, <a class="el" href="app__rpt_8c-source.html#l06656">rpt_master()</a>, <a class="el" href="chan__zap_8c-source.html#l12617">setup_zap()</a>, <a class="el" href="app__voicemail_8c-source.html#l07202">show_users_realtime()</a>, <a class="el" href="app__meetme_8c-source.html#l04770">sla_load_config()</a>, and <a class="el" href="app__voicemail_8c-source.html#l00850">vm_change_password()</a>.<div class="fragment"><pre class="fragment"><a name="l00358"></a>00358 {  
<a name="l00359"></a>00359    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *cat = NULL;
<a name="l00360"></a>00360 
<a name="l00361"></a>00361    <span class="keywordflow">if</span> (prev &amp;&amp; config-&gt;<a class="code" href="structast__config.html#bf952f7e7c87c21fe7d4a05c59b03d0c">last_browse</a> &amp;&amp; (config-&gt;<a class="code" href="structast__config.html#bf952f7e7c87c21fe7d4a05c59b03d0c">last_browse</a>-&gt;<a class="code" href="structast__category.html#23d5c5772e05e09c87f6323a95732f89">name</a> == prev))
<a name="l00362"></a>00362       cat = config-&gt;<a class="code" href="structast__config.html#bf952f7e7c87c21fe7d4a05c59b03d0c">last_browse</a>-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00363"></a>00363    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!prev &amp;&amp; config-&gt;<a class="code" href="structast__config.html#63a9f0ea7bb98050796b649e85481845">root</a>)
<a name="l00364"></a>00364       cat = config-&gt;<a class="code" href="structast__config.html#63a9f0ea7bb98050796b649e85481845">root</a>;
<a name="l00365"></a>00365    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (prev) {
<a name="l00366"></a>00366       <span class="keywordflow">for</span> (cat = config-&gt;<a class="code" href="structast__config.html#63a9f0ea7bb98050796b649e85481845">root</a>; cat; cat = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l00367"></a>00367          <span class="keywordflow">if</span> (cat-&gt;<a class="code" href="structast__category.html#23d5c5772e05e09c87f6323a95732f89">name</a> == prev) {
<a name="l00368"></a>00368             cat = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00369"></a>00369             <span class="keywordflow">break</span>;
<a name="l00370"></a>00370          }
<a name="l00371"></a>00371       }
<a name="l00372"></a>00372       <span class="keywordflow">if</span> (!cat) {
<a name="l00373"></a>00373          <span class="keywordflow">for</span> (cat = config-&gt;<a class="code" href="structast__config.html#63a9f0ea7bb98050796b649e85481845">root</a>; cat; cat = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l00374"></a>00374             <span class="keywordflow">if</span> (!strcasecmp(cat-&gt;<a class="code" href="structast__category.html#23d5c5772e05e09c87f6323a95732f89">name</a>, prev)) {
<a name="l00375"></a>00375                cat = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00376"></a>00376                <span class="keywordflow">break</span>;
<a name="l00377"></a>00377             }
<a name="l00378"></a>00378          }
<a name="l00379"></a>00379       }
<a name="l00380"></a>00380    }
<a name="l00381"></a>00381    
<a name="l00382"></a>00382    <span class="keywordflow">if</span> (cat)
<a name="l00383"></a>00383       cat = <a class="code" href="config_8c.html#18038da37d2e7e66a9446b8e321ece05">next_available_category</a>(cat);
<a name="l00384"></a>00384 
<a name="l00385"></a>00385    config-&gt;<a class="code" href="structast__config.html#bf952f7e7c87c21fe7d4a05c59b03d0c">last_browse</a> = cat;
<a name="l00386"></a>00386    <span class="keywordflow">return</span> (cat) ? cat-&gt;<a class="code" href="structast__category.html#23d5c5772e05e09c87f6323a95732f89">name</a> : NULL;
<a name="l00387"></a>00387 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="8a891ee1cd71daa7ed06107874f3846c"></a><!-- doxytag: member="config.c::ast_category_delete" ref="8a891ee1cd71daa7ed06107874f3846c" args="(struct ast_config *cfg, const char *category)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_category_delete           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>category</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00509">509</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00211">ast_variables_destroy()</a>, <a class="el" href="astmm_8h-source.html#l00069">free</a>, <a class="el" href="config_8c-source.html#l00176">ast_config::last</a>, <a class="el" href="config_8c-source.html#l00171">ast_category::next</a>, and <a class="el" href="config_8c-source.html#l00175">ast_config::root</a>.
<p>
Referenced by <a class="el" href="manager_8c-source.html#l01177">handle_updates()</a>.<div class="fragment"><pre class="fragment"><a name="l00510"></a>00510 {
<a name="l00511"></a>00511    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *prev=NULL, *cat;
<a name="l00512"></a>00512    cat = cfg-&gt;<a class="code" href="structast__config.html#63a9f0ea7bb98050796b649e85481845">root</a>;
<a name="l00513"></a>00513    <span class="keywordflow">while</span> (cat) {
<a name="l00514"></a>00514       <span class="keywordflow">if</span> (cat-&gt;name == category) {
<a name="l00515"></a>00515          <a class="code" href="config_8c.html#d616f18584600c70e8744e217c03407c">ast_variables_destroy</a>(cat-&gt;root);
<a name="l00516"></a>00516          <span class="keywordflow">if</span> (prev) {
<a name="l00517"></a>00517             prev-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00518"></a>00518             <span class="keywordflow">if</span> (cat == cfg-&gt;<a class="code" href="structast__config.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>)
<a name="l00519"></a>00519                cfg-&gt;<a class="code" href="structast__config.html#98bd1c45684cf587ac2347a92dd7bb51">last</a> = prev;
<a name="l00520"></a>00520          } <span class="keywordflow">else</span> {
<a name="l00521"></a>00521             cfg-&gt;<a class="code" href="structast__config.html#63a9f0ea7bb98050796b649e85481845">root</a> = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00522"></a>00522             <span class="keywordflow">if</span> (cat == cfg-&gt;<a class="code" href="structast__config.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>)
<a name="l00523"></a>00523                cfg-&gt;<a class="code" href="structast__config.html#98bd1c45684cf587ac2347a92dd7bb51">last</a> = NULL;
<a name="l00524"></a>00524          }
<a name="l00525"></a>00525          <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(cat);
<a name="l00526"></a>00526          <span class="keywordflow">return</span> 0;
<a name="l00527"></a>00527       }
<a name="l00528"></a>00528       prev = cat;
<a name="l00529"></a>00529       cat = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00530"></a>00530    }
<a name="l00531"></a>00531 
<a name="l00532"></a>00532    prev = NULL;
<a name="l00533"></a>00533    cat = cfg-&gt;<a class="code" href="structast__config.html#63a9f0ea7bb98050796b649e85481845">root</a>;
<a name="l00534"></a>00534    <span class="keywordflow">while</span> (cat) {
<a name="l00535"></a>00535       <span class="keywordflow">if</span> (!strcasecmp(cat-&gt;name, category)) {
<a name="l00536"></a>00536          <a class="code" href="config_8c.html#d616f18584600c70e8744e217c03407c">ast_variables_destroy</a>(cat-&gt;root);
<a name="l00537"></a>00537          <span class="keywordflow">if</span> (prev) {
<a name="l00538"></a>00538             prev-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00539"></a>00539             <span class="keywordflow">if</span> (cat == cfg-&gt;<a class="code" href="structast__config.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>)
<a name="l00540"></a>00540                cfg-&gt;<a class="code" href="structast__config.html#98bd1c45684cf587ac2347a92dd7bb51">last</a> = prev;
<a name="l00541"></a>00541          } <span class="keywordflow">else</span> {
<a name="l00542"></a>00542             cfg-&gt;<a class="code" href="structast__config.html#63a9f0ea7bb98050796b649e85481845">root</a> = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00543"></a>00543             <span class="keywordflow">if</span> (cat == cfg-&gt;<a class="code" href="structast__config.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>)
<a name="l00544"></a>00544                cfg-&gt;<a class="code" href="structast__config.html#98bd1c45684cf587ac2347a92dd7bb51">last</a> = NULL;
<a name="l00545"></a>00545          }
<a name="l00546"></a>00546          <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(cat);
<a name="l00547"></a>00547          <span class="keywordflow">return</span> 0;
<a name="l00548"></a>00548       }
<a name="l00549"></a>00549       prev = cat;
<a name="l00550"></a>00550       cat = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00551"></a>00551    }
<a name="l00552"></a>00552    <span class="keywordflow">return</span> -1;
<a name="l00553"></a>00553 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c7c9795016628bdecddab2fe767fa33f"></a><!-- doxytag: member="config.c::ast_category_destroy" ref="c7c9795016628bdecddab2fe767fa33f" args="(struct ast_category *cat)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_category_destroy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cat</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00344">344</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00211">ast_variables_destroy()</a>, <a class="el" href="astmm_8h-source.html#l00069">free</a>, and <a class="el" href="config_8c-source.html#l00169">ast_category::root</a>.
<p>
Referenced by <a class="el" href="res__config__sqlite_8c-source.html#l00700">add_cfg_entry()</a>, <a class="el" href="config_8c-source.html#l00583">process_text_line()</a>, and <a class="el" href="res__config__odbc_8c-source.html#l00204">realtime_multi_odbc()</a>.<div class="fragment"><pre class="fragment"><a name="l00345"></a>00345 {
<a name="l00346"></a>00346    <a class="code" href="config_8c.html#d616f18584600c70e8744e217c03407c">ast_variables_destroy</a>(cat-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a>);
<a name="l00347"></a>00347    <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(cat);
<a name="l00348"></a>00348 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="f629e4926c28cfba5241eca4b8eec56f"></a><!-- doxytag: member="config.c::ast_category_detach_variables" ref="f629e4926c28cfba5241eca4b8eec56f" args="(struct ast_category *cat)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__variable.html">ast_variable</a>* ast_category_detach_variables           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cat</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00389">389</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00170">ast_category::last</a>, and <a class="el" href="config_8c-source.html#l00169">ast_category::root</a>.<div class="fragment"><pre class="fragment"><a name="l00390"></a>00390 {
<a name="l00391"></a>00391    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *v;
<a name="l00392"></a>00392 
<a name="l00393"></a>00393    v = cat-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a>;
<a name="l00394"></a>00394    cat-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a> = NULL;
<a name="l00395"></a>00395    cat-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a> = NULL;
<a name="l00396"></a>00396 
<a name="l00397"></a>00397    <span class="keywordflow">return</span> v;
<a name="l00398"></a>00398 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b34a017f1b266ee61eaf206a1dd9aee3"></a><!-- doxytag: member="config.c::ast_category_exist" ref="b34a017f1b266ee61eaf206a1dd9aee3" args="(const struct ast_config *config, const char *category_name)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_category_exist           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>category_name</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Check for category duplicates. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>which config to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>category_name</em>&nbsp;</td><td>name of the category you're looking for This will search through the categories within a given config file for a match.</td></tr>
  </table>
</dl>
Return non-zero if found 
<p>
Definition at line <a class="el" href="config_8c-source.html#l00328">328</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00323">ast_category_get()</a>.<div class="fragment"><pre class="fragment"><a name="l00329"></a>00329 {
<a name="l00330"></a>00330    <span class="keywordflow">return</span> !!<a class="code" href="config_8c.html#a4d454598a4630cd3a810f7cecd25d41">ast_category_get</a>(config, category_name);
<a name="l00331"></a>00331 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4d454598a4630cd3a810f7cecd25d41"></a><!-- doxytag: member="config.c::ast_category_get" ref="a4d454598a4630cd3a810f7cecd25d41" args="(const struct ast_config *config, const char *category_name)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__category.html">ast_category</a>* ast_category_get           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>category_name</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve a category if it exists. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>which config to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>category_name</em>&nbsp;</td><td>name of the category you're looking for This will search through the categories within a given config file for a match.</td></tr>
  </table>
</dl>
Returns pointer to category if found, NULL if not. 
<p>
Definition at line <a class="el" href="config_8c-source.html#l00323">323</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00305">category_get()</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00328">ast_category_exist()</a>, <a class="el" href="config_8c-source.html#l00222">ast_variable_browse()</a>, <a class="el" href="manager_8c-source.html#l01177">handle_updates()</a>, <a class="el" href="app__directory_8c-source.html#l00342">realtime_directory()</a>, <a class="el" href="app__voicemail_8c-source.html#l00850">vm_change_password()</a>, and <a class="el" href="app__voicemail_8c-source.html#l03966">vm_forwardoptions()</a>.<div class="fragment"><pre class="fragment"><a name="l00324"></a>00324 {
<a name="l00325"></a>00325    <span class="keywordflow">return</span> <a class="code" href="config_8c.html#ee8b81a06da990c27a429f1b455cd506">category_get</a>(config, category_name, 0);
<a name="l00326"></a>00326 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="7c91d609091f9ffcb3b4a9f8aaa82e7b"></a><!-- doxytag: member="config.c::ast_category_new" ref="7c91d609091f9ffcb3b4a9f8aaa82e7b" args="(const char *name)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__category.html">ast_category</a>* ast_category_new           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>name</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00296">296</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>.
<p>
Referenced by <a class="el" href="res__config__sqlite_8c-source.html#l00700">add_cfg_entry()</a>, <a class="el" href="res__config__sqlite_8c-source.html#l00942">add_rt_multi_cfg_entry()</a>, <a class="el" href="res__config__odbc_8c-source.html#l00483">config_odbc()</a>, <a class="el" href="res__config__pgsql_8c-source.html#l00457">config_pgsql()</a>, <a class="el" href="manager_8c-source.html#l01177">handle_updates()</a>, <a class="el" href="config_8c-source.html#l00583">process_text_line()</a>, <a class="el" href="app__directory_8c-source.html#l00342">realtime_directory()</a>, <a class="el" href="res__config__odbc_8c-source.html#l00204">realtime_multi_odbc()</a>, and <a class="el" href="res__config__pgsql_8c-source.html#l00208">realtime_multi_pgsql()</a>.<div class="fragment"><pre class="fragment"><a name="l00297"></a>00297 {
<a name="l00298"></a>00298    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *category;
<a name="l00299"></a>00299 
<a name="l00300"></a>00300    <span class="keywordflow">if</span> ((category = <a class="code" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*category))))
<a name="l00301"></a>00301       ast_copy_string(category-&gt;name, <a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>, <span class="keyword">sizeof</span>(category-&gt;name));
<a name="l00302"></a>00302    <span class="keywordflow">return</span> category;
<a name="l00303"></a>00303 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="8629d76affd844c6b15a901eb2aa63d7"></a><!-- doxytag: member="config.c::ast_category_rename" ref="8629d76affd844c6b15a901eb2aa63d7" args="(struct ast_category *cat, const char *name)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_category_rename           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>cat</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00400">400</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00164">ast_category::name</a>.
<p>
Referenced by <a class="el" href="manager_8c-source.html#l01177">handle_updates()</a>, <a class="el" href="res__config__odbc_8c-source.html#l00204">realtime_multi_odbc()</a>, and <a class="el" href="res__config__pgsql_8c-source.html#l00208">realtime_multi_pgsql()</a>.<div class="fragment"><pre class="fragment"><a name="l00401"></a>00401 {
<a name="l00402"></a>00402    ast_copy_string(cat-&gt;<a class="code" href="structast__category.html#23d5c5772e05e09c87f6323a95732f89">name</a>, name, <span class="keyword">sizeof</span>(cat-&gt;<a class="code" href="structast__category.html#23d5c5772e05e09c87f6323a95732f89">name</a>));
<a name="l00403"></a>00403 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="f0d3c598d4ed9b462978022b65676af5"></a><!-- doxytag: member="config.c::ast_check_realtime" ref="f0d3c598d4ed9b462978022b65676af5" args="(const char *family)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_check_realtime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>family</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Check if realtime engine is configured for family returns 1 if family is configured in realtime and engine exists. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td>which family/config to be checked </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01366">1366</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l01200">find_engine()</a>.
<p>
Referenced by <a class="el" href="chan__sip_8c-source.html#l10808">_sip_show_peer()</a>, <a class="el" href="chan__sip_8c-source.html#l10356">_sip_show_peers()</a>, <a class="el" href="app__voicemail_8c-source.html#l04976">close_mailbox()</a>, <a class="el" href="app__voicemail_8c-source.html#l01679">copy_file()</a>, <a class="el" href="chan__sip_8c-source.html#l08253">destroy_association()</a>, <a class="el" href="app__voicemail_8c-source.html#l07236">handle_voicemail_show_users()</a>, <a class="el" href="app__voicemail_8c-source.html#l02956">leave_voicemail()</a>, <a class="el" href="res__astum_8c-source.html#l01977">load_module()</a>, <a class="el" href="chan__sip_8c-source.html#l02742">realtime_peer()</a>, <a class="el" href="chan__sip_8c-source.html#l02609">realtime_update_peer()</a>, <a class="el" href="res__astum_8c-source.html#l01712">reload_config()</a>, <a class="el" href="app__voicemail_8c-source.html#l01616">rename_file()</a>, <a class="el" href="chan__sip_8c-source.html#l11134">sip_show_settings()</a>, and <a class="el" href="app__voicemail_8c-source.html#l01753">vm_delete()</a>.<div class="fragment"><pre class="fragment"><a name="l01367"></a>01367 {
<a name="l01368"></a>01368    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html">ast_config_engine</a> *eng;
<a name="l01369"></a>01369 
<a name="l01370"></a>01370    eng = <a class="code" href="config_8c.html#a3c658c839064ba779b3fa38bc9c2bfc">find_engine</a>(family, NULL, 0, NULL, 0);
<a name="l01371"></a>01371    <span class="keywordflow">if</span> (eng)
<a name="l01372"></a>01372       <span class="keywordflow">return</span> 1;
<a name="l01373"></a>01373    <span class="keywordflow">return</span> 0;
<a name="l01374"></a>01374 
<a name="l01375"></a>01375 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ad84c9d29ca53758c2a113d057e221a0"></a><!-- doxytag: member="config.c::ast_config_destroy" ref="ad84c9d29ca53758c2a113d057e221a0" args="(struct ast_config *cfg)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_config_destroy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>config</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destroys a config. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>pointer to config data structure Free memory associated with a given config </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00555">555</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00211">ast_variables_destroy()</a>, <a class="el" href="astmm_8h-source.html#l00069">free</a>, <a class="el" href="config_8c-source.html#l00171">ast_category::next</a>, <a class="el" href="config_8c-source.html#l00175">ast_config::root</a>, and <a class="el" href="config_8c-source.html#l00169">ast_category::root</a>.
<p>
Referenced by <a class="el" href="http_8c-source.html#l01148">__ast_http_load()</a>, <a class="el" href="manager_8c-source.html#l01065">action_getconfig()</a>, <a class="el" href="manager_8c-source.html#l01114">action_getconfigjson()</a>, <a class="el" href="manager_8c-source.html#l01251">action_updateconfig()</a>, <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>, <a class="el" href="app__voicemail_8c-source.html#l08189">advanced_options()</a>, <a class="el" href="config_8c-source.html#l01278">ast_config_load()</a>, <a class="el" href="config_8c-source.html#l01294">ast_config_load_with_comments()</a>, <a class="el" href="enum_8c-source.html#l00613">ast_enum_init()</a>, <a class="el" href="asterisk_8c-source.html#l02369">ast_readconfig()</a>, <a class="el" href="rtp_8c-source.html#l03709">ast_rtp_reload()</a>, <a class="el" href="udptl_8c-source.html#l01207">ast_udptl_reload()</a>, <a class="el" href="manager_8c-source.html#l00903">authenticate()</a>, <a class="el" href="app__meetme_8c-source.html#l02485">conf_exec()</a>, <a class="el" href="app__directory_8c-source.html#l00570">directory_exec()</a>, <a class="el" href="cdr_8c-source.html#l01229">do_reload()</a>, <a class="el" href="app__festival_8c-source.html#l00286">festival_exec()</a>, <a class="el" href="app__meetme_8c-source.html#l02339">find_conf()</a>, <a class="el" href="pbx__config_8c-source.html#l00717">handle_save_dialplan()</a>, <a class="el" href="res__indications_8c-source.html#l00228">ind_load_module()</a>, <a class="el" href="logger_8c-source.html#l00309">init_logger_chain()</a>, <a class="el" href="manager_8c-source.html#l03215">init_manager()</a>, <a class="el" href="app__amd_8c-source.html#l00330">load_config()</a>, <a class="el" href="app__meetme_8c-source.html#l03132">load_config_meetme()</a>, <a class="el" href="app__directory_8c-source.html#l00658">load_module()</a>, <a class="el" href="loader_8c-source.html#l00704">load_modules()</a>, <a class="el" href="res__musiconhold_8c-source.html#l01016">load_moh_classes()</a>, <a class="el" href="res__odbc_8c-source.html#l00207">load_odbc_config()</a>, <a class="el" href="app__queue_8c-source.html#l01193">load_realtime_queue()</a>, <a class="el" href="app__rpt_8c-source.html#l00904">load_rpt_vars()</a>, <a class="el" href="cdr__manager_8c-source.html#l00052">loadconfigurationfile()</a>, <a class="el" href="cdr__pgsql_8c-source.html#l00286">my_load_module()</a>, <a class="el" href="cdr__odbc_8c-source.html#l00244">odbc_load_module()</a>, <a class="el" href="app__osplookup_8c-source.html#l01942">osp_load()</a>, <a class="el" href="codec__adpcm_8c-source.html#l00353">parse_config()</a>, <a class="el" href="pbx__config_8c-source.html#l01332">pbx_load_config()</a>, <a class="el" href="pbx__config_8c-source.html#l01510">pbx_load_users()</a>, <a class="el" href="app__voicemail_8c-source.html#l04694">play_message()</a>, <a class="el" href="app__privacy_8c-source.html#l00078">privacy_exec()</a>, <a class="el" href="config_8c-source.html#l01090">read_config_maps()</a>, <a class="el" href="app__directory_8c-source.html#l00342">realtime_directory()</a>, <a class="el" href="res__config__sqlite_8c-source.html#l00990">realtime_multi_handler()</a>, <a class="el" href="app__playback_8c-source.html#l00451">reload()</a>, <a class="el" href="chan__h323_8c-source.html#l02809">reload_config()</a>, <a class="el" href="app__rpt_8c-source.html#l06656">rpt_master()</a>, <a class="el" href="chan__zap_8c-source.html#l12617">setup_zap()</a>, <a class="el" href="app__meetme_8c-source.html#l04770">sla_load_config()</a>, <a class="el" href="cdr__tds_8c-source.html#l00427">tds_load_module()</a>, <a class="el" href="app__playback_8c-source.html#l00465">unload_module()</a>, and <a class="el" href="app__voicemail_8c-source.html#l03966">vm_forwardoptions()</a>.<div class="fragment"><pre class="fragment"><a name="l00556"></a>00556 {
<a name="l00557"></a>00557    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *cat, *catn;
<a name="l00558"></a>00558 
<a name="l00559"></a>00559    <span class="keywordflow">if</span> (!cfg)
<a name="l00560"></a>00560       <span class="keywordflow">return</span>;
<a name="l00561"></a>00561 
<a name="l00562"></a>00562    cat = cfg-&gt;<a class="code" href="structast__config.html#63a9f0ea7bb98050796b649e85481845">root</a>;
<a name="l00563"></a>00563    <span class="keywordflow">while</span> (cat) {
<a name="l00564"></a>00564       <a class="code" href="config_8c.html#d616f18584600c70e8744e217c03407c">ast_variables_destroy</a>(cat-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a>);
<a name="l00565"></a>00565       catn = cat;
<a name="l00566"></a>00566       cat = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00567"></a>00567       <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(catn);
<a name="l00568"></a>00568    }
<a name="l00569"></a>00569    <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(cfg);
<a name="l00570"></a>00570 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="8623aace9f1a314413e15da66d77839f"></a><!-- doxytag: member="config.c::ast_config_engine_deregister" ref="8623aace9f1a314413e15da66d77839f" args="(struct ast_config_engine *del)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_config_engine_deregister           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config__engine.html">ast_config_engine</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>del</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Deegister config engine. 
<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01177">1177</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="lock_8h-source.html#l00530">ast_mutex_lock()</a>, <a class="el" href="lock_8h-source.html#l00520">ast_mutex_unlock()</a>, <a class="el" href="pbx__gtkconsole_8c-source.html#l00073">last</a>, and <a class="el" href="config_8h-source.html#l00066">ast_config_engine::next</a>.
<p>
Referenced by <a class="el" href="res__config__odbc_8c-source.html#l00574">unload_module()</a>.<div class="fragment"><pre class="fragment"><a name="l01178"></a>01178 {
<a name="l01179"></a>01179    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html">ast_config_engine</a> *ptr, *<a class="code" href="pbx__gtkconsole_8c.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>=NULL;
<a name="l01180"></a>01180 
<a name="l01181"></a>01181    <a class="code" href="lock_8h.html#b3c5e3093b325167f88db93c8b4b2421">ast_mutex_lock</a>(&amp;config_lock);
<a name="l01182"></a>01182 
<a name="l01183"></a>01183    <span class="keywordflow">for</span> (ptr = <a class="code" href="config_8c.html#0531e578786fc476487425f62c18e84c">config_engine_list</a>; ptr; ptr=ptr-&gt;<a class="code" href="structast__config__engine.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l01184"></a>01184       <span class="keywordflow">if</span> (ptr == del) {
<a name="l01185"></a>01185          <span class="keywordflow">if</span> (last)
<a name="l01186"></a>01186             last-&gt;next = ptr-&gt;<a class="code" href="structast__config__engine.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l01187"></a>01187          <span class="keywordflow">else</span>
<a name="l01188"></a>01188             <a class="code" href="config_8c.html#0531e578786fc476487425f62c18e84c">config_engine_list</a> = ptr-&gt;<a class="code" href="structast__config__engine.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l01189"></a>01189          <span class="keywordflow">break</span>;
<a name="l01190"></a>01190       }
<a name="l01191"></a>01191       last = ptr;
<a name="l01192"></a>01192    }
<a name="l01193"></a>01193 
<a name="l01194"></a>01194    <a class="code" href="lock_8h.html#1d33e3caf152f0901c5ebdb69c2d4d26">ast_mutex_unlock</a>(&amp;config_lock);
<a name="l01195"></a>01195 
<a name="l01196"></a>01196    <span class="keywordflow">return</span> 0;
<a name="l01197"></a>01197 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e2204638bef8e7bd5c552daf3b927b8c"></a><!-- doxytag: member="config.c::ast_config_engine_register" ref="e2204638bef8e7bd5c552daf3b927b8c" args="(struct ast_config_engine *new)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_config_engine_register           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config__engine.html">ast_config_engine</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>new</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Register config engine. 
<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01158">1158</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="lock_8h-source.html#l00530">ast_mutex_lock()</a>, <a class="el" href="lock_8h-source.html#l00520">ast_mutex_unlock()</a>, <a class="el" href="logger_8h-source.html#l00106">LOG_NOTICE</a>, <a class="el" href="config_8h-source.html#l00059">ast_config_engine::name</a>, and <a class="el" href="config_8h-source.html#l00066">ast_config_engine::next</a>.
<p>
Referenced by <a class="el" href="res__config__odbc_8c-source.html#l00583">load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l01159"></a>01159 {
<a name="l01160"></a>01160    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html">ast_config_engine</a> *ptr;
<a name="l01161"></a>01161 
<a name="l01162"></a>01162    <a class="code" href="lock_8h.html#b3c5e3093b325167f88db93c8b4b2421">ast_mutex_lock</a>(&amp;config_lock);
<a name="l01163"></a>01163 
<a name="l01164"></a>01164    <span class="keywordflow">if</span> (!<a class="code" href="config_8c.html#0531e578786fc476487425f62c18e84c">config_engine_list</a>) {
<a name="l01165"></a>01165       <a class="code" href="config_8c.html#0531e578786fc476487425f62c18e84c">config_engine_list</a> = <span class="keyword">new</span>;
<a name="l01166"></a>01166    } <span class="keywordflow">else</span> {
<a name="l01167"></a>01167       <span class="keywordflow">for</span> (ptr = <a class="code" href="config_8c.html#0531e578786fc476487425f62c18e84c">config_engine_list</a>; ptr-&gt;<a class="code" href="structast__config__engine.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>; ptr=ptr-&gt;<a class="code" href="structast__config__engine.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>);
<a name="l01168"></a>01168       ptr-&gt;<a class="code" href="structast__config__engine.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = <span class="keyword">new</span>;
<a name="l01169"></a>01169    }
<a name="l01170"></a>01170 
<a name="l01171"></a>01171    <a class="code" href="lock_8h.html#1d33e3caf152f0901c5ebdb69c2d4d26">ast_mutex_unlock</a>(&amp;config_lock);
<a name="l01172"></a>01172    <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#bbf95aad74d847cd4bcb129604f798cd">LOG_NOTICE</a>,<span class="stringliteral">"Registered Config Engine %s\n"</span>, new-&gt;<a class="code" href="structast__config__engine.html#b068931cc450442b63f5b3d276ea4297">name</a>);
<a name="l01173"></a>01173 
<a name="l01174"></a>01174    <span class="keywordflow">return</span> 1;
<a name="l01175"></a>01175 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d7d879dec5e500ef7bf3ef7c271bfd97"></a><!-- doxytag: member="config.c::ast_config_get_current_category" ref="d7d879dec5e500ef7bf3ef7c271bfd97" args="(const struct ast_config *cfg)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__category.html">ast_category</a>* ast_config_get_current_category           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cfg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00572">572</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00177">ast_config::current</a>.
<p>
Referenced by <a class="el" href="res__config__odbc_8c-source.html#l00483">config_odbc()</a>, and <a class="el" href="config_8c-source.html#l00762">config_text_file_load()</a>.<div class="fragment"><pre class="fragment"><a name="l00573"></a>00573 {
<a name="l00574"></a>00574    <span class="keywordflow">return</span> cfg-&gt;<a class="code" href="structast__config.html#43b5c9175984c071f30b873fdce0a000">current</a>;
<a name="l00575"></a>00575 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c3ab4e0c51bb2d6537b62b9d8b997c0e"></a><!-- doxytag: member="config.c::ast_config_internal_load" ref="c3ab4e0c51bb2d6537b62b9d8b997c0e" args="(const char *filename, struct ast_config *cfg, int withcomments)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config.html">ast_config</a>* ast_config_internal_load           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>withcomments</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01239">1239</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="cdr__sqlite_8c-source.html#l00064">db</a>, <a class="el" href="config_8c-source.html#l00063">extconfig_conf</a>, <a class="el" href="config_8c-source.html#l01200">find_engine()</a>, <a class="el" href="config_8c-source.html#l00179">ast_config::include_level</a>, <a class="el" href="config_8h-source.html#l00060">ast_config_engine::load_func</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="config_8c-source.html#l00180">ast_config::max_include_level</a>, <a class="el" href="cdr__pgsql_8c-source.html#l00071">result</a>, and <a class="el" href="cdr__odbc_8c-source.html#l00069">table</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l01278">ast_config_load()</a>, <a class="el" href="config_8c-source.html#l01294">ast_config_load_with_comments()</a>, <a class="el" href="res__config__odbc_8c-source.html#l00483">config_odbc()</a>, <a class="el" href="res__config__pgsql_8c-source.html#l00457">config_pgsql()</a>, <a class="el" href="config_8c-source.html#l00583">process_text_line()</a>, and <a class="el" href="config_8c-source.html#l01090">read_config_maps()</a>.<div class="fragment"><pre class="fragment"><a name="l01240"></a>01240 {
<a name="l01241"></a>01241    <span class="keywordtype">char</span> <a class="code" href="cdr__sqlite_8c.html#d77d5e503ad1439f585ac494268b351b">db</a>[256];
<a name="l01242"></a>01242    <span class="keywordtype">char</span> <a class="code" href="cdr__odbc_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>[256];
<a name="l01243"></a>01243    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html">ast_config_engine</a> *loader = &amp;<a class="code" href="config_8c.html#93ac5573470c14f563763c1dc15067eb">text_file_engine</a>;
<a name="l01244"></a>01244    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *<a class="code" href="cdr__pgsql_8c.html#b4a88417b3d0170d754c647c30b7216a">result</a>; 
<a name="l01245"></a>01245 
<a name="l01246"></a>01246    <span class="keywordflow">if</span> (cfg-&gt;<a class="code" href="structast__config.html#a916719a7ef1dca56e8e080cae121e25">include_level</a> == cfg-&gt;<a class="code" href="structast__config.html#3373ce4dccf6b8939f588da41c2cd83b">max_include_level</a>) {
<a name="l01247"></a>01247       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Maximum Include level (%d) exceeded\n"</span>, cfg-&gt;<a class="code" href="structast__config.html#3373ce4dccf6b8939f588da41c2cd83b">max_include_level</a>);
<a name="l01248"></a>01248       <span class="keywordflow">return</span> NULL;
<a name="l01249"></a>01249    }
<a name="l01250"></a>01250 
<a name="l01251"></a>01251    cfg-&gt;<a class="code" href="structast__config.html#a916719a7ef1dca56e8e080cae121e25">include_level</a>++;
<a name="l01252"></a>01252 
<a name="l01253"></a>01253    <span class="keywordflow">if</span> (strcmp(filename, <a class="code" href="config_8c.html#2eebecd119f3220c584c451fb5503460">extconfig_conf</a>) &amp;&amp; strcmp(filename, <span class="stringliteral">"asterisk.conf"</span>) &amp;&amp; <a class="code" href="config_8c.html#0531e578786fc476487425f62c18e84c">config_engine_list</a>) {
<a name="l01254"></a>01254       <span class="keyword">struct </span><a class="code" href="structast__config__engine.html">ast_config_engine</a> *eng;
<a name="l01255"></a>01255 
<a name="l01256"></a>01256       eng = <a class="code" href="config_8c.html#a3c658c839064ba779b3fa38bc9c2bfc">find_engine</a>(filename, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l01257"></a>01257 
<a name="l01258"></a>01258 
<a name="l01259"></a>01259       <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#bf1a716fb46e19b9d038dfe9c972ac36">load_func</a>) {
<a name="l01260"></a>01260          loader = eng;
<a name="l01261"></a>01261       } <span class="keywordflow">else</span> {
<a name="l01262"></a>01262          eng = <a class="code" href="config_8c.html#a3c658c839064ba779b3fa38bc9c2bfc">find_engine</a>(<span class="stringliteral">"global"</span>, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l01263"></a>01263          <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#bf1a716fb46e19b9d038dfe9c972ac36">load_func</a>)
<a name="l01264"></a>01264             loader = eng;
<a name="l01265"></a>01265       }
<a name="l01266"></a>01266    }
<a name="l01267"></a>01267 
<a name="l01268"></a>01268    result = loader-&gt;<a class="code" href="structast__config__engine.html#bf1a716fb46e19b9d038dfe9c972ac36">load_func</a>(db, table, filename, cfg, withcomments);
<a name="l01269"></a>01269 
<a name="l01270"></a>01270    <span class="keywordflow">if</span> (result)
<a name="l01271"></a>01271       result-&gt;<a class="code" href="structast__config.html#a916719a7ef1dca56e8e080cae121e25">include_level</a>--;
<a name="l01272"></a>01272    <span class="keywordflow">else</span>
<a name="l01273"></a>01273       cfg-&gt;<a class="code" href="structast__config.html#a916719a7ef1dca56e8e080cae121e25">include_level</a>--;
<a name="l01274"></a>01274 
<a name="l01275"></a>01275    <span class="keywordflow">return</span> result;
<a name="l01276"></a>01276 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="0ea8bde5422fa0db50302e0f710e18c1"></a><!-- doxytag: member="config.c::ast_config_load" ref="0ea8bde5422fa0db50302e0f710e18c1" args="(const char *filename)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config.html">ast_config</a>* ast_config_load           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>filename</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Load a config file. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>path of file to open. If no preceding '/' character, path is considered relative to AST_CONFIG_DIR Create a config structure from a given configuration file.</td></tr>
  </table>
</dl>
Returns NULL on error, or an <a class="el" href="structast__config.html">ast_config</a> data structure on success 
<p>
Definition at line <a class="el" href="config_8c-source.html#l01278">1278</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00555">ast_config_destroy()</a>, <a class="el" href="config_8c-source.html#l01239">ast_config_internal_load()</a>, <a class="el" href="config_8c-source.html#l00413">ast_config_new()</a>, and <a class="el" href="cdr__pgsql_8c-source.html#l00071">result</a>.
<p>
Referenced by <a class="el" href="http_8c-source.html#l01148">__ast_http_load()</a>, <a class="el" href="app__playback_8c-source.html#l00330">__say_init()</a>, <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>, <a class="el" href="app__voicemail_8c-source.html#l08189">advanced_options()</a>, <a class="el" href="res__jabber_8c-source.html#l02275">aji_load_config()</a>, <a class="el" href="enum_8c-source.html#l00613">ast_enum_init()</a>, <a class="el" href="asterisk_8c-source.html#l02369">ast_readconfig()</a>, <a class="el" href="rtp_8c-source.html#l03709">ast_rtp_reload()</a>, <a class="el" href="udptl_8c-source.html#l01207">ast_udptl_reload()</a>, <a class="el" href="manager_8c-source.html#l00903">authenticate()</a>, <a class="el" href="app__meetme_8c-source.html#l02485">conf_exec()</a>, <a class="el" href="app__directory_8c-source.html#l00570">directory_exec()</a>, <a class="el" href="cdr_8c-source.html#l01229">do_reload()</a>, <a class="el" href="app__festival_8c-source.html#l00286">festival_exec()</a>, <a class="el" href="app__meetme_8c-source.html#l02339">find_conf()</a>, <a class="el" href="chan__gtalk_8c-source.html#l01703">gtalk_load_config()</a>, <a class="el" href="pbx__config_8c-source.html#l00717">handle_save_dialplan()</a>, <a class="el" href="res__indications_8c-source.html#l00228">ind_load_module()</a>, <a class="el" href="logger_8c-source.html#l00309">init_logger_chain()</a>, <a class="el" href="manager_8c-source.html#l03215">init_manager()</a>, <a class="el" href="chan__jingle_8c-source.html#l01561">jingle_load_config()</a>, <a class="el" href="app__alarmreceiver_8c-source.html#l00743">load_config()</a>, <a class="el" href="app__meetme_8c-source.html#l03132">load_config_meetme()</a>, <a class="el" href="app__directory_8c-source.html#l00658">load_module()</a>, <a class="el" href="loader_8c-source.html#l00704">load_modules()</a>, <a class="el" href="res__musiconhold_8c-source.html#l01016">load_moh_classes()</a>, <a class="el" href="res__odbc_8c-source.html#l00207">load_odbc_config()</a>, <a class="el" href="app__rpt_8c-source.html#l00904">load_rpt_vars()</a>, <a class="el" href="cdr__manager_8c-source.html#l00052">loadconfigurationfile()</a>, <a class="el" href="cdr__pgsql_8c-source.html#l00286">my_load_module()</a>, <a class="el" href="cdr__odbc_8c-source.html#l00244">odbc_load_module()</a>, <a class="el" href="app__osplookup_8c-source.html#l01942">osp_load()</a>, <a class="el" href="codec__adpcm_8c-source.html#l00353">parse_config()</a>, <a class="el" href="pbx__config_8c-source.html#l01332">pbx_load_config()</a>, <a class="el" href="pbx__config_8c-source.html#l01510">pbx_load_users()</a>, <a class="el" href="app__voicemail_8c-source.html#l04694">play_message()</a>, <a class="el" href="app__privacy_8c-source.html#l00078">privacy_exec()</a>, <a class="el" href="chan__agent_8c-source.html#l01004">read_agent_config()</a>, <a class="el" href="app__directory_8c-source.html#l00342">realtime_directory()</a>, <a class="el" href="app__playback_8c-source.html#l00451">reload()</a>, <a class="el" href="chan__h323_8c-source.html#l02809">reload_config()</a>, <a class="el" href="app__followme_8c-source.html#l00279">reload_followme()</a>, <a class="el" href="app__queue_8c-source.html#l03958">reload_queues()</a>, <a class="el" href="chan__iax2_8c-source.html#l09191">set_config()</a>, <a class="el" href="chan__zap_8c-source.html#l12617">setup_zap()</a>, <a class="el" href="app__meetme_8c-source.html#l04770">sla_load_config()</a>, <a class="el" href="res__smdi_8c-source.html#l00520">smdi_load()</a>, <a class="el" href="cdr__tds_8c-source.html#l00427">tds_load_module()</a>, and <a class="el" href="app__voicemail_8c-source.html#l03966">vm_forwardoptions()</a>.<div class="fragment"><pre class="fragment"><a name="l01279"></a>01279 {
<a name="l01280"></a>01280    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *cfg;
<a name="l01281"></a>01281    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *<a class="code" href="cdr__pgsql_8c.html#b4a88417b3d0170d754c647c30b7216a">result</a>;
<a name="l01282"></a>01282 
<a name="l01283"></a>01283    cfg = <a class="code" href="config_8c.html#5fee2f4a603882efcf21120190f2b803">ast_config_new</a>();
<a name="l01284"></a>01284    <span class="keywordflow">if</span> (!cfg)
<a name="l01285"></a>01285       <span class="keywordflow">return</span> NULL;
<a name="l01286"></a>01286 
<a name="l01287"></a>01287    result = <a class="code" href="config_8c.html#c3ab4e0c51bb2d6537b62b9d8b997c0e">ast_config_internal_load</a>(filename, cfg, 0);
<a name="l01288"></a>01288    <span class="keywordflow">if</span> (!result)
<a name="l01289"></a>01289       <a class="code" href="config_8c.html#ad84c9d29ca53758c2a113d057e221a0">ast_config_destroy</a>(cfg);
<a name="l01290"></a>01290 
<a name="l01291"></a>01291    <span class="keywordflow">return</span> result;
<a name="l01292"></a>01292 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="2263d3aacd27024be95ac630a0a609dd"></a><!-- doxytag: member="config.c::ast_config_load_with_comments" ref="2263d3aacd27024be95ac630a0a609dd" args="(const char *filename)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config.html">ast_config</a>* ast_config_load_with_comments           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>filename</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01294">1294</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00555">ast_config_destroy()</a>, <a class="el" href="config_8c-source.html#l01239">ast_config_internal_load()</a>, <a class="el" href="config_8c-source.html#l00413">ast_config_new()</a>, and <a class="el" href="cdr__pgsql_8c-source.html#l00071">result</a>.
<p>
Referenced by <a class="el" href="manager_8c-source.html#l01065">action_getconfig()</a>, <a class="el" href="manager_8c-source.html#l01114">action_getconfigjson()</a>, <a class="el" href="manager_8c-source.html#l01251">action_updateconfig()</a>, and <a class="el" href="app__voicemail_8c-source.html#l00850">vm_change_password()</a>.<div class="fragment"><pre class="fragment"><a name="l01295"></a>01295 {
<a name="l01296"></a>01296    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *cfg;
<a name="l01297"></a>01297    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *<a class="code" href="cdr__pgsql_8c.html#b4a88417b3d0170d754c647c30b7216a">result</a>;
<a name="l01298"></a>01298 
<a name="l01299"></a>01299    cfg = <a class="code" href="config_8c.html#5fee2f4a603882efcf21120190f2b803">ast_config_new</a>();
<a name="l01300"></a>01300    <span class="keywordflow">if</span> (!cfg)
<a name="l01301"></a>01301       <span class="keywordflow">return</span> NULL;
<a name="l01302"></a>01302 
<a name="l01303"></a>01303    result = <a class="code" href="config_8c.html#c3ab4e0c51bb2d6537b62b9d8b997c0e">ast_config_internal_load</a>(filename, cfg, 1);
<a name="l01304"></a>01304    <span class="keywordflow">if</span> (!result)
<a name="l01305"></a>01305       <a class="code" href="config_8c.html#ad84c9d29ca53758c2a113d057e221a0">ast_config_destroy</a>(cfg);
<a name="l01306"></a>01306 
<a name="l01307"></a>01307    <span class="keywordflow">return</span> result;
<a name="l01308"></a>01308 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="5fee2f4a603882efcf21120190f2b803"></a><!-- doxytag: member="config.c::ast_config_new" ref="5fee2f4a603882efcf21120190f2b803" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config.html">ast_config</a>* ast_config_new           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00413">413</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>, <a class="el" href="chan__agent_8c-source.html#l00077">config</a>, and <a class="el" href="config_8c-source.html#l00161">MAX_INCLUDE_LEVEL</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l01278">ast_config_load()</a>, <a class="el" href="config_8c-source.html#l01294">ast_config_load_with_comments()</a>, <a class="el" href="config_8c-source.html#l01090">read_config_maps()</a>, <a class="el" href="res__config__sqlite_8c-source.html#l00990">realtime_multi_handler()</a>, <a class="el" href="res__config__odbc_8c-source.html#l00204">realtime_multi_odbc()</a>, and <a class="el" href="res__config__pgsql_8c-source.html#l00208">realtime_multi_pgsql()</a>.<div class="fragment"><pre class="fragment"><a name="l00414"></a>00414 {
<a name="l00415"></a>00415    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *<a class="code" href="chan__agent_8c.html#71d63bae4fa3507f57ae4e35f6de4c63">config</a>;
<a name="l00416"></a>00416 
<a name="l00417"></a>00417    <span class="keywordflow">if</span> ((config = <a class="code" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*config))))
<a name="l00418"></a>00418       config-&gt;max_include_level = <a class="code" href="config_8c.html#b6f151aa4695612e66b73e3a73f8f5e7">MAX_INCLUDE_LEVEL</a>;
<a name="l00419"></a>00419    <span class="keywordflow">return</span> config;
<a name="l00420"></a>00420 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="05b0e3a1447a0c19ed61a1b6cc0cf302"></a><!-- doxytag: member="config.c::ast_config_option" ref="05b0e3a1447a0c19ed61a1b6cc0cf302" args="(struct ast_config *cfg, const char *cat, const char *var)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char* ast_config_option           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>cat</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>var</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00234">234</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00244">ast_variable_retrieve()</a>.
<p>
Referenced by <a class="el" href="app__directory_8c-source.html#l00400">do_directory()</a>, <a class="el" href="app__voicemail_8c-source.html#l07508">load_config()</a>, and <a class="el" href="pbx__config_8c-source.html#l01510">pbx_load_users()</a>.<div class="fragment"><pre class="fragment"><a name="l00235"></a>00235 {
<a name="l00236"></a>00236    <span class="keyword">const</span> <span class="keywordtype">char</span> *tmp;
<a name="l00237"></a>00237    tmp = <a class="code" href="config_8c.html#db24588ed54fb0d9d8f078b9d64bd0e1">ast_variable_retrieve</a>(cfg, cat, <a class="code" href="ast__expr2f_8c.html#b2145aac704ce76dbe1ac7adac535b23">var</a>);
<a name="l00238"></a>00238    <span class="keywordflow">if</span> (!tmp)
<a name="l00239"></a>00239       tmp = <a class="code" href="config_8c.html#db24588ed54fb0d9d8f078b9d64bd0e1">ast_variable_retrieve</a>(cfg, <span class="stringliteral">"general"</span>, <a class="code" href="ast__expr2f_8c.html#b2145aac704ce76dbe1ac7adac535b23">var</a>);
<a name="l00240"></a>00240    <span class="keywordflow">return</span> tmp;
<a name="l00241"></a>00241 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="f32a68c11b4c0a2360b89ad97fd1dab0"></a><!-- doxytag: member="config.c::ast_config_set_current_category" ref="f32a68c11b4c0a2360b89ad97fd1dab0" args="(struct ast_config *cfg, const struct ast_category *cat)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_config_set_current_category           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>cat</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00577">577</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00177">ast_config::current</a>.<div class="fragment"><pre class="fragment"><a name="l00578"></a>00578 {
<a name="l00579"></a>00579    <span class="comment">/* cast below is just to silence compiler warning about dropping "const" */</span>
<a name="l00580"></a>00580    cfg-&gt;<a class="code" href="structast__config.html#43b5c9175984c071f30b873fdce0a000">current</a> = (<span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *) cat;
<a name="l00581"></a>00581 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="54981322f94e622cbc9ba6a4ad0460d3"></a><!-- doxytag: member="config.c::ast_destroy_realtime" ref="54981322f94e622cbc9ba6a4ad0460d3" args="(const char *family, const char *keyfield, const char *lookup,...)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_destroy_realtime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>keyfield</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>lookup</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destroy realtime configuration. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td>which family/config to be destroyed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>keyfield</em>&nbsp;</td><td>which field to use as the key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lookup</em>&nbsp;</td><td>which value to look for in the key field to match the entry. This function is used to destroy an entry in realtime configuration space. Additional params are used as keys. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01433">1433</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="cdr__sqlite_8c-source.html#l00064">db</a>, <a class="el" href="config_8h-source.html#l00065">ast_config_engine::destroy_func</a>, <a class="el" href="config_8c-source.html#l01200">find_engine()</a>, and <a class="el" href="cdr__odbc_8c-source.html#l00069">table</a>.
<p>
Referenced by <a class="el" href="app__voicemail_8c-source.html#l02956">leave_voicemail()</a>, and <a class="el" href="app__voicemail_8c-source.html#l01753">vm_delete()</a>.<div class="fragment"><pre class="fragment"><a name="l01433"></a>01433                                                                                             {
<a name="l01434"></a>01434    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html">ast_config_engine</a> *eng;
<a name="l01435"></a>01435    <span class="keywordtype">int</span> res = -1;
<a name="l01436"></a>01436    <span class="keywordtype">char</span> <a class="code" href="cdr__sqlite_8c.html#d77d5e503ad1439f585ac494268b351b">db</a>[256]=<span class="stringliteral">""</span>;
<a name="l01437"></a>01437    <span class="keywordtype">char</span> <a class="code" href="cdr__odbc_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>[256]=<span class="stringliteral">""</span>;
<a name="l01438"></a>01438    va_list ap;
<a name="l01439"></a>01439 
<a name="l01440"></a>01440    va_start(ap, lookup);
<a name="l01441"></a>01441    eng = <a class="code" href="config_8c.html#a3c658c839064ba779b3fa38bc9c2bfc">find_engine</a>(family, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l01442"></a>01442    <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#6613ed42ecd0e15c07ad08cd8794edef">destroy_func</a>) 
<a name="l01443"></a>01443       res = eng-&gt;<a class="code" href="structast__config__engine.html#6613ed42ecd0e15c07ad08cd8794edef">destroy_func</a>(db, table, keyfield, lookup, ap);
<a name="l01444"></a>01444    va_end(ap);
<a name="l01445"></a>01445 
<a name="l01446"></a>01446    <span class="keywordflow">return</span> res;
<a name="l01447"></a>01447 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="7f0fcea9896b1ad5f093bdb7abbefe59"></a><!-- doxytag: member="config.c::ast_load_realtime" ref="7f0fcea9896b1ad5f093bdb7abbefe59" args="(const char *family,...)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__variable.html">ast_variable</a>* ast_load_realtime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve realtime configuration. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td>which family/config to lookup This will use builtin configuration backends to look up a particular entity in realtime and return a variable list of its parameters. Note that unlike the variables in <a class="el" href="structast__config.html">ast_config</a>, the resulting list of variables MUST be freed with <a class="el" href="config_8c.html#d616f18584600c70e8744e217c03407c">ast_variables_destroy()</a> as there is no container. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01336">1336</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l01310">ast_load_realtime_helper()</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="astmm_8h-source.html#l00069">free</a>, <a class="el" href="config_8h-source.html#l00046">ast_variable::next</a>, and <a class="el" href="config_8h-source.html#l00040">ast_variable::value</a>.
<p>
Referenced by <a class="el" href="res__astum_8c-source.html#l01512">aum_group_realtime_load()</a>, <a class="el" href="res__astum_8c-source.html#l01539">aum_user_realtime_loadbyfield()</a>, <a class="el" href="app__voicemail_8c-source.html#l01679">copy_file()</a>, <a class="el" href="app__meetme_8c-source.html#l02282">find_conf_realtime()</a>, <a class="el" href="app__minivm_8c-source.html#l00863">find_user_realtime()</a>, <a class="el" href="app__queue_8c-source.html#l01193">load_realtime_queue()</a>, <a class="el" href="chan__h323_8c-source.html#l01238">realtime_alias()</a>, <a class="el" href="chan__h323_8c-source.html#l01560">realtime_peer()</a>, and <a class="el" href="chan__h323_8c-source.html#l01450">realtime_user()</a>.<div class="fragment"><pre class="fragment"><a name="l01337"></a>01337 {
<a name="l01338"></a>01338    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *res, *cur, *prev = NULL, *freeme = NULL;
<a name="l01339"></a>01339    va_list ap;
<a name="l01340"></a>01340 
<a name="l01341"></a>01341    va_start(ap, family);
<a name="l01342"></a>01342    res = <a class="code" href="config_8c.html#321beae51e329a27c229832b064927f6">ast_load_realtime_helper</a>(family, ap);
<a name="l01343"></a>01343    va_end(ap);
<a name="l01344"></a>01344 
<a name="l01345"></a>01345    <span class="comment">/* Eliminate blank entries */</span>
<a name="l01346"></a>01346    <span class="keywordflow">for</span> (cur = res; cur; cur = cur-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l01347"></a>01347       <span class="keywordflow">if</span> (freeme) {
<a name="l01348"></a>01348          <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(freeme);
<a name="l01349"></a>01349          freeme = NULL;
<a name="l01350"></a>01350       }
<a name="l01351"></a>01351 
<a name="l01352"></a>01352       <span class="keywordflow">if</span> (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(cur-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>)) {
<a name="l01353"></a>01353          <span class="keywordflow">if</span> (prev)
<a name="l01354"></a>01354             prev-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = cur-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l01355"></a>01355          <span class="keywordflow">else</span>
<a name="l01356"></a>01356             res = cur-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l01357"></a>01357          freeme = cur;
<a name="l01358"></a>01358       } <span class="keywordflow">else</span> {
<a name="l01359"></a>01359          prev = cur;
<a name="l01360"></a>01360       }
<a name="l01361"></a>01361    }
<a name="l01362"></a>01362    <span class="keywordflow">return</span> res;
<a name="l01363"></a>01363 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="bbe521ab27cc8dbae5c57e981f6f43ee"></a><!-- doxytag: member="config.c::ast_load_realtime_all" ref="bbe521ab27cc8dbae5c57e981f6f43ee" args="(const char *family,...)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__variable.html">ast_variable</a>* ast_load_realtime_all           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01324">1324</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l01310">ast_load_realtime_helper()</a>.
<p>
Referenced by <a class="el" href="func__realtime_8c-source.html#l00048">function_realtime_read()</a>.<div class="fragment"><pre class="fragment"><a name="l01325"></a>01325 {
<a name="l01326"></a>01326    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *res;
<a name="l01327"></a>01327    va_list ap;
<a name="l01328"></a>01328 
<a name="l01329"></a>01329    va_start(ap, family);
<a name="l01330"></a>01330    res = <a class="code" href="config_8c.html#321beae51e329a27c229832b064927f6">ast_load_realtime_helper</a>(family, ap);
<a name="l01331"></a>01331    va_end(ap);
<a name="l01332"></a>01332 
<a name="l01333"></a>01333    <span class="keywordflow">return</span> res;
<a name="l01334"></a>01334 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="321beae51e329a27c229832b064927f6"></a><!-- doxytag: member="config.c::ast_load_realtime_helper" ref="321beae51e329a27c229832b064927f6" args="(const char *family, va_list ap)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static struct <a class="el" href="structast__variable.html">ast_variable</a>* ast_load_realtime_helper           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>va_list&nbsp;</td>
          <td class="mdname" nowrap> <em>ap</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01310">1310</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="cdr__sqlite_8c-source.html#l00064">db</a>, <a class="el" href="config_8c-source.html#l01200">find_engine()</a>, <a class="el" href="config_8h-source.html#l00061">ast_config_engine::realtime_func</a>, and <a class="el" href="cdr__odbc_8c-source.html#l00069">table</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l01336">ast_load_realtime()</a>, and <a class="el" href="config_8c-source.html#l01324">ast_load_realtime_all()</a>.<div class="fragment"><pre class="fragment"><a name="l01311"></a>01311 {
<a name="l01312"></a>01312    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html">ast_config_engine</a> *eng;
<a name="l01313"></a>01313    <span class="keywordtype">char</span> <a class="code" href="cdr__sqlite_8c.html#d77d5e503ad1439f585ac494268b351b">db</a>[256]=<span class="stringliteral">""</span>;
<a name="l01314"></a>01314    <span class="keywordtype">char</span> <a class="code" href="cdr__odbc_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>[256]=<span class="stringliteral">""</span>;
<a name="l01315"></a>01315    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *res=NULL;
<a name="l01316"></a>01316 
<a name="l01317"></a>01317    eng = <a class="code" href="config_8c.html#a3c658c839064ba779b3fa38bc9c2bfc">find_engine</a>(family, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l01318"></a>01318    <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#9c009fd0e86ddd1b95b6b5e84e2071ad">realtime_func</a>) 
<a name="l01319"></a>01319       res = eng-&gt;<a class="code" href="structast__config__engine.html#9c009fd0e86ddd1b95b6b5e84e2071ad">realtime_func</a>(db, table, ap);
<a name="l01320"></a>01320 
<a name="l01321"></a>01321    <span class="keywordflow">return</span> res;
<a name="l01322"></a>01322 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b6be1016c7903e9e35a84d899acad938"></a><!-- doxytag: member="config.c::ast_load_realtime_multientry" ref="b6be1016c7903e9e35a84d899acad938" args="(const char *family,...)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config.html">ast_config</a>* ast_load_realtime_multientry           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve realtime configuration. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td>which family/config to lookup This will use builtin configuration backends to look up a particular entity in realtime and return a variable list of its parameters. Unlike the ast_load_realtime, this function can return more than one entry and is thus stored inside a taditional <a class="el" href="structast__config.html">ast_config</a> structure rather than just returning a linked list of variables. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01383">1383</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="cdr__sqlite_8c-source.html#l00064">db</a>, <a class="el" href="config_8c-source.html#l01200">find_engine()</a>, <a class="el" href="config_8h-source.html#l00062">ast_config_engine::realtime_multi_func</a>, and <a class="el" href="cdr__odbc_8c-source.html#l00069">table</a>.
<p>
Referenced by <a class="el" href="app__queue_8c-source.html#l01193">load_realtime_queue()</a>, <a class="el" href="app__directory_8c-source.html#l00342">realtime_directory()</a>, and <a class="el" href="app__voicemail_8c-source.html#l07202">show_users_realtime()</a>.<div class="fragment"><pre class="fragment"><a name="l01384"></a>01384 {
<a name="l01385"></a>01385    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html">ast_config_engine</a> *eng;
<a name="l01386"></a>01386    <span class="keywordtype">char</span> <a class="code" href="cdr__sqlite_8c.html#d77d5e503ad1439f585ac494268b351b">db</a>[256]=<span class="stringliteral">""</span>;
<a name="l01387"></a>01387    <span class="keywordtype">char</span> <a class="code" href="cdr__odbc_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>[256]=<span class="stringliteral">""</span>;
<a name="l01388"></a>01388    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *res=NULL;
<a name="l01389"></a>01389    va_list ap;
<a name="l01390"></a>01390 
<a name="l01391"></a>01391    va_start(ap, family);
<a name="l01392"></a>01392    eng = <a class="code" href="config_8c.html#a3c658c839064ba779b3fa38bc9c2bfc">find_engine</a>(family, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l01393"></a>01393    <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#2ac29d5b169b1d734c67874b586c5632">realtime_multi_func</a>) 
<a name="l01394"></a>01394       res = eng-&gt;<a class="code" href="structast__config__engine.html#2ac29d5b169b1d734c67874b586c5632">realtime_multi_func</a>(db, table, ap);
<a name="l01395"></a>01395    va_end(ap);
<a name="l01396"></a>01396 
<a name="l01397"></a>01397    <span class="keywordflow">return</span> res;
<a name="l01398"></a>01398 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e2c55a1f291599c9235d281432f46e58"></a><!-- doxytag: member="config.c::AST_MUTEX_DEFINE_STATIC" ref="e2c55a1f291599c9235d281432f46e58" args="(config_lock)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">AST_MUTEX_DEFINE_STATIC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">config_lock&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="4d3672929087d58a0883217b9ade0091"></a><!-- doxytag: member="config.c::ast_realtime_enabled" ref="4d3672929087d58a0883217b9ade0091" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_realtime_enabled           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Check if there's any realtime engines loaded. 
<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01378">1378</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a>.
<p>
Referenced by <a class="el" href="manager_8c-source.html#l02200">action_coresettings()</a>, and <a class="el" href="asterisk_8c-source.html#l00344">handle_show_settings()</a>.<div class="fragment"><pre class="fragment"><a name="l01379"></a>01379 {
<a name="l01380"></a>01380    <span class="keywordflow">return</span> <a class="code" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a> ? 1 : 0;
<a name="l01381"></a>01381 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="320d12f71b6555578a4da7eb7def0433"></a><!-- doxytag: member="config.c::ast_store_realtime" ref="320d12f71b6555578a4da7eb7def0433" args="(const char *family,...)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_store_realtime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create realtime configuration. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td>which family/config to be created This function is used to create a parameter in realtime configuration space. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01417">1417</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="cdr__sqlite_8c-source.html#l00064">db</a>, <a class="el" href="config_8c-source.html#l01200">find_engine()</a>, <a class="el" href="config_8h-source.html#l00064">ast_config_engine::store_func</a>, and <a class="el" href="cdr__odbc_8c-source.html#l00069">table</a>.
<p>
Referenced by <a class="el" href="app__voicemail_8c-source.html#l01679">copy_file()</a>, and <a class="el" href="app__voicemail_8c-source.html#l02956">leave_voicemail()</a>.<div class="fragment"><pre class="fragment"><a name="l01417"></a>01417                                                 {
<a name="l01418"></a>01418    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html">ast_config_engine</a> *eng;
<a name="l01419"></a>01419    <span class="keywordtype">int</span> res = -1;
<a name="l01420"></a>01420    <span class="keywordtype">char</span> <a class="code" href="cdr__sqlite_8c.html#d77d5e503ad1439f585ac494268b351b">db</a>[256]=<span class="stringliteral">""</span>;
<a name="l01421"></a>01421    <span class="keywordtype">char</span> <a class="code" href="cdr__odbc_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>[256]=<span class="stringliteral">""</span>;
<a name="l01422"></a>01422    va_list ap;
<a name="l01423"></a>01423 
<a name="l01424"></a>01424    va_start(ap, family);
<a name="l01425"></a>01425    eng = <a class="code" href="config_8c.html#a3c658c839064ba779b3fa38bc9c2bfc">find_engine</a>(family, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l01426"></a>01426    <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#e867147fb9fd7066d2b4c0d9881351ed">store_func</a>) 
<a name="l01427"></a>01427       res = eng-&gt;<a class="code" href="structast__config__engine.html#e867147fb9fd7066d2b4c0d9881351ed">store_func</a>(db, table, ap);
<a name="l01428"></a>01428    va_end(ap);
<a name="l01429"></a>01429 
<a name="l01430"></a>01430    <span class="keywordflow">return</span> res;
<a name="l01431"></a>01431 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="abdc71633b03c33487b570669ab14285"></a><!-- doxytag: member="config.c::ast_update_realtime" ref="abdc71633b03c33487b570669ab14285" args="(const char *family, const char *keyfield, const char *lookup,...)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_update_realtime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>keyfield</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>lookup</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Update realtime configuration. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>family</em>&nbsp;</td><td>which family/config to be updated </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>keyfield</em>&nbsp;</td><td>which field to use as the key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lookup</em>&nbsp;</td><td>which value to look for in the key field to match the entry. This function is used to update a parameter in realtime configuration space. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01400">1400</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="cdr__sqlite_8c-source.html#l00064">db</a>, <a class="el" href="config_8c-source.html#l01200">find_engine()</a>, <a class="el" href="cdr__odbc_8c-source.html#l00069">table</a>, and <a class="el" href="config_8h-source.html#l00063">ast_config_engine::update_func</a>.
<p>
Referenced by <a class="el" href="app__voicemail_8c-source.html#l00712">change_password_realtime()</a>, <a class="el" href="app__meetme_8c-source.html#l01350">conf_run()</a>, <a class="el" href="chan__sip_8c-source.html#l08253">destroy_association()</a>, <a class="el" href="func__realtime_8c-source.html#l00100">function_realtime_write()</a>, <a class="el" href="app__voicemail_8c-source.html#l02956">leave_voicemail()</a>, <a class="el" href="chan__iax2_8c-source.html#l02691">realtime_update_peer()</a>, and <a class="el" href="app__voicemail_8c-source.html#l01616">rename_file()</a>.<div class="fragment"><pre class="fragment"><a name="l01401"></a>01401 {
<a name="l01402"></a>01402    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html">ast_config_engine</a> *eng;
<a name="l01403"></a>01403    <span class="keywordtype">int</span> res = -1;
<a name="l01404"></a>01404    <span class="keywordtype">char</span> <a class="code" href="cdr__sqlite_8c.html#d77d5e503ad1439f585ac494268b351b">db</a>[256]=<span class="stringliteral">""</span>;
<a name="l01405"></a>01405    <span class="keywordtype">char</span> <a class="code" href="cdr__odbc_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>[256]=<span class="stringliteral">""</span>;
<a name="l01406"></a>01406    va_list ap;
<a name="l01407"></a>01407 
<a name="l01408"></a>01408    va_start(ap, lookup);
<a name="l01409"></a>01409    eng = <a class="code" href="config_8c.html#a3c658c839064ba779b3fa38bc9c2bfc">find_engine</a>(family, db, <span class="keyword">sizeof</span>(db), table, <span class="keyword">sizeof</span>(table));
<a name="l01410"></a>01410    <span class="keywordflow">if</span> (eng &amp;&amp; eng-&gt;<a class="code" href="structast__config__engine.html#799d11560be626a0f7e29855b16e585b">update_func</a>) 
<a name="l01411"></a>01411       res = eng-&gt;<a class="code" href="structast__config__engine.html#799d11560be626a0f7e29855b16e585b">update_func</a>(db, table, keyfield, lookup, ap);
<a name="l01412"></a>01412    va_end(ap);
<a name="l01413"></a>01413 
<a name="l01414"></a>01414    <span class="keywordflow">return</span> res;
<a name="l01415"></a>01415 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="6b8deaf1a9df252e014d697e09cb68b9"></a><!-- doxytag: member="config.c::ast_variable_append" ref="6b8deaf1a9df252e014d697e09cb68b9" args="(struct ast_category *category, struct ast_variable *variable)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_variable_append           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>variable</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00198">198</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00170">ast_category::last</a>, <a class="el" href="config_8h-source.html#l00046">ast_variable::next</a>, and <a class="el" href="config_8c-source.html#l00169">ast_category::root</a>.
<p>
Referenced by <a class="el" href="res__config__sqlite_8c-source.html#l00700">add_cfg_entry()</a>, <a class="el" href="res__config__sqlite_8c-source.html#l00942">add_rt_multi_cfg_entry()</a>, <a class="el" href="res__config__odbc_8c-source.html#l00483">config_odbc()</a>, <a class="el" href="res__config__pgsql_8c-source.html#l00457">config_pgsql()</a>, <a class="el" href="manager_8c-source.html#l01177">handle_updates()</a>, <a class="el" href="config_8c-source.html#l00405">inherit_category()</a>, <a class="el" href="config_8c-source.html#l00279">move_variables()</a>, <a class="el" href="config_8c-source.html#l00583">process_text_line()</a>, <a class="el" href="app__directory_8c-source.html#l00342">realtime_directory()</a>, <a class="el" href="res__config__odbc_8c-source.html#l00204">realtime_multi_odbc()</a>, <a class="el" href="res__config__pgsql_8c-source.html#l00208">realtime_multi_pgsql()</a>, and <a class="el" href="app__voicemail_8c-source.html#l00850">vm_change_password()</a>.<div class="fragment"><pre class="fragment"><a name="l00199"></a>00199 {
<a name="l00200"></a>00200    <span class="keywordflow">if</span> (!variable)
<a name="l00201"></a>00201       <span class="keywordflow">return</span>;
<a name="l00202"></a>00202    <span class="keywordflow">if</span> (category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>)
<a name="l00203"></a>00203       category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = variable;
<a name="l00204"></a>00204    <span class="keywordflow">else</span>
<a name="l00205"></a>00205       category-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a> = variable;
<a name="l00206"></a>00206    category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a> = variable;
<a name="l00207"></a>00207    <span class="keywordflow">while</span> (category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>)
<a name="l00208"></a>00208       category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a> = category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00209"></a>00209 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="65ed813ca973e0e5dd3426804249db4f"></a><!-- doxytag: member="config.c::ast_variable_browse" ref="65ed813ca973e0e5dd3426804249db4f" args="(const struct ast_config *config, const char *category)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__variable.html">ast_variable</a>* ast_variable_browse           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>category</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Goes through variables Somewhat similar in intent as the ast_category_browse. List variables of config file category. 
<p>
Returns <a class="el" href="structast__variable.html">ast_variable</a> list on success, or NULL on failure 
<p>
Definition at line <a class="el" href="config_8c-source.html#l00222">222</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00323">ast_category_get()</a>, <a class="el" href="config_8c-source.html#l00178">ast_config::last_browse</a>, <a class="el" href="config_8c-source.html#l00164">ast_category::name</a>, and <a class="el" href="config_8c-source.html#l00169">ast_category::root</a>.
<p>
Referenced by <a class="el" href="http_8c-source.html#l01148">__ast_http_load()</a>, <a class="el" href="manager_8c-source.html#l01065">action_getconfig()</a>, <a class="el" href="manager_8c-source.html#l01114">action_getconfigjson()</a>, <a class="el" href="res__adsi_8c-source.html#l01084">adsi_load()</a>, <a class="el" href="res__jabber_8c-source.html#l02275">aji_load_config()</a>, <a class="el" href="enum_8c-source.html#l00613">ast_enum_init()</a>, <a class="el" href="asterisk_8c-source.html#l02369">ast_readconfig()</a>, <a class="el" href="config_8c-source.html#l00244">ast_variable_retrieve()</a>, <a class="el" href="manager_8c-source.html#l00903">authenticate()</a>, <a class="el" href="app__rpt_8c-source.html#l03330">collect_function_digits()</a>, <a class="el" href="app__meetme_8c-source.html#l02485">conf_exec()</a>, <a class="el" href="app__directory_8c-source.html#l00400">do_directory()</a>, <a class="el" href="app__playback_8c-source.html#l00147">do_say()</a>, <a class="el" href="app__meetme_8c-source.html#l02339">find_conf()</a>, <a class="el" href="chan__gtalk_8c-source.html#l01703">gtalk_load_config()</a>, <a class="el" href="pbx__config_8c-source.html#l00717">handle_save_dialplan()</a>, <a class="el" href="iax2-provision_8c-source.html#l00262">iax_template_parse()</a>, <a class="el" href="res__indications_8c-source.html#l00228">ind_load_module()</a>, <a class="el" href="logger_8c-source.html#l00309">init_logger_chain()</a>, <a class="el" href="manager_8c-source.html#l03215">init_manager()</a>, <a class="el" href="chan__jingle_8c-source.html#l01561">jingle_load_config()</a>, <a class="el" href="app__amd_8c-source.html#l00330">load_config()</a>, <a class="el" href="chan__alsa_8c-source.html#l01087">load_module()</a>, <a class="el" href="loader_8c-source.html#l00704">load_modules()</a>, <a class="el" href="res__musiconhold_8c-source.html#l01016">load_moh_classes()</a>, <a class="el" href="res__odbc_8c-source.html#l00207">load_odbc_config()</a>, <a class="el" href="app__rpt_8c-source.html#l00904">load_rpt_vars()</a>, <a class="el" href="cdr__manager_8c-source.html#l00052">loadconfigurationfile()</a>, <a class="el" href="misdn__config_8c-source.html#l01071">misdn_cfg_init()</a>, <a class="el" href="cdr__odbc_8c-source.html#l00244">odbc_load_module()</a>, <a class="el" href="app__osplookup_8c-source.html#l00187">osp_create_provider()</a>, <a class="el" href="codec__adpcm_8c-source.html#l00353">parse_config()</a>, <a class="el" href="pbx__config_8c-source.html#l01332">pbx_load_config()</a>, <a class="el" href="cdr__pgsql_8c-source.html#l00202">process_my_load_module()</a>, <a class="el" href="chan__agent_8c-source.html#l01004">read_agent_config()</a>, <a class="el" href="config_8c-source.html#l01090">read_config_maps()</a>, <a class="el" href="res__odbc_8c-source.html#l00527">reload()</a>, <a class="el" href="chan__h323_8c-source.html#l02809">reload_config()</a>, <a class="el" href="app__followme_8c-source.html#l00279">reload_followme()</a>, <a class="el" href="app__queue_8c-source.html#l03958">reload_queues()</a>, <a class="el" href="chan__iax2_8c-source.html#l09191">set_config()</a>, <a class="el" href="chan__zap_8c-source.html#l12617">setup_zap()</a>, <a class="el" href="app__voicemail_8c-source.html#l07202">show_users_realtime()</a>, <a class="el" href="chan__sip_8c-source.html#l11862">sip_notify()</a>, <a class="el" href="app__meetme_8c-source.html#l04662">sla_build_station()</a>, <a class="el" href="app__meetme_8c-source.html#l04527">sla_build_trunk()</a>, <a class="el" href="res__smdi_8c-source.html#l00520">smdi_load()</a>, <a class="el" href="chan__oss_8c-source.html#l01489">store_config()</a>, and <a class="el" href="cdr__tds_8c-source.html#l00427">tds_load_module()</a>.<div class="fragment"><pre class="fragment"><a name="l00223"></a>00223 {
<a name="l00224"></a>00224    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *cat = NULL;
<a name="l00225"></a>00225 
<a name="l00226"></a>00226    <span class="keywordflow">if</span> (category &amp;&amp; config-&gt;<a class="code" href="structast__config.html#bf952f7e7c87c21fe7d4a05c59b03d0c">last_browse</a> &amp;&amp; (config-&gt;<a class="code" href="structast__config.html#bf952f7e7c87c21fe7d4a05c59b03d0c">last_browse</a>-&gt;<a class="code" href="structast__category.html#23d5c5772e05e09c87f6323a95732f89">name</a> == category))
<a name="l00227"></a>00227       cat = config-&gt;<a class="code" href="structast__config.html#bf952f7e7c87c21fe7d4a05c59b03d0c">last_browse</a>;
<a name="l00228"></a>00228    <span class="keywordflow">else</span>
<a name="l00229"></a>00229       cat = <a class="code" href="config_8c.html#a4d454598a4630cd3a810f7cecd25d41">ast_category_get</a>(config, category);
<a name="l00230"></a>00230 
<a name="l00231"></a>00231    <span class="keywordflow">return</span> (cat) ? cat-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a> : NULL;
<a name="l00232"></a>00232 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="edbf64adfaa4adcef27cd5c6efe51be4"></a><!-- doxytag: member="config.c::ast_variable_delete" ref="edbf64adfaa4adcef27cd5c6efe51be4" args="(struct ast_category *category, const char *variable, const char *match)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_variable_delete           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>match</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00422">422</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="config_8c-source.html#l00211">ast_variables_destroy()</a>, <a class="el" href="config_8c-source.html#l00170">ast_category::last</a>, <a class="el" href="config_8h-source.html#l00039">ast_variable::name</a>, <a class="el" href="config_8h-source.html#l00046">ast_variable::next</a>, <a class="el" href="config_8c-source.html#l00169">ast_category::root</a>, and <a class="el" href="config_8h-source.html#l00040">ast_variable::value</a>.
<p>
Referenced by <a class="el" href="manager_8c-source.html#l01177">handle_updates()</a>.<div class="fragment"><pre class="fragment"><a name="l00423"></a>00423 {
<a name="l00424"></a>00424    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *cur, *prev=NULL, *curn;
<a name="l00425"></a>00425    <span class="keywordtype">int</span> res = -1;
<a name="l00426"></a>00426    cur = category-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a>;
<a name="l00427"></a>00427    <span class="keywordflow">while</span> (cur) {
<a name="l00428"></a>00428       <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a> == variable) {
<a name="l00429"></a>00429          <span class="keywordflow">if</span> (prev) {
<a name="l00430"></a>00430             prev-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = cur-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00431"></a>00431             <span class="keywordflow">if</span> (cur == category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>)
<a name="l00432"></a>00432                category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a> = prev;
<a name="l00433"></a>00433          } <span class="keywordflow">else</span> {
<a name="l00434"></a>00434             category-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a> = cur-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00435"></a>00435             <span class="keywordflow">if</span> (cur == category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>)
<a name="l00436"></a>00436                category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a> = NULL;
<a name="l00437"></a>00437          }
<a name="l00438"></a>00438          cur-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = NULL;
<a name="l00439"></a>00439          <a class="code" href="config_8c.html#d616f18584600c70e8744e217c03407c">ast_variables_destroy</a>(cur);
<a name="l00440"></a>00440          <span class="keywordflow">return</span> 0;
<a name="l00441"></a>00441       }
<a name="l00442"></a>00442       prev = cur;
<a name="l00443"></a>00443       cur = cur-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00444"></a>00444    }
<a name="l00445"></a>00445 
<a name="l00446"></a>00446    prev = NULL;
<a name="l00447"></a>00447    cur = category-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a>;
<a name="l00448"></a>00448    <span class="keywordflow">while</span> (cur) {
<a name="l00449"></a>00449       curn = cur-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00450"></a>00450       <span class="keywordflow">if</span> (!strcasecmp(cur-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, variable) &amp;&amp; (<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(<a class="code" href="chan__iax2_8c.html#b5f545ec55667a61a75dd2047251b4ac">match</a>) || !strcasecmp(cur-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>, <a class="code" href="chan__iax2_8c.html#b5f545ec55667a61a75dd2047251b4ac">match</a>))) {
<a name="l00451"></a>00451          <span class="keywordflow">if</span> (prev) {
<a name="l00452"></a>00452             prev-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = cur-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00453"></a>00453             <span class="keywordflow">if</span> (cur == category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>)
<a name="l00454"></a>00454                category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a> = prev;
<a name="l00455"></a>00455          } <span class="keywordflow">else</span> {
<a name="l00456"></a>00456             category-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a> = cur-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00457"></a>00457             <span class="keywordflow">if</span> (cur == category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a>)
<a name="l00458"></a>00458                category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a> = NULL;
<a name="l00459"></a>00459          }
<a name="l00460"></a>00460          cur-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = NULL;
<a name="l00461"></a>00461          <a class="code" href="config_8c.html#d616f18584600c70e8744e217c03407c">ast_variables_destroy</a>(cur);
<a name="l00462"></a>00462          res = 0;
<a name="l00463"></a>00463       } <span class="keywordflow">else</span>
<a name="l00464"></a>00464          prev = cur;
<a name="l00465"></a>00465 
<a name="l00466"></a>00466       cur = curn;
<a name="l00467"></a>00467    }
<a name="l00468"></a>00468    <span class="keywordflow">return</span> res;
<a name="l00469"></a>00469 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c21fb3a90ccd9ec4f8708c3b67b3c654"></a><!-- doxytag: member="config.c::ast_variable_new" ref="c21fb3a90ccd9ec4f8708c3b67b3c654" args="(const char *name, const char *value)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__variable.html">ast_variable</a>* ast_variable_new           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>value</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00183">183</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>, and <a class="el" href="config_8h-source.html#l00039">ast_variable::name</a>.
<p>
Referenced by <a class="el" href="res__config__sqlite_8c-source.html#l00700">add_cfg_entry()</a>, <a class="el" href="res__config__sqlite_8c-source.html#l00822">add_rt_cfg_entry()</a>, <a class="el" href="res__config__sqlite_8c-source.html#l00942">add_rt_multi_cfg_entry()</a>, <a class="el" href="chan__sip_8c-source.html#l16701">add_var()</a>, <a class="el" href="res__astum_8c-source.html#l01197">add_variable_to_list()</a>, <a class="el" href="pbx__spool_8c-source.html#l00126">apply_outgoing()</a>, <a class="el" href="channel_8c-source.html#l00186">ast_channeltype_list()</a>, <a class="el" href="config_8c-source.html#l00471">ast_variable_update()</a>, <a class="el" href="manager_8c-source.html#l00726">astman_get_variables()</a>, <a class="el" href="chan__iax2_8c-source.html#l08854">build_user()</a>, <a class="el" href="res__config__odbc_8c-source.html#l00483">config_odbc()</a>, <a class="el" href="res__config__pgsql_8c-source.html#l00457">config_pgsql()</a>, <a class="el" href="chan__sip_8c-source.html#l09717">copy_vars()</a>, <a class="el" href="app__minivm_8c-source.html#l02177">create_vmaccount()</a>, <a class="el" href="manager_8c-source.html#l01177">handle_updates()</a>, <a class="el" href="http_8c-source.html#l00566">handle_uri()</a>, <a class="el" href="http_8c-source.html#l00756">httpd_helper_thread()</a>, <a class="el" href="iax2-parser_8c-source.html#l00614">iax_parse_ies()</a>, <a class="el" href="config_8c-source.html#l00583">process_text_line()</a>, <a class="el" href="app__directory_8c-source.html#l00342">realtime_directory()</a>, <a class="el" href="res__config__odbc_8c-source.html#l00204">realtime_multi_odbc()</a>, <a class="el" href="res__config__pgsql_8c-source.html#l00208">realtime_multi_pgsql()</a>, <a class="el" href="res__config__odbc_8c-source.html#l00056">realtime_odbc()</a>, <a class="el" href="res__config__pgsql_8c-source.html#l00079">realtime_pgsql()</a>, <a class="el" href="config_8c-source.html#l00265">variable_clone()</a>, and <a class="el" href="app__voicemail_8c-source.html#l00850">vm_change_password()</a>.<div class="fragment"><pre class="fragment"><a name="l00184"></a>00184 {
<a name="l00185"></a>00185    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *variable;
<a name="l00186"></a>00186    <span class="keywordtype">int</span> name_len = strlen(<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>) + 1; 
<a name="l00187"></a>00187 
<a name="l00188"></a>00188    <span class="keywordflow">if</span> ((variable = <a class="code" href="utils_8h.html#27f1d0ddbd22dac569b18963c5cb7e19">ast_calloc</a>(1, name_len + strlen(<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>) + 1 + <span class="keyword">sizeof</span>(*variable)))) {
<a name="l00189"></a>00189       variable-&gt;name = variable-&gt;stuff;
<a name="l00190"></a>00190       variable-&gt;value = variable-&gt;stuff + name_len;      
<a name="l00191"></a>00191       strcpy(variable-&gt;name,<a class="code" href="callerid_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>);
<a name="l00192"></a>00192       strcpy(variable-&gt;value,<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>);
<a name="l00193"></a>00193    }
<a name="l00194"></a>00194 
<a name="l00195"></a>00195    <span class="keywordflow">return</span> variable;
<a name="l00196"></a>00196 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="db24588ed54fb0d9d8f078b9d64bd0e1"></a><!-- doxytag: member="config.c::ast_variable_retrieve" ref="db24588ed54fb0d9d8f078b9d64bd0e1" args="(const struct ast_config *config, const char *category, const char *variable)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char* ast_variable_retrieve           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>variable</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Gets a variable. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>which (opened) config to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>category</em>&nbsp;</td><td>category under which the variable lies </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>variable</em>&nbsp;</td><td>which variable you wish to get the data for Goes through a given config file in the given category and searches for the given variable</td></tr>
  </table>
</dl>
Returns the variable value on success, or NULL if unable to find it. 
<p>
Definition at line <a class="el" href="config_8c-source.html#l00244">244</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00222">ast_variable_browse()</a>, <a class="el" href="config_8h-source.html#l00039">ast_variable::name</a>, <a class="el" href="config_8h-source.html#l00046">ast_variable::next</a>, <a class="el" href="config_8c-source.html#l00171">ast_category::next</a>, <a class="el" href="config_8c-source.html#l00175">ast_config::root</a>, <a class="el" href="config_8c-source.html#l00169">ast_category::root</a>, and <a class="el" href="config_8h-source.html#l00040">ast_variable::value</a>.
<p>
Referenced by <a class="el" href="app__voicemail_8c-source.html#l08189">advanced_options()</a>, <a class="el" href="res__jabber_8c-source.html#l02275">aji_load_config()</a>, <a class="el" href="config_8c-source.html#l00234">ast_config_option()</a>, <a class="el" href="rtp_8c-source.html#l03709">ast_rtp_reload()</a>, <a class="el" href="udptl_8c-source.html#l01207">ast_udptl_reload()</a>, <a class="el" href="app__rpt_8c-source.html#l05377">attempt_reconnect()</a>, <a class="el" href="app__directory_8c-source.html#l00570">directory_exec()</a>, <a class="el" href="app__directory_8c-source.html#l00400">do_directory()</a>, <a class="el" href="cdr_8c-source.html#l01229">do_reload()</a>, <a class="el" href="app__festival_8c-source.html#l00286">festival_exec()</a>, <a class="el" href="app__queue_8c-source.html#l01077">find_queue_by_name_rt()</a>, <a class="el" href="app__rpt_8c-source.html#l02757">function_ilink()</a>, <a class="el" href="app__rpt_8c-source.html#l03248">function_macro()</a>, <a class="el" href="app__rpt_8c-source.html#l04577">function_remote()</a>, <a class="el" href="app__rpt_8c-source.html#l01810">get_wait_interval()</a>, <a class="el" href="chan__gtalk_8c-source.html#l01703">gtalk_load_config()</a>, <a class="el" href="pbx__config_8c-source.html#l00717">handle_save_dialplan()</a>, <a class="el" href="iax2-provision_8c-source.html#l00262">iax_template_parse()</a>, <a class="el" href="func__odbc_8c-source.html#l00386">init_acf_query()</a>, <a class="el" href="logger_8c-source.html#l00309">init_logger_chain()</a>, <a class="el" href="chan__jingle_8c-source.html#l01561">jingle_load_config()</a>, <a class="el" href="app__minivm_8c-source.html#l02462">load_config()</a>, <a class="el" href="app__meetme_8c-source.html#l03132">load_config_meetme()</a>, <a class="el" href="app__directory_8c-source.html#l00658">load_module()</a>, <a class="el" href="loader_8c-source.html#l00704">load_modules()</a>, <a class="el" href="cdr__odbc_8c-source.html#l00244">odbc_load_module()</a>, <a class="el" href="app__osplookup_8c-source.html#l01942">osp_load()</a>, <a class="el" href="res__config__pgsql_8c-source.html#l00645">parse_config()</a>, <a class="el" href="pbx__config_8c-source.html#l01332">pbx_load_config()</a>, <a class="el" href="pbx__config_8c-source.html#l01510">pbx_load_users()</a>, <a class="el" href="app__voicemail_8c-source.html#l04694">play_message()</a>, <a class="el" href="app__privacy_8c-source.html#l00078">privacy_exec()</a>, <a class="el" href="cdr__pgsql_8c-source.html#l00202">process_my_load_module()</a>, <a class="el" href="chan__agent_8c-source.html#l01004">read_agent_config()</a>, <a class="el" href="app__directory_8c-source.html#l00342">realtime_directory()</a>, <a class="el" href="chan__h323_8c-source.html#l02809">reload_config()</a>, <a class="el" href="app__followme_8c-source.html#l00279">reload_followme()</a>, <a class="el" href="app__queue_8c-source.html#l03958">reload_queues()</a>, <a class="el" href="app__rpt_8c-source.html#l00887">retrieve_astcfgint()</a>, <a class="el" href="app__rpt_8c-source.html#l05604">rpt()</a>, <a class="el" href="app__rpt_8c-source.html#l06759">rpt_exec()</a>, <a class="el" href="app__rpt_8c-source.html#l06656">rpt_master()</a>, <a class="el" href="chan__iax2_8c-source.html#l09191">set_config()</a>, <a class="el" href="chan__zap_8c-source.html#l12617">setup_zap()</a>, <a class="el" href="app__meetme_8c-source.html#l04662">sla_build_station()</a>, <a class="el" href="app__meetme_8c-source.html#l04527">sla_build_trunk()</a>, <a class="el" href="app__meetme_8c-source.html#l04770">sla_load_config()</a>, <a class="el" href="cdr__tds_8c-source.html#l00427">tds_load_module()</a>, <a class="el" href="app__rpt_8c-source.html#l01777">telem_lookup()</a>, <a class="el" href="app__voicemail_8c-source.html#l00850">vm_change_password()</a>, and <a class="el" href="app__voicemail_8c-source.html#l03966">vm_forwardoptions()</a>.<div class="fragment"><pre class="fragment"><a name="l00245"></a>00245 {
<a name="l00246"></a>00246    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *v;
<a name="l00247"></a>00247 
<a name="l00248"></a>00248    <span class="keywordflow">if</span> (category) {
<a name="l00249"></a>00249       <span class="keywordflow">for</span> (v = <a class="code" href="config_8c.html#65ed813ca973e0e5dd3426804249db4f">ast_variable_browse</a>(config, category); v; v = v-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l00250"></a>00250          <span class="keywordflow">if</span> (!strcasecmp(variable, v-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>))
<a name="l00251"></a>00251             <span class="keywordflow">return</span> v-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>;
<a name="l00252"></a>00252       }
<a name="l00253"></a>00253    } <span class="keywordflow">else</span> {
<a name="l00254"></a>00254       <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *cat;
<a name="l00255"></a>00255 
<a name="l00256"></a>00256       <span class="keywordflow">for</span> (cat = config-&gt;<a class="code" href="structast__config.html#63a9f0ea7bb98050796b649e85481845">root</a>; cat; cat = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>)
<a name="l00257"></a>00257          <span class="keywordflow">for</span> (v = cat-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a>; v; v = v-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>)
<a name="l00258"></a>00258             <span class="keywordflow">if</span> (!strcasecmp(variable, v-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>))
<a name="l00259"></a>00259                <span class="keywordflow">return</span> v-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>;
<a name="l00260"></a>00260    }
<a name="l00261"></a>00261 
<a name="l00262"></a>00262    <span class="keywordflow">return</span> NULL;
<a name="l00263"></a>00263 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="4fd56a903e50633096934f229d8a4340"></a><!-- doxytag: member="config.c::ast_variable_update" ref="4fd56a903e50633096934f229d8a4340" args="(struct ast_category *category, const char *variable, const char *value, const char *match, unsigned int object)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_variable_update           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>category</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>match</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>object</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00471">471</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="config_8c-source.html#l00183">ast_variable_new()</a>, <a class="el" href="config_8c-source.html#l00211">ast_variables_destroy()</a>, <a class="el" href="config_8c-source.html#l00170">ast_category::last</a>, <a class="el" href="config_8h-source.html#l00039">ast_variable::name</a>, <a class="el" href="config_8h-source.html#l00046">ast_variable::next</a>, <a class="el" href="config_8h-source.html#l00042">ast_variable::object</a>, <a class="el" href="config_8c-source.html#l00169">ast_category::root</a>, and <a class="el" href="config_8h-source.html#l00040">ast_variable::value</a>.
<p>
Referenced by <a class="el" href="manager_8c-source.html#l01177">handle_updates()</a>, <a class="el" href="app__voicemail_8c-source.html#l00850">vm_change_password()</a>, and <a class="el" href="app__voicemail_8c-source.html#l03966">vm_forwardoptions()</a>.<div class="fragment"><pre class="fragment"><a name="l00473"></a>00473 {
<a name="l00474"></a>00474    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *cur, *prev=NULL, *newer;
<a name="l00475"></a>00475 
<a name="l00476"></a>00476    <span class="keywordflow">if</span> (!(newer = <a class="code" href="config_8c.html#c21fb3a90ccd9ec4f8708c3b67b3c654">ast_variable_new</a>(variable, <a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>)))
<a name="l00477"></a>00477       <span class="keywordflow">return</span> -1;
<a name="l00478"></a>00478    
<a name="l00479"></a>00479    newer-&gt;object = <a class="code" href="structast__variable.html#a8cfde6331bd59eb2ac96f8911c4b666">object</a>;
<a name="l00480"></a>00480 
<a name="l00481"></a>00481    <span class="keywordflow">for</span> (cur = category-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a>; cur; prev = cur, cur = cur-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l00482"></a>00482       <span class="keywordflow">if</span> (strcasecmp(cur-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, variable) ||
<a name="l00483"></a>00483          (!<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(<a class="code" href="chan__iax2_8c.html#b5f545ec55667a61a75dd2047251b4ac">match</a>) &amp;&amp; strcasecmp(cur-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>, <a class="code" href="chan__iax2_8c.html#b5f545ec55667a61a75dd2047251b4ac">match</a>)))
<a name="l00484"></a>00484          <span class="keywordflow">continue</span>;
<a name="l00485"></a>00485 
<a name="l00486"></a>00486       newer-&gt;next = cur-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00487"></a>00487       newer-&gt;<a class="code" href="structast__variable.html#a8cfde6331bd59eb2ac96f8911c4b666">object</a> = cur-&gt;<a class="code" href="structast__variable.html#a8cfde6331bd59eb2ac96f8911c4b666">object</a> || <a class="code" href="structast__variable.html#a8cfde6331bd59eb2ac96f8911c4b666">object</a>;
<a name="l00488"></a>00488       <span class="keywordflow">if</span> (prev)
<a name="l00489"></a>00489          prev-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = newer;
<a name="l00490"></a>00490       <span class="keywordflow">else</span>
<a name="l00491"></a>00491          category-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a> = newer;
<a name="l00492"></a>00492       <span class="keywordflow">if</span> (category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a> == cur)
<a name="l00493"></a>00493          category-&gt;<a class="code" href="structast__category.html#98bd1c45684cf587ac2347a92dd7bb51">last</a> = newer;
<a name="l00494"></a>00494 
<a name="l00495"></a>00495       cur-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = NULL;
<a name="l00496"></a>00496       <a class="code" href="config_8c.html#d616f18584600c70e8744e217c03407c">ast_variables_destroy</a>(cur);
<a name="l00497"></a>00497 
<a name="l00498"></a>00498       <span class="keywordflow">return</span> 0;
<a name="l00499"></a>00499    }
<a name="l00500"></a>00500 
<a name="l00501"></a>00501    <span class="keywordflow">if</span> (prev)
<a name="l00502"></a>00502       prev-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = newer;
<a name="l00503"></a>00503    <span class="keywordflow">else</span>
<a name="l00504"></a>00504       category-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a> = newer;
<a name="l00505"></a>00505 
<a name="l00506"></a>00506    <span class="keywordflow">return</span> 0;
<a name="l00507"></a>00507 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d616f18584600c70e8744e217c03407c"></a><!-- doxytag: member="config.c::ast_variables_destroy" ref="d616f18584600c70e8744e217c03407c" args="(struct ast_variable *v)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_variables_destroy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>var</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Free variable list. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>var</em>&nbsp;</td><td>the linked list of variables to free This function frees a list of variables. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00211">211</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="astmm_8h-source.html#l00069">free</a>, and <a class="el" href="config_8h-source.html#l00046">ast_variable::next</a>.
<p>
Referenced by <a class="el" href="chan__sip_8c-source.html#l03286">__sip_destroy()</a>, <a class="el" href="config_8c-source.html#l00509">ast_category_delete()</a>, <a class="el" href="config_8c-source.html#l00344">ast_category_destroy()</a>, <a class="el" href="config_8c-source.html#l00555">ast_config_destroy()</a>, <a class="el" href="pbx_8c-source.html#l05150">ast_pbx_outgoing_app()</a>, <a class="el" href="pbx_8c-source.html#l04991">ast_pbx_outgoing_exten()</a>, <a class="el" href="config_8c-source.html#l00422">ast_variable_delete()</a>, <a class="el" href="config_8c-source.html#l00471">ast_variable_update()</a>, <a class="el" href="res__astum_8c-source.html#l01633">aum_destroy_group()</a>, <a class="el" href="res__astum_8c-source.html#l01662">aum_destroy_user()</a>, <a class="el" href="res__astum_8c-source.html#l01512">aum_group_realtime_load()</a>, <a class="el" href="res__astum_8c-source.html#l01539">aum_user_realtime_loadbyfield()</a>, <a class="el" href="chan__h323_8c-source.html#l01488">build_peer()</a>, <a class="el" href="chan__h323_8c-source.html#l01370">build_user()</a>, <a class="el" href="app__voicemail_8c-source.html#l01679">copy_file()</a>, <a class="el" href="chan__iax2_8c-source.html#l09103">destroy_user()</a>, <a class="el" href="app__meetme_8c-source.html#l02282">find_conf_realtime()</a>, <a class="el" href="app__minivm_8c-source.html#l00863">find_user_realtime()</a>, <a class="el" href="app__minivm_8c-source.html#l00726">free_user()</a>, <a class="el" href="http_8c-source.html#l00566">handle_uri()</a>, <a class="el" href="http_8c-source.html#l00756">httpd_helper_thread()</a>, <a class="el" href="chan__iax2_8c-source.html#l01823">iax2_destroy()</a>, <a class="el" href="app__queue_8c-source.html#l01193">load_realtime_queue()</a>, <a class="el" href="chan__h323_8c-source.html#l01238">realtime_alias()</a>, <a class="el" href="pbx__realtime_8c-source.html#l00164">realtime_canmatch()</a>, <a class="el" href="pbx__realtime_8c-source.html#l00174">realtime_exec()</a>, <a class="el" href="pbx__realtime_8c-source.html#l00154">realtime_exists()</a>, <a class="el" href="res__config__sqlite_8c-source.html#l00852">realtime_handler()</a>, <a class="el" href="pbx__realtime_8c-source.html#l00224">realtime_matchmore()</a>, <a class="el" href="res__config__odbc_8c-source.html#l00056">realtime_odbc()</a>, <a class="el" href="chan__h323_8c-source.html#l01560">realtime_peer()</a>, <a class="el" href="chan__h323_8c-source.html#l01450">realtime_user()</a>, <a class="el" href="chan__sip_8c-source.html#l04652">sip_alloc()</a>, <a class="el" href="chan__sip_8c-source.html#l02679">sip_destroy_peer()</a>, <a class="el" href="chan__sip_8c-source.html#l02867">sip_destroy_user()</a>, and <a class="el" href="chan__iax2_8c-source.html#l06624">socket_process()</a>.<div class="fragment"><pre class="fragment"><a name="l00212"></a>00212 {
<a name="l00213"></a>00213    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *vn;
<a name="l00214"></a>00214 
<a name="l00215"></a>00215    <span class="keywordflow">while</span> (v) {
<a name="l00216"></a>00216       vn = v;
<a name="l00217"></a>00217       v = v-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00218"></a>00218       <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(vn);
<a name="l00219"></a>00219    }
<a name="l00220"></a>00220 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ee8b81a06da990c27a429f1b455cd506"></a><!-- doxytag: member="config.c::category_get" ref="ee8b81a06da990c27a429f1b455cd506" args="(const struct ast_config *config, const char *category_name, int ignored)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static struct <a class="el" href="structast__category.html">ast_category</a>* category_get           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>category_name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>ignored</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00305">305</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00165">ast_category::ignored</a>, <a class="el" href="config_8c-source.html#l00164">ast_category::name</a>, <a class="el" href="config_8c-source.html#l00171">ast_category::next</a>, and <a class="el" href="config_8c-source.html#l00175">ast_config::root</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00323">ast_category_get()</a>, and <a class="el" href="config_8c-source.html#l00583">process_text_line()</a>.<div class="fragment"><pre class="fragment"><a name="l00306"></a>00306 {
<a name="l00307"></a>00307    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *cat;
<a name="l00308"></a>00308 
<a name="l00309"></a>00309    <span class="comment">/* try exact match first, then case-insensitive match */</span>
<a name="l00310"></a>00310    <span class="keywordflow">for</span> (cat = config-&gt;<a class="code" href="structast__config.html#63a9f0ea7bb98050796b649e85481845">root</a>; cat; cat = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l00311"></a>00311       <span class="keywordflow">if</span> (cat-&gt;<a class="code" href="structast__category.html#23d5c5772e05e09c87f6323a95732f89">name</a> == category_name &amp;&amp; (<a class="code" href="structast__category.html#f3f98c5d41d7c992a6fb63799f700f2b">ignored</a> || !cat-&gt;<a class="code" href="structast__category.html#f3f98c5d41d7c992a6fb63799f700f2b">ignored</a>))
<a name="l00312"></a>00312          <span class="keywordflow">return</span> cat;
<a name="l00313"></a>00313    }
<a name="l00314"></a>00314 
<a name="l00315"></a>00315    <span class="keywordflow">for</span> (cat = config-&gt;<a class="code" href="structast__config.html#63a9f0ea7bb98050796b649e85481845">root</a>; cat; cat = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l00316"></a>00316       <span class="keywordflow">if</span> (!strcasecmp(cat-&gt;<a class="code" href="structast__category.html#23d5c5772e05e09c87f6323a95732f89">name</a>, category_name) &amp;&amp; (<a class="code" href="structast__category.html#f3f98c5d41d7c992a6fb63799f700f2b">ignored</a> || !cat-&gt;<a class="code" href="structast__category.html#f3f98c5d41d7c992a6fb63799f700f2b">ignored</a>))
<a name="l00317"></a>00317          <span class="keywordflow">return</span> cat;
<a name="l00318"></a>00318    }
<a name="l00319"></a>00319 
<a name="l00320"></a>00320    <span class="keywordflow">return</span> NULL;
<a name="l00321"></a>00321 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="1667620b53c96fa480de61251ae92faa"></a><!-- doxytag: member="config.c::CB_ADD" ref="1667620b53c96fa480de61251ae92faa" args="(char **comment_buffer, int *comment_buffer_size, char *str)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void CB_ADD           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char **&nbsp;</td>
          <td class="mdname" nowrap> <em>comment_buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>comment_buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>str</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00094">94</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="utils_8h.html#009723420c269c3a1ecb1953558e608d">ast_realloc</a>, and <a class="el" href="config_8c-source.html#l00073">CB_INCR</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00762">config_text_file_load()</a>.<div class="fragment"><pre class="fragment"><a name="l00095"></a>00095 {
<a name="l00096"></a>00096    <span class="keywordtype">int</span> rem = *comment_buffer_size - strlen(*comment_buffer) - 1;
<a name="l00097"></a>00097    <span class="keywordtype">int</span> siz = strlen(str);
<a name="l00098"></a>00098    <span class="keywordflow">if</span> (rem &lt; siz+1) {
<a name="l00099"></a>00099       *comment_buffer = <a class="code" href="utils_8h.html#009723420c269c3a1ecb1953558e608d">ast_realloc</a>(*comment_buffer, *comment_buffer_size + <a class="code" href="config_8c.html#23ccbaefdb39a96e411cfe10920f659e">CB_INCR</a> + siz + 1);
<a name="l00100"></a>00100       <span class="keywordflow">if</span> (!(*comment_buffer))
<a name="l00101"></a>00101          <span class="keywordflow">return</span>;
<a name="l00102"></a>00102       *comment_buffer_size += <a class="code" href="config_8c.html#23ccbaefdb39a96e411cfe10920f659e">CB_INCR</a>+siz+1;
<a name="l00103"></a>00103    }
<a name="l00104"></a>00104    strcat(*comment_buffer,str);
<a name="l00105"></a>00105 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="06c916953d7b08f46b8a87548ae852ca"></a><!-- doxytag: member="config.c::CB_ADD_LEN" ref="06c916953d7b08f46b8a87548ae852ca" args="(char **comment_buffer, int *comment_buffer_size, char *str, int len)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void CB_ADD_LEN           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char **&nbsp;</td>
          <td class="mdname" nowrap> <em>comment_buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>comment_buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>str</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00107">107</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="utils_8h.html#009723420c269c3a1ecb1953558e608d">ast_realloc</a>, and <a class="el" href="config_8c-source.html#l00073">CB_INCR</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00762">config_text_file_load()</a>.<div class="fragment"><pre class="fragment"><a name="l00108"></a>00108 {
<a name="l00109"></a>00109    <span class="keywordtype">int</span> cbl = strlen(*comment_buffer) + 1;
<a name="l00110"></a>00110    <span class="keywordtype">int</span> rem = *comment_buffer_size - cbl;
<a name="l00111"></a>00111    <span class="keywordflow">if</span> (rem &lt; <a class="code" href="utils_8h.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>+1) {
<a name="l00112"></a>00112       *comment_buffer = <a class="code" href="utils_8h.html#009723420c269c3a1ecb1953558e608d">ast_realloc</a>(*comment_buffer, *comment_buffer_size + <a class="code" href="config_8c.html#23ccbaefdb39a96e411cfe10920f659e">CB_INCR</a> + <a class="code" href="utils_8h.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a> + 1);
<a name="l00113"></a>00113       <span class="keywordflow">if</span> (!(*comment_buffer))
<a name="l00114"></a>00114          <span class="keywordflow">return</span>;
<a name="l00115"></a>00115       *comment_buffer_size += <a class="code" href="config_8c.html#23ccbaefdb39a96e411cfe10920f659e">CB_INCR</a>+<a class="code" href="utils_8h.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>+1;
<a name="l00116"></a>00116    }
<a name="l00117"></a>00117    strncat(*comment_buffer,str,<a class="code" href="utils_8h.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>);
<a name="l00118"></a>00118    (*comment_buffer)[cbl+<a class="code" href="utils_8h.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>-1] = 0;
<a name="l00119"></a>00119 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="cd8c6041a6ec97c4c85c857c64f392cf"></a><!-- doxytag: member="config.c::CB_INIT" ref="cd8c6041a6ec97c4c85c857c64f392cf" args="(char **comment_buffer, int *comment_buffer_size, char **lline_buffer, int *lline_buffer_size)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void CB_INIT           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char **&nbsp;</td>
          <td class="mdname" nowrap> <em>comment_buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>comment_buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>lline_buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>lline_buffer_size</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00075">75</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="utils_8h-source.html#l00359">ast_malloc</a>, and <a class="el" href="config_8c-source.html#l00073">CB_INCR</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00762">config_text_file_load()</a>.<div class="fragment"><pre class="fragment"><a name="l00076"></a>00076 {
<a name="l00077"></a>00077    <span class="keywordflow">if</span> (!(*comment_buffer)) {
<a name="l00078"></a>00078       *comment_buffer = <a class="code" href="utils_8h.html#efc2f2f953e736b509e4a2cee96151db">ast_malloc</a>(<a class="code" href="config_8c.html#23ccbaefdb39a96e411cfe10920f659e">CB_INCR</a>);
<a name="l00079"></a>00079       <span class="keywordflow">if</span> (!(*comment_buffer))
<a name="l00080"></a>00080          <span class="keywordflow">return</span>;
<a name="l00081"></a>00081       (*comment_buffer)[0] = 0;
<a name="l00082"></a>00082       *comment_buffer_size = <a class="code" href="config_8c.html#23ccbaefdb39a96e411cfe10920f659e">CB_INCR</a>;
<a name="l00083"></a>00083       *lline_buffer = <a class="code" href="utils_8h.html#efc2f2f953e736b509e4a2cee96151db">ast_malloc</a>(<a class="code" href="config_8c.html#23ccbaefdb39a96e411cfe10920f659e">CB_INCR</a>);
<a name="l00084"></a>00084       <span class="keywordflow">if</span> (!(*lline_buffer))
<a name="l00085"></a>00085          <span class="keywordflow">return</span>;
<a name="l00086"></a>00086       (*lline_buffer)[0] = 0;
<a name="l00087"></a>00087       *lline_buffer_size = <a class="code" href="config_8c.html#23ccbaefdb39a96e411cfe10920f659e">CB_INCR</a>;
<a name="l00088"></a>00088    } <span class="keywordflow">else</span> {
<a name="l00089"></a>00089       (*comment_buffer)[0] = 0;
<a name="l00090"></a>00090       (*lline_buffer)[0] = 0;
<a name="l00091"></a>00091    }
<a name="l00092"></a>00092 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="59b6e1ccd8d42533fc78dde5c7425b18"></a><!-- doxytag: member="config.c::CB_RESET" ref="59b6e1ccd8d42533fc78dde5c7425b18" args="(char **comment_buffer, char **lline_buffer)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void CB_RESET           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char **&nbsp;</td>
          <td class="mdname" nowrap> <em>comment_buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>lline_buffer</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00134">134</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00583">process_text_line()</a>.<div class="fragment"><pre class="fragment"><a name="l00135"></a>00135 { 
<a name="l00136"></a>00136    (*comment_buffer)[0] = 0; 
<a name="l00137"></a>00137    (*lline_buffer)[0] = 0;
<a name="l00138"></a>00138 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="49d169eb931e065d2e9c381977da1803"></a><!-- doxytag: member="config.c::clear_config_maps" ref="49d169eb931e065d2e9c381977da1803" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void clear_config_maps           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01040">1040</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="lock_8h-source.html#l00530">ast_mutex_lock()</a>, <a class="el" href="lock_8h-source.html#l00520">ast_mutex_unlock()</a>, <a class="el" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a>, <a class="el" href="astmm_8h-source.html#l00069">free</a>, <a class="el" href="misdn__config_8c-source.html#l00366">map</a>, and <a class="el" href="config_8c-source.html#l00150">ast_config_map::next</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l01090">read_config_maps()</a>.<div class="fragment"><pre class="fragment"><a name="l01041"></a>01041 {
<a name="l01042"></a>01042    <span class="keyword">struct </span><a class="code" href="structast__config__map.html">ast_config_map</a> *<a class="code" href="misdn__config_8c.html#1d78dc8ed51214e518b5114fe24490ae">map</a>;
<a name="l01043"></a>01043 
<a name="l01044"></a>01044    <a class="code" href="lock_8h.html#b3c5e3093b325167f88db93c8b4b2421">ast_mutex_lock</a>(&amp;config_lock);
<a name="l01045"></a>01045 
<a name="l01046"></a>01046    <span class="keywordflow">while</span> (<a class="code" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a>) {
<a name="l01047"></a>01047       map = <a class="code" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a>;
<a name="l01048"></a>01048       <a class="code" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a> = <a class="code" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a>-&gt;<a class="code" href="structast__config__map.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l01049"></a>01049       <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(map);
<a name="l01050"></a>01050    }
<a name="l01051"></a>01051       
<a name="l01052"></a>01052    <a class="code" href="lock_8h.html#1d33e3caf152f0901c5ebdb69c2d4d26">ast_mutex_unlock</a>(&amp;config_lock);
<a name="l01053"></a>01053 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="955619459825475c170db0ce3eb981c9"></a><!-- doxytag: member="config.c::config_command" ref="955619459825475c170db0ce3eb981c9" args="(int fd, int argc, char **argv)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int config_command           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>fd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>argv</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01449">1449</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="cli_8c-source.html#l00057">ast_cli()</a>, <a class="el" href="lock_8h-source.html#l00530">ast_mutex_lock()</a>, <a class="el" href="lock_8h-source.html#l00520">ast_mutex_unlock()</a>, <a class="el" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a>, <a class="el" href="config_8c-source.html#l00153">ast_config_map::database</a>, <a class="el" href="config_8c-source.html#l00152">ast_config_map::driver</a>, <a class="el" href="misdn__config_8c-source.html#l00366">map</a>, <a class="el" href="config_8c-source.html#l00151">ast_config_map::name</a>, <a class="el" href="config_8h-source.html#l00059">ast_config_engine::name</a>, <a class="el" href="config_8c-source.html#l00150">ast_config_map::next</a>, <a class="el" href="config_8h-source.html#l00066">ast_config_engine::next</a>, and <a class="el" href="config_8c-source.html#l00154">ast_config_map::table</a>.<div class="fragment"><pre class="fragment"><a name="l01450"></a>01450 {
<a name="l01451"></a>01451    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html">ast_config_engine</a> *eng;
<a name="l01452"></a>01452    <span class="keyword">struct </span><a class="code" href="structast__config__map.html">ast_config_map</a> *<a class="code" href="misdn__config_8c.html#1d78dc8ed51214e518b5114fe24490ae">map</a>;
<a name="l01453"></a>01453    
<a name="l01454"></a>01454    <a class="code" href="lock_8h.html#b3c5e3093b325167f88db93c8b4b2421">ast_mutex_lock</a>(&amp;config_lock);
<a name="l01455"></a>01455 
<a name="l01456"></a>01456    <a class="code" href="cli_8c.html#b610d6e1fd70e1b164d66a2ee22207dc">ast_cli</a>(fd, <span class="stringliteral">"\n\n"</span>);
<a name="l01457"></a>01457    <span class="keywordflow">for</span> (eng = <a class="code" href="config_8c.html#0531e578786fc476487425f62c18e84c">config_engine_list</a>; eng; eng = eng-&gt;<a class="code" href="structast__config__engine.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l01458"></a>01458       <a class="code" href="cli_8c.html#b610d6e1fd70e1b164d66a2ee22207dc">ast_cli</a>(fd, <span class="stringliteral">"\nConfig Engine: %s\n"</span>, eng-&gt;<a class="code" href="structast__config__engine.html#b068931cc450442b63f5b3d276ea4297">name</a>);
<a name="l01459"></a>01459       <span class="keywordflow">for</span> (map = <a class="code" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a>; map; map = map-&gt;<a class="code" href="structast__config__map.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>)
<a name="l01460"></a>01460          <span class="keywordflow">if</span> (!strcasecmp(map-&gt;<a class="code" href="structast__config__map.html#e2d45d57c7e2941b65c6ccd64af4223e">driver</a>, eng-&gt;<a class="code" href="structast__config__engine.html#b068931cc450442b63f5b3d276ea4297">name</a>)) {
<a name="l01461"></a>01461             <a class="code" href="cli_8c.html#b610d6e1fd70e1b164d66a2ee22207dc">ast_cli</a>(fd, <span class="stringliteral">"===&gt; %s (db=%s, table=%s)\n"</span>, map-&gt;<a class="code" href="structast__config__map.html#b068931cc450442b63f5b3d276ea4297">name</a>, map-&gt;<a class="code" href="structast__config__map.html#11e0eed8d3696c0a632f822df385ab3c">database</a>,
<a name="l01462"></a>01462                map-&gt;<a class="code" href="structast__config__map.html#aab9e1de16f38176f86d7a92ba337a8d">table</a> ? map-&gt;<a class="code" href="structast__config__map.html#aab9e1de16f38176f86d7a92ba337a8d">table</a> : map-&gt;<a class="code" href="structast__config__map.html#b068931cc450442b63f5b3d276ea4297">name</a>);
<a name="l01463"></a>01463          }
<a name="l01464"></a>01464    }
<a name="l01465"></a>01465    <a class="code" href="cli_8c.html#b610d6e1fd70e1b164d66a2ee22207dc">ast_cli</a>(fd,<span class="stringliteral">"\n\n"</span>);
<a name="l01466"></a>01466    
<a name="l01467"></a>01467    <a class="code" href="lock_8h.html#1d33e3caf152f0901c5ebdb69c2d4d26">ast_mutex_unlock</a>(&amp;config_lock);
<a name="l01468"></a>01468 
<a name="l01469"></a>01469    <span class="keywordflow">return</span> 0;
<a name="l01470"></a>01470 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="1ad340c816ddf8ebb72fb95f25629eb6"></a><!-- doxytag: member="config.c::config_text_file_load" ref="1ad340c816ddf8ebb72fb95f25629eb6" args="(const char *database, const char *table, const char *filename, struct ast_config *cfg, int withcomments)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static struct <a class="el" href="structast__config.html">ast_config</a>* config_text_file_load           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>database</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>withcomments</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Growable string buffer<p>
&lt; this will be a comment collector.<p>
&lt; the amount of storage so far alloc'd for the comment_buffer<p>
&lt; A buffer for stuff behind the ; 
<p>
Definition at line <a class="el" href="config_8c-source.html#l00762">762</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="asterisk_8c-source.html#l00210">ast_config_AST_CONFIG_DIR</a>, <a class="el" href="config_8c-source.html#l00572">ast_config_get_current_category()</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="config_8c-source.html#l00094">CB_ADD()</a>, <a class="el" href="config_8c-source.html#l00107">CB_ADD_LEN()</a>, <a class="el" href="config_8c-source.html#l00075">CB_INIT()</a>, <a class="el" href="config_8c-source.html#l00060">COMMENT_META</a>, <a class="el" href="config_8c-source.html#l00061">COMMENT_TAG</a>, <a class="el" href="format__g726_8c-source.html#l00193">f</a>, <a class="el" href="astmm_8h-source.html#l00069">free</a>, <a class="el" href="config_8c-source.html#l00179">ast_config::include_level</a>, <a class="el" href="config_8c-source.html#l00121">LLB_ADD()</a>, <a class="el" href="logger_8h-source.html#l00094">LOG_DEBUG</a>, <a class="el" href="logger_8h-source.html#l00118">LOG_ERROR</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="config_8c-source.html#l00057">MAX_NESTED_COMMENTS</a>, <a class="el" href="asterisk_8c-source.html#l00164">option_debug</a>, <a class="el" href="asterisk_8c-source.html#l00163">option_verbose</a>, <a class="el" href="config_8c-source.html#l00583">process_text_line()</a>, and <a class="el" href="logger_8h-source.html#l00044">VERBOSE_PREFIX_2</a>.<div class="fragment"><pre class="fragment"><a name="l00763"></a>00763 {
<a name="l00764"></a>00764    <span class="keywordtype">char</span> fn[256];
<a name="l00765"></a>00765    <span class="keywordtype">char</span> <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>[8192];
<a name="l00766"></a>00766    <span class="keywordtype">char</span> *new_buf, *comment_p, *process_buf;
<a name="l00767"></a>00767    FILE *<a class="code" href="format__g726_8c.html#85b9b17a7dd34a3638c560bc9152473b">f</a>;
<a name="l00768"></a>00768    <span class="keywordtype">int</span> <a class="code" href="utils_8h.html#5525da36abafe9a243105119cea54be5">lineno</a>=0;
<a name="l00769"></a>00769    <span class="keywordtype">int</span> comment = 0, nest[<a class="code" href="config_8c.html#38c9b5e2f0c3da9a642fc180d2752277">MAX_NESTED_COMMENTS</a>];
<a name="l00770"></a>00770    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *cat = NULL;
<a name="l00771"></a>00771    <span class="keywordtype">int</span> count = 0;
<a name="l00772"></a>00772    <span class="keyword">struct </span>stat statbuf;<span class="comment"></span>
<a name="l00773"></a>00773 <span class="comment">   /*! Growable string buffer */</span>
<a name="l00774"></a>00774    <span class="keywordtype">char</span> *comment_buffer=0;   <span class="comment">/*!&lt; this will be a comment collector.*/</span>
<a name="l00775"></a>00775    <span class="keywordtype">int</span>   comment_buffer_size=0;  <span class="comment">/*!&lt; the amount of storage so far alloc'd for the comment_buffer */</span>
<a name="l00776"></a>00776 
<a name="l00777"></a>00777    <span class="keywordtype">char</span> *lline_buffer=0;    <span class="comment">/*!&lt; A buffer for stuff behind the ; */</span>
<a name="l00778"></a>00778    <span class="keywordtype">int</span>  lline_buffer_size=0;
<a name="l00779"></a>00779 
<a name="l00780"></a>00780    
<a name="l00781"></a>00781    cat = <a class="code" href="config_8c.html#d7d879dec5e500ef7bf3ef7c271bfd97">ast_config_get_current_category</a>(cfg);
<a name="l00782"></a>00782 
<a name="l00783"></a>00783    <span class="keywordflow">if</span> (filename[0] == <span class="charliteral">'/'</span>) {
<a name="l00784"></a>00784       ast_copy_string(fn, filename, <span class="keyword">sizeof</span>(fn));
<a name="l00785"></a>00785    } <span class="keywordflow">else</span> {
<a name="l00786"></a>00786       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">"%s/%s"</span>, (<span class="keywordtype">char</span> *)<a class="code" href="asterisk_8c.html#0a741f5d37bb00616aba45b9437c13a7">ast_config_AST_CONFIG_DIR</a>, filename);
<a name="l00787"></a>00787    }
<a name="l00788"></a>00788 
<a name="l00789"></a>00789    <span class="keywordflow">if</span> (withcomments) {
<a name="l00790"></a>00790       <a class="code" href="config_8c.html#cd8c6041a6ec97c4c85c857c64f392cf">CB_INIT</a>(&amp;comment_buffer, &amp;comment_buffer_size, &amp;lline_buffer, &amp;lline_buffer_size);
<a name="l00791"></a>00791       <span class="keywordflow">if</span> (!lline_buffer || !comment_buffer) {
<a name="l00792"></a>00792          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#4490aa3d29644e716440fada68f54032">LOG_ERROR</a>, <span class="stringliteral">"Failed to initialize the comment buffer!\n"</span>);
<a name="l00793"></a>00793          <span class="keywordflow">return</span> NULL;
<a name="l00794"></a>00794       }
<a name="l00795"></a>00795    }
<a name="l00796"></a>00796 <span class="preprocessor">#ifdef AST_INCLUDE_GLOB</span>
<a name="l00797"></a>00797 <span class="preprocessor"></span>   {
<a name="l00798"></a>00798       <span class="keywordtype">int</span> glob_ret;
<a name="l00799"></a>00799       glob_t globbuf;
<a name="l00800"></a>00800       globbuf.gl_offs = 0; <span class="comment">/* initialize it to silence gcc */</span>
<a name="l00801"></a>00801 <span class="preprocessor">#ifdef SOLARIS</span>
<a name="l00802"></a>00802 <span class="preprocessor"></span>      glob_ret = glob(fn, GLOB_NOCHECK, NULL, &amp;globbuf);
<a name="l00803"></a>00803 <span class="preprocessor">#else</span>
<a name="l00804"></a>00804 <span class="preprocessor"></span>      glob_ret = glob(fn, GLOB_NOMAGIC|GLOB_BRACE, NULL, &amp;globbuf);
<a name="l00805"></a>00805 <span class="preprocessor">#endif</span>
<a name="l00806"></a>00806 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (glob_ret == GLOB_NOSPACE)
<a name="l00807"></a>00807          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>,
<a name="l00808"></a>00808             <span class="stringliteral">"Glob Expansion of pattern '%s' failed: Not enough memory\n"</span>, fn);
<a name="l00809"></a>00809       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (glob_ret  == GLOB_ABORTED)
<a name="l00810"></a>00810          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>,
<a name="l00811"></a>00811             <span class="stringliteral">"Glob Expansion of pattern '%s' failed: Read error\n"</span>, fn);
<a name="l00812"></a>00812       <span class="keywordflow">else</span>  {
<a name="l00813"></a>00813          <span class="comment">/* loop over expanded files */</span>
<a name="l00814"></a>00814          <span class="keywordtype">int</span> i;
<a name="l00815"></a>00815          <span class="keywordflow">for</span> (i=0; i&lt;globbuf.gl_pathc; i++) {
<a name="l00816"></a>00816             ast_copy_string(fn, globbuf.gl_pathv[i], <span class="keyword">sizeof</span>(fn));
<a name="l00817"></a>00817 <span class="preprocessor">#endif</span>
<a name="l00818"></a>00818 <span class="preprocessor"></span>   <span class="keywordflow">do</span> {
<a name="l00819"></a>00819       <span class="keywordflow">if</span> (stat(fn, &amp;statbuf))
<a name="l00820"></a>00820          <span class="keywordflow">continue</span>;
<a name="l00821"></a>00821 
<a name="l00822"></a>00822       <span class="keywordflow">if</span> (!S_ISREG(statbuf.st_mode)) {
<a name="l00823"></a>00823          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"'%s' is not a regular file, ignoring\n"</span>, fn);
<a name="l00824"></a>00824          <span class="keywordflow">continue</span>;
<a name="l00825"></a>00825       }
<a name="l00826"></a>00826       <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 1) {
<a name="l00827"></a>00827          <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<a class="code" href="logger_8h.html#6e3640436a97291b451a8d264b5ab15d">VERBOSE_PREFIX_2</a> <span class="stringliteral">"Parsing '%s': "</span>, fn);
<a name="l00828"></a>00828          fflush(stdout);
<a name="l00829"></a>00829       }
<a name="l00830"></a>00830       <span class="keywordflow">if</span> (!(f = fopen(fn, <span class="stringliteral">"r"</span>))) {
<a name="l00831"></a>00831          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00832"></a>00832             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"No file to parse: %s\n"</span>, fn);
<a name="l00833"></a>00833          <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 1)
<a name="l00834"></a>00834             <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>( <span class="stringliteral">"Not found (%s)\n"</span>, strerror(errno));
<a name="l00835"></a>00835          <span class="keywordflow">continue</span>;
<a name="l00836"></a>00836       }
<a name="l00837"></a>00837       count++;
<a name="l00838"></a>00838       <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l00839"></a>00839          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"Parsing %s\n"</span>, fn);
<a name="l00840"></a>00840       <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 1)
<a name="l00841"></a>00841          <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<span class="stringliteral">"Found\n"</span>);
<a name="l00842"></a>00842       <span class="keywordflow">while</span> (!feof(f)) {
<a name="l00843"></a>00843          lineno++;
<a name="l00844"></a>00844          <span class="keywordflow">if</span> (fgets(buf, <span class="keyword">sizeof</span>(buf), f)) {
<a name="l00845"></a>00845             <span class="keywordflow">if</span> ( withcomments ) {
<a name="l00846"></a>00846                <a class="code" href="config_8c.html#1667620b53c96fa480de61251ae92faa">CB_ADD</a>(&amp;comment_buffer, &amp;comment_buffer_size, lline_buffer);       <span class="comment">/* add the current lline buffer to the comment buffer */</span>
<a name="l00847"></a>00847                lline_buffer[0] = 0;        <span class="comment">/* erase the lline buffer */</span>
<a name="l00848"></a>00848             }
<a name="l00849"></a>00849             
<a name="l00850"></a>00850             new_buf = buf;
<a name="l00851"></a>00851             <span class="keywordflow">if</span> (comment) 
<a name="l00852"></a>00852                process_buf = NULL;
<a name="l00853"></a>00853             <span class="keywordflow">else</span>
<a name="l00854"></a>00854                process_buf = buf;
<a name="l00855"></a>00855             
<a name="l00856"></a>00856             <span class="keywordflow">while</span> ((comment_p = strchr(new_buf, <a class="code" href="config_8c.html#8aa0ddd07cd9fdae41b117b326ecc53a">COMMENT_META</a>))) {
<a name="l00857"></a>00857                <span class="keywordflow">if</span> ((comment_p &gt; new_buf) &amp;&amp; (*(comment_p-1) == <span class="charliteral">'\\'</span>)) {
<a name="l00858"></a>00858                   <span class="comment">/* Yuck, gotta memmove */</span>
<a name="l00859"></a>00859                   memmove(comment_p - 1, comment_p, strlen(comment_p) + 1);
<a name="l00860"></a>00860                   new_buf = comment_p;
<a name="l00861"></a>00861                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (comment_p[1] == <a class="code" href="config_8c.html#a63569aac36b87330444da4d5178b48e">COMMENT_TAG</a> &amp;&amp; comment_p[2] == <a class="code" href="config_8c.html#a63569aac36b87330444da4d5178b48e">COMMENT_TAG</a> &amp;&amp; (comment_p[3] != <span class="charliteral">'-'</span>)) {
<a name="l00862"></a>00862                   <span class="comment">/* Meta-Comment start detected ";--" */</span>
<a name="l00863"></a>00863                   <span class="keywordflow">if</span> (comment &lt; <a class="code" href="config_8c.html#38c9b5e2f0c3da9a642fc180d2752277">MAX_NESTED_COMMENTS</a>) {
<a name="l00864"></a>00864                      *comment_p = <span class="charliteral">'\0'</span>;
<a name="l00865"></a>00865                      new_buf = comment_p + 3;
<a name="l00866"></a>00866                      comment++;
<a name="l00867"></a>00867                      nest[comment-1] = lineno;
<a name="l00868"></a>00868                   } <span class="keywordflow">else</span> {
<a name="l00869"></a>00869                      <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#4490aa3d29644e716440fada68f54032">LOG_ERROR</a>, <span class="stringliteral">"Maximum nest limit of %d reached.\n"</span>, <a class="code" href="config_8c.html#38c9b5e2f0c3da9a642fc180d2752277">MAX_NESTED_COMMENTS</a>);
<a name="l00870"></a>00870                   }
<a name="l00871"></a>00871                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((comment_p &gt;= new_buf + 2) &amp;&amp;
<a name="l00872"></a>00872                      (*(comment_p - 1) == <a class="code" href="config_8c.html#a63569aac36b87330444da4d5178b48e">COMMENT_TAG</a>) &amp;&amp;
<a name="l00873"></a>00873                      (*(comment_p - 2) == <a class="code" href="config_8c.html#a63569aac36b87330444da4d5178b48e">COMMENT_TAG</a>)) {
<a name="l00874"></a>00874                   <span class="comment">/* Meta-Comment end detected */</span>
<a name="l00875"></a>00875                   comment--;
<a name="l00876"></a>00876                   new_buf = comment_p + 1;
<a name="l00877"></a>00877                   <span class="keywordflow">if</span> (!comment) {
<a name="l00878"></a>00878                      <span class="comment">/* Back to non-comment now */</span>
<a name="l00879"></a>00879                      <span class="keywordflow">if</span> (process_buf) {
<a name="l00880"></a>00880                         <span class="comment">/* Actually have to move what's left over the top, then continue */</span>
<a name="l00881"></a>00881                         <span class="keywordtype">char</span> *oldptr;
<a name="l00882"></a>00882                         oldptr = process_buf + strlen(process_buf);
<a name="l00883"></a>00883                         <span class="keywordflow">if</span> ( withcomments ) {
<a name="l00884"></a>00884                            <a class="code" href="config_8c.html#1667620b53c96fa480de61251ae92faa">CB_ADD</a>(&amp;comment_buffer, &amp;comment_buffer_size, <span class="stringliteral">";"</span>);
<a name="l00885"></a>00885                            <a class="code" href="config_8c.html#06c916953d7b08f46b8a87548ae852ca">CB_ADD_LEN</a>(&amp;comment_buffer, &amp;comment_buffer_size, oldptr+1, new_buf-oldptr-1);
<a name="l00886"></a>00886                         }
<a name="l00887"></a>00887                         
<a name="l00888"></a>00888                         memmove(oldptr, new_buf, strlen(new_buf) + 1);
<a name="l00889"></a>00889                         new_buf = oldptr;
<a name="l00890"></a>00890                      } <span class="keywordflow">else</span>
<a name="l00891"></a>00891                         process_buf = new_buf;
<a name="l00892"></a>00892                   }
<a name="l00893"></a>00893                } <span class="keywordflow">else</span> {
<a name="l00894"></a>00894                   <span class="keywordflow">if</span> (!comment) {
<a name="l00895"></a>00895                      <span class="comment">/* If ; is found, and we are not nested in a comment, </span>
<a name="l00896"></a>00896 <span class="comment">                        we immediately stop all comment processing */</span>
<a name="l00897"></a>00897                      <span class="keywordflow">if</span> ( withcomments ) {
<a name="l00898"></a>00898                         <a class="code" href="config_8c.html#f3f955c58d5a5aaabe2d29d8d9506e5d">LLB_ADD</a>(&amp;lline_buffer, &amp;lline_buffer_size, comment_p);
<a name="l00899"></a>00899                      }
<a name="l00900"></a>00900                      *comment_p = <span class="charliteral">'\0'</span>; 
<a name="l00901"></a>00901                      new_buf = comment_p;
<a name="l00902"></a>00902                   } <span class="keywordflow">else</span>
<a name="l00903"></a>00903                      new_buf = comment_p + 1;
<a name="l00904"></a>00904                }
<a name="l00905"></a>00905             }
<a name="l00906"></a>00906             <span class="keywordflow">if</span> ( withcomments &amp;&amp; comment &amp;&amp; !process_buf )
<a name="l00907"></a>00907             {
<a name="l00908"></a>00908                <a class="code" href="config_8c.html#1667620b53c96fa480de61251ae92faa">CB_ADD</a>(&amp;comment_buffer, &amp;comment_buffer_size, buf);  <span class="comment">/* the whole line is a comment, store it */</span>
<a name="l00909"></a>00909             }
<a name="l00910"></a>00910             
<a name="l00911"></a>00911             <span class="keywordflow">if</span> (process_buf) {
<a name="l00912"></a>00912                <span class="keywordtype">char</span> *buf = ast_strip(process_buf);
<a name="l00913"></a>00913                <span class="keywordflow">if</span> (!<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(buf)) {
<a name="l00914"></a>00914                   <span class="keywordflow">if</span> (<a class="code" href="config_8c.html#0758157f0559f0e96975d3dbddfc5e8a">process_text_line</a>(cfg, &amp;cat, buf, lineno, fn, withcomments, &amp;comment_buffer, &amp;comment_buffer_size, &amp;lline_buffer, &amp;lline_buffer_size)) {
<a name="l00915"></a>00915                      cfg = NULL;
<a name="l00916"></a>00916                      <span class="keywordflow">break</span>;
<a name="l00917"></a>00917                   }
<a name="l00918"></a>00918                }
<a name="l00919"></a>00919             }
<a name="l00920"></a>00920          }
<a name="l00921"></a>00921       }
<a name="l00922"></a>00922       fclose(f);     
<a name="l00923"></a>00923    } <span class="keywordflow">while</span> (0);
<a name="l00924"></a>00924    <span class="keywordflow">if</span> (comment) {
<a name="l00925"></a>00925       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>,<span class="stringliteral">"Unterminated comment detected beginning on line %d\n"</span>, nest[comment]);
<a name="l00926"></a>00926    }
<a name="l00927"></a>00927 <span class="preprocessor">#ifdef AST_INCLUDE_GLOB</span>
<a name="l00928"></a>00928 <span class="preprocessor"></span>               <span class="keywordflow">if</span> (!cfg)
<a name="l00929"></a>00929                   <span class="keywordflow">break</span>;
<a name="l00930"></a>00930             }
<a name="l00931"></a>00931             globfree(&amp;globbuf);
<a name="l00932"></a>00932          }
<a name="l00933"></a>00933       }
<a name="l00934"></a>00934 <span class="preprocessor">#endif</span>
<a name="l00935"></a>00935 <span class="preprocessor"></span>
<a name="l00936"></a>00936    <span class="keywordflow">if</span> (cfg &amp;&amp; cfg-&gt;<a class="code" href="structast__config.html#a916719a7ef1dca56e8e080cae121e25">include_level</a> == 1 &amp;&amp; withcomments &amp;&amp; comment_buffer) {
<a name="l00937"></a>00937       <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(comment_buffer);
<a name="l00938"></a>00938       <a class="code" href="astmm_8h.html#eb051e552619427a26721b1a925a56e8">free</a>(lline_buffer);
<a name="l00939"></a>00939       comment_buffer = NULL;
<a name="l00940"></a>00940       lline_buffer = NULL;
<a name="l00941"></a>00941       comment_buffer_size = 0;
<a name="l00942"></a>00942       lline_buffer_size = 0;
<a name="l00943"></a>00943    }
<a name="l00944"></a>00944    
<a name="l00945"></a>00945    <span class="keywordflow">if</span> (count == 0)
<a name="l00946"></a>00946       <span class="keywordflow">return</span> NULL;
<a name="l00947"></a>00947 
<a name="l00948"></a>00948    <span class="keywordflow">return</span> cfg;
<a name="l00949"></a>00949 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="509bc97b1300e42c8323c0d6122b9457"></a><!-- doxytag: member="config.c::config_text_file_save" ref="509bc97b1300e42c8323c0d6122b9457" args="(const char *configfile, const struct ast_config *cfg, const char *generator)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int config_text_file_save           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>configfile</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>generator</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00951">951</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="asterisk_8c-source.html#l00210">ast_config_AST_CONFIG_DIR</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="logger_8c-source.html#l00989">ast_verbose()</a>, <a class="el" href="config_8h-source.html#l00043">ast_variable::blanklines</a>, <a class="el" href="config_8c-source.html#l00070">ast_comment::cmt</a>, <a class="el" href="format__g726_8c-source.html#l00193">f</a>, <a class="el" href="logger_8h-source.html#l00094">LOG_DEBUG</a>, <a class="el" href="config_8c-source.html#l00164">ast_category::name</a>, <a class="el" href="config_8h-source.html#l00039">ast_variable::name</a>, <a class="el" href="config_8c-source.html#l00069">ast_comment::next</a>, <a class="el" href="config_8h-source.html#l00046">ast_variable::next</a>, <a class="el" href="config_8c-source.html#l00171">ast_category::next</a>, <a class="el" href="config_8h-source.html#l00042">ast_variable::object</a>, <a class="el" href="asterisk_8c-source.html#l00164">option_debug</a>, <a class="el" href="asterisk_8c-source.html#l00163">option_verbose</a>, <a class="el" href="config_8c-source.html#l00167">ast_category::precomments</a>, <a class="el" href="config_8h-source.html#l00044">ast_variable::precomments</a>, <a class="el" href="config_8c-source.html#l00175">ast_config::root</a>, <a class="el" href="config_8c-source.html#l00169">ast_category::root</a>, <a class="el" href="config_8c-source.html#l00168">ast_category::sameline</a>, <a class="el" href="config_8h-source.html#l00045">ast_variable::sameline</a>, <a class="el" href="config_8h-source.html#l00040">ast_variable::value</a>, <a class="el" href="ast__expr2f_8c-source.html#l01417">var</a>, and <a class="el" href="logger_8h-source.html#l00044">VERBOSE_PREFIX_2</a>.
<p>
Referenced by <a class="el" href="manager_8c-source.html#l01251">action_updateconfig()</a>, <a class="el" href="app__voicemail_8c-source.html#l00850">vm_change_password()</a>, and <a class="el" href="app__voicemail_8c-source.html#l03966">vm_forwardoptions()</a>.<div class="fragment"><pre class="fragment"><a name="l00952"></a>00952 {
<a name="l00953"></a>00953    FILE *<a class="code" href="format__g726_8c.html#85b9b17a7dd34a3638c560bc9152473b">f</a>;
<a name="l00954"></a>00954    <span class="keywordtype">char</span> fn[256];
<a name="l00955"></a>00955    <span class="keywordtype">char</span> date[256]=<span class="stringliteral">""</span>;
<a name="l00956"></a>00956    time_t t;
<a name="l00957"></a>00957    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *<a class="code" href="ast__expr2f_8c.html#b2145aac704ce76dbe1ac7adac535b23">var</a>;
<a name="l00958"></a>00958    <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *cat;
<a name="l00959"></a>00959    <span class="keyword">struct </span><a class="code" href="structast__comment.html">ast_comment</a> *<a class="code" href="structast__comment.html#347b72b0d84a81af1085ad9a6a8994e6">cmt</a>;
<a name="l00960"></a>00960    <span class="keywordtype">int</span> blanklines = 0;
<a name="l00961"></a>00961 
<a name="l00962"></a>00962    <span class="keywordflow">if</span> (configfile[0] == <span class="charliteral">'/'</span>) {
<a name="l00963"></a>00963       ast_copy_string(fn, configfile, <span class="keyword">sizeof</span>(fn));
<a name="l00964"></a>00964    } <span class="keywordflow">else</span> {
<a name="l00965"></a>00965       snprintf(fn, <span class="keyword">sizeof</span>(fn), <span class="stringliteral">"%s/%s"</span>, <a class="code" href="asterisk_8c.html#0a741f5d37bb00616aba45b9437c13a7">ast_config_AST_CONFIG_DIR</a>, configfile);
<a name="l00966"></a>00966    }
<a name="l00967"></a>00967    time(&amp;t);
<a name="l00968"></a>00968    ast_copy_string(date, ctime(&amp;t), <span class="keyword">sizeof</span>(date));
<a name="l00969"></a>00969 <span class="preprocessor">#ifdef __CYGWIN__ </span>
<a name="l00970"></a>00970 <span class="preprocessor"></span>   <span class="keywordflow">if</span> ((f = fopen(fn, <span class="stringliteral">"w+"</span>))) {
<a name="l00971"></a>00971 <span class="preprocessor">#else</span>
<a name="l00972"></a>00972 <span class="preprocessor"></span>   <span class="keywordflow">if</span> ((f = fopen(fn, <span class="stringliteral">"w"</span>))) {
<a name="l00973"></a>00973 <span class="preprocessor">#endif       </span>
<a name="l00974"></a>00974 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 1)
<a name="l00975"></a>00975          <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<a class="code" href="logger_8h.html#6e3640436a97291b451a8d264b5ab15d">VERBOSE_PREFIX_2</a> <span class="stringliteral">"Saving '%s': "</span>, fn);
<a name="l00976"></a>00976       fprintf(f, <span class="stringliteral">";!\n"</span>);
<a name="l00977"></a>00977       fprintf(f, <span class="stringliteral">";! Automatically generated configuration file\n"</span>);
<a name="l00978"></a>00978       <span class="keywordflow">if</span> (strcmp(configfile, fn))
<a name="l00979"></a>00979          fprintf(f, <span class="stringliteral">";! Filename: %s (%s)\n"</span>, configfile, fn);
<a name="l00980"></a>00980       <span class="keywordflow">else</span>
<a name="l00981"></a>00981          fprintf(f, <span class="stringliteral">";! Filename: %s\n"</span>, configfile);
<a name="l00982"></a>00982       fprintf(f, <span class="stringliteral">";! Generator: %s\n"</span>, generator);
<a name="l00983"></a>00983       fprintf(f, <span class="stringliteral">";! Creation Date: %s"</span>, date);
<a name="l00984"></a>00984       fprintf(f, <span class="stringliteral">";!\n"</span>);
<a name="l00985"></a>00985       cat = cfg-&gt;<a class="code" href="structast__config.html#63a9f0ea7bb98050796b649e85481845">root</a>;
<a name="l00986"></a>00986       <span class="keywordflow">while</span> (cat) {
<a name="l00987"></a>00987          <span class="comment">/* Dump section with any appropriate comment */</span>
<a name="l00988"></a>00988          <span class="keywordflow">for</span> (cmt = cat-&gt;<a class="code" href="structast__category.html#8ad5823d3a1586ace00081ed9ddd5b60">precomments</a>; cmt; cmt=cmt-&gt;<a class="code" href="structast__comment.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>)
<a name="l00989"></a>00989          {
<a name="l00990"></a>00990             <span class="keywordflow">if</span> (cmt-&gt;<a class="code" href="structast__comment.html#347b72b0d84a81af1085ad9a6a8994e6">cmt</a>[0] != <span class="charliteral">';'</span> || cmt-&gt;<a class="code" href="structast__comment.html#347b72b0d84a81af1085ad9a6a8994e6">cmt</a>[1] != <span class="charliteral">'!'</span>)
<a name="l00991"></a>00991                fprintf(f,<span class="stringliteral">"%s"</span>, cmt-&gt;<a class="code" href="structast__comment.html#347b72b0d84a81af1085ad9a6a8994e6">cmt</a>);
<a name="l00992"></a>00992          }
<a name="l00993"></a>00993          <span class="keywordflow">if</span> (!cat-&gt;<a class="code" href="structast__category.html#8ad5823d3a1586ace00081ed9ddd5b60">precomments</a>)
<a name="l00994"></a>00994             fprintf(f,<span class="stringliteral">"\n"</span>);
<a name="l00995"></a>00995          fprintf(f, <span class="stringliteral">"[%s]"</span>, cat-&gt;<a class="code" href="structast__category.html#23d5c5772e05e09c87f6323a95732f89">name</a>);
<a name="l00996"></a>00996          <span class="keywordflow">for</span> (cmt = cat-&gt;<a class="code" href="structast__category.html#997a15c6b09e9b3430b76b15498a3d17">sameline</a>; cmt; cmt=cmt-&gt;<a class="code" href="structast__comment.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>)
<a name="l00997"></a>00997          {
<a name="l00998"></a>00998             fprintf(f,<span class="stringliteral">"%s"</span>, cmt-&gt;<a class="code" href="structast__comment.html#347b72b0d84a81af1085ad9a6a8994e6">cmt</a>);
<a name="l00999"></a>00999          }
<a name="l01000"></a>01000          <span class="keywordflow">if</span> (!cat-&gt;<a class="code" href="structast__category.html#997a15c6b09e9b3430b76b15498a3d17">sameline</a>)
<a name="l01001"></a>01001             fprintf(f,<span class="stringliteral">"\n"</span>);
<a name="l01002"></a>01002          var = cat-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a>;
<a name="l01003"></a>01003          <span class="keywordflow">while</span> (var) {
<a name="l01004"></a>01004             <span class="keywordflow">for</span> (cmt = var-&gt;<a class="code" href="structast__variable.html#8ad5823d3a1586ace00081ed9ddd5b60">precomments</a>; cmt; cmt=cmt-&gt;<a class="code" href="structast__comment.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>)
<a name="l01005"></a>01005             {
<a name="l01006"></a>01006                <span class="keywordflow">if</span> (cmt-&gt;<a class="code" href="structast__comment.html#347b72b0d84a81af1085ad9a6a8994e6">cmt</a>[0] != <span class="charliteral">';'</span> || cmt-&gt;<a class="code" href="structast__comment.html#347b72b0d84a81af1085ad9a6a8994e6">cmt</a>[1] != <span class="charliteral">'!'</span>)
<a name="l01007"></a>01007                   fprintf(f,<span class="stringliteral">"%s"</span>, cmt-&gt;<a class="code" href="structast__comment.html#347b72b0d84a81af1085ad9a6a8994e6">cmt</a>);
<a name="l01008"></a>01008             }
<a name="l01009"></a>01009             <span class="keywordflow">if</span> (var-&gt;<a class="code" href="structast__variable.html#997a15c6b09e9b3430b76b15498a3d17">sameline</a>) 
<a name="l01010"></a>01010                fprintf(f, <span class="stringliteral">"%s %s %s  %s"</span>, var-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, (var-&gt;<a class="code" href="structast__variable.html#a8cfde6331bd59eb2ac96f8911c4b666">object</a> ? <span class="stringliteral">"=&gt;"</span> : <span class="stringliteral">"="</span>), var-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>, var-&gt;<a class="code" href="structast__variable.html#997a15c6b09e9b3430b76b15498a3d17">sameline</a>-&gt;<a class="code" href="structast__comment.html#347b72b0d84a81af1085ad9a6a8994e6">cmt</a>);
<a name="l01011"></a>01011             <span class="keywordflow">else</span>  
<a name="l01012"></a>01012                fprintf(f, <span class="stringliteral">"%s %s %s\n"</span>, var-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, (var-&gt;<a class="code" href="structast__variable.html#a8cfde6331bd59eb2ac96f8911c4b666">object</a> ? <span class="stringliteral">"=&gt;"</span> : <span class="stringliteral">"="</span>), var-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>);
<a name="l01013"></a>01013             <span class="keywordflow">if</span> (var-&gt;<a class="code" href="structast__variable.html#98c66644414ece85322befd00a5405d2">blanklines</a>) {
<a name="l01014"></a>01014                blanklines = var-&gt;<a class="code" href="structast__variable.html#98c66644414ece85322befd00a5405d2">blanklines</a>;
<a name="l01015"></a>01015                <span class="keywordflow">while</span> (blanklines--)
<a name="l01016"></a>01016                   fprintf(f, <span class="stringliteral">"\n"</span>);
<a name="l01017"></a>01017             }
<a name="l01018"></a>01018                
<a name="l01019"></a>01019             var = var-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l01020"></a>01020          }
<a name="l01021"></a>01021 <span class="preprocessor">#if 0</span>
<a name="l01022"></a>01022 <span class="preprocessor"></span>         <span class="comment">/* Put an empty line */</span>
<a name="l01023"></a>01023          fprintf(f, <span class="stringliteral">"\n"</span>);
<a name="l01024"></a>01024 <span class="preprocessor">#endif</span>
<a name="l01025"></a>01025 <span class="preprocessor"></span>         cat = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l01026"></a>01026       }
<a name="l01027"></a>01027       <span class="keywordflow">if</span> ((<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 1) &amp;&amp; !<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l01028"></a>01028          <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<span class="stringliteral">"Saved\n"</span>);
<a name="l01029"></a>01029    } <span class="keywordflow">else</span> {
<a name="l01030"></a>01030       <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#g1cc76c5e6a626e61ced4609749a57a6e">option_debug</a>)
<a name="l01031"></a>01031          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#eded50d942c7c2d37d09ba8241ff017f">LOG_DEBUG</a>, <span class="stringliteral">"Unable to open for writing: %s\n"</span>, fn);
<a name="l01032"></a>01032       <span class="keywordflow">if</span> (<a class="code" href="group__main__options.html#ge36cdd7167e060bff70d00fbd82809eb">option_verbose</a> &gt; 1)
<a name="l01033"></a>01033          <a class="code" href="logger_8c.html#6a1ef0a194bcc79fccfb662192954477">ast_verbose</a>(<a class="code" href="logger_8h.html#6e3640436a97291b451a8d264b5ab15d">VERBOSE_PREFIX_2</a> <span class="stringliteral">"Unable to write (%s)"</span>, strerror(errno));
<a name="l01034"></a>01034       <span class="keywordflow">return</span> -1;
<a name="l01035"></a>01035    }
<a name="l01036"></a>01036    fclose(f);
<a name="l01037"></a>01037    <span class="keywordflow">return</span> 0;
<a name="l01038"></a>01038 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3c658c839064ba779b3fa38bc9c2bfc"></a><!-- doxytag: member="config.c::find_engine" ref="a3c658c839064ba779b3fa38bc9c2bfc" args="(const char *family, char *database, int dbsiz, char *table, int tabsiz)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static struct <a class="el" href="structast__config__engine.html">ast_config_engine</a>* find_engine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>family</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>database</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dbsiz</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>table</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>tabsiz</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Find realtime engine for realtime family. 
<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01200">1200</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="lock_8h-source.html#l00530">ast_mutex_lock()</a>, <a class="el" href="lock_8h-source.html#l00520">ast_mutex_unlock()</a>, <a class="el" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a>, <a class="el" href="config_8c-source.html#l00153">ast_config_map::database</a>, <a class="el" href="config_8c-source.html#l00152">ast_config_map::driver</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="misdn__config_8c-source.html#l00366">map</a>, <a class="el" href="config_8h-source.html#l00059">ast_config_engine::name</a>, <a class="el" href="config_8c-source.html#l00151">ast_config_map::name</a>, <a class="el" href="config_8h-source.html#l00066">ast_config_engine::next</a>, <a class="el" href="config_8c-source.html#l00150">ast_config_map::next</a>, and <a class="el" href="config_8c-source.html#l00154">ast_config_map::table</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l01366">ast_check_realtime()</a>, <a class="el" href="config_8c-source.html#l01239">ast_config_internal_load()</a>, <a class="el" href="config_8c-source.html#l01433">ast_destroy_realtime()</a>, <a class="el" href="config_8c-source.html#l01310">ast_load_realtime_helper()</a>, <a class="el" href="config_8c-source.html#l01383">ast_load_realtime_multientry()</a>, <a class="el" href="res__speech_8c-source.html#l00162">ast_speech_new()</a>, <a class="el" href="res__speech_8c-source.html#l00248">ast_speech_register()</a>, <a class="el" href="config_8c-source.html#l01417">ast_store_realtime()</a>, and <a class="el" href="config_8c-source.html#l01400">ast_update_realtime()</a>.<div class="fragment"><pre class="fragment"><a name="l01201"></a>01201 {
<a name="l01202"></a>01202    <span class="keyword">struct </span><a class="code" href="structast__config__engine.html">ast_config_engine</a> *eng, *ret = NULL;
<a name="l01203"></a>01203    <span class="keyword">struct </span><a class="code" href="structast__config__map.html">ast_config_map</a> *<a class="code" href="misdn__config_8c.html#1d78dc8ed51214e518b5114fe24490ae">map</a>;
<a name="l01204"></a>01204 
<a name="l01205"></a>01205    <a class="code" href="lock_8h.html#b3c5e3093b325167f88db93c8b4b2421">ast_mutex_lock</a>(&amp;config_lock);
<a name="l01206"></a>01206 
<a name="l01207"></a>01207    <span class="keywordflow">for</span> (map = <a class="code" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a>; map; map = map-&gt;<a class="code" href="structast__config__map.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l01208"></a>01208       <span class="keywordflow">if</span> (!strcasecmp(family, map-&gt;<a class="code" href="structast__config__map.html#b068931cc450442b63f5b3d276ea4297">name</a>)) {
<a name="l01209"></a>01209          <span class="keywordflow">if</span> (<a class="code" href="structast__config__map.html#11e0eed8d3696c0a632f822df385ab3c">database</a>)
<a name="l01210"></a>01210             ast_copy_string(<a class="code" href="structast__config__map.html#11e0eed8d3696c0a632f822df385ab3c">database</a>, map-&gt;<a class="code" href="structast__config__map.html#11e0eed8d3696c0a632f822df385ab3c">database</a>, dbsiz);
<a name="l01211"></a>01211          <span class="keywordflow">if</span> (<a class="code" href="cdr__odbc_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>)
<a name="l01212"></a>01212             ast_copy_string(<a class="code" href="cdr__odbc_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>, map-&gt;<a class="code" href="structast__config__map.html#aab9e1de16f38176f86d7a92ba337a8d">table</a> ? map-&gt;<a class="code" href="structast__config__map.html#aab9e1de16f38176f86d7a92ba337a8d">table</a> : family, tabsiz);
<a name="l01213"></a>01213          <span class="keywordflow">break</span>;
<a name="l01214"></a>01214       }
<a name="l01215"></a>01215    }
<a name="l01216"></a>01216 
<a name="l01217"></a>01217    <span class="comment">/* Check if the required driver (engine) exist */</span>
<a name="l01218"></a>01218    <span class="keywordflow">if</span> (map) {
<a name="l01219"></a>01219       <span class="keywordflow">for</span> (eng = <a class="code" href="config_8c.html#0531e578786fc476487425f62c18e84c">config_engine_list</a>; !ret &amp;&amp; eng; eng = eng-&gt;<a class="code" href="structast__config__engine.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l01220"></a>01220          <span class="keywordflow">if</span> (!strcasecmp(eng-&gt;<a class="code" href="structast__config__engine.html#b068931cc450442b63f5b3d276ea4297">name</a>, map-&gt;<a class="code" href="structast__config__map.html#e2d45d57c7e2941b65c6ccd64af4223e">driver</a>))
<a name="l01221"></a>01221             ret = eng;
<a name="l01222"></a>01222       }
<a name="l01223"></a>01223    }
<a name="l01224"></a>01224 
<a name="l01225"></a>01225    <a class="code" href="lock_8h.html#1d33e3caf152f0901c5ebdb69c2d4d26">ast_mutex_unlock</a>(&amp;config_lock);
<a name="l01226"></a>01226    
<a name="l01227"></a>01227    <span class="comment">/* if we found a mapping, but the engine is not available, then issue a warning */</span>
<a name="l01228"></a>01228    <span class="keywordflow">if</span> (map &amp;&amp; !ret)
<a name="l01229"></a>01229       <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Realtime mapping for '%s' found to engine '%s', but the engine is not available\n"</span>, map-&gt;<a class="code" href="structast__config__map.html#b068931cc450442b63f5b3d276ea4297">name</a>, map-&gt;<a class="code" href="structast__config__map.html#e2d45d57c7e2941b65c6ccd64af4223e">driver</a>);
<a name="l01230"></a>01230 
<a name="l01231"></a>01231    <span class="keywordflow">return</span> ret;
<a name="l01232"></a>01232 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="5abca42ddd46a24f1879a48bbb4b36b2"></a><!-- doxytag: member="config.c::inherit_category" ref="5abca42ddd46a24f1879a48bbb4b36b2" args="(struct ast_category *new, const struct ast_category *base)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void inherit_category           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>new</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>base</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00405">405</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00198">ast_variable_append()</a>, <a class="el" href="config_8h-source.html#l00046">ast_variable::next</a>, <a class="el" href="config_8c-source.html#l00169">ast_category::root</a>, <a class="el" href="ast__expr2f_8c-source.html#l01417">var</a>, and <a class="el" href="config_8c-source.html#l00265">variable_clone()</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00583">process_text_line()</a>.<div class="fragment"><pre class="fragment"><a name="l00406"></a>00406 {
<a name="l00407"></a>00407    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *<a class="code" href="ast__expr2f_8c.html#b2145aac704ce76dbe1ac7adac535b23">var</a>;
<a name="l00408"></a>00408 
<a name="l00409"></a>00409    <span class="keywordflow">for</span> (var = base-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a>; var; var = var-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>)
<a name="l00410"></a>00410       <a class="code" href="config_8c.html#6b8deaf1a9df252e014d697e09cb68b9">ast_variable_append</a>(<span class="keyword">new</span>, <a class="code" href="config_8c.html#711462f33726d46a7d76db3f374f27bb">variable_clone</a>(var));
<a name="l00411"></a>00411 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="f3f955c58d5a5aaabe2d29d8d9506e5d"></a><!-- doxytag: member="config.c::LLB_ADD" ref="f3f955c58d5a5aaabe2d29d8d9506e5d" args="(char **lline_buffer, int *lline_buffer_size, char *str)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void LLB_ADD           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char **&nbsp;</td>
          <td class="mdname" nowrap> <em>lline_buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>lline_buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>str</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00121">121</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="utils_8h.html#009723420c269c3a1ecb1953558e608d">ast_realloc</a>, and <a class="el" href="config_8c-source.html#l00073">CB_INCR</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00762">config_text_file_load()</a>.<div class="fragment"><pre class="fragment"><a name="l00122"></a>00122 {
<a name="l00123"></a>00123    <span class="keywordtype">int</span> rem = *lline_buffer_size - strlen(*lline_buffer) - 1;
<a name="l00124"></a>00124    <span class="keywordtype">int</span> siz = strlen(str);
<a name="l00125"></a>00125    <span class="keywordflow">if</span> (rem &lt; siz+1) {
<a name="l00126"></a>00126       *lline_buffer = <a class="code" href="utils_8h.html#009723420c269c3a1ecb1953558e608d">ast_realloc</a>(*lline_buffer, *lline_buffer_size + <a class="code" href="config_8c.html#23ccbaefdb39a96e411cfe10920f659e">CB_INCR</a> + siz + 1);
<a name="l00127"></a>00127       <span class="keywordflow">if</span> (!(*lline_buffer)) 
<a name="l00128"></a>00128          <span class="keywordflow">return</span>;
<a name="l00129"></a>00129       *lline_buffer_size += <a class="code" href="config_8c.html#23ccbaefdb39a96e411cfe10920f659e">CB_INCR</a> + siz + 1;
<a name="l00130"></a>00130    }
<a name="l00131"></a>00131    strcat(*lline_buffer,str);
<a name="l00132"></a>00132 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="399ebb89273e3bc9319a7f67e282d914"></a><!-- doxytag: member="config.c::move_variables" ref="399ebb89273e3bc9319a7f67e282d914" args="(struct ast_category *old, struct ast_category *new)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void move_variables           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>old</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>new</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00279">279</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00198">ast_variable_append()</a>, <a class="el" href="config_8h-source.html#l00046">ast_variable::next</a>, <a class="el" href="config_8c-source.html#l00169">ast_category::root</a>, and <a class="el" href="ast__expr2f_8c-source.html#l01417">var</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00583">process_text_line()</a>.<div class="fragment"><pre class="fragment"><a name="l00280"></a>00280 {
<a name="l00281"></a>00281    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *<a class="code" href="ast__expr2f_8c.html#b2145aac704ce76dbe1ac7adac535b23">var</a> = old-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a>;
<a name="l00282"></a>00282    old-&gt;<a class="code" href="structast__category.html#63a9f0ea7bb98050796b649e85481845">root</a> = NULL;
<a name="l00283"></a>00283 <span class="preprocessor">#if 1</span>
<a name="l00284"></a>00284 <span class="preprocessor"></span>   <span class="comment">/* we can just move the entire list in a single op */</span>
<a name="l00285"></a>00285    <a class="code" href="config_8c.html#6b8deaf1a9df252e014d697e09cb68b9">ast_variable_append</a>(<span class="keyword">new</span>, var);
<a name="l00286"></a>00286 <span class="preprocessor">#else</span>
<a name="l00287"></a>00287 <span class="preprocessor"></span>   <span class="keywordflow">while</span> (var) {
<a name="l00288"></a>00288       <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = var-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>;
<a name="l00289"></a>00289       var-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a> = NULL;
<a name="l00290"></a>00290       <a class="code" href="config_8c.html#6b8deaf1a9df252e014d697e09cb68b9">ast_variable_append</a>(<span class="keyword">new</span>, var);
<a name="l00291"></a>00291       var = next;
<a name="l00292"></a>00292    }
<a name="l00293"></a>00293 <span class="preprocessor">#endif</span>
<a name="l00294"></a>00294 <span class="preprocessor"></span>}
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="18038da37d2e7e66a9446b8e321ece05"></a><!-- doxytag: member="config.c::next_available_category" ref="18038da37d2e7e66a9446b8e321ece05" args="(struct ast_category *cat)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static struct <a class="el" href="structast__category.html">ast_category</a>* next_available_category           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__category.html">ast_category</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cat</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00350">350</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00165">ast_category::ignored</a>, and <a class="el" href="config_8c-source.html#l00171">ast_category::next</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00357">ast_category_browse()</a>.<div class="fragment"><pre class="fragment"><a name="l00351"></a>00351 {
<a name="l00352"></a>00352    <span class="keywordflow">for</span> (; cat &amp;&amp; cat-&gt;<a class="code" href="structast__category.html#f3f98c5d41d7c992a6fb63799f700f2b">ignored</a>; cat = cat-&gt;<a class="code" href="structast__category.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>);
<a name="l00353"></a>00353 
<a name="l00354"></a>00354    <span class="keywordflow">return</span> cat;
<a name="l00355"></a>00355 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="0758157f0559f0e96975d3dbddfc5e8a"></a><!-- doxytag: member="config.c::process_text_line" ref="0758157f0559f0e96975d3dbddfc5e8a" args="(struct ast_config *cfg, struct ast_category **cat, char *buf, int lineno, const char *configfile, int withcomments, char **comment_buffer, int *comment_buffer_size, char **lline_buffer, int *lline_buffer_size)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int process_text_line           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config.html">ast_config</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structast__category.html">ast_category</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>cat</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>lineno</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>configfile</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>withcomments</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>comment_buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>comment_buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>lline_buffer</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>lline_buffer_size</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00583">583</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00141">ALLOC_COMMENT()</a>, <a class="el" href="config_8c-source.html#l00333">ast_category_append()</a>, <a class="el" href="config_8c-source.html#l00344">ast_category_destroy()</a>, <a class="el" href="config_8c-source.html#l00296">ast_category_new()</a>, <a class="el" href="config_8c-source.html#l01239">ast_config_internal_load()</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="options_8h-source.html#l00086">ast_opt_exec_includes</a>, <a class="el" href="asterisk_8c-source.html#l00746">ast_safe_system()</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="config_8c-source.html#l00198">ast_variable_append()</a>, <a class="el" href="config_8c-source.html#l00183">ast_variable_new()</a>, <a class="el" href="config_8h-source.html#l00043">ast_variable::blanklines</a>, <a class="el" href="config_8c-source.html#l00305">category_get()</a>, <a class="el" href="config_8c-source.html#l00134">CB_RESET()</a>, <a class="el" href="config_8c-source.html#l00405">inherit_category()</a>, <a class="el" href="config_8h-source.html#l00041">ast_variable::lineno</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="config_8c-source.html#l00279">move_variables()</a>, <a class="el" href="config_8h-source.html#l00042">ast_variable::object</a>, <a class="el" href="config_8h-source.html#l00044">ast_variable::precomments</a>, <a class="el" href="config_8c-source.html#l00167">ast_category::precomments</a>, <a class="el" href="config_8h-source.html#l00045">ast_variable::sameline</a>, <a class="el" href="config_8c-source.html#l00168">ast_category::sameline</a>, and <a class="el" href="strcompat_8c-source.html#l00035">strsep()</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00762">config_text_file_load()</a>.<div class="fragment"><pre class="fragment"><a name="l00585"></a>00585 {
<a name="l00586"></a>00586    <span class="keywordtype">char</span> *c;
<a name="l00587"></a>00587    <span class="keywordtype">char</span> *cur = <a class="code" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>;
<a name="l00588"></a>00588    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *v;
<a name="l00589"></a>00589    <span class="keywordtype">char</span> cmd[512], exec_file[512];
<a name="l00590"></a>00590    <span class="keywordtype">int</span> <a class="code" href="structast__variable.html#a8cfde6331bd59eb2ac96f8911c4b666">object</a>, do_exec, do_include;
<a name="l00591"></a>00591 
<a name="l00592"></a>00592    <span class="comment">/* Actually parse the entry */</span>
<a name="l00593"></a>00593    <span class="keywordflow">if</span> (cur[0] == <span class="charliteral">'['</span>) {
<a name="l00594"></a>00594       <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *newcat = NULL;
<a name="l00595"></a>00595       <span class="keywordtype">char</span> *catname;
<a name="l00596"></a>00596 
<a name="l00597"></a>00597       <span class="comment">/* A category header */</span>
<a name="l00598"></a>00598       c = strchr(cur, <span class="charliteral">']'</span>);
<a name="l00599"></a>00599       <span class="keywordflow">if</span> (!c) {
<a name="l00600"></a>00600          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"parse error: no closing ']', line %d of %s\n"</span>, <a class="code" href="utils_8h.html#5525da36abafe9a243105119cea54be5">lineno</a>, configfile);
<a name="l00601"></a>00601          <span class="keywordflow">return</span> -1;
<a name="l00602"></a>00602       }
<a name="l00603"></a>00603       *c++ = <span class="charliteral">'\0'</span>;
<a name="l00604"></a>00604       cur++;
<a name="l00605"></a>00605       <span class="keywordflow">if</span> (*c++ != <span class="charliteral">'('</span>)
<a name="l00606"></a>00606          c = NULL;
<a name="l00607"></a>00607       catname = cur;
<a name="l00608"></a>00608       <span class="keywordflow">if</span> (!(*cat = newcat = <a class="code" href="config_8c.html#7c91d609091f9ffcb3b4a9f8aaa82e7b">ast_category_new</a>(catname))) {
<a name="l00609"></a>00609          <span class="keywordflow">return</span> -1;
<a name="l00610"></a>00610       }
<a name="l00611"></a>00611       <span class="comment">/* add comments */</span>
<a name="l00612"></a>00612       <span class="keywordflow">if</span> (withcomments &amp;&amp; *comment_buffer &amp;&amp; (*comment_buffer)[0] ) {
<a name="l00613"></a>00613          newcat-&gt;<a class="code" href="structast__category.html#8ad5823d3a1586ace00081ed9ddd5b60">precomments</a> = <a class="code" href="config_8c.html#affab36d0133be1215ec9c64dc2ed41c">ALLOC_COMMENT</a>(*comment_buffer);
<a name="l00614"></a>00614       }
<a name="l00615"></a>00615       <span class="keywordflow">if</span> (withcomments &amp;&amp; *lline_buffer &amp;&amp; (*lline_buffer)[0] ) {
<a name="l00616"></a>00616          newcat-&gt;<a class="code" href="structast__category.html#997a15c6b09e9b3430b76b15498a3d17">sameline</a> = <a class="code" href="config_8c.html#affab36d0133be1215ec9c64dc2ed41c">ALLOC_COMMENT</a>(*lline_buffer);
<a name="l00617"></a>00617       }
<a name="l00618"></a>00618       <span class="keywordflow">if</span> ( withcomments )
<a name="l00619"></a>00619          <a class="code" href="config_8c.html#59b6e1ccd8d42533fc78dde5c7425b18">CB_RESET</a>(comment_buffer, lline_buffer);
<a name="l00620"></a>00620       
<a name="l00621"></a>00621       <span class="comment">/* If there are options or categories to inherit from, process them now */</span>
<a name="l00622"></a>00622       <span class="keywordflow">if</span> (c) {
<a name="l00623"></a>00623          <span class="keywordflow">if</span> (!(cur = strchr(c, <span class="charliteral">')'</span>))) {
<a name="l00624"></a>00624             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"parse error: no closing ')', line %d of %s\n"</span>, <a class="code" href="utils_8h.html#5525da36abafe9a243105119cea54be5">lineno</a>, configfile);
<a name="l00625"></a>00625             <span class="keywordflow">return</span> -1;
<a name="l00626"></a>00626          }
<a name="l00627"></a>00627          *cur = <span class="charliteral">'\0'</span>;
<a name="l00628"></a>00628          <span class="keywordflow">while</span> ((cur = <a class="code" href="strcompat_8c.html#a541370456ac872bdb4bdcc462fc6a6e">strsep</a>(&amp;c, <span class="stringliteral">","</span>))) {
<a name="l00629"></a>00629             <span class="keywordflow">if</span> (!strcasecmp(cur, <span class="stringliteral">"!"</span>)) {
<a name="l00630"></a>00630                (*cat)-&gt;ignored = 1;
<a name="l00631"></a>00631             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(cur, <span class="stringliteral">"+"</span>)) {
<a name="l00632"></a>00632                *cat = <a class="code" href="config_8c.html#ee8b81a06da990c27a429f1b455cd506">category_get</a>(cfg, catname, 1);
<a name="l00633"></a>00633                <span class="keywordflow">if</span> (!(*cat)) {
<a name="l00634"></a>00634                   <span class="keywordflow">if</span> (newcat)
<a name="l00635"></a>00635                      <a class="code" href="config_8c.html#c7c9795016628bdecddab2fe767fa33f">ast_category_destroy</a>(newcat);
<a name="l00636"></a>00636                   <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Category addition requested, but category '%s' does not exist, line %d of %s\n"</span>, catname, <a class="code" href="utils_8h.html#5525da36abafe9a243105119cea54be5">lineno</a>, configfile);
<a name="l00637"></a>00637                   <span class="keywordflow">return</span> -1;
<a name="l00638"></a>00638                }
<a name="l00639"></a>00639                <span class="keywordflow">if</span> (newcat) {
<a name="l00640"></a>00640                   <a class="code" href="config_8c.html#399ebb89273e3bc9319a7f67e282d914">move_variables</a>(newcat, *cat);
<a name="l00641"></a>00641                   <a class="code" href="config_8c.html#c7c9795016628bdecddab2fe767fa33f">ast_category_destroy</a>(newcat);
<a name="l00642"></a>00642                   newcat = NULL;
<a name="l00643"></a>00643                }
<a name="l00644"></a>00644             } <span class="keywordflow">else</span> {
<a name="l00645"></a>00645                <span class="keyword">struct </span><a class="code" href="structast__category.html">ast_category</a> *base;
<a name="l00646"></a>00646             
<a name="l00647"></a>00647                base = <a class="code" href="config_8c.html#ee8b81a06da990c27a429f1b455cd506">category_get</a>(cfg, cur, 1);
<a name="l00648"></a>00648                <span class="keywordflow">if</span> (!base) {
<a name="l00649"></a>00649                   <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Inheritance requested, but category '%s' does not exist, line %d of %s\n"</span>, cur, <a class="code" href="utils_8h.html#5525da36abafe9a243105119cea54be5">lineno</a>, configfile);
<a name="l00650"></a>00650                   <span class="keywordflow">return</span> -1;
<a name="l00651"></a>00651                }
<a name="l00652"></a>00652                <a class="code" href="config_8c.html#5abca42ddd46a24f1879a48bbb4b36b2">inherit_category</a>(*cat, base);
<a name="l00653"></a>00653             }
<a name="l00654"></a>00654          }
<a name="l00655"></a>00655       }
<a name="l00656"></a>00656       <span class="keywordflow">if</span> (newcat)
<a name="l00657"></a>00657          <a class="code" href="config_8c.html#9efd51e40d45378faf85951179110981">ast_category_append</a>(cfg, *cat);
<a name="l00658"></a>00658    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cur[0] == <span class="charliteral">'#'</span>) {
<a name="l00659"></a>00659       <span class="comment">/* A directive */</span>
<a name="l00660"></a>00660       cur++;
<a name="l00661"></a>00661       c = cur;
<a name="l00662"></a>00662       <span class="keywordflow">while</span> (*c &amp;&amp; (*c &gt; 32)) c++;
<a name="l00663"></a>00663       <span class="keywordflow">if</span> (*c) {
<a name="l00664"></a>00664          *c = <span class="charliteral">'\0'</span>;
<a name="l00665"></a>00665          <span class="comment">/* Find real argument */</span>
<a name="l00666"></a>00666          c = ast_skip_blanks(c + 1);
<a name="l00667"></a>00667          <span class="keywordflow">if</span> (!(*c))
<a name="l00668"></a>00668             c = NULL;
<a name="l00669"></a>00669       } <span class="keywordflow">else</span> 
<a name="l00670"></a>00670          c = NULL;
<a name="l00671"></a>00671       do_include = !strcasecmp(cur, <span class="stringliteral">"include"</span>);
<a name="l00672"></a>00672       <span class="keywordflow">if</span> (!do_include)
<a name="l00673"></a>00673          do_exec = !strcasecmp(cur, <span class="stringliteral">"exec"</span>);
<a name="l00674"></a>00674       <span class="keywordflow">else</span>
<a name="l00675"></a>00675          do_exec = 0;
<a name="l00676"></a>00676       <span class="keywordflow">if</span> (do_exec &amp;&amp; !<a class="code" href="options_8h.html#7808c1eed9bfbee454380e8076954e49">ast_opt_exec_includes</a>) {
<a name="l00677"></a>00677          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Cannot perform #exec unless execincludes option is enabled in asterisk.conf (options section)!\n"</span>);
<a name="l00678"></a>00678          do_exec = 0;
<a name="l00679"></a>00679       }
<a name="l00680"></a>00680       <span class="keywordflow">if</span> (do_include || do_exec) {
<a name="l00681"></a>00681          <span class="keywordflow">if</span> (c) {
<a name="l00682"></a>00682             <span class="comment">/* Strip off leading and trailing "'s and &lt;&gt;'s */</span>
<a name="l00683"></a>00683             <span class="keywordflow">while</span> ((*c == <span class="charliteral">'&lt;'</span>) || (*c == <span class="charliteral">'&gt;'</span>) || (*c == <span class="charliteral">'\"'</span>)) c++;
<a name="l00684"></a>00684             <span class="comment">/* Get rid of leading mess */</span>
<a name="l00685"></a>00685             cur = c;
<a name="l00686"></a>00686             <span class="keywordflow">while</span> (!<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(cur)) {
<a name="l00687"></a>00687                c = cur + strlen(cur) - 1;
<a name="l00688"></a>00688                <span class="keywordflow">if</span> ((*c == <span class="charliteral">'&gt;'</span>) || (*c == <span class="charliteral">'&lt;'</span>) || (*c == <span class="charliteral">'\"'</span>))
<a name="l00689"></a>00689                   *c = <span class="charliteral">'\0'</span>;
<a name="l00690"></a>00690                <span class="keywordflow">else</span>
<a name="l00691"></a>00691                   <span class="keywordflow">break</span>;
<a name="l00692"></a>00692             }
<a name="l00693"></a>00693             <span class="comment">/* #exec &lt;/path/to/executable&gt;</span>
<a name="l00694"></a>00694 <span class="comment">               We create a tmp file, then we #include it, then we delete it. */</span>
<a name="l00695"></a>00695             <span class="keywordflow">if</span> (do_exec) { 
<a name="l00696"></a>00696                snprintf(exec_file, <span class="keyword">sizeof</span>(exec_file), <span class="stringliteral">"/var/tmp/exec.%d.%ld"</span>, (<span class="keywordtype">int</span>)time(NULL), (<span class="keywordtype">long</span>)pthread_self());
<a name="l00697"></a>00697                snprintf(cmd, <span class="keyword">sizeof</span>(cmd), <span class="stringliteral">"%s &gt; %s 2&gt;&amp;1"</span>, cur, exec_file);
<a name="l00698"></a>00698                <a class="code" href="asterisk_8c.html#ceb3925bf8c3e3d21d9246872548f5df">ast_safe_system</a>(cmd);
<a name="l00699"></a>00699                cur = exec_file;
<a name="l00700"></a>00700             } <span class="keywordflow">else</span>
<a name="l00701"></a>00701                exec_file[0] = <span class="charliteral">'\0'</span>;
<a name="l00702"></a>00702             <span class="comment">/* A #include */</span>
<a name="l00703"></a>00703             do_include = <a class="code" href="config_8c.html#c3ab4e0c51bb2d6537b62b9d8b997c0e">ast_config_internal_load</a>(cur, cfg, withcomments) ? 1 : 0;
<a name="l00704"></a>00704             <span class="keywordflow">if</span> (!<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(exec_file))
<a name="l00705"></a>00705                unlink(exec_file);
<a name="l00706"></a>00706             <span class="keywordflow">if</span> (!do_include)
<a name="l00707"></a>00707                <span class="keywordflow">return</span> 0;
<a name="l00708"></a>00708 
<a name="l00709"></a>00709          } <span class="keywordflow">else</span> {
<a name="l00710"></a>00710             <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Directive '#%s' needs an argument (%s) at line %d of %s\n"</span>, 
<a name="l00711"></a>00711                   do_exec ? <span class="stringliteral">"exec"</span> : <span class="stringliteral">"include"</span>,
<a name="l00712"></a>00712                   do_exec ? <span class="stringliteral">"/path/to/executable"</span> : <span class="stringliteral">"filename"</span>,
<a name="l00713"></a>00713                   <a class="code" href="utils_8h.html#5525da36abafe9a243105119cea54be5">lineno</a>,
<a name="l00714"></a>00714                   configfile);
<a name="l00715"></a>00715          }
<a name="l00716"></a>00716       }
<a name="l00717"></a>00717       <span class="keywordflow">else</span> 
<a name="l00718"></a>00718          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Unknown directive '%s' at line %d of %s\n"</span>, cur, <a class="code" href="utils_8h.html#5525da36abafe9a243105119cea54be5">lineno</a>, configfile);
<a name="l00719"></a>00719    } <span class="keywordflow">else</span> {
<a name="l00720"></a>00720       <span class="comment">/* Just a line (variable = value) */</span>
<a name="l00721"></a>00721       <span class="keywordflow">if</span> (!(*cat)) {
<a name="l00722"></a>00722          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>,
<a name="l00723"></a>00723             <span class="stringliteral">"parse error: No category context for line %d of %s\n"</span>, <a class="code" href="utils_8h.html#5525da36abafe9a243105119cea54be5">lineno</a>, configfile);
<a name="l00724"></a>00724          <span class="keywordflow">return</span> -1;
<a name="l00725"></a>00725       }
<a name="l00726"></a>00726       c = strchr(cur, <span class="charliteral">'='</span>);
<a name="l00727"></a>00727       <span class="keywordflow">if</span> (c) {
<a name="l00728"></a>00728          *c = 0;
<a name="l00729"></a>00729          c++;
<a name="l00730"></a>00730          <span class="comment">/* Ignore &gt; in =&gt; */</span>
<a name="l00731"></a>00731          <span class="keywordflow">if</span> (*c== <span class="charliteral">'&gt;'</span>) {
<a name="l00732"></a>00732             object = 1;
<a name="l00733"></a>00733             c++;
<a name="l00734"></a>00734          } <span class="keywordflow">else</span>
<a name="l00735"></a>00735             object = 0;
<a name="l00736"></a>00736          <span class="keywordflow">if</span> ((v = <a class="code" href="config_8c.html#c21fb3a90ccd9ec4f8708c3b67b3c654">ast_variable_new</a>(ast_strip(cur), ast_strip(c)))) {
<a name="l00737"></a>00737             v-&gt;<a class="code" href="structast__variable.html#5525da36abafe9a243105119cea54be5">lineno</a> = <a class="code" href="utils_8h.html#5525da36abafe9a243105119cea54be5">lineno</a>;
<a name="l00738"></a>00738             v-&gt;<a class="code" href="structast__variable.html#a8cfde6331bd59eb2ac96f8911c4b666">object</a> = object;
<a name="l00739"></a>00739             <span class="comment">/* Put and reset comments */</span>
<a name="l00740"></a>00740             v-&gt;<a class="code" href="structast__variable.html#98c66644414ece85322befd00a5405d2">blanklines</a> = 0;
<a name="l00741"></a>00741             <a class="code" href="config_8c.html#6b8deaf1a9df252e014d697e09cb68b9">ast_variable_append</a>(*cat, v);
<a name="l00742"></a>00742             <span class="comment">/* add comments */</span>
<a name="l00743"></a>00743             <span class="keywordflow">if</span> (withcomments &amp;&amp; *comment_buffer &amp;&amp; (*comment_buffer)[0] ) {
<a name="l00744"></a>00744                v-&gt;<a class="code" href="structast__variable.html#8ad5823d3a1586ace00081ed9ddd5b60">precomments</a> = <a class="code" href="config_8c.html#affab36d0133be1215ec9c64dc2ed41c">ALLOC_COMMENT</a>(*comment_buffer);
<a name="l00745"></a>00745             }
<a name="l00746"></a>00746             <span class="keywordflow">if</span> (withcomments &amp;&amp; *lline_buffer &amp;&amp; (*lline_buffer)[0] ) {
<a name="l00747"></a>00747                v-&gt;<a class="code" href="structast__variable.html#997a15c6b09e9b3430b76b15498a3d17">sameline</a> = <a class="code" href="config_8c.html#affab36d0133be1215ec9c64dc2ed41c">ALLOC_COMMENT</a>(*lline_buffer);
<a name="l00748"></a>00748             }
<a name="l00749"></a>00749             <span class="keywordflow">if</span> ( withcomments )
<a name="l00750"></a>00750                <a class="code" href="config_8c.html#59b6e1ccd8d42533fc78dde5c7425b18">CB_RESET</a>(comment_buffer, lline_buffer);
<a name="l00751"></a>00751             
<a name="l00752"></a>00752          } <span class="keywordflow">else</span> {
<a name="l00753"></a>00753             <span class="keywordflow">return</span> -1;
<a name="l00754"></a>00754          }
<a name="l00755"></a>00755       } <span class="keywordflow">else</span> {
<a name="l00756"></a>00756          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"No '=' (equal sign) in line %d of %s\n"</span>, <a class="code" href="utils_8h.html#5525da36abafe9a243105119cea54be5">lineno</a>, configfile);
<a name="l00757"></a>00757       }
<a name="l00758"></a>00758    }
<a name="l00759"></a>00759    <span class="keywordflow">return</span> 0;
<a name="l00760"></a>00760 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="263cc1fff70675bd25498cb2f4c95431"></a><!-- doxytag: member="config.c::read_config_maps" ref="263cc1fff70675bd25498cb2f4c95431" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int read_config_maps           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01090">1090</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l01055">append_mapping()</a>, <a class="el" href="config_8c-source.html#l00555">ast_config_destroy()</a>, <a class="el" href="config_8c-source.html#l01239">ast_config_internal_load()</a>, <a class="el" href="config_8c-source.html#l00413">ast_config_new()</a>, <a class="el" href="logger_8c-source.html#l00866">ast_log()</a>, <a class="el" href="config_8c-source.html#l00222">ast_variable_browse()</a>, <a class="el" href="config_8c-source.html#l01040">clear_config_maps()</a>, <a class="el" href="chan__agent_8c-source.html#l00077">config</a>, <a class="el" href="config_8c-source.html#l00063">extconfig_conf</a>, <a class="el" href="logger_8h-source.html#l00112">LOG_WARNING</a>, <a class="el" href="config_8c-source.html#l00180">ast_config::max_include_level</a>, <a class="el" href="config_8h-source.html#l00039">ast_variable::name</a>, <a class="el" href="config_8h-source.html#l00046">ast_variable::next</a>, <a class="el" href="strcompat_8c-source.html#l00035">strsep()</a>, <a class="el" href="cdr__odbc_8c-source.html#l00069">table</a>, and <a class="el" href="config_8h-source.html#l00040">ast_variable::value</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.<div class="fragment"><pre class="fragment"><a name="l01091"></a>01091 {
<a name="l01092"></a>01092    <span class="keyword">struct </span><a class="code" href="structast__config.html">ast_config</a> *<a class="code" href="chan__agent_8c.html#71d63bae4fa3507f57ae4e35f6de4c63">config</a>, *configtmp;
<a name="l01093"></a>01093    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *v;
<a name="l01094"></a>01094    <span class="keywordtype">char</span> *driver, *<a class="code" href="cdr__odbc_8c.html#aab9e1de16f38176f86d7a92ba337a8d">table</a>, *database, *stringp, *tmp;
<a name="l01095"></a>01095 
<a name="l01096"></a>01096    <a class="code" href="config_8c.html#49d169eb931e065d2e9c381977da1803">clear_config_maps</a>();
<a name="l01097"></a>01097 
<a name="l01098"></a>01098    configtmp = <a class="code" href="config_8c.html#5fee2f4a603882efcf21120190f2b803">ast_config_new</a>();
<a name="l01099"></a>01099    configtmp-&gt;<a class="code" href="structast__config.html#3373ce4dccf6b8939f588da41c2cd83b">max_include_level</a> = 1;
<a name="l01100"></a>01100    config = <a class="code" href="config_8c.html#c3ab4e0c51bb2d6537b62b9d8b997c0e">ast_config_internal_load</a>(<a class="code" href="config_8c.html#2eebecd119f3220c584c451fb5503460">extconfig_conf</a>, configtmp, 0);
<a name="l01101"></a>01101    <span class="keywordflow">if</span> (!config) {
<a name="l01102"></a>01102       <a class="code" href="config_8c.html#ad84c9d29ca53758c2a113d057e221a0">ast_config_destroy</a>(configtmp);
<a name="l01103"></a>01103       <span class="keywordflow">return</span> 0;
<a name="l01104"></a>01104    }
<a name="l01105"></a>01105 
<a name="l01106"></a>01106    <span class="keywordflow">for</span> (v = <a class="code" href="config_8c.html#65ed813ca973e0e5dd3426804249db4f">ast_variable_browse</a>(config, <span class="stringliteral">"settings"</span>); v; v = v-&gt;<a class="code" href="structast__variable.html#d0cab90d8d20d57e2f2b9be52f7dd25d">next</a>) {
<a name="l01107"></a>01107       stringp = v-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>;
<a name="l01108"></a>01108       driver = <a class="code" href="strcompat_8c.html#a541370456ac872bdb4bdcc462fc6a6e">strsep</a>(&amp;stringp, <span class="stringliteral">","</span>);
<a name="l01109"></a>01109 
<a name="l01110"></a>01110       <span class="keywordflow">if</span> ((tmp = strchr(stringp, <span class="charliteral">'\"'</span>)))
<a name="l01111"></a>01111          stringp = tmp;
<a name="l01112"></a>01112 
<a name="l01113"></a>01113       <span class="comment">/* check if the database text starts with a double quote */</span>
<a name="l01114"></a>01114       <span class="keywordflow">if</span> (*stringp == <span class="charliteral">'"'</span>) {
<a name="l01115"></a>01115          stringp++;
<a name="l01116"></a>01116          database = <a class="code" href="strcompat_8c.html#a541370456ac872bdb4bdcc462fc6a6e">strsep</a>(&amp;stringp, <span class="stringliteral">"\""</span>);
<a name="l01117"></a>01117          <a class="code" href="strcompat_8c.html#a541370456ac872bdb4bdcc462fc6a6e">strsep</a>(&amp;stringp, <span class="stringliteral">","</span>);
<a name="l01118"></a>01118       } <span class="keywordflow">else</span> {
<a name="l01119"></a>01119          <span class="comment">/* apparently this text has no quotes */</span>
<a name="l01120"></a>01120          database = <a class="code" href="strcompat_8c.html#a541370456ac872bdb4bdcc462fc6a6e">strsep</a>(&amp;stringp, <span class="stringliteral">","</span>);
<a name="l01121"></a>01121       }
<a name="l01122"></a>01122 
<a name="l01123"></a>01123       table = <a class="code" href="strcompat_8c.html#a541370456ac872bdb4bdcc462fc6a6e">strsep</a>(&amp;stringp, <span class="stringliteral">","</span>);
<a name="l01124"></a>01124 
<a name="l01125"></a>01125       <span class="keywordflow">if</span> (!strcmp(v-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, <a class="code" href="config_8c.html#2eebecd119f3220c584c451fb5503460">extconfig_conf</a>)) {
<a name="l01126"></a>01126          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Cannot bind '%s'!\n"</span>, <a class="code" href="config_8c.html#2eebecd119f3220c584c451fb5503460">extconfig_conf</a>);
<a name="l01127"></a>01127          <span class="keywordflow">continue</span>;
<a name="l01128"></a>01128       }
<a name="l01129"></a>01129 
<a name="l01130"></a>01130       <span class="keywordflow">if</span> (!strcmp(v-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, <span class="stringliteral">"asterisk.conf"</span>)) {
<a name="l01131"></a>01131          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Cannot bind 'asterisk.conf'!\n"</span>);
<a name="l01132"></a>01132          <span class="keywordflow">continue</span>;
<a name="l01133"></a>01133       }
<a name="l01134"></a>01134 
<a name="l01135"></a>01135       <span class="keywordflow">if</span> (!strcmp(v-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, <span class="stringliteral">"logger.conf"</span>)) {
<a name="l01136"></a>01136          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"Cannot bind 'logger.conf'!\n"</span>);
<a name="l01137"></a>01137          <span class="keywordflow">continue</span>;
<a name="l01138"></a>01138       }
<a name="l01139"></a>01139 
<a name="l01140"></a>01140       <span class="keywordflow">if</span> (!driver || !database)
<a name="l01141"></a>01141          <span class="keywordflow">continue</span>;
<a name="l01142"></a>01142       <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, <span class="stringliteral">"sipfriends"</span>)) {
<a name="l01143"></a>01143          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"The 'sipfriends' table is obsolete, update your config to use sipusers and sippeers, though they can point to the same table.\n"</span>);
<a name="l01144"></a>01144          <a class="code" href="config_8c.html#e1c001a173cb29aa6670c847c671ca03">append_mapping</a>(<span class="stringliteral">"sipusers"</span>, driver, database, table ? table : <span class="stringliteral">"sipfriends"</span>);
<a name="l01145"></a>01145          <a class="code" href="config_8c.html#e1c001a173cb29aa6670c847c671ca03">append_mapping</a>(<span class="stringliteral">"sippeers"</span>, driver, database, table ? table : <span class="stringliteral">"sipfriends"</span>);
<a name="l01146"></a>01146       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, <span class="stringliteral">"iaxfriends"</span>)) {
<a name="l01147"></a>01147          <a class="code" href="logger_8c.html#46fbacc19de763bbca2547c1a9c6a5fa">ast_log</a>(<a class="code" href="logger_8h.html#d0cb3df3102ca9270c5785af9a8c137f">LOG_WARNING</a>, <span class="stringliteral">"The 'iaxfriends' table is obsolete, update your config to use iaxusers and iaxpeers, though they can point to the same table.\n"</span>);
<a name="l01148"></a>01148          <a class="code" href="config_8c.html#e1c001a173cb29aa6670c847c671ca03">append_mapping</a>(<span class="stringliteral">"iaxusers"</span>, driver, database, table ? table : <span class="stringliteral">"iaxfriends"</span>);
<a name="l01149"></a>01149          <a class="code" href="config_8c.html#e1c001a173cb29aa6670c847c671ca03">append_mapping</a>(<span class="stringliteral">"iaxpeers"</span>, driver, database, table ? table : <span class="stringliteral">"iaxfriends"</span>);
<a name="l01150"></a>01150       } <span class="keywordflow">else</span> 
<a name="l01151"></a>01151          <a class="code" href="config_8c.html#e1c001a173cb29aa6670c847c671ca03">append_mapping</a>(v-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, driver, database, table);
<a name="l01152"></a>01152    }
<a name="l01153"></a>01153       
<a name="l01154"></a>01154    <a class="code" href="config_8c.html#ad84c9d29ca53758c2a113d057e221a0">ast_config_destroy</a>(config);
<a name="l01155"></a>01155    <span class="keywordflow">return</span> 0;
<a name="l01156"></a>01156 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="3387fcb9935a4ef90e5f08df980dde66"></a><!-- doxytag: member="config.c::register_config_cli" ref="3387fcb9935a4ef90e5f08df980dde66" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int register_config_cli           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l01482">1482</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="cli_8c-source.html#l01352">ast_cli_register_multiple()</a>.
<p>
Referenced by <a class="el" href="asterisk_8c-source.html#l02570">main()</a>.<div class="fragment"><pre class="fragment"><a name="l01483"></a>01483 {
<a name="l01484"></a>01484    <a class="code" href="cli_8c.html#a334dfd903e83eea3729ff37aa372781">ast_cli_register_multiple</a>(<a class="code" href="config_8c.html#84547cfd1c2ccb798e30a9c3e18f00a4">cli_config</a>, <span class="keyword">sizeof</span>(cli_config) / <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structast__cli__entry.html">ast_cli_entry</a>));
<a name="l01485"></a>01485    <span class="keywordflow">return</span> 0;
<a name="l01486"></a>01486 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="711462f33726d46a7d76db3f374f27bb"></a><!-- doxytag: member="config.c::variable_clone" ref="711462f33726d46a7d76db3f374f27bb" args="(const struct ast_variable *old)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static struct <a class="el" href="structast__variable.html">ast_variable</a>* variable_clone           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const struct <a class="el" href="structast__variable.html">ast_variable</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>old</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00265">265</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
References <a class="el" href="config_8c-source.html#l00183">ast_variable_new()</a>, <a class="el" href="config_8h-source.html#l00043">ast_variable::blanklines</a>, <a class="el" href="config_8h-source.html#l00041">ast_variable::lineno</a>, <a class="el" href="config_8h-source.html#l00039">ast_variable::name</a>, <a class="el" href="config_8h-source.html#l00042">ast_variable::object</a>, and <a class="el" href="config_8h-source.html#l00040">ast_variable::value</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l00405">inherit_category()</a>.<div class="fragment"><pre class="fragment"><a name="l00266"></a>00266 {
<a name="l00267"></a>00267    <span class="keyword">struct </span><a class="code" href="structast__variable.html">ast_variable</a> *<span class="keyword">new</span> = <a class="code" href="config_8c.html#c21fb3a90ccd9ec4f8708c3b67b3c654">ast_variable_new</a>(old-&gt;<a class="code" href="structast__variable.html#b068931cc450442b63f5b3d276ea4297">name</a>, old-&gt;<a class="code" href="structast__variable.html#2063c1608d6e0baf80249c42e2be5804">value</a>);
<a name="l00268"></a>00268 
<a name="l00269"></a>00269    <span class="keywordflow">if</span> (<span class="keyword">new</span>) {
<a name="l00270"></a>00270       <span class="keyword">new</span>-&gt;lineno = old-&gt;<a class="code" href="structast__variable.html#5525da36abafe9a243105119cea54be5">lineno</a>;
<a name="l00271"></a>00271       <span class="keyword">new</span>-&gt;object = old-&gt;<a class="code" href="structast__variable.html#a8cfde6331bd59eb2ac96f8911c4b666">object</a>;
<a name="l00272"></a>00272       <span class="keyword">new</span>-&gt;blanklines = old-&gt;<a class="code" href="structast__variable.html#98c66644414ece85322befd00a5405d2">blanklines</a>;
<a name="l00273"></a>00273       <span class="comment">/* TODO: clone comments? */</span>
<a name="l00274"></a>00274    }
<a name="l00275"></a>00275 
<a name="l00276"></a>00276    <span class="keywordflow">return</span> <span class="keyword">new</span>;
<a name="l00277"></a>00277 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="84547cfd1c2ccb798e30a9c3e18f00a4"></a><!-- doxytag: member="config.c::cli_config" ref="84547cfd1c2ccb798e30a9c3e18f00a4" args="[]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__cli__entry.html">ast_cli_entry</a> <a class="el" href="config_8c.html#84547cfd1c2ccb798e30a9c3e18f00a4">cli_config</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
   { { <span class="stringliteral">"core"</span>, <span class="stringliteral">"show"</span>, <span class="stringliteral">"config"</span>, <span class="stringliteral">"mappings"</span>, NULL },
   <a class="code" href="config_8c.html#955619459825475c170db0ce3eb981c9">config_command</a>, <span class="stringliteral">"Display config mappings (file names to config engines)"</span>,
   <a class="code" href="config_8c.html#a2603a6c82cce02d9bd298d045f682ce">show_config_help</a> },
}
</pre></div>
<p>
Definition at line <a class="el" href="config_8c-source.html#l01476">1476</a> of file <a class="el" href="config_8c-source.html">config.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="0531e578786fc476487425f62c18e84c"></a><!-- doxytag: member="config.c::config_engine_list" ref="0531e578786fc476487425f62c18e84c" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config__engine.html">ast_config_engine</a>* <a class="el" href="config_8c.html#0531e578786fc476487425f62c18e84c">config_engine_list</a><code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00159">159</a> of file <a class="el" href="config_8c-source.html">config.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a34eb5037042c3b4e3bcb98ec977e43e"></a><!-- doxytag: member="config.c::config_maps" ref="a34eb5037042c3b4e3bcb98ec977e43e" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config__map.html">ast_config_map</a> * <a class="el" href="config_8c.html#a34eb5037042c3b4e3bcb98ec977e43e">config_maps</a><code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="config_8c-source.html#l01055">append_mapping()</a>, <a class="el" href="config_8c-source.html#l01378">ast_realtime_enabled()</a>, <a class="el" href="config_8c-source.html#l01040">clear_config_maps()</a>, <a class="el" href="config_8c-source.html#l01449">config_command()</a>, and <a class="el" href="config_8c-source.html#l01200">find_engine()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="2eebecd119f3220c584c451fb5503460"></a><!-- doxytag: member="config.c::extconfig_conf" ref="2eebecd119f3220c584c451fb5503460" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* <a class="el" href="config_8c.html#2eebecd119f3220c584c451fb5503460">extconfig_conf</a> = &quot;extconfig.conf&quot;<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="config_8c-source.html#l00063">63</a> of file <a class="el" href="config_8c-source.html">config.c</a>.
<p>
Referenced by <a class="el" href="config_8c-source.html#l01239">ast_config_internal_load()</a>, and <a class="el" href="config_8c-source.html#l01090">read_config_maps()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2603a6c82cce02d9bd298d045f682ce"></a><!-- doxytag: member="config.c::show_config_help" ref="a2603a6c82cce02d9bd298d045f682ce" args="[]" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char <a class="el" href="config_8c.html#a2603a6c82cce02d9bd298d045f682ce">show_config_help</a>[]<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment">
   <span class="stringliteral">"Usage: core show config mappings\n"</span>
   <span class="stringliteral">"  Shows the filenames to config engines.\n"</span>
</pre></div>
<p>
Definition at line <a class="el" href="config_8c-source.html#l01472">1472</a> of file <a class="el" href="config_8c-source.html">config.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="93ac5573470c14f563763c1dc15067eb"></a><!-- doxytag: member="config.c::text_file_engine" ref="93ac5573470c14f563763c1dc15067eb" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct <a class="el" href="structast__config__engine.html">ast_config_engine</a> <a class="el" href="config_8c.html#93ac5573470c14f563763c1dc15067eb">text_file_engine</a><code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
   .name = <span class="stringliteral">"text"</span>,
   .load_func = <a class="code" href="config_8c.html#1ad340c816ddf8ebb72fb95f25629eb6">config_text_file_load</a>,
}
</pre></div>
<p>
Definition at line <a class="el" href="config_8c-source.html#l01234">1234</a> of file <a class="el" href="config_8c-source.html">config.c</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu May 24 22:27:26 2007 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
