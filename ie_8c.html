<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (24 May 2007)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Thu May 24 22:27:33 2007</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Fchannels_2F.html">channels</a>&nbsp;&raquo&nbsp;<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Fchannels_2Fmisdn_2F.html">misdn</a></div>
<h1>ie.c File Reference</h1><code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;mISDNuser/mISDNlib.h&gt;</code><br>
<code>#include &lt;mISDNuser/isdn_net.h&gt;</code><br>
<code>#include &lt;mISDNuser/l3dss1.h&gt;</code><br>
<code>#include &lt;mISDNuser/net_l3.h&gt;</code><br>

<p>
<a href="ie_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#0fef6f98ae5ed51b99a38e8d46d9f958">dec_ie_bearer</a> (unsigned char *p, Q931_info_t *qi, int *coding, int *<a class="el" href="chan__mgcp_8c.html#9a06cb435cd72d31b714e9dbb5c3d168">capability</a>, int *mode, int *rate, int *multi, int *user, int *async, int *urate, int *stopbits, int *dbits, int *parity, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#6561a321c8ed1e74c29917b4edf734ac">dec_ie_called_pn</a> (unsigned char *p, Q931_info_t *qi, int *<a class="el" href="chan__nbs_8c.html#a73364531569a868150462e5a44f29c8">type</a>, int *plan, char *<a class="el" href="structnumber.html">number</a>, int number_len, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#9612157207f40bfae9302c1fe1b6f74d">dec_ie_calling_pn</a> (unsigned char *p, Q931_info_t *qi, int *<a class="el" href="chan__nbs_8c.html#a73364531569a868150462e5a44f29c8">type</a>, int *plan, int *present, int *screen, char *<a class="el" href="structnumber.html">number</a>, int number_len, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#ab6de344435c8339cdf7a50222ce0cc9">dec_ie_cause</a> (unsigned char *p, Q931_info_t *qi, int *location, int *cause, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#f7ffd45c05696df1d53ff6c34bd94807">dec_ie_channel_id</a> (unsigned char *p, Q931_info_t *qi, int *exclusive, int *channel, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#c5e09d0f41b0e65a6550e3803dc44f4c">dec_ie_complete</a> (unsigned char *p, Q931_info_t *qi, int *complete, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#44765fe59675597997196d0f8f3f416d">dec_ie_connected_pn</a> (unsigned char *p, Q931_info_t *qi, int *<a class="el" href="chan__nbs_8c.html#a73364531569a868150462e5a44f29c8">type</a>, int *plan, int *present, int *screen, char *<a class="el" href="structnumber.html">number</a>, int number_len, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#d6f88c758d4fd75dfe6368ba4358c796">dec_ie_keypad</a> (unsigned char *p, Q931_info_t *qi, char *keypad, int keypad_len, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#300ca061d572bfb4fa9d9ff137d5e352">dec_ie_progress</a> (unsigned char *p, Q931_info_t *qi, int *coding, int *location, int *<a class="el" href="structprogress.html">progress</a>, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#2428cc2b9393852bdd416d9d951d7184">dec_ie_redir_nr</a> (unsigned char *p, Q931_info_t *qi, int *<a class="el" href="chan__nbs_8c.html#a73364531569a868150462e5a44f29c8">type</a>, int *plan, int *present, int *screen, int *reason, char *<a class="el" href="structnumber.html">number</a>, int number_len, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#c01b3a6893f5af0fc5e0d7b187dbcd12">dec_ie_useruser</a> (unsigned char *p, Q931_info_t *qi, int *protocol, char *user, int *user_len, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#3b55546ec6f9d2dbe7aa3039fb02436f">enc_ie_bearer</a> (unsigned char **ntmode, msg_t *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, int coding, int <a class="el" href="chan__mgcp_8c.html#9a06cb435cd72d31b714e9dbb5c3d168">capability</a>, int mode, int rate, int multi, int user, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#001a54c4b5e2fd10f4ea2c78588488b4">enc_ie_called_pn</a> (unsigned char **ntmode, msg_t *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, int <a class="el" href="chan__nbs_8c.html#a73364531569a868150462e5a44f29c8">type</a>, int plan, char *<a class="el" href="structnumber.html">number</a>, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#9c6c5c2d27350faebf69ca395f3dc32f">enc_ie_calling_pn</a> (unsigned char **ntmode, msg_t *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, int <a class="el" href="chan__nbs_8c.html#a73364531569a868150462e5a44f29c8">type</a>, int plan, int present, int screen, char *<a class="el" href="structnumber.html">number</a>, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#6b2ea3c898409349d50ae45a8a7ff5b3">enc_ie_cause</a> (unsigned char **ntmode, msg_t *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, int location, int cause, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#c1967fabb9af92e9b80d1188c5f7a8ab">enc_ie_channel_id</a> (unsigned char **ntmode, msg_t *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, int exclusive, int channel, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#34761a373060e468b07de0bfda869f37">enc_ie_complete</a> (unsigned char **ntmode, msg_t *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, int complete, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#739380fa95f6d66ea351e2fef95e03f3">enc_ie_connected_pn</a> (unsigned char **ntmode, msg_t *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, int <a class="el" href="chan__nbs_8c.html#a73364531569a868150462e5a44f29c8">type</a>, int plan, int present, int screen, char *<a class="el" href="structnumber.html">number</a>, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#6d5f655d3f5e294391b9f75877c60e43">enc_ie_date</a> (unsigned char **ntmode, msg_t *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, time_t ti, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#d9359b5f25df1e09b8d170af4940cc81">enc_ie_display</a> (unsigned char **ntmode, msg_t *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, char *display, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#41da125293260e9ea9e8a7659f448564">enc_ie_keypad</a> (unsigned char **ntmode, msg_t *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, char *keypad, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#1e22beda8e5fedbdb8fff5bbfbc8db91">enc_ie_progress</a> (unsigned char **ntmode, msg_t *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, int coding, int location, int <a class="el" href="structprogress.html">progress</a>, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#1f186c0ad767b7d02333156637000a10">enc_ie_redir_nr</a> (unsigned char **ntmode, msg_t *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, int <a class="el" href="chan__nbs_8c.html#a73364531569a868150462e5a44f29c8">type</a>, int plan, int present, int screen, int reason, char *<a class="el" href="structnumber.html">number</a>, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#37a8eeb33a0ee2c76373c00fd5b92c5f">enc_ie_useruser</a> (unsigned char **ntmode, msg_t *<a class="el" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, int protocol, char *user, int user_len, int nt, struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *bc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ie_8c.html#7e21d59728a48ad2fa10d1000c6edaf4">strnncpy</a> (char *dest, char *src, int len, int dst_len)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="ed1741c5169ae8a3035fbe420d758a9e"></a><!-- doxytag: member="ie.c::MISDN_IE_DEBG" ref="ed1741c5169ae8a3035fbe420d758a9e" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define MISDN_IE_DEBG&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00033">33</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
Referenced by <a class="el" href="ie_8c-source.html#l00073">dec_ie_complete()</a>, <a class="el" href="ie_8c-source.html#l00090">enc_ie_bearer()</a>, and <a class="el" href="ie_8c-source.html#l00046">enc_ie_complete()</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="0fef6f98ae5ed51b99a38e8d46d9f958"></a><!-- doxytag: member="ie.c::dec_ie_bearer" ref="0fef6f98ae5ed51b99a38e8d46d9f958" args="(unsigned char *p, Q931_info_t *qi, int *coding, int *capability, int *mode, int *rate, int *multi, int *user, int *async, int *urate, int *stopbits, int *dbits, int *parity, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void dec_ie_bearer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Q931_info_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>qi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>coding</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>capability</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>rate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>multi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>user</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>async</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>urate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>stopbits</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>dbits</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>parity</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00150">150</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00153">parse_setup()</a>.<div class="fragment"><pre class="fragment"><a name="l00152"></a>00152 {
<a name="l00153"></a>00153    <span class="keywordtype">int</span> octet;
<a name="l00154"></a>00154    *coding = -1;
<a name="l00155"></a>00155    *<a class="code" href="chan__mgcp_8c.html#9a06cb435cd72d31b714e9dbb5c3d168">capability</a> = -1;
<a name="l00156"></a>00156    *mode = -1;
<a name="l00157"></a>00157    *rate = -1;
<a name="l00158"></a>00158    *multi = -1;
<a name="l00159"></a>00159    *user = -1;
<a name="l00160"></a>00160    *async = -1;
<a name="l00161"></a>00161    *urate = -1;
<a name="l00162"></a>00162    *stopbits = -1;
<a name="l00163"></a>00163    *dbits = -1;
<a name="l00164"></a>00164    *parity = -1;
<a name="l00165"></a>00165    
<a name="l00166"></a>00166    <span class="keywordflow">if</span> (!nt)
<a name="l00167"></a>00167    {
<a name="l00168"></a>00168       p = NULL;
<a name="l00169"></a>00169 <span class="preprocessor">#ifdef LLC_SUPPORT</span>
<a name="l00170"></a>00170 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (qi-&gt;QI_ELEMENT(llc)) {
<a name="l00171"></a>00171          
<a name="l00172"></a>00172          p = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi + <span class="keyword">sizeof</span>(Q931_info_t) + qi-&gt;QI_ELEMENT(llc) + 1;
<a name="l00173"></a>00173       }
<a name="l00174"></a>00174 <span class="preprocessor">#endif</span>
<a name="l00175"></a>00175 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (qi-&gt;QI_ELEMENT(bearer_capability))
<a name="l00176"></a>00176          p = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi + <span class="keyword">sizeof</span>(Q931_info_t) + qi-&gt;QI_ELEMENT(bearer_capability) + 1;
<a name="l00177"></a>00177    }
<a name="l00178"></a>00178    <span class="keywordflow">if</span> (!p)
<a name="l00179"></a>00179       <span class="keywordflow">return</span>;
<a name="l00180"></a>00180 
<a name="l00181"></a>00181    <span class="keywordflow">if</span> (p[0] &lt; 2)
<a name="l00182"></a>00182    {
<a name="l00183"></a>00183       printf(<span class="stringliteral">"%s: ERROR: IE too short (%d).\n"</span>, __FUNCTION__, p[0]);
<a name="l00184"></a>00184       <span class="keywordflow">return</span>;
<a name="l00185"></a>00185    }
<a name="l00186"></a>00186    
<a name="l00187"></a>00187    *coding = (p[1]&amp;0x60) &gt;&gt; 5;
<a name="l00188"></a>00188    *<a class="code" href="chan__mgcp_8c.html#9a06cb435cd72d31b714e9dbb5c3d168">capability</a> = p[1] &amp; 0x1f;
<a name="l00189"></a>00189    octet = 2;
<a name="l00190"></a>00190    <span class="keywordflow">if</span> (!(p[1] &amp; 0x80))
<a name="l00191"></a>00191       octet++;
<a name="l00192"></a>00192 
<a name="l00193"></a>00193    <span class="keywordflow">if</span> (p[0] &lt; octet)
<a name="l00194"></a>00194       <span class="keywordflow">goto</span> done;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196    *mode = (p[octet]&amp;0x60) &gt;&gt; 5;
<a name="l00197"></a>00197    *rate = p[octet] &amp; 0x1f;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199    octet++;
<a name="l00200"></a>00200 
<a name="l00201"></a>00201    <span class="keywordflow">if</span> (p[0] &lt; octet)
<a name="l00202"></a>00202       <span class="keywordflow">goto</span> done;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204    <span class="keywordflow">if</span> (*rate == 0x18) {
<a name="l00205"></a>00205       <span class="comment">/* Rate multiplier only present if 64Kb/s base rate */</span>
<a name="l00206"></a>00206       *multi = p[octet++] &amp; 0x7f;
<a name="l00207"></a>00207    }
<a name="l00208"></a>00208 
<a name="l00209"></a>00209    <span class="keywordflow">if</span> (p[0] &lt; octet)
<a name="l00210"></a>00210       <span class="keywordflow">goto</span> done;
<a name="l00211"></a>00211 
<a name="l00212"></a>00212    <span class="comment">/* Start L1 info */</span>
<a name="l00213"></a>00213    <span class="keywordflow">if</span> ((p[octet] &amp; 0x60) == 0x20) {
<a name="l00214"></a>00214       *user = p[octet] &amp; 0x1f;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216       <span class="keywordflow">if</span> (p[0] &lt;= octet)
<a name="l00217"></a>00217          <span class="keywordflow">goto</span> done;
<a name="l00218"></a>00218       
<a name="l00219"></a>00219       <span class="keywordflow">if</span> (p[octet++] &amp; 0x80)
<a name="l00220"></a>00220          <span class="keywordflow">goto</span> l2;
<a name="l00221"></a>00221 
<a name="l00222"></a>00222       *async = !!(p[octet] &amp; 0x40);
<a name="l00223"></a>00223       <span class="comment">/* 0x20 is inband negotiation */</span>
<a name="l00224"></a>00224       *urate = p[octet] &amp; 0x1f;
<a name="l00225"></a>00225 
<a name="l00226"></a>00226       <span class="keywordflow">if</span> (p[0] &lt;= octet)
<a name="l00227"></a>00227          <span class="keywordflow">goto</span> done;
<a name="l00228"></a>00228       
<a name="l00229"></a>00229       <span class="keywordflow">if</span> (p[octet++] &amp; 0x80)
<a name="l00230"></a>00230          <span class="keywordflow">goto</span> l2;
<a name="l00231"></a>00231 
<a name="l00232"></a>00232       <span class="comment">/* Ignore next byte for now: Intermediate rate, NIC, flow control */</span>
<a name="l00233"></a>00233 
<a name="l00234"></a>00234       <span class="keywordflow">if</span> (p[0] &lt;= octet)
<a name="l00235"></a>00235          <span class="keywordflow">goto</span> done;
<a name="l00236"></a>00236       
<a name="l00237"></a>00237       <span class="keywordflow">if</span> (p[octet++] &amp; 0x80)
<a name="l00238"></a>00238          <span class="keywordflow">goto</span> l2;
<a name="l00239"></a>00239 
<a name="l00240"></a>00240       <span class="comment">/* And the next one. Header, multiframe, mode, assignor/ee, negotiation */</span>
<a name="l00241"></a>00241 
<a name="l00242"></a>00242       <span class="keywordflow">if</span> (p[0] &lt;= octet)
<a name="l00243"></a>00243          <span class="keywordflow">goto</span> done;
<a name="l00244"></a>00244       
<a name="l00245"></a>00245       <span class="keywordflow">if</span> (!p[octet++] &amp; 0x80)
<a name="l00246"></a>00246          <span class="keywordflow">goto</span> l2;
<a name="l00247"></a>00247 
<a name="l00248"></a>00248       <span class="comment">/* Wheee. V.110 speed information */</span>
<a name="l00249"></a>00249 
<a name="l00250"></a>00250       *stopbits = (p[octet] &amp; 0x60) &gt;&gt; 5;
<a name="l00251"></a>00251       *dbits = (p[octet] &amp; 0x18) &gt;&gt; 3; 
<a name="l00252"></a>00252       *parity = p[octet] &amp; 7;
<a name="l00253"></a>00253 
<a name="l00254"></a>00254       octet++;
<a name="l00255"></a>00255    }
<a name="l00256"></a>00256  l2: <span class="comment">/* Nobody seems to want the rest so we don't bother (yet) */</span>
<a name="l00257"></a>00257  done:      
<a name="l00258"></a>00258    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    coding=%d capability=%d mode=%d rate=%d multi=%d user=%d async=%d urate=%d stopbits=%d dbits=%d parity=%d\n"</span>, *coding, *<a class="code" href="chan__mgcp_8c.html#9a06cb435cd72d31b714e9dbb5c3d168">capability</a>, *mode, *rate, *multi, *user, *async, *urate, *stopbits, *dbits, *parity);
<a name="l00259"></a>00259 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="6561a321c8ed1e74c29917b4edf734ac"></a><!-- doxytag: member="ie.c::dec_ie_called_pn" ref="6561a321c8ed1e74c29917b4edf734ac" args="(unsigned char *p, Q931_info_t *qi, int *type, int *plan, char *number, int number_len, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void dec_ie_called_pn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Q931_info_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>qi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>plan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>number</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>number_len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00377">377</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
References <a class="el" href="ie_8c-source.html#l00036">strnncpy()</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l01032">parse_information()</a>, and <a class="el" href="isdn__msg__parser_8c-source.html#l00153">parse_setup()</a>.<div class="fragment"><pre class="fragment"><a name="l00378"></a>00378 {
<a name="l00379"></a>00379    *<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a> = -1;
<a name="l00380"></a>00380    *plan = -1;
<a name="l00381"></a>00381    *<a class="code" href="structnumber.html">number</a> = <span class="charliteral">'\0'</span>;
<a name="l00382"></a>00382 
<a name="l00383"></a>00383    <span class="keywordflow">if</span> (!nt)
<a name="l00384"></a>00384    {
<a name="l00385"></a>00385       p = NULL;
<a name="l00386"></a>00386       <span class="keywordflow">if</span> (qi-&gt;QI_ELEMENT(called_nr))
<a name="l00387"></a>00387          p = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi + <span class="keyword">sizeof</span>(Q931_info_t) + qi-&gt;QI_ELEMENT(called_nr) + 1;
<a name="l00388"></a>00388    }
<a name="l00389"></a>00389    <span class="keywordflow">if</span> (!p)
<a name="l00390"></a>00390       <span class="keywordflow">return</span>;
<a name="l00391"></a>00391    <span class="keywordflow">if</span> (p[0] &lt; 2)
<a name="l00392"></a>00392    {
<a name="l00393"></a>00393       printf(<span class="stringliteral">"%s: ERROR: IE too short (%d).\n"</span>, __FUNCTION__, p[0]);
<a name="l00394"></a>00394       <span class="keywordflow">return</span>;
<a name="l00395"></a>00395    }
<a name="l00396"></a>00396 
<a name="l00397"></a>00397    *<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a> = (p[1]&amp;0x70) &gt;&gt; 4;
<a name="l00398"></a>00398    *plan = p[1] &amp; 0xf;
<a name="l00399"></a>00399    <a class="code" href="ie_8c.html#7e21d59728a48ad2fa10d1000c6edaf4">strnncpy</a>(<a class="code" href="structnumber.html">number</a>, (<span class="keywordtype">char</span> *)p+2, p[0]-1, number_len);
<a name="l00400"></a>00400 
<a name="l00401"></a>00401    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    type=%d plan=%d number='%s'\n"</span>, *<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>, *plan, number);
<a name="l00402"></a>00402 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="9612157207f40bfae9302c1fe1b6f74d"></a><!-- doxytag: member="ie.c::dec_ie_calling_pn" ref="9612157207f40bfae9302c1fe1b6f74d" args="(unsigned char *p, Q931_info_t *qi, int *type, int *plan, int *present, int *screen, char *number, int number_len, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void dec_ie_calling_pn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Q931_info_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>qi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>plan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>present</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>screen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>number</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>number_len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00461">461</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
References <a class="el" href="ie_8c-source.html#l00036">strnncpy()</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00153">parse_setup()</a>.<div class="fragment"><pre class="fragment"><a name="l00462"></a>00462 {
<a name="l00463"></a>00463    *<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a> = -1;
<a name="l00464"></a>00464    *plan = -1;
<a name="l00465"></a>00465    *present = -1;
<a name="l00466"></a>00466    *screen = -1;
<a name="l00467"></a>00467    *<a class="code" href="structnumber.html">number</a> = <span class="charliteral">'\0'</span>;
<a name="l00468"></a>00468 
<a name="l00469"></a>00469    <span class="keywordflow">if</span> (!nt)
<a name="l00470"></a>00470    {
<a name="l00471"></a>00471       p = NULL;
<a name="l00472"></a>00472       <span class="keywordflow">if</span> (qi-&gt;QI_ELEMENT(calling_nr))
<a name="l00473"></a>00473          p = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi + <span class="keyword">sizeof</span>(Q931_info_t) + qi-&gt;QI_ELEMENT(calling_nr) + 1;
<a name="l00474"></a>00474    }
<a name="l00475"></a>00475    <span class="keywordflow">if</span> (!p)
<a name="l00476"></a>00476       <span class="keywordflow">return</span>;
<a name="l00477"></a>00477    <span class="keywordflow">if</span> (p[0] &lt; 1)
<a name="l00478"></a>00478    {
<a name="l00479"></a>00479       printf(<span class="stringliteral">"%s: ERROR: IE too short (%d).\n"</span>, __FUNCTION__, p[0]);
<a name="l00480"></a>00480       <span class="keywordflow">return</span>;
<a name="l00481"></a>00481    }
<a name="l00482"></a>00482 
<a name="l00483"></a>00483    *<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a> = (p[1]&amp;0x70) &gt;&gt; 4;
<a name="l00484"></a>00484    *plan = p[1] &amp; 0xf;
<a name="l00485"></a>00485    <span class="keywordflow">if</span> (!(p[1] &amp; 0x80))
<a name="l00486"></a>00486    {
<a name="l00487"></a>00487       <span class="keywordflow">if</span> (p[0] &lt; 2)
<a name="l00488"></a>00488       {
<a name="l00489"></a>00489          printf(<span class="stringliteral">"%s: ERROR: IE too short (%d).\n"</span>, __FUNCTION__, p[0]);
<a name="l00490"></a>00490          <span class="keywordflow">return</span>;
<a name="l00491"></a>00491       }
<a name="l00492"></a>00492       *present = (p[2]&amp;0x60) &gt;&gt; 5;
<a name="l00493"></a>00493       *screen = p[2] &amp; 0x3;
<a name="l00494"></a>00494       <a class="code" href="ie_8c.html#7e21d59728a48ad2fa10d1000c6edaf4">strnncpy</a>(<a class="code" href="structnumber.html">number</a>, (<span class="keywordtype">char</span> *)p+3, p[0]-2, number_len);
<a name="l00495"></a>00495    } <span class="keywordflow">else</span>
<a name="l00496"></a>00496    {
<a name="l00497"></a>00497       <a class="code" href="ie_8c.html#7e21d59728a48ad2fa10d1000c6edaf4">strnncpy</a>(number, (<span class="keywordtype">char</span> *)p+2, p[0]-1, number_len);
<a name="l00498"></a>00498       <span class="comment">/* SPECIAL workarround for IBT software bug */</span> 
<a name="l00499"></a>00499       <span class="comment">/* if (number[0]==0x80) */</span>
<a name="l00500"></a>00500       <span class="comment">/*  strcpy((char *)number, (char *)number+1); */</span>
<a name="l00501"></a>00501    }
<a name="l00502"></a>00502 
<a name="l00503"></a>00503    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    type=%d plan=%d present=%d screen=%d number='%s'\n"</span>, *<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>, *plan, *present, *screen, number);
<a name="l00504"></a>00504 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ab6de344435c8339cdf7a50222ce0cc9"></a><!-- doxytag: member="ie.c::dec_ie_cause" ref="ab6de344435c8339cdf7a50222ce0cc9" args="(unsigned char *p, Q931_info_t *qi, int *location, int *cause, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void dec_ie_cause           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Q931_info_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>qi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>location</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>cause</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00654">654</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00773">parse_disconnect()</a>, <a class="el" href="isdn__msg__parser_8c-source.html#l00844">parse_release()</a>, <a class="el" href="isdn__msg__parser_8c-source.html#l00877">parse_release_complete()</a>, and <a class="el" href="isdn__msg__parser_8c-source.html#l01075">parse_status()</a>.<div class="fragment"><pre class="fragment"><a name="l00655"></a>00655 {
<a name="l00656"></a>00656    *location = -1;
<a name="l00657"></a>00657    *cause = -1;
<a name="l00658"></a>00658 
<a name="l00659"></a>00659    <span class="keywordflow">if</span> (!nt)
<a name="l00660"></a>00660    {
<a name="l00661"></a>00661       p = NULL;
<a name="l00662"></a>00662       <span class="keywordflow">if</span> (qi-&gt;QI_ELEMENT(cause))
<a name="l00663"></a>00663          p = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi + <span class="keyword">sizeof</span>(Q931_info_t) + qi-&gt;QI_ELEMENT(cause) + 1;
<a name="l00664"></a>00664    }
<a name="l00665"></a>00665    <span class="keywordflow">if</span> (!p)
<a name="l00666"></a>00666       <span class="keywordflow">return</span>;
<a name="l00667"></a>00667    <span class="keywordflow">if</span> (p[0] &lt; 2)
<a name="l00668"></a>00668    {
<a name="l00669"></a>00669       printf(<span class="stringliteral">"%s: ERROR: IE too short (%d).\n"</span>, __FUNCTION__, p[0]);
<a name="l00670"></a>00670       <span class="keywordflow">return</span>;
<a name="l00671"></a>00671    }
<a name="l00672"></a>00672 
<a name="l00673"></a>00673    *location = p[1] &amp; 0x0f;
<a name="l00674"></a>00674    *cause = p[2] &amp; 0x7f;
<a name="l00675"></a>00675 
<a name="l00676"></a>00676    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    location=%d cause=%d\n"</span>, *location, *cause);
<a name="l00677"></a>00677 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="f7ffd45c05696df1d53ff6c34bd94807"></a><!-- doxytag: member="ie.c::dec_ie_channel_id" ref="f7ffd45c05696df1d53ff6c34bd94807" args="(unsigned char *p, Q931_info_t *qi, int *exclusive, int *channel, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void dec_ie_channel_id           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Q931_info_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>qi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>exclusive</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>channel</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00756">756</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
References <a class="el" href="isdn__lib_8c-source.html#l00104">get_stack_by_bc()</a>, and <a class="el" href="isdn__lib__intern_8h-source.html#l00085">misdn_stack::pri</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00051">parse_proceeding()</a>, <a class="el" href="isdn__msg__parser_8c-source.html#l00807">parse_restart()</a>, and <a class="el" href="isdn__msg__parser_8c-source.html#l00408">parse_setup_acknowledge()</a>.<div class="fragment"><pre class="fragment"><a name="l00757"></a>00757 {
<a name="l00758"></a>00758    <span class="keyword">struct </span><a class="code" href="structmisdn__stack.html">misdn_stack</a> *stack=<a class="code" href="isdn__lib_8c.html#c09088b742125e27f2bd18f9bddf80d7">get_stack_by_bc</a>(bc);
<a name="l00759"></a>00759    <span class="keywordtype">int</span> <a class="code" href="structmisdn__stack.html#e060bb629c10e1b143614cc1e9ccdc67">pri</a> =stack-&gt;<a class="code" href="structmisdn__stack.html#e060bb629c10e1b143614cc1e9ccdc67">pri</a>;
<a name="l00760"></a>00760 
<a name="l00761"></a>00761    *exclusive = -1;
<a name="l00762"></a>00762    *channel = -1;
<a name="l00763"></a>00763 
<a name="l00764"></a>00764    <span class="keywordflow">if</span> (!<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l00765"></a>00765    {
<a name="l00766"></a>00766       p = NULL;
<a name="l00767"></a>00767       <span class="keywordflow">if</span> (qi-&gt;QI_ELEMENT(channel_id))
<a name="l00768"></a>00768          p = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi + <span class="keyword">sizeof</span>(Q931_info_t) + qi-&gt;QI_ELEMENT(channel_id) + 1;
<a name="l00769"></a>00769    }
<a name="l00770"></a>00770    <span class="keywordflow">if</span> (!p)
<a name="l00771"></a>00771       <span class="keywordflow">return</span>;
<a name="l00772"></a>00772    <span class="keywordflow">if</span> (p[0] &lt; 1)
<a name="l00773"></a>00773    {
<a name="l00774"></a>00774       printf(<span class="stringliteral">"%s: ERROR: IE too short (%d).\n"</span>, __FUNCTION__, p[0]);
<a name="l00775"></a>00775       <span class="keywordflow">return</span>;
<a name="l00776"></a>00776    }
<a name="l00777"></a>00777 
<a name="l00778"></a>00778    <span class="keywordflow">if</span> (p[1] &amp; 0x40)
<a name="l00779"></a>00779    {
<a name="l00780"></a>00780       printf(<span class="stringliteral">"%s: ERROR: refering to channels of other interfaces is not supported.\n"</span>, __FUNCTION__);
<a name="l00781"></a>00781       <span class="keywordflow">return</span>;
<a name="l00782"></a>00782    }
<a name="l00783"></a>00783    <span class="keywordflow">if</span> (p[1] &amp; 0x04)
<a name="l00784"></a>00784    {
<a name="l00785"></a>00785       printf(<span class="stringliteral">"%s: ERROR: using d-channel is not supported.\n"</span>, __FUNCTION__);
<a name="l00786"></a>00786       <span class="keywordflow">return</span>;
<a name="l00787"></a>00787    }
<a name="l00788"></a>00788 
<a name="l00789"></a>00789    *exclusive = (p[1]&amp;0x08) &gt;&gt; 3;
<a name="l00790"></a>00790    <span class="keywordflow">if</span> (!pri)
<a name="l00791"></a>00791    {
<a name="l00792"></a>00792       <span class="comment">/* BRI */</span>
<a name="l00793"></a>00793       <span class="keywordflow">if</span> (p[1] &amp; 0x20)
<a name="l00794"></a>00794       {
<a name="l00795"></a>00795          printf(<span class="stringliteral">"%s: ERROR: extended channel ID with non PRI interface.\n"</span>, __FUNCTION__);
<a name="l00796"></a>00796          <span class="keywordflow">return</span>;
<a name="l00797"></a>00797       }
<a name="l00798"></a>00798       *channel = p[1] &amp; 0x03;
<a name="l00799"></a>00799       <span class="keywordflow">if</span> (*channel == 3)
<a name="l00800"></a>00800          *channel = 0xff;
<a name="l00801"></a>00801    } <span class="keywordflow">else</span>
<a name="l00802"></a>00802    {
<a name="l00803"></a>00803       <span class="comment">/* PRI */</span>
<a name="l00804"></a>00804       <span class="keywordflow">if</span> (p[0] &lt; 1)
<a name="l00805"></a>00805       {
<a name="l00806"></a>00806          printf(<span class="stringliteral">"%s: ERROR: IE too short for PRI (%d).\n"</span>, __FUNCTION__, p[0]);
<a name="l00807"></a>00807          <span class="keywordflow">return</span>;
<a name="l00808"></a>00808       }
<a name="l00809"></a>00809       <span class="keywordflow">if</span> (!(p[1] &amp; 0x20))
<a name="l00810"></a>00810       {
<a name="l00811"></a>00811          printf(<span class="stringliteral">"%s: ERROR: basic channel ID with PRI interface.\n"</span>, __FUNCTION__);
<a name="l00812"></a>00812          <span class="keywordflow">return</span>;
<a name="l00813"></a>00813       }
<a name="l00814"></a>00814       <span class="keywordflow">if</span> ((p[1]&amp;0x03) == 0x00)
<a name="l00815"></a>00815       {
<a name="l00816"></a>00816          <span class="comment">/* no channel */</span>
<a name="l00817"></a>00817          *channel = 0;
<a name="l00818"></a>00818          <span class="keywordflow">return</span>;
<a name="l00819"></a>00819       }
<a name="l00820"></a>00820       <span class="keywordflow">if</span> ((p[1]&amp;0x03) == 0x03)
<a name="l00821"></a>00821       {
<a name="l00822"></a>00822          <span class="comment">/* any channel */</span>
<a name="l00823"></a>00823          *channel = 0xff;
<a name="l00824"></a>00824          <span class="keywordflow">return</span>;
<a name="l00825"></a>00825       }
<a name="l00826"></a>00826       <span class="keywordflow">if</span> (p[0] &lt; 3)
<a name="l00827"></a>00827       {
<a name="l00828"></a>00828          printf(<span class="stringliteral">"%s: ERROR: IE too short for PRI with channel(%d).\n"</span>, __FUNCTION__, p[0]);
<a name="l00829"></a>00829          <span class="keywordflow">return</span>;
<a name="l00830"></a>00830       }
<a name="l00831"></a>00831       <span class="keywordflow">if</span> (p[2] &amp; 0x10)
<a name="l00832"></a>00832       {
<a name="l00833"></a>00833          printf(<span class="stringliteral">"%s: ERROR: channel map not supported.\n"</span>, __FUNCTION__);
<a name="l00834"></a>00834          <span class="keywordflow">return</span>;
<a name="l00835"></a>00835       }
<a name="l00836"></a>00836       *channel = p[3] &amp; 0x7f;
<a name="l00837"></a>00837       <span class="keywordflow">if</span> ( (*channel&lt;1) | (*channel==16) | (*channel&gt;31))
<a name="l00838"></a>00838       {
<a name="l00839"></a>00839          printf(<span class="stringliteral">"%s: ERROR: PRI interface channel out of range (%d).\n"</span>, __FUNCTION__, *channel);
<a name="l00840"></a>00840          <span class="keywordflow">return</span>;
<a name="l00841"></a>00841       }
<a name="l00842"></a>00842 <span class="comment">/*       if (MISDN_IE_DEBG) printf("%02x %02x %02x\n", p[1], p[2], p[3]); */</span>
<a name="l00843"></a>00843    }
<a name="l00844"></a>00844 
<a name="l00845"></a>00845    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    exclusive=%d channel=%d\n"</span>, *exclusive, *channel);
<a name="l00846"></a>00846 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c5e09d0f41b0e65a6550e3803dc44f4c"></a><!-- doxytag: member="ie.c::dec_ie_complete" ref="c5e09d0f41b0e65a6550e3803dc44f4c" args="(unsigned char *p, Q931_info_t *qi, int *complete, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void dec_ie_complete           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Q931_info_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>qi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>complete</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00073">73</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
References <a class="el" href="ie_8c-source.html#l00033">MISDN_IE_DEBG</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00153">parse_setup()</a>.<div class="fragment"><pre class="fragment"><a name="l00074"></a>00074 {
<a name="l00075"></a>00075    *complete = 0;
<a name="l00076"></a>00076    <span class="keywordflow">if</span> (!<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l00077"></a>00077    {
<a name="l00078"></a>00078       <span class="keywordflow">if</span> (qi-&gt;QI_ELEMENT(sending_complete))
<a name="l00079"></a>00079          *complete = 1;
<a name="l00080"></a>00080    } <span class="keywordflow">else</span>
<a name="l00081"></a>00081       <span class="keywordflow">if</span> (p)
<a name="l00082"></a>00082          *complete = 1;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084    <span class="keywordflow">if</span> (*complete)
<a name="l00085"></a>00085       <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    complete=%d\n"</span>, *complete);
<a name="l00086"></a>00086 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="44765fe59675597997196d0f8f3f416d"></a><!-- doxytag: member="ie.c::dec_ie_connected_pn" ref="44765fe59675597997196d0f8f3f416d" args="(unsigned char *p, Q931_info_t *qi, int *type, int *plan, int *present, int *screen, char *number, int number_len, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void dec_ie_connected_pn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Q931_info_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>qi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>plan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>present</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>screen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>number</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>number_len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00563">563</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
References <a class="el" href="ie_8c-source.html#l00036">strnncpy()</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00358">parse_connect()</a>.<div class="fragment"><pre class="fragment"><a name="l00564"></a>00564 {
<a name="l00565"></a>00565    *<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a> = -1;
<a name="l00566"></a>00566    *plan = -1;
<a name="l00567"></a>00567    *present = -1;
<a name="l00568"></a>00568    *screen = -1;
<a name="l00569"></a>00569    *<a class="code" href="structnumber.html">number</a> = <span class="charliteral">'\0'</span>;
<a name="l00570"></a>00570 
<a name="l00571"></a>00571    <span class="keywordflow">if</span> (!<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l00572"></a>00572    {
<a name="l00573"></a>00573       p = NULL;
<a name="l00574"></a>00574       <span class="keywordflow">if</span> (qi-&gt;QI_ELEMENT(connected_nr))
<a name="l00575"></a>00575          p = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi + <span class="keyword">sizeof</span>(Q931_info_t) + qi-&gt;QI_ELEMENT(connected_nr) + 1;
<a name="l00576"></a>00576    }
<a name="l00577"></a>00577    <span class="keywordflow">if</span> (!p)
<a name="l00578"></a>00578       <span class="keywordflow">return</span>;
<a name="l00579"></a>00579    <span class="keywordflow">if</span> (p[0] &lt; 1)
<a name="l00580"></a>00580    {
<a name="l00581"></a>00581       printf(<span class="stringliteral">"%s: ERROR: IE too short (%d).\n"</span>, __FUNCTION__, p[0]);
<a name="l00582"></a>00582       <span class="keywordflow">return</span>;
<a name="l00583"></a>00583    }
<a name="l00584"></a>00584 
<a name="l00585"></a>00585    *<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a> = (p[1]&amp;0x70) &gt;&gt; 4;
<a name="l00586"></a>00586    *plan = p[1] &amp; 0xf;
<a name="l00587"></a>00587    <span class="keywordflow">if</span> (!(p[1] &amp; 0x80))
<a name="l00588"></a>00588    {
<a name="l00589"></a>00589       <span class="keywordflow">if</span> (p[0] &lt; 2)
<a name="l00590"></a>00590       {
<a name="l00591"></a>00591          printf(<span class="stringliteral">"%s: ERROR: IE too short (%d).\n"</span>, __FUNCTION__, p[0]);
<a name="l00592"></a>00592          <span class="keywordflow">return</span>;
<a name="l00593"></a>00593       }
<a name="l00594"></a>00594       *present = (p[2]&amp;0x60) &gt;&gt; 5;
<a name="l00595"></a>00595       *screen = p[2] &amp; 0x3;
<a name="l00596"></a>00596       <a class="code" href="ie_8c.html#7e21d59728a48ad2fa10d1000c6edaf4">strnncpy</a>(<a class="code" href="structnumber.html">number</a>, (<span class="keywordtype">char</span> *)p+3, p[0]-2, number_len);
<a name="l00597"></a>00597    } <span class="keywordflow">else</span>
<a name="l00598"></a>00598    {
<a name="l00599"></a>00599       <a class="code" href="ie_8c.html#7e21d59728a48ad2fa10d1000c6edaf4">strnncpy</a>(number, (<span class="keywordtype">char</span> *)p+2, p[0]-1, number_len);
<a name="l00600"></a>00600    }
<a name="l00601"></a>00601 
<a name="l00602"></a>00602    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    type=%d plan=%d present=%d screen=%d number='%s'\n"</span>, *<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>, *plan, *present, *screen, number);
<a name="l00603"></a>00603 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d6f88c758d4fd75dfe6368ba4358c796"></a><!-- doxytag: member="ie.c::dec_ie_keypad" ref="d6f88c758d4fd75dfe6368ba4358c796" args="(unsigned char *p, Q931_info_t *qi, char *keypad, int keypad_len, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void dec_ie_keypad           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Q931_info_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>qi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>keypad</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>keypad_len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00968">968</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
References <a class="el" href="ie_8c-source.html#l00036">strnncpy()</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l01032">parse_information()</a>, and <a class="el" href="isdn__msg__parser_8c-source.html#l00153">parse_setup()</a>.<div class="fragment"><pre class="fragment"><a name="l00969"></a>00969 {
<a name="l00970"></a>00970    *keypad = <span class="charliteral">'\0'</span>;
<a name="l00971"></a>00971 
<a name="l00972"></a>00972    <span class="keywordflow">if</span> (!<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l00973"></a>00973    {
<a name="l00974"></a>00974       p = NULL;
<a name="l00975"></a>00975       <span class="keywordflow">if</span> (qi-&gt;QI_ELEMENT(keypad))
<a name="l00976"></a>00976          p = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi + <span class="keyword">sizeof</span>(Q931_info_t) + qi-&gt;QI_ELEMENT(keypad) + 1;
<a name="l00977"></a>00977    }
<a name="l00978"></a>00978    <span class="keywordflow">if</span> (!p)
<a name="l00979"></a>00979       <span class="keywordflow">return</span>;
<a name="l00980"></a>00980    <span class="keywordflow">if</span> (p[0] &lt; 1)
<a name="l00981"></a>00981    {
<a name="l00982"></a>00982       printf(<span class="stringliteral">"%s: ERROR: IE too short (%d).\n"</span>, __FUNCTION__, p[0]);
<a name="l00983"></a>00983       <span class="keywordflow">return</span>;
<a name="l00984"></a>00984    }
<a name="l00985"></a>00985 
<a name="l00986"></a>00986    <a class="code" href="ie_8c.html#7e21d59728a48ad2fa10d1000c6edaf4">strnncpy</a>(keypad, (<span class="keywordtype">char</span> *)p+1, p[0], keypad_len);
<a name="l00987"></a>00987 
<a name="l00988"></a>00988    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    keypad='%s'\n"</span>, keypad);
<a name="l00989"></a>00989 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="300ca061d572bfb4fa9d9ff137d5e352"></a><!-- doxytag: member="ie.c::dec_ie_progress" ref="300ca061d572bfb4fa9d9ff137d5e352" args="(unsigned char *p, Q931_info_t *qi, int *coding, int *location, int *progress, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void dec_ie_progress           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Q931_info_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>qi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>coding</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>location</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>progress</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l01083">1083</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00092">parse_alerting()</a>, <a class="el" href="isdn__msg__parser_8c-source.html#l00358">parse_connect()</a>, <a class="el" href="isdn__msg__parser_8c-source.html#l00773">parse_disconnect()</a>, <a class="el" href="isdn__msg__parser_8c-source.html#l00051">parse_proceeding()</a>, <a class="el" href="isdn__msg__parser_8c-source.html#l00126">parse_progress()</a>, and <a class="el" href="isdn__msg__parser_8c-source.html#l00408">parse_setup_acknowledge()</a>.<div class="fragment"><pre class="fragment"><a name="l01084"></a>01084 {
<a name="l01085"></a>01085    *coding = -1;
<a name="l01086"></a>01086    *location = -1;
<a name="l01087"></a>01087    <span class="comment">//*progress = -1;</span>
<a name="l01088"></a>01088    *<a class="code" href="structprogress.html">progress</a> = 0;
<a name="l01089"></a>01089    
<a name="l01090"></a>01090    <span class="keywordflow">if</span> (!<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l01091"></a>01091    {
<a name="l01092"></a>01092       p = NULL;
<a name="l01093"></a>01093       <span class="keywordflow">if</span> (qi-&gt;QI_ELEMENT(<a class="code" href="structprogress.html">progress</a>))
<a name="l01094"></a>01094          p = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi + <span class="keyword">sizeof</span>(Q931_info_t) + qi-&gt;QI_ELEMENT(<a class="code" href="structprogress.html">progress</a>) + 1;
<a name="l01095"></a>01095    }
<a name="l01096"></a>01096    <span class="keywordflow">if</span> (!p)
<a name="l01097"></a>01097       <span class="keywordflow">return</span>;
<a name="l01098"></a>01098    <span class="keywordflow">if</span> (p[0] &lt; 1)
<a name="l01099"></a>01099    {
<a name="l01100"></a>01100       printf(<span class="stringliteral">"%s: ERROR: IE too short (%d).\n"</span>, __FUNCTION__, p[0]);
<a name="l01101"></a>01101       <span class="keywordflow">return</span>;
<a name="l01102"></a>01102    }
<a name="l01103"></a>01103 
<a name="l01104"></a>01104    *coding = (p[1]&amp;0x60) &gt;&gt; 5;
<a name="l01105"></a>01105    *location = p[1] &amp; 0x0f;
<a name="l01106"></a>01106    *<a class="code" href="structprogress.html">progress</a> = p[2] &amp; 0x7f;
<a name="l01107"></a>01107 
<a name="l01108"></a>01108    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    coding=%d location=%d progress=%d\n"</span>, *coding, *location, *<a class="code" href="structprogress.html">progress</a>);
<a name="l01109"></a>01109 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="2428cc2b9393852bdd416d9d951d7184"></a><!-- doxytag: member="ie.c::dec_ie_redir_nr" ref="2428cc2b9393852bdd416d9d951d7184" args="(unsigned char *p, Q931_info_t *qi, int *type, int *plan, int *present, int *screen, int *reason, char *number, int number_len, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void dec_ie_redir_nr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Q931_info_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>qi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>plan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>present</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>screen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>reason</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>number</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>number_len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l01187">1187</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
References <a class="el" href="ie_8c-source.html#l00036">strnncpy()</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00153">parse_setup()</a>.<div class="fragment"><pre class="fragment"><a name="l01188"></a>01188 {
<a name="l01189"></a>01189    *<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a> = -1;
<a name="l01190"></a>01190    *plan = -1;
<a name="l01191"></a>01191    *present = -1;
<a name="l01192"></a>01192    *screen = -1;
<a name="l01193"></a>01193    *reason = -1;
<a name="l01194"></a>01194    *<a class="code" href="structnumber.html">number</a> = <span class="charliteral">'\0'</span>;
<a name="l01195"></a>01195 
<a name="l01196"></a>01196    <span class="keywordflow">if</span> (!<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l01197"></a>01197    {
<a name="l01198"></a>01198       p = NULL;
<a name="l01199"></a>01199       <span class="keywordflow">if</span> (qi-&gt;QI_ELEMENT(redirect_nr))
<a name="l01200"></a>01200          p = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi + <span class="keyword">sizeof</span>(Q931_info_t) + qi-&gt;QI_ELEMENT(redirect_nr) + 1;
<a name="l01201"></a>01201    }
<a name="l01202"></a>01202    <span class="keywordflow">if</span> (!p)
<a name="l01203"></a>01203       <span class="keywordflow">return</span>;
<a name="l01204"></a>01204    <span class="keywordflow">if</span> (p[0] &lt; 1)
<a name="l01205"></a>01205    {
<a name="l01206"></a>01206       printf(<span class="stringliteral">"%s: ERROR: IE too short (%d).\n"</span>, __FUNCTION__, p[0]);
<a name="l01207"></a>01207       <span class="keywordflow">return</span>;
<a name="l01208"></a>01208    }
<a name="l01209"></a>01209 
<a name="l01210"></a>01210    *<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a> = (p[1]&amp;0x70) &gt;&gt; 4;
<a name="l01211"></a>01211    *plan = p[1] &amp; 0xf;
<a name="l01212"></a>01212    <span class="keywordflow">if</span> (!(p[1] &amp; 0x80))
<a name="l01213"></a>01213    {
<a name="l01214"></a>01214       *present = (p[2]&amp;0x60) &gt;&gt; 5;
<a name="l01215"></a>01215       *screen = p[2] &amp; 0x3;
<a name="l01216"></a>01216       <span class="keywordflow">if</span> (!(p[2] &amp; 0x80))
<a name="l01217"></a>01217       {
<a name="l01218"></a>01218          *reason = p[3] &amp; 0x0f;
<a name="l01219"></a>01219          <a class="code" href="ie_8c.html#7e21d59728a48ad2fa10d1000c6edaf4">strnncpy</a>(<a class="code" href="structnumber.html">number</a>, (<span class="keywordtype">char</span> *)p+4, p[0]-3, number_len);
<a name="l01220"></a>01220       } <span class="keywordflow">else</span>
<a name="l01221"></a>01221       {
<a name="l01222"></a>01222          <a class="code" href="ie_8c.html#7e21d59728a48ad2fa10d1000c6edaf4">strnncpy</a>(<a class="code" href="structnumber.html">number</a>, (<span class="keywordtype">char</span> *)p+3, p[0]-2, number_len);
<a name="l01223"></a>01223       }
<a name="l01224"></a>01224    } <span class="keywordflow">else</span>
<a name="l01225"></a>01225    {
<a name="l01226"></a>01226       <a class="code" href="ie_8c.html#7e21d59728a48ad2fa10d1000c6edaf4">strnncpy</a>(<a class="code" href="structnumber.html">number</a>, (<span class="keywordtype">char</span> *)p+2, p[0]-1, number_len);
<a name="l01227"></a>01227    }
<a name="l01228"></a>01228 
<a name="l01229"></a>01229    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    type=%d plan=%d present=%d screen=%d reason=%d number='%s'\n"</span>, *<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>, *plan, *present, *screen, *reason, <a class="code" href="structnumber.html">number</a>);
<a name="l01230"></a>01230 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c01b3a6893f5af0fc5e0d7b187dbcd12"></a><!-- doxytag: member="ie.c::dec_ie_useruser" ref="c01b3a6893f5af0fc5e0d7b187dbcd12" args="(unsigned char *p, Q931_info_t *qi, int *protocol, char *user, int *user_len, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void dec_ie_useruser           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>p</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Q931_info_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>qi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>protocol</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>user</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>user_len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l01370">1370</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.<div class="fragment"><pre class="fragment"><a name="l01371"></a>01371 {
<a name="l01372"></a>01372    <span class="keywordtype">char</span> <a class="code" href="app__rpt_8c.html#ad42f6697b035b7580e4fef93be20b4d">debug</a>[768];
<a name="l01373"></a>01373    <span class="keywordtype">int</span> i;
<a name="l01374"></a>01374 
<a name="l01375"></a>01375    *user_len = 0;
<a name="l01376"></a>01376    *protocol = -1;
<a name="l01377"></a>01377 
<a name="l01378"></a>01378    <span class="keywordflow">if</span> (!<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l01379"></a>01379    {
<a name="l01380"></a>01380       p = NULL;
<a name="l01381"></a>01381       <span class="keywordflow">if</span> (qi-&gt;QI_ELEMENT(useruser))
<a name="l01382"></a>01382          p = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi + <span class="keyword">sizeof</span>(Q931_info_t) + qi-&gt;QI_ELEMENT(useruser) + 1;
<a name="l01383"></a>01383    }
<a name="l01384"></a>01384    <span class="keywordflow">if</span> (!p)
<a name="l01385"></a>01385       <span class="keywordflow">return</span>;
<a name="l01386"></a>01386 
<a name="l01387"></a>01387    *user_len = p[0]-1;
<a name="l01388"></a>01388    <span class="keywordflow">if</span> (p[0] &lt; 1)
<a name="l01389"></a>01389       <span class="keywordflow">return</span>;
<a name="l01390"></a>01390    *protocol = p[1];
<a name="l01391"></a>01391    memcpy(user, p+2, (*user_len&lt;=128)?*(user_len):128); <span class="comment">/* clip to 128 maximum */</span>
<a name="l01392"></a>01392 
<a name="l01393"></a>01393    i = 0;
<a name="l01394"></a>01394    <span class="keywordflow">while</span>(i &lt; *user_len)
<a name="l01395"></a>01395    {
<a name="l01396"></a>01396       <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(debug+(i*3), <span class="stringliteral">" %02x"</span>, user[i]);
<a name="l01397"></a>01397       i++;
<a name="l01398"></a>01398    }
<a name="l01399"></a>01399    debug[i*3] = <span class="charliteral">'\0'</span>;
<a name="l01400"></a>01400       
<a name="l01401"></a>01401    <span class="keywordflow">if</span> (MISDN_IE_DEBG) printf(<span class="stringliteral">"    protocol=%d user-user%s\n"</span>, *protocol, debug);
<a name="l01402"></a>01402 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="3b55546ec6f9d2dbe7aa3039fb02436f"></a><!-- doxytag: member="ie.c::enc_ie_bearer" ref="3b55546ec6f9d2dbe7aa3039fb02436f" args="(unsigned char **ntmode, msg_t *msg, int coding, int capability, int mode, int rate, int multi, int user, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void enc_ie_bearer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char **&nbsp;</td>
          <td class="mdname" nowrap> <em>ntmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>msg_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>coding</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>capability</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>rate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>multi</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>user</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00090">90</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
References <a class="el" href="ie_8c-source.html#l00033">MISDN_IE_DEBG</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00269">build_setup()</a>.<div class="fragment"><pre class="fragment"><a name="l00091"></a>00091 {
<a name="l00092"></a>00092    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;
<a name="l00093"></a>00093    Q931_info_t *qi = (Q931_info_t *)(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>-&gt;<a class="code" href="structast__channel.html#8d777f385d3dfec8815d20f7496026dc">data</a> + mISDN_HEADER_LEN);
<a name="l00094"></a>00094    <span class="keywordtype">int</span> l;
<a name="l00095"></a>00095 
<a name="l00096"></a>00096    <span class="keywordflow">if</span> (coding&lt;0 || coding&gt;3)
<a name="l00097"></a>00097    {
<a name="l00098"></a>00098       printf(<span class="stringliteral">"%s: ERROR: coding(%d) is out of range.\n"</span>, __FUNCTION__, coding);
<a name="l00099"></a>00099       <span class="keywordflow">return</span>;
<a name="l00100"></a>00100    }
<a name="l00101"></a>00101    <span class="keywordflow">if</span> (capability&lt;0 || capability&gt;31)
<a name="l00102"></a>00102    {
<a name="l00103"></a>00103       printf(<span class="stringliteral">"%s: ERROR: capability(%d) is out of range.\n"</span>, __FUNCTION__, <a class="code" href="chan__mgcp_8c.html#9a06cb435cd72d31b714e9dbb5c3d168">capability</a>);
<a name="l00104"></a>00104       <span class="keywordflow">return</span>;
<a name="l00105"></a>00105    }
<a name="l00106"></a>00106    <span class="keywordflow">if</span> (mode&lt;0 || mode&gt;3)
<a name="l00107"></a>00107    {
<a name="l00108"></a>00108       printf(<span class="stringliteral">"%s: ERROR: mode(%d) is out of range.\n"</span>, __FUNCTION__, mode);
<a name="l00109"></a>00109       <span class="keywordflow">return</span>;
<a name="l00110"></a>00110    }
<a name="l00111"></a>00111    <span class="keywordflow">if</span> (rate&lt;0 || rate&gt;31)
<a name="l00112"></a>00112    {
<a name="l00113"></a>00113       printf(<span class="stringliteral">"%s: ERROR: rate(%d) is out of range.\n"</span>, __FUNCTION__, rate);
<a name="l00114"></a>00114       <span class="keywordflow">return</span>;
<a name="l00115"></a>00115    }
<a name="l00116"></a>00116    <span class="keywordflow">if</span> (multi&gt;127)
<a name="l00117"></a>00117    {
<a name="l00118"></a>00118       printf(<span class="stringliteral">"%s: ERROR: multi(%d) is out of range.\n"</span>, __FUNCTION__, multi);
<a name="l00119"></a>00119       <span class="keywordflow">return</span>;
<a name="l00120"></a>00120    }
<a name="l00121"></a>00121    <span class="keywordflow">if</span> (user&gt;31)
<a name="l00122"></a>00122    {
<a name="l00123"></a>00123       printf(<span class="stringliteral">"%s: ERROR: user L1(%d) is out of range.\n"</span>, __FUNCTION__, rate);
<a name="l00124"></a>00124       <span class="keywordflow">return</span>;
<a name="l00125"></a>00125    }
<a name="l00126"></a>00126    <span class="keywordflow">if</span> (rate!=24 &amp;&amp; multi&gt;=0)
<a name="l00127"></a>00127    {
<a name="l00128"></a>00128       printf(<span class="stringliteral">"%s: WARNING: multi(%d) is only possible if rate(%d) would be 24.\n"</span>, __FUNCTION__, multi, rate);
<a name="l00129"></a>00129       multi = -1;
<a name="l00130"></a>00130    }
<a name="l00131"></a>00131 
<a name="l00132"></a>00132    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    coding=%d capability=%d mode=%d rate=%d multi=%d user=%d\n"</span>, coding, <a class="code" href="chan__mgcp_8c.html#9a06cb435cd72d31b714e9dbb5c3d168">capability</a>, mode, rate, multi, user);
<a name="l00133"></a>00133 
<a name="l00134"></a>00134    l = 2 + (multi&gt;=0) + (user&gt;=0);
<a name="l00135"></a>00135    p = msg_put(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, l+2);
<a name="l00136"></a>00136    <span class="keywordflow">if</span> (<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l00137"></a>00137       *ntmode = p+1;
<a name="l00138"></a>00138    <span class="keywordflow">else</span>
<a name="l00139"></a>00139       qi-&gt;QI_ELEMENT(bearer_capability) = p - (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi - <span class="keyword">sizeof</span>(Q931_info_t);
<a name="l00140"></a>00140    p[0] = IE_BEARER;
<a name="l00141"></a>00141    p[1] = l;
<a name="l00142"></a>00142    p[2] = 0x80 + (coding&lt;&lt;5) + <a class="code" href="chan__mgcp_8c.html#9a06cb435cd72d31b714e9dbb5c3d168">capability</a>;
<a name="l00143"></a>00143    p[3] = 0x80 + (mode&lt;&lt;5) + rate;
<a name="l00144"></a>00144    <span class="keywordflow">if</span> (multi &gt;= 0)
<a name="l00145"></a>00145       p[4] = 0x80 + multi;
<a name="l00146"></a>00146    <span class="keywordflow">if</span> (user &gt;= 0)
<a name="l00147"></a>00147       p[4+(multi&gt;=0)] = 0xa0 + user;
<a name="l00148"></a>00148 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="001a54c4b5e2fd10f4ea2c78588488b4"></a><!-- doxytag: member="ie.c::enc_ie_called_pn" ref="001a54c4b5e2fd10f4ea2c78588488b4" args="(unsigned char **ntmode, msg_t *msg, int type, int plan, char *number, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void enc_ie_called_pn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char **&nbsp;</td>
          <td class="mdname" nowrap> <em>ntmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>msg_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>plan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>number</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00341">341</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l01050">build_information()</a>, and <a class="el" href="isdn__msg__parser_8c-source.html#l00269">build_setup()</a>.<div class="fragment"><pre class="fragment"><a name="l00342"></a>00342 {
<a name="l00343"></a>00343    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;
<a name="l00344"></a>00344    Q931_info_t *qi = (Q931_info_t *)(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>-&gt;<a class="code" href="structast__channel.html#8d777f385d3dfec8815d20f7496026dc">data</a> + mISDN_HEADER_LEN);
<a name="l00345"></a>00345    <span class="keywordtype">int</span> l;
<a name="l00346"></a>00346 
<a name="l00347"></a>00347    <span class="keywordflow">if</span> (type&lt;0 || type&gt;7)
<a name="l00348"></a>00348    {
<a name="l00349"></a>00349       printf(<span class="stringliteral">"%s: ERROR: type(%d) is out of range.\n"</span>, __FUNCTION__, <a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>);
<a name="l00350"></a>00350       <span class="keywordflow">return</span>;
<a name="l00351"></a>00351    }
<a name="l00352"></a>00352    <span class="keywordflow">if</span> (plan&lt;0 || plan&gt;15)
<a name="l00353"></a>00353    {
<a name="l00354"></a>00354       printf(<span class="stringliteral">"%s: ERROR: plan(%d) is out of range.\n"</span>, __FUNCTION__, plan);
<a name="l00355"></a>00355       <span class="keywordflow">return</span>;
<a name="l00356"></a>00356    }
<a name="l00357"></a>00357    <span class="keywordflow">if</span> (!<a class="code" href="structnumber.html">number</a>[0])
<a name="l00358"></a>00358    {
<a name="l00359"></a>00359       printf(<span class="stringliteral">"%s: ERROR: number is not given.\n"</span>, __FUNCTION__);
<a name="l00360"></a>00360       <span class="keywordflow">return</span>;
<a name="l00361"></a>00361    }
<a name="l00362"></a>00362 
<a name="l00363"></a>00363    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    type=%d plan=%d number='%s'\n"</span>, <a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>, plan, <a class="code" href="structnumber.html">number</a>);
<a name="l00364"></a>00364 
<a name="l00365"></a>00365    l = 1+strlen((<span class="keywordtype">char</span> *)<a class="code" href="structnumber.html">number</a>);
<a name="l00366"></a>00366    p = msg_put(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, l+2);
<a name="l00367"></a>00367    <span class="keywordflow">if</span> (<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l00368"></a>00368       *ntmode = p+1;
<a name="l00369"></a>00369    <span class="keywordflow">else</span>
<a name="l00370"></a>00370       qi-&gt;QI_ELEMENT(called_nr) = p - (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi - <span class="keyword">sizeof</span>(Q931_info_t);
<a name="l00371"></a>00371    p[0] = IE_CALLED_PN;
<a name="l00372"></a>00372    p[1] = l;
<a name="l00373"></a>00373    p[2] = 0x80 + (<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>&lt;&lt;4) + plan;
<a name="l00374"></a>00374    strncpy((<span class="keywordtype">char</span> *)p+3, (<span class="keywordtype">char</span> *)<a class="code" href="structnumber.html">number</a>, strlen((<span class="keywordtype">char</span> *)number));
<a name="l00375"></a>00375 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="9c6c5c2d27350faebf69ca395f3dc32f"></a><!-- doxytag: member="ie.c::enc_ie_calling_pn" ref="9c6c5c2d27350faebf69ca395f3dc32f" args="(unsigned char **ntmode, msg_t *msg, int type, int plan, int present, int screen, char *number, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void enc_ie_calling_pn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char **&nbsp;</td>
          <td class="mdname" nowrap> <em>ntmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>msg_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>plan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>present</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>screen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>number</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00406">406</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00269">build_setup()</a>.<div class="fragment"><pre class="fragment"><a name="l00407"></a>00407 {
<a name="l00408"></a>00408    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;
<a name="l00409"></a>00409    Q931_info_t *qi = (Q931_info_t *)(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>-&gt;<a class="code" href="structast__channel.html#8d777f385d3dfec8815d20f7496026dc">data</a> + mISDN_HEADER_LEN);
<a name="l00410"></a>00410    <span class="keywordtype">int</span> l;
<a name="l00411"></a>00411 
<a name="l00412"></a>00412    <span class="keywordflow">if</span> (type&lt;0 || type&gt;7)
<a name="l00413"></a>00413    {
<a name="l00414"></a>00414       printf(<span class="stringliteral">"%s: ERROR: type(%d) is out of range.\n"</span>, __FUNCTION__, <a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>);
<a name="l00415"></a>00415       <span class="keywordflow">return</span>;
<a name="l00416"></a>00416    }
<a name="l00417"></a>00417    <span class="keywordflow">if</span> (plan&lt;0 || plan&gt;15)
<a name="l00418"></a>00418    {
<a name="l00419"></a>00419       printf(<span class="stringliteral">"%s: ERROR: plan(%d) is out of range.\n"</span>, __FUNCTION__, plan);
<a name="l00420"></a>00420       <span class="keywordflow">return</span>;
<a name="l00421"></a>00421    }
<a name="l00422"></a>00422    <span class="keywordflow">if</span> (present&gt;3)
<a name="l00423"></a>00423    {
<a name="l00424"></a>00424       printf(<span class="stringliteral">"%s: ERROR: present(%d) is out of range.\n"</span>, __FUNCTION__, present);
<a name="l00425"></a>00425       <span class="keywordflow">return</span>;
<a name="l00426"></a>00426    }
<a name="l00427"></a>00427    <span class="keywordflow">if</span> (present &gt;= 0) <span class="keywordflow">if</span> (screen&lt;0 || screen&gt;3)
<a name="l00428"></a>00428    {
<a name="l00429"></a>00429       printf(<span class="stringliteral">"%s: ERROR: screen(%d) is out of range.\n"</span>, __FUNCTION__, screen);
<a name="l00430"></a>00430       <span class="keywordflow">return</span>;
<a name="l00431"></a>00431    }
<a name="l00432"></a>00432 
<a name="l00433"></a>00433    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    type=%d plan=%d present=%d screen=%d number='%s'\n"</span>, <a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>, plan, present, screen, <a class="code" href="structnumber.html">number</a>);
<a name="l00434"></a>00434 
<a name="l00435"></a>00435    l = 1;
<a name="l00436"></a>00436    <span class="keywordflow">if</span> (<a class="code" href="structnumber.html">number</a>) <span class="keywordflow">if</span> (<a class="code" href="structnumber.html">number</a>[0])
<a name="l00437"></a>00437       l += strlen((<span class="keywordtype">char</span> *)number);
<a name="l00438"></a>00438    <span class="keywordflow">if</span> (present &gt;= 0)
<a name="l00439"></a>00439       l += 1;
<a name="l00440"></a>00440    p = msg_put(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, l+2);
<a name="l00441"></a>00441    <span class="keywordflow">if</span> (<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l00442"></a>00442       *ntmode = p+1;
<a name="l00443"></a>00443    <span class="keywordflow">else</span>
<a name="l00444"></a>00444       qi-&gt;QI_ELEMENT(calling_nr) = p - (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi - <span class="keyword">sizeof</span>(Q931_info_t);
<a name="l00445"></a>00445    p[0] = IE_CALLING_PN;
<a name="l00446"></a>00446    p[1] = l;
<a name="l00447"></a>00447    <span class="keywordflow">if</span> (present &gt;= 0)
<a name="l00448"></a>00448    {
<a name="l00449"></a>00449       p[2] = 0x00 + (<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>&lt;&lt;4) + plan;
<a name="l00450"></a>00450       p[3] = 0x80 + (present&lt;&lt;5) + screen;
<a name="l00451"></a>00451       <span class="keywordflow">if</span> (number) <span class="keywordflow">if</span> (number[0])
<a name="l00452"></a>00452          strncpy((<span class="keywordtype">char</span> *)p+4, (<span class="keywordtype">char</span> *)number, strlen((<span class="keywordtype">char</span> *)number));
<a name="l00453"></a>00453    } <span class="keywordflow">else</span>
<a name="l00454"></a>00454    {
<a name="l00455"></a>00455       p[2] = 0x80 + (<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>&lt;&lt;4) + plan;
<a name="l00456"></a>00456       <span class="keywordflow">if</span> (number) <span class="keywordflow">if</span> (number[0])
<a name="l00457"></a>00457          strncpy((<span class="keywordtype">char</span> *)p+3, (<span class="keywordtype">char</span> *)number, strlen((<span class="keywordtype">char</span> *)number));
<a name="l00458"></a>00458    }
<a name="l00459"></a>00459 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="6b2ea3c898409349d50ae45a8a7ff5b3"></a><!-- doxytag: member="ie.c::enc_ie_cause" ref="6b2ea3c898409349d50ae45a8a7ff5b3" args="(unsigned char **ntmode, msg_t *msg, int location, int cause, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void enc_ie_cause           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char **&nbsp;</td>
          <td class="mdname" nowrap> <em>ntmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>msg_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>location</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>cause</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00607">607</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00790">build_disconnect()</a>, <a class="el" href="isdn__msg__parser_8c-source.html#l00860">build_release()</a>, and <a class="el" href="isdn__msg__parser_8c-source.html#l00911">build_release_complete()</a>.<div class="fragment"><pre class="fragment"><a name="l00608"></a>00608 {
<a name="l00609"></a>00609    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;
<a name="l00610"></a>00610    Q931_info_t *qi = (Q931_info_t *)(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>-&gt;<a class="code" href="structast__channel.html#8d777f385d3dfec8815d20f7496026dc">data</a> + mISDN_HEADER_LEN);
<a name="l00611"></a>00611    <span class="keywordtype">int</span> l;
<a name="l00612"></a>00612 
<a name="l00613"></a>00613    <span class="keywordflow">if</span> (location&lt;0 || location&gt;7)
<a name="l00614"></a>00614    {
<a name="l00615"></a>00615       printf(<span class="stringliteral">"%s: ERROR: location(%d) is out of range.\n"</span>, __FUNCTION__, location);
<a name="l00616"></a>00616       <span class="keywordflow">return</span>;
<a name="l00617"></a>00617    }
<a name="l00618"></a>00618    <span class="keywordflow">if</span> (cause&lt;0 || cause&gt;127)
<a name="l00619"></a>00619    {
<a name="l00620"></a>00620       printf(<span class="stringliteral">"%s: ERROR: cause(%d) is out of range.\n"</span>, __FUNCTION__, cause);
<a name="l00621"></a>00621       <span class="keywordflow">return</span>;
<a name="l00622"></a>00622    }
<a name="l00623"></a>00623 
<a name="l00624"></a>00624    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    location=%d cause=%d\n"</span>, location, cause);
<a name="l00625"></a>00625 
<a name="l00626"></a>00626    l = 2;
<a name="l00627"></a>00627    p = msg_put(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, l+2);
<a name="l00628"></a>00628    <span class="keywordflow">if</span> (<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l00629"></a>00629       *ntmode = p+1;
<a name="l00630"></a>00630    <span class="keywordflow">else</span>
<a name="l00631"></a>00631       qi-&gt;QI_ELEMENT(cause) = p - (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi - <span class="keyword">sizeof</span>(Q931_info_t);
<a name="l00632"></a>00632    p[0] = IE_CAUSE;
<a name="l00633"></a>00633    p[1] = l;
<a name="l00634"></a>00634    p[2] = 0x80 + location;
<a name="l00635"></a>00635    p[3] = 0x80 + cause;
<a name="l00636"></a>00636 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="c1967fabb9af92e9b80d1188c5f7a8ab"></a><!-- doxytag: member="ie.c::enc_ie_channel_id" ref="c1967fabb9af92e9b80d1188c5f7a8ab" args="(unsigned char **ntmode, msg_t *msg, int exclusive, int channel, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void enc_ie_channel_id           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char **&nbsp;</td>
          <td class="mdname" nowrap> <em>ntmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>msg_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>exclusive</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>channel</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00681">681</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
References <a class="el" href="isdn__lib_8c-source.html#l00104">get_stack_by_bc()</a>, and <a class="el" href="isdn__lib__intern_8h-source.html#l00085">misdn_stack::pri</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00107">build_alerting()</a>, <a class="el" href="isdn__msg__parser_8c-source.html#l00457">build_connect_acknowledge()</a>, <a class="el" href="isdn__msg__parser_8c-source.html#l00072">build_proceeding()</a>, <a class="el" href="isdn__msg__parser_8c-source.html#l00735">build_retrieve_acknowledge()</a>, <a class="el" href="isdn__msg__parser_8c-source.html#l00269">build_setup()</a>, and <a class="el" href="isdn__msg__parser_8c-source.html#l00429">build_setup_acknowledge()</a>.<div class="fragment"><pre class="fragment"><a name="l00682"></a>00682 {
<a name="l00683"></a>00683    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;
<a name="l00684"></a>00684    Q931_info_t *qi = (Q931_info_t *)(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>-&gt;<a class="code" href="structast__channel.html#8d777f385d3dfec8815d20f7496026dc">data</a> + mISDN_HEADER_LEN);
<a name="l00685"></a>00685    <span class="keywordtype">int</span> l;
<a name="l00686"></a>00686    <span class="keyword">struct </span><a class="code" href="structmisdn__stack.html">misdn_stack</a> *stack=<a class="code" href="isdn__lib_8c.html#c09088b742125e27f2bd18f9bddf80d7">get_stack_by_bc</a>(bc);
<a name="l00687"></a>00687    <span class="keywordtype">int</span> <a class="code" href="structmisdn__stack.html#e060bb629c10e1b143614cc1e9ccdc67">pri</a> = stack-&gt;<a class="code" href="structmisdn__stack.html#e060bb629c10e1b143614cc1e9ccdc67">pri</a>;
<a name="l00688"></a>00688    
<a name="l00689"></a>00689    <span class="keywordflow">if</span> (exclusive&lt;0 || exclusive&gt;1)
<a name="l00690"></a>00690    {
<a name="l00691"></a>00691       printf(<span class="stringliteral">"%s: ERROR: exclusive(%d) is out of range.\n"</span>, __FUNCTION__, exclusive);
<a name="l00692"></a>00692       <span class="keywordflow">return</span>;
<a name="l00693"></a>00693    }
<a name="l00694"></a>00694    <span class="keywordflow">if</span> ((channel&lt;0 || channel&gt;0xff)
<a name="l00695"></a>00695        || (!pri &amp;&amp; (channel&gt;2 &amp;&amp; channel&lt;0xff))
<a name="l00696"></a>00696        || (pri &amp;&amp; (channel&gt;31 &amp;&amp; channel&lt;0xff))
<a name="l00697"></a>00697        || (pri &amp;&amp; channel==16))
<a name="l00698"></a>00698    {
<a name="l00699"></a>00699       printf(<span class="stringliteral">"%s: ERROR: channel(%d) is out of range.\n"</span>, __FUNCTION__, channel);
<a name="l00700"></a>00700       <span class="keywordflow">return</span>;
<a name="l00701"></a>00701    }
<a name="l00702"></a>00702 
<a name="l00703"></a>00703    <span class="comment">/* if (MISDN_IE_DEBG) printf("    exclusive=%d channel=%d\n", exclusive, channel); */</span>
<a name="l00704"></a>00704    
<a name="l00705"></a>00705 
<a name="l00706"></a>00706    <span class="keywordflow">if</span> (!pri)
<a name="l00707"></a>00707    {
<a name="l00708"></a>00708       <span class="comment">/* BRI */</span>
<a name="l00709"></a>00709       l = 1;
<a name="l00710"></a>00710       p = msg_put(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, l+2);
<a name="l00711"></a>00711       <span class="keywordflow">if</span> (<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l00712"></a>00712          *ntmode = p+1;
<a name="l00713"></a>00713       <span class="keywordflow">else</span>
<a name="l00714"></a>00714          qi-&gt;QI_ELEMENT(channel_id) = p - (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi - <span class="keyword">sizeof</span>(Q931_info_t);
<a name="l00715"></a>00715       p[0] = IE_CHANNEL_ID;
<a name="l00716"></a>00716       p[1] = l;
<a name="l00717"></a>00717       <span class="keywordflow">if</span> (channel == 0xff)
<a name="l00718"></a>00718          channel = 3;
<a name="l00719"></a>00719       p[2] = 0x80 + (exclusive&lt;&lt;3) + channel;
<a name="l00720"></a>00720       <span class="comment">/* printf("    exclusive=%d channel=%d\n", exclusive, channel); */</span>
<a name="l00721"></a>00721    } <span class="keywordflow">else</span>
<a name="l00722"></a>00722    {
<a name="l00723"></a>00723       <span class="comment">/* PRI */</span>
<a name="l00724"></a>00724       <span class="keywordflow">if</span> (channel == 0) <span class="comment">/* no channel */</span>
<a name="l00725"></a>00725          <span class="keywordflow">return</span>; <span class="comment">/* IE not present */</span>
<a name="l00726"></a>00726 <span class="comment">/*       if (MISDN_IE_DEBG) printf("channel = %d\n", channel); */</span>
<a name="l00727"></a>00727       <span class="keywordflow">if</span> (channel == 0xff) <span class="comment">/* any channel */</span>
<a name="l00728"></a>00728       {
<a name="l00729"></a>00729          l = 1;
<a name="l00730"></a>00730          p = msg_put(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, l+2);
<a name="l00731"></a>00731          <span class="keywordflow">if</span> (<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l00732"></a>00732             *ntmode = p+1;
<a name="l00733"></a>00733          <span class="keywordflow">else</span>
<a name="l00734"></a>00734             qi-&gt;QI_ELEMENT(channel_id) = p - (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi - <span class="keyword">sizeof</span>(Q931_info_t);
<a name="l00735"></a>00735          p[0] = IE_CHANNEL_ID;
<a name="l00736"></a>00736          p[1] = l;
<a name="l00737"></a>00737          p[2] = 0x80 + 0x20 + 0x03;
<a name="l00738"></a>00738 <span class="comment">/*          if (MISDN_IE_DEBG) printf("%02x\n", p[2]); */</span>
<a name="l00739"></a>00739          <span class="keywordflow">return</span>; <span class="comment">/* end */</span>
<a name="l00740"></a>00740       }
<a name="l00741"></a>00741       l = 3;
<a name="l00742"></a>00742       p = msg_put(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, l+2);
<a name="l00743"></a>00743       <span class="keywordflow">if</span> (<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l00744"></a>00744          *ntmode = p+1;
<a name="l00745"></a>00745       <span class="keywordflow">else</span>
<a name="l00746"></a>00746          qi-&gt;QI_ELEMENT(channel_id) = p - (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi - <span class="keyword">sizeof</span>(Q931_info_t);
<a name="l00747"></a>00747       p[0] = IE_CHANNEL_ID;
<a name="l00748"></a>00748       p[1] = l;
<a name="l00749"></a>00749       p[2] = 0x80 + 0x20 + (exclusive&lt;&lt;3) + 0x01;
<a name="l00750"></a>00750       p[3] = 0x80 + 3; <span class="comment">/* CCITT, Number, B-type */</span>
<a name="l00751"></a>00751       p[4] = 0x80 + channel;
<a name="l00752"></a>00752 <span class="comment">/*       if (MISDN_IE_DEBG) printf("%02x %02x %02x\n", p[2], p[3], p[4]); */</span>
<a name="l00753"></a>00753    }
<a name="l00754"></a>00754 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="34761a373060e468b07de0bfda869f37"></a><!-- doxytag: member="ie.c::enc_ie_complete" ref="34761a373060e468b07de0bfda869f37" args="(unsigned char **ntmode, msg_t *msg, int complete, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void enc_ie_complete           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char **&nbsp;</td>
          <td class="mdname" nowrap> <em>ntmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>msg_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>complete</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00046">46</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
References <a class="el" href="ie_8c-source.html#l00033">MISDN_IE_DEBG</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00269">build_setup()</a>.<div class="fragment"><pre class="fragment"><a name="l00047"></a>00047 {
<a name="l00048"></a>00048    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;
<a name="l00049"></a>00049    Q931_info_t *qi = (Q931_info_t *)(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>-&gt;<a class="code" href="structast__channel.html#8d777f385d3dfec8815d20f7496026dc">data</a> + mISDN_HEADER_LEN);
<a name="l00050"></a>00050 
<a name="l00051"></a>00051    <span class="keywordflow">if</span> (complete&lt;0 || complete&gt;1)
<a name="l00052"></a>00052    {
<a name="l00053"></a>00053       printf(<span class="stringliteral">"%s: ERROR: complete(%d) is out of range.\n"</span>, __FUNCTION__, complete);
<a name="l00054"></a>00054       <span class="keywordflow">return</span>;
<a name="l00055"></a>00055    }
<a name="l00056"></a>00056 
<a name="l00057"></a>00057    <span class="keywordflow">if</span> (complete)
<a name="l00058"></a>00058       <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    complete=%d\n"</span>, complete);
<a name="l00059"></a>00059 
<a name="l00060"></a>00060    <span class="keywordflow">if</span> (complete)
<a name="l00061"></a>00061    {
<a name="l00062"></a>00062       p = msg_put(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, 1);
<a name="l00063"></a>00063       <span class="keywordflow">if</span> (<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l00064"></a>00064       {
<a name="l00065"></a>00065          *ntmode = p;
<a name="l00066"></a>00066       } <span class="keywordflow">else</span>
<a name="l00067"></a>00067          qi-&gt;QI_ELEMENT(sending_complete) = p - (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi - <span class="keyword">sizeof</span>(Q931_info_t);
<a name="l00068"></a>00068 
<a name="l00069"></a>00069       p[0] = IE_COMPLETE;
<a name="l00070"></a>00070    }
<a name="l00071"></a>00071 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="739380fa95f6d66ea351e2fef95e03f3"></a><!-- doxytag: member="ie.c::enc_ie_connected_pn" ref="739380fa95f6d66ea351e2fef95e03f3" args="(unsigned char **ntmode, msg_t *msg, int type, int plan, int present, int screen, char *number, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void enc_ie_connected_pn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char **&nbsp;</td>
          <td class="mdname" nowrap> <em>ntmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>msg_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>plan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>present</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>screen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>number</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00508">508</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00381">build_connect()</a>.<div class="fragment"><pre class="fragment"><a name="l00509"></a>00509 {
<a name="l00510"></a>00510    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;
<a name="l00511"></a>00511    Q931_info_t *qi = (Q931_info_t *)(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>-&gt;<a class="code" href="structast__channel.html#8d777f385d3dfec8815d20f7496026dc">data</a> + mISDN_HEADER_LEN);
<a name="l00512"></a>00512    <span class="keywordtype">int</span> l;
<a name="l00513"></a>00513 
<a name="l00514"></a>00514    <span class="keywordflow">if</span> (type&lt;0 || type&gt;7)
<a name="l00515"></a>00515    {
<a name="l00516"></a>00516       printf(<span class="stringliteral">"%s: ERROR: type(%d) is out of range.\n"</span>, __FUNCTION__, <a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>);
<a name="l00517"></a>00517       <span class="keywordflow">return</span>;
<a name="l00518"></a>00518    }
<a name="l00519"></a>00519    <span class="keywordflow">if</span> (plan&lt;0 || plan&gt;15)
<a name="l00520"></a>00520    {
<a name="l00521"></a>00521       printf(<span class="stringliteral">"%s: ERROR: plan(%d) is out of range.\n"</span>, __FUNCTION__, plan);
<a name="l00522"></a>00522       <span class="keywordflow">return</span>;
<a name="l00523"></a>00523    }
<a name="l00524"></a>00524    <span class="keywordflow">if</span> (present&gt;3)
<a name="l00525"></a>00525    {
<a name="l00526"></a>00526       printf(<span class="stringliteral">"%s: ERROR: present(%d) is out of range.\n"</span>, __FUNCTION__, present);
<a name="l00527"></a>00527       <span class="keywordflow">return</span>;
<a name="l00528"></a>00528    }
<a name="l00529"></a>00529    <span class="keywordflow">if</span> (present &gt;= 0) <span class="keywordflow">if</span> (screen&lt;0 || screen&gt;3)
<a name="l00530"></a>00530    {
<a name="l00531"></a>00531       printf(<span class="stringliteral">"%s: ERROR: screen(%d) is out of range.\n"</span>, __FUNCTION__, screen);
<a name="l00532"></a>00532       <span class="keywordflow">return</span>;
<a name="l00533"></a>00533    }
<a name="l00534"></a>00534 
<a name="l00535"></a>00535    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    type=%d plan=%d present=%d screen=%d number='%s'\n"</span>, <a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>, plan, present, screen, <a class="code" href="structnumber.html">number</a>);
<a name="l00536"></a>00536 
<a name="l00537"></a>00537    l = 1;
<a name="l00538"></a>00538    <span class="keywordflow">if</span> (<a class="code" href="structnumber.html">number</a>) <span class="keywordflow">if</span> (<a class="code" href="structnumber.html">number</a>[0])
<a name="l00539"></a>00539       l += strlen((<span class="keywordtype">char</span> *)number);
<a name="l00540"></a>00540    <span class="keywordflow">if</span> (present &gt;= 0)
<a name="l00541"></a>00541       l += 1;
<a name="l00542"></a>00542    p = msg_put(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, l+2);
<a name="l00543"></a>00543    <span class="keywordflow">if</span> (<a class="code" href="structmisdn__stack.html#25930e3036f13852cb0b29694bbab611">nt</a>)
<a name="l00544"></a>00544       *ntmode = p+1;
<a name="l00545"></a>00545    <span class="keywordflow">else</span>
<a name="l00546"></a>00546       qi-&gt;QI_ELEMENT(connected_nr) = p - (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi - <span class="keyword">sizeof</span>(Q931_info_t);
<a name="l00547"></a>00547    p[0] = IE_CONNECT_PN;
<a name="l00548"></a>00548    p[1] = l;
<a name="l00549"></a>00549    <span class="keywordflow">if</span> (present &gt;= 0)
<a name="l00550"></a>00550    {
<a name="l00551"></a>00551       p[2] = 0x00 + (<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>&lt;&lt;4) + plan;
<a name="l00552"></a>00552       p[3] = 0x80 + (present&lt;&lt;5) + screen;
<a name="l00553"></a>00553       <span class="keywordflow">if</span> (number) <span class="keywordflow">if</span> (number[0])
<a name="l00554"></a>00554          strncpy((<span class="keywordtype">char</span> *)p+4, (<span class="keywordtype">char</span> *)number, strlen((<span class="keywordtype">char</span> *)number));
<a name="l00555"></a>00555    } <span class="keywordflow">else</span>
<a name="l00556"></a>00556    {
<a name="l00557"></a>00557       p[2] = 0x80 + (<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>&lt;&lt;4) + plan;
<a name="l00558"></a>00558       <span class="keywordflow">if</span> (number) <span class="keywordflow">if</span> (number[0])
<a name="l00559"></a>00559          strncpy((<span class="keywordtype">char</span> *)p+3, (<span class="keywordtype">char</span> *)number, strlen((<span class="keywordtype">char</span> *)number));
<a name="l00560"></a>00560    }
<a name="l00561"></a>00561 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="6d5f655d3f5e294391b9f75877c60e43"></a><!-- doxytag: member="ie.c::enc_ie_date" ref="6d5f655d3f5e294391b9f75877c60e43" args="(unsigned char **ntmode, msg_t *msg, time_t ti, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void enc_ie_date           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char **&nbsp;</td>
          <td class="mdname" nowrap> <em>ntmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>msg_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>time_t&nbsp;</td>
          <td class="mdname" nowrap> <em>ti</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00850">850</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00381">build_connect()</a>.<div class="fragment"><pre class="fragment"><a name="l00851"></a>00851 {
<a name="l00852"></a>00852    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;
<a name="l00853"></a>00853    Q931_info_t *qi = (Q931_info_t *)(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>-&gt;<a class="code" href="structast__channel.html#8d777f385d3dfec8815d20f7496026dc">data</a> + mISDN_HEADER_LEN);
<a name="l00854"></a>00854    <span class="keywordtype">int</span> l;
<a name="l00855"></a>00855 
<a name="l00856"></a>00856    <span class="keyword">struct </span>tm *tm;
<a name="l00857"></a>00857 
<a name="l00858"></a>00858    tm = localtime(&amp;ti);
<a name="l00859"></a>00859    <span class="keywordflow">if</span> (!tm)
<a name="l00860"></a>00860    {
<a name="l00861"></a>00861       printf(<span class="stringliteral">"%s: ERROR: gettimeofday() returned NULL.\n"</span>, __FUNCTION__);
<a name="l00862"></a>00862       <span class="keywordflow">return</span>;
<a name="l00863"></a>00863    }
<a name="l00864"></a>00864 
<a name="l00865"></a>00865    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    year=%d month=%d day=%d hour=%d minute=%d\n"</span>, tm-&gt;tm_year%100, tm-&gt;tm_mon+1, tm-&gt;tm_mday, tm-&gt;tm_hour, tm-&gt;tm_min);
<a name="l00866"></a>00866 
<a name="l00867"></a>00867    l = 5;
<a name="l00868"></a>00868    p = msg_put(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, l+2);
<a name="l00869"></a>00869    <span class="keywordflow">if</span> (nt)
<a name="l00870"></a>00870       *ntmode = p+1;
<a name="l00871"></a>00871    <span class="keywordflow">else</span>
<a name="l00872"></a>00872       qi-&gt;QI_ELEMENT(date) = p - (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi - <span class="keyword">sizeof</span>(Q931_info_t);
<a name="l00873"></a>00873    p[0] = IE_DATE;
<a name="l00874"></a>00874    p[1] = l;
<a name="l00875"></a>00875    p[2] = tm-&gt;tm_year % 100;
<a name="l00876"></a>00876    p[3] = tm-&gt;tm_mon + 1;
<a name="l00877"></a>00877    p[4] = tm-&gt;tm_mday;
<a name="l00878"></a>00878    p[5] = tm-&gt;tm_hour;
<a name="l00879"></a>00879    p[6] = tm-&gt;tm_min;
<a name="l00880"></a>00880 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d9359b5f25df1e09b8d170af4940cc81"></a><!-- doxytag: member="ie.c::enc_ie_display" ref="d9359b5f25df1e09b8d170af4940cc81" args="(unsigned char **ntmode, msg_t *msg, char *display, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void enc_ie_display           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char **&nbsp;</td>
          <td class="mdname" nowrap> <em>ntmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>msg_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>display</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00884">884</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00954">build_facility()</a>, <a class="el" href="isdn__msg__parser_8c-source.html#l01050">build_information()</a>, and <a class="el" href="isdn__msg__parser_8c-source.html#l00269">build_setup()</a>.<div class="fragment"><pre class="fragment"><a name="l00885"></a>00885 {
<a name="l00886"></a>00886    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;
<a name="l00887"></a>00887    Q931_info_t *qi = (Q931_info_t *)(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>-&gt;<a class="code" href="structast__channel.html#8d777f385d3dfec8815d20f7496026dc">data</a> + mISDN_HEADER_LEN);
<a name="l00888"></a>00888    <span class="keywordtype">int</span> l;
<a name="l00889"></a>00889 
<a name="l00890"></a>00890    <span class="keywordflow">if</span> (!display[0])
<a name="l00891"></a>00891    {
<a name="l00892"></a>00892       printf(<span class="stringliteral">"%s: ERROR: display text not given.\n"</span>, __FUNCTION__);
<a name="l00893"></a>00893       <span class="keywordflow">return</span>;
<a name="l00894"></a>00894    }
<a name="l00895"></a>00895 
<a name="l00896"></a>00896    <span class="keywordflow">if</span> (strlen((<span class="keywordtype">char</span> *)display) &gt; 80)
<a name="l00897"></a>00897    {
<a name="l00898"></a>00898       printf(<span class="stringliteral">"%s: WARNING: display text too long (max 80 chars), cutting.\n"</span>, __FUNCTION__);
<a name="l00899"></a>00899       display[80] = <span class="charliteral">'\0'</span>;
<a name="l00900"></a>00900    }
<a name="l00901"></a>00901 
<a name="l00902"></a>00902    <span class="comment">/* if (MISDN_IE_DEBG) printf("    display='%s' (len=%d)\n", display, strlen((char *)display)); */</span>
<a name="l00903"></a>00903 
<a name="l00904"></a>00904    l = strlen((<span class="keywordtype">char</span> *)display);
<a name="l00905"></a>00905    p = msg_put(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, l+2);
<a name="l00906"></a>00906    <span class="keywordflow">if</span> (nt)
<a name="l00907"></a>00907       *ntmode = p+1;
<a name="l00908"></a>00908    <span class="keywordflow">else</span>
<a name="l00909"></a>00909       qi-&gt;QI_ELEMENT(display) = p - (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi - <span class="keyword">sizeof</span>(Q931_info_t);
<a name="l00910"></a>00910    p[0] = IE_DISPLAY;
<a name="l00911"></a>00911    p[1] = l;
<a name="l00912"></a>00912    strncpy((<span class="keywordtype">char</span> *)p+2, (<span class="keywordtype">char</span> *)display, strlen((<span class="keywordtype">char</span> *)display));
<a name="l00913"></a>00913 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="41da125293260e9ea9e8a7659f448564"></a><!-- doxytag: member="ie.c::enc_ie_keypad" ref="41da125293260e9ea9e8a7659f448564" args="(unsigned char **ntmode, msg_t *msg, char *keypad, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void enc_ie_keypad           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char **&nbsp;</td>
          <td class="mdname" nowrap> <em>ntmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>msg_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>keypad</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00942">942</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00269">build_setup()</a>.<div class="fragment"><pre class="fragment"><a name="l00943"></a>00943 {
<a name="l00944"></a>00944    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;
<a name="l00945"></a>00945    Q931_info_t *qi = (Q931_info_t *)(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>-&gt;<a class="code" href="structast__channel.html#8d777f385d3dfec8815d20f7496026dc">data</a> + mISDN_HEADER_LEN);
<a name="l00946"></a>00946    <span class="keywordtype">int</span> l;
<a name="l00947"></a>00947 
<a name="l00948"></a>00948    <span class="keywordflow">if</span> (!keypad[0])
<a name="l00949"></a>00949    {
<a name="l00950"></a>00950       printf(<span class="stringliteral">"%s: ERROR: keypad info not given.\n"</span>, __FUNCTION__);
<a name="l00951"></a>00951       <span class="keywordflow">return</span>;
<a name="l00952"></a>00952    }
<a name="l00953"></a>00953 
<a name="l00954"></a>00954    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    keypad='%s'\n"</span>, keypad);
<a name="l00955"></a>00955 
<a name="l00956"></a>00956    l = strlen(keypad);
<a name="l00957"></a>00957    p = msg_put(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, l+2);
<a name="l00958"></a>00958    <span class="keywordflow">if</span> (nt)
<a name="l00959"></a>00959       *ntmode = p+1;
<a name="l00960"></a>00960    <span class="keywordflow">else</span>
<a name="l00961"></a>00961       qi-&gt;QI_ELEMENT(keypad) = p - (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi - <span class="keyword">sizeof</span>(Q931_info_t);
<a name="l00962"></a>00962    p[0] = IE_KEYPAD;
<a name="l00963"></a>00963    p[1] = l;
<a name="l00964"></a>00964    strncpy((<span class="keywordtype">char</span> *)p+2, keypad, strlen(keypad));
<a name="l00965"></a>00965 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="1e22beda8e5fedbdb8fff5bbfbc8db91"></a><!-- doxytag: member="ie.c::enc_ie_progress" ref="1e22beda8e5fedbdb8fff5bbfbc8db91" args="(unsigned char **ntmode, msg_t *msg, int coding, int location, int progress, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void enc_ie_progress           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char **&nbsp;</td>
          <td class="mdname" nowrap> <em>ntmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>msg_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>coding</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>location</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>progress</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l01047">1047</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00107">build_alerting()</a>, <a class="el" href="isdn__msg__parser_8c-source.html#l00790">build_disconnect()</a>, <a class="el" href="isdn__msg__parser_8c-source.html#l00072">build_proceeding()</a>, and <a class="el" href="isdn__msg__parser_8c-source.html#l00429">build_setup_acknowledge()</a>.<div class="fragment"><pre class="fragment"><a name="l01048"></a>01048 {
<a name="l01049"></a>01049    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;
<a name="l01050"></a>01050    Q931_info_t *qi = (Q931_info_t *)(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>-&gt;<a class="code" href="structast__channel.html#8d777f385d3dfec8815d20f7496026dc">data</a> + mISDN_HEADER_LEN);
<a name="l01051"></a>01051    <span class="keywordtype">int</span> l;
<a name="l01052"></a>01052 
<a name="l01053"></a>01053    <span class="keywordflow">if</span> (coding&lt;0 || coding&gt;0x03)
<a name="l01054"></a>01054    {
<a name="l01055"></a>01055       printf(<span class="stringliteral">"%s: ERROR: coding(%d) is out of range.\n"</span>, __FUNCTION__, coding);
<a name="l01056"></a>01056       <span class="keywordflow">return</span>;
<a name="l01057"></a>01057    }
<a name="l01058"></a>01058    <span class="keywordflow">if</span> (location&lt;0 || location&gt;0x0f)
<a name="l01059"></a>01059    {
<a name="l01060"></a>01060       printf(<span class="stringliteral">"%s: ERROR: location(%d) is out of range.\n"</span>, __FUNCTION__, location);
<a name="l01061"></a>01061       <span class="keywordflow">return</span>;
<a name="l01062"></a>01062    }
<a name="l01063"></a>01063    <span class="keywordflow">if</span> (progress&lt;0 || progress&gt;0x7f)
<a name="l01064"></a>01064    {
<a name="l01065"></a>01065       printf(<span class="stringliteral">"%s: ERROR: progress(%d) is out of range.\n"</span>, __FUNCTION__, <a class="code" href="structprogress.html">progress</a>);
<a name="l01066"></a>01066       <span class="keywordflow">return</span>;
<a name="l01067"></a>01067    }
<a name="l01068"></a>01068 
<a name="l01069"></a>01069    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    coding=%d location=%d progress=%d\n"</span>, coding, location, <a class="code" href="structprogress.html">progress</a>);
<a name="l01070"></a>01070 
<a name="l01071"></a>01071    l = 2;
<a name="l01072"></a>01072    p = msg_put(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, l+2);
<a name="l01073"></a>01073    <span class="keywordflow">if</span> (nt)
<a name="l01074"></a>01074       *ntmode = p+1;
<a name="l01075"></a>01075    <span class="keywordflow">else</span>
<a name="l01076"></a>01076       qi-&gt;QI_ELEMENT(<a class="code" href="structprogress.html">progress</a>) = p - (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi - <span class="keyword">sizeof</span>(Q931_info_t);
<a name="l01077"></a>01077    p[0] = IE_PROGRESS;
<a name="l01078"></a>01078    p[1] = l;
<a name="l01079"></a>01079    p[2] = 0x80 + (coding&lt;&lt;5) + location;
<a name="l01080"></a>01080    p[3] = 0x80 + <a class="code" href="structprogress.html">progress</a>;
<a name="l01081"></a>01081 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="1f186c0ad767b7d02333156637000a10"></a><!-- doxytag: member="ie.c::enc_ie_redir_nr" ref="1f186c0ad767b7d02333156637000a10" args="(unsigned char **ntmode, msg_t *msg, int type, int plan, int present, int screen, int reason, char *number, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void enc_ie_redir_nr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char **&nbsp;</td>
          <td class="mdname" nowrap> <em>ntmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>msg_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>plan</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>present</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>screen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>reason</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>number</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l01113">1113</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00269">build_setup()</a>.<div class="fragment"><pre class="fragment"><a name="l01114"></a>01114 {
<a name="l01115"></a>01115    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;
<a name="l01116"></a>01116    Q931_info_t *qi = (Q931_info_t *)(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>-&gt;<a class="code" href="structast__channel.html#8d777f385d3dfec8815d20f7496026dc">data</a> + mISDN_HEADER_LEN);
<a name="l01117"></a>01117    <span class="keywordtype">int</span> l;
<a name="l01118"></a>01118 
<a name="l01119"></a>01119    <span class="keywordflow">if</span> (type&lt;0 || type&gt;7)
<a name="l01120"></a>01120    {
<a name="l01121"></a>01121       printf(<span class="stringliteral">"%s: ERROR: type(%d) is out of range.\n"</span>, __FUNCTION__, <a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>);
<a name="l01122"></a>01122       <span class="keywordflow">return</span>;
<a name="l01123"></a>01123    }
<a name="l01124"></a>01124    <span class="keywordflow">if</span> (plan&lt;0 || plan&gt;15)
<a name="l01125"></a>01125    {
<a name="l01126"></a>01126       printf(<span class="stringliteral">"%s: ERROR: plan(%d) is out of range.\n"</span>, __FUNCTION__, plan);
<a name="l01127"></a>01127       <span class="keywordflow">return</span>;
<a name="l01128"></a>01128    }
<a name="l01129"></a>01129    <span class="keywordflow">if</span> (present &gt; 3)
<a name="l01130"></a>01130    {
<a name="l01131"></a>01131       printf(<span class="stringliteral">"%s: ERROR: present(%d) is out of range.\n"</span>, __FUNCTION__, present);
<a name="l01132"></a>01132       <span class="keywordflow">return</span>;
<a name="l01133"></a>01133    }
<a name="l01134"></a>01134    <span class="keywordflow">if</span> (present &gt;= 0) <span class="keywordflow">if</span> (screen&lt;0 || screen&gt;3)
<a name="l01135"></a>01135    {
<a name="l01136"></a>01136       printf(<span class="stringliteral">"%s: ERROR: screen(%d) is out of range.\n"</span>, __FUNCTION__, screen);
<a name="l01137"></a>01137       <span class="keywordflow">return</span>;
<a name="l01138"></a>01138    }
<a name="l01139"></a>01139    <span class="keywordflow">if</span> (reason &gt; 0x0f)
<a name="l01140"></a>01140    {
<a name="l01141"></a>01141       printf(<span class="stringliteral">"%s: ERROR: reason(%d) is out of range.\n"</span>, __FUNCTION__, reason);
<a name="l01142"></a>01142       <span class="keywordflow">return</span>;
<a name="l01143"></a>01143    }
<a name="l01144"></a>01144 
<a name="l01145"></a>01145    <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(<span class="stringliteral">"    type=%d plan=%d present=%d screen=%d readon=%d number='%s'\n"</span>, <a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>, plan, present, screen, reason, <a class="code" href="structnumber.html">number</a>);
<a name="l01146"></a>01146 
<a name="l01147"></a>01147    l = 1;
<a name="l01148"></a>01148    <span class="keywordflow">if</span> (<a class="code" href="structnumber.html">number</a>)
<a name="l01149"></a>01149       l += strlen((<span class="keywordtype">char</span> *)<a class="code" href="structnumber.html">number</a>);
<a name="l01150"></a>01150    <span class="keywordflow">if</span> (present &gt;= 0)
<a name="l01151"></a>01151    {
<a name="l01152"></a>01152       l += 1;
<a name="l01153"></a>01153       <span class="keywordflow">if</span> (reason &gt;= 0)
<a name="l01154"></a>01154          l += 1;
<a name="l01155"></a>01155    }
<a name="l01156"></a>01156    p = msg_put(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, l+2);
<a name="l01157"></a>01157    <span class="keywordflow">if</span> (nt)
<a name="l01158"></a>01158       *ntmode = p+1;
<a name="l01159"></a>01159    <span class="keywordflow">else</span>
<a name="l01160"></a>01160       qi-&gt;QI_ELEMENT(redirect_nr) = p - (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi - <span class="keyword">sizeof</span>(Q931_info_t);
<a name="l01161"></a>01161    p[0] = IE_REDIR_NR;
<a name="l01162"></a>01162    p[1] = l;
<a name="l01163"></a>01163    <span class="keywordflow">if</span> (present &gt;= 0)
<a name="l01164"></a>01164    {
<a name="l01165"></a>01165       <span class="keywordflow">if</span> (reason &gt;= 0)
<a name="l01166"></a>01166       {
<a name="l01167"></a>01167          p[2] = 0x00 + (<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>&lt;&lt;4) + plan;
<a name="l01168"></a>01168          p[3] = 0x00 + (present&lt;&lt;5) + screen;
<a name="l01169"></a>01169          p[4] = 0x80 + reason;
<a name="l01170"></a>01170          <span class="keywordflow">if</span> (<a class="code" href="structnumber.html">number</a>)
<a name="l01171"></a>01171             strncpy((<span class="keywordtype">char</span> *)p+5, (<span class="keywordtype">char</span> *)<a class="code" href="structnumber.html">number</a>, strlen((<span class="keywordtype">char</span> *)number));
<a name="l01172"></a>01172       } <span class="keywordflow">else</span>
<a name="l01173"></a>01173       {
<a name="l01174"></a>01174          p[2] = 0x00 + (<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>&lt;&lt;4) + plan;
<a name="l01175"></a>01175          p[3] = 0x80 + (present&lt;&lt;5) + screen;
<a name="l01176"></a>01176          <span class="keywordflow">if</span> (number)
<a name="l01177"></a>01177             strncpy((<span class="keywordtype">char</span> *)p+4, (<span class="keywordtype">char</span> *)number, strlen((<span class="keywordtype">char</span> *)number));
<a name="l01178"></a>01178       }
<a name="l01179"></a>01179    } <span class="keywordflow">else</span>
<a name="l01180"></a>01180    {
<a name="l01181"></a>01181       p[2] = 0x80 + (<a class="code" href="rtp_8c.html#599dcce2998a6b40b1e38e8c6006cb0a">type</a>&lt;&lt;4) + plan;
<a name="l01182"></a>01182       <span class="keywordflow">if</span> (number) <span class="keywordflow">if</span> (number[0])
<a name="l01183"></a>01183          strncpy((<span class="keywordtype">char</span> *)p+3, (<span class="keywordtype">char</span> *)number, strlen((<span class="keywordtype">char</span> *)number));
<a name="l01184"></a>01184    }
<a name="l01185"></a>01185 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="37a8eeb33a0ee2c76373c00fd5b92c5f"></a><!-- doxytag: member="ie.c::enc_ie_useruser" ref="37a8eeb33a0ee2c76373c00fd5b92c5f" args="(unsigned char **ntmode, msg_t *msg, int protocol, char *user, int user_len, int nt, struct misdn_bchannel *bc)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void enc_ie_useruser           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char **&nbsp;</td>
          <td class="mdname" nowrap> <em>ntmode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>msg_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>protocol</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>user</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>user_len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nt</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="structmisdn__bchannel.html">misdn_bchannel</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l01328">1328</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
Referenced by <a class="el" href="isdn__msg__parser_8c-source.html#l00269">build_setup()</a>.<div class="fragment"><pre class="fragment"><a name="l01329"></a>01329 {
<a name="l01330"></a>01330    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;
<a name="l01331"></a>01331    Q931_info_t *qi = (Q931_info_t *)(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>-&gt;<a class="code" href="structast__channel.html#8d777f385d3dfec8815d20f7496026dc">data</a> + mISDN_HEADER_LEN);
<a name="l01332"></a>01332    <span class="keywordtype">int</span> l;
<a name="l01333"></a>01333 
<a name="l01334"></a>01334    <span class="keywordtype">char</span> <a class="code" href="app__rpt_8c.html#ad42f6697b035b7580e4fef93be20b4d">debug</a>[768];
<a name="l01335"></a>01335    <span class="keywordtype">int</span> i;
<a name="l01336"></a>01336 
<a name="l01337"></a>01337    <span class="keywordflow">if</span> (protocol&lt;0 || protocol&gt;127)
<a name="l01338"></a>01338    {
<a name="l01339"></a>01339       printf(<span class="stringliteral">"%s: ERROR: protocol(%d) is out of range.\n"</span>, __FUNCTION__, protocol);
<a name="l01340"></a>01340       <span class="keywordflow">return</span>;
<a name="l01341"></a>01341    }
<a name="l01342"></a>01342    <span class="keywordflow">if</span> (!user || user_len&lt;=0)
<a name="l01343"></a>01343    {
<a name="l01344"></a>01344       <span class="keywordflow">return</span>;
<a name="l01345"></a>01345    }
<a name="l01346"></a>01346 
<a name="l01347"></a>01347    i = 0;
<a name="l01348"></a>01348    <span class="keywordflow">while</span>(i &lt; user_len)
<a name="l01349"></a>01349    {
<a name="l01350"></a>01350       <span class="keywordflow">if</span> (<a class="code" href="ie_8c.html#ed1741c5169ae8a3035fbe420d758a9e">MISDN_IE_DEBG</a>) printf(debug+(i*3), <span class="stringliteral">" %02x"</span>, user[i]);
<a name="l01351"></a>01351       i++;
<a name="l01352"></a>01352    }
<a name="l01353"></a>01353       
<a name="l01354"></a>01354    <span class="keywordflow">if</span> (MISDN_IE_DEBG) printf(<span class="stringliteral">"    protocol=%d user-user%s\n"</span>, protocol, debug);
<a name="l01355"></a>01355 
<a name="l01356"></a>01356    l = user_len;
<a name="l01357"></a>01357    p = msg_put(<a class="code" href="adsistub_8c.html#6e2baaf3b97dbeef01c0043275f9a0e7">msg</a>, l+3);
<a name="l01358"></a>01358    <span class="keywordflow">if</span> (nt)
<a name="l01359"></a>01359       *ntmode = p+1;
<a name="l01360"></a>01360    <span class="keywordflow">else</span>
<a name="l01361"></a>01361       qi-&gt;QI_ELEMENT(useruser) = p - (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)qi - <span class="keyword">sizeof</span>(Q931_info_t);
<a name="l01362"></a>01362    p[0] = IE_USER_USER;
<a name="l01363"></a>01363    p[1] = l;
<a name="l01364"></a>01364    p[2] = 0x80 + protocol;
<a name="l01365"></a>01365    memcpy(p+3, user, user_len);
<a name="l01366"></a>01366 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="7e21d59728a48ad2fa10d1000c6edaf4"></a><!-- doxytag: member="ie.c::strnncpy" ref="7e21d59728a48ad2fa10d1000c6edaf4" args="(char *dest, char *src, int len, int dst_len)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void strnncpy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>src</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dst_len</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ie_8c-source.html#l00036">36</a> of file <a class="el" href="ie_8c-source.html">ie.c</a>.
<p>
Referenced by <a class="el" href="ie_8c-source.html#l00377">dec_ie_called_pn()</a>, <a class="el" href="ie_8c-source.html#l00461">dec_ie_calling_pn()</a>, <a class="el" href="ie_8c-source.html#l00563">dec_ie_connected_pn()</a>, <a class="el" href="ie_8c-source.html#l00968">dec_ie_keypad()</a>, and <a class="el" href="ie_8c-source.html#l01187">dec_ie_redir_nr()</a>.<div class="fragment"><pre class="fragment"><a name="l00037"></a>00037 {
<a name="l00038"></a>00038    <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a> &gt; dst_len-1)
<a name="l00039"></a>00039       <a class="code" href="utils_8h.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a> = dst_len-1;
<a name="l00040"></a>00040    strncpy((<span class="keywordtype">char</span> *)dest, (<span class="keywordtype">char</span> *)src, <a class="code" href="utils_8h.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>);
<a name="l00041"></a>00041    dest[<a class="code" href="utils_8h.html#f5a8e923f8cd24b56b3bab32358cc58a">len</a>] = <span class="charliteral">'\0'</span>;
<a name="l00042"></a>00042 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu May 24 22:27:33 2007 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
