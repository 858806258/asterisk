<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (24 May 2007)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Thu May 24 22:27:52 2007</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li id="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
  </ul></div>
<h1>eventqent Struct Reference<br>
<small>
[<a class="el" href="group__Group__AMI.html">AMI functions</a>]</small>
</h1><!-- doxytag: class="eventqent" --><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structeventqent.html#c4ef352f74e502ef5e7bc98e6f4e493d">category</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structeventqent.html#e068c2de26d760f20cf10afc4b87ef0f">seq</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structeventqent.html#2bc03f11219aa0e7a3ea1e303a9f0c9a">usecount</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Linked list of events. Global events are appended to the list by <a class="el" href="group__Group__AMI.html#g38726448f966fa5ad7aaa3141ba16235">append_event()</a>. The usecount is the number of stored pointers to the element, excluding the list pointers. So an element that is only in the list has a usecount of 0, not 1.<p>
Clients have a pointer to the last event processed, and for each of these clients we track the usecount of the elements. If we have a pointer to an entry in the list, it is safe to navigate it forward because elements will not be deleted, but only appended. The worst that can happen is seeing the pointer still NULL.<p>
When the usecount of an element drops to 0, and the element is the first in the list, we can remove it. Removal is done within the main thread, which is woken up for the purpose.<p>
For simplicity of implementation, we make sure the list is never empty. 
<p>

<p>
Definition at line <a class="el" href="manager_8c-source.html#l00103">103</a> of file <a class="el" href="manager_8c-source.html">manager.c</a>.<hr><h2>Field Documentation</h2>
<a class="anchor" name="c4ef352f74e502ef5e7bc98e6f4e493d"></a><!-- doxytag: member="eventqent::category" ref="c4ef352f74e502ef5e7bc98e6f4e493d" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="structeventqent.html#c4ef352f74e502ef5e7bc98e6f4e493d">category</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="manager_8c-source.html#l00105">105</a> of file <a class="el" href="manager_8c-source.html">manager.c</a>.
<p>
Referenced by <a class="el" href="manager_8c-source.html#l01065">action_getconfig()</a>, <a class="el" href="manager_8c-source.html#l01114">action_getconfigjson()</a>, <a class="el" href="manager_8c-source.html#l00601">handle_showmaneventq()</a>, and <a class="el" href="manager_8c-source.html#l01177">handle_updates()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="e068c2de26d760f20cf10afc4b87ef0f"></a><!-- doxytag: member="eventqent::seq" ref="e068c2de26d760f20cf10afc4b87ef0f" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned int <a class="el" href="structeventqent.html#e068c2de26d760f20cf10afc4b87ef0f">seq</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
sequence number 
<p>
Definition at line <a class="el" href="manager_8c-source.html#l00106">106</a> of file <a class="el" href="manager_8c-source.html">manager.c</a>.
<p>
Referenced by <a class="el" href="manager_8c-source.html#l02563">__manager_event()</a>, and <a class="el" href="manager_8c-source.html#l02536">append_event()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="2bc03f11219aa0e7a3ea1e303a9f0c9a"></a><!-- doxytag: member="eventqent::usecount" ref="2bc03f11219aa0e7a3ea1e303a9f0c9a" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="structeventqent.html#2bc03f11219aa0e7a3ea1e303a9f0c9a">usecount</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
# of clients who still need the event 
<p>
Definition at line <a class="el" href="manager_8c-source.html#l00104">104</a> of file <a class="el" href="manager_8c-source.html">manager.c</a>.
<p>
Referenced by <a class="el" href="manager_8c-source.html#l00271">grab_last()</a>, <a class="el" href="manager_8c-source.html#l00601">handle_showmaneventq()</a>, <a class="el" href="manager_8c-source.html#l00290">purge_events()</a>, <a class="el" href="manager_8c-source.html#l00685">ref_event()</a>, and <a class="el" href="manager_8c-source.html#l00679">unref_event()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="manager_8c-source.html">manager.c</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu May 24 22:27:52 2007 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
