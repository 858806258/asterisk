<HTML>
    <HEAD>
      <TITLE>Asterisk.org: Developer Documentation (24 May 2007)</TITLE>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<div><font size="2" align="right">Thu May 24 22:27:35 2007</font></div>

<h2>Asterisk developer's documentation</h2>
<hr/>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Finclude_2F.html">include</a>&nbsp;&raquo&nbsp;<a class="el" href="dir__2Fusr_2Flocal_2Fsrc_2Fasterisk_2Esvn_2Fastum_2Finclude_2Fasterisk_2F.html">asterisk</a></div>
<h1>localtime.h File Reference</h1>Custom localtime functions for multiple timezones. <a href="#_details">More...</a>
<p>

<p>
<a href="localtime_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="localtime_8h.html#8c396b81669408b9ff3d748853fc63d4">ast_ctime</a> (const time_t *const timep)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="localtime_8h.html#a742ac33f3f34530dda16bfb79388e35">ast_ctime_r</a> (const time_t *const timep, char *<a class="el" href="adsistub_8c.html#cb7e52b21171fb9a53b498202607f0bd">buf</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">tm *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="localtime_8h.html#7ed0b22e72553de90f7f3a1f0496baa7">ast_localtime</a> (const time_t *timep, struct tm *p_tm, const char *zone)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">time_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="localtime_8h.html#1c2e206e8a7748e3c2a06e9e9fa4b146">ast_mktime</a> (struct tm *const tmp, const char *zone)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="localtime_8h.html#580c2609c6d999710a47987538f07221">ast_tzset</a> (const char *<a class="el" href="cdr__tds_8c.html#b068931cc450442b63f5b3d276ea4297">name</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="localtime_8h.html#22e6003ba587ce51691faff3aa2c5d4b">ast_tzsetwall</a> (void)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Custom localtime functions for multiple timezones. 
<p>

<p>
Definition in file <a class="el" href="localtime_8h-source.html">localtime.h</a>.<hr><h2>Function Documentation</h2>
<a class="anchor" name="8c396b81669408b9ff3d748853fc63d4"></a><!-- doxytag: member="localtime.h::ast_ctime" ref="8c396b81669408b9ff3d748853fc63d4" args="(const time_t *const timep)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* ast_ctime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const time_t *const &nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>timep</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a742ac33f3f34530dda16bfb79388e35"></a><!-- doxytag: member="localtime.h::ast_ctime_r" ref="a742ac33f3f34530dda16bfb79388e35" args="(const time_t *const timep, char *buf)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* ast_ctime_r           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const time_t *const &nbsp;</td>
          <td class="mdname" nowrap> <em>timep</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="7ed0b22e72553de90f7f3a1f0496baa7"></a><!-- doxytag: member="localtime.h::ast_localtime" ref="7ed0b22e72553de90f7f3a1f0496baa7" args="(const time_t *timep, struct tm *p_tm, const char *zone)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">struct tm* ast_localtime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const time_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>timep</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct tm *&nbsp;</td>
          <td class="mdname" nowrap> <em>p_tm</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>zone</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="func__strings_8c-source.html#l00593">acf_strftime()</a>, <a class="el" href="say_8c-source.html#l02864">ast_say_date_da()</a>, <a class="el" href="say_8c-source.html#l02912">ast_say_date_de()</a>, <a class="el" href="say_8c-source.html#l02836">ast_say_date_en()</a>, <a class="el" href="say_8c-source.html#l02992">ast_say_date_fr()</a>, <a class="el" href="say_8c-source.html#l06996">ast_say_date_ge()</a>, <a class="el" href="say_8c-source.html#l06454">ast_say_date_gr()</a>, <a class="el" href="say_8c-source.html#l02961">ast_say_date_hu()</a>, <a class="el" href="say_8c-source.html#l03020">ast_say_date_nl()</a>, <a class="el" href="say_8c-source.html#l03048">ast_say_date_pt()</a>, <a class="el" href="say_8c-source.html#l03349">ast_say_date_with_format_da()</a>, <a class="el" href="say_8c-source.html#l03555">ast_say_date_with_format_de()</a>, <a class="el" href="say_8c-source.html#l03106">ast_say_date_with_format_en()</a>, <a class="el" href="say_8c-source.html#l03969">ast_say_date_with_format_es()</a>, <a class="el" href="say_8c-source.html#l04162">ast_say_date_with_format_fr()</a>, <a class="el" href="say_8c-source.html#l06575">ast_say_date_with_format_gr()</a>, <a class="el" href="say_8c-source.html#l03781">ast_say_date_with_format_he()</a>, <a class="el" href="say_8c-source.html#l04361">ast_say_date_with_format_it()</a>, <a class="el" href="say_8c-source.html#l04595">ast_say_date_with_format_nl()</a>, <a class="el" href="say_8c-source.html#l04829">ast_say_date_with_format_pl()</a>, <a class="el" href="say_8c-source.html#l05046">ast_say_date_with_format_pt()</a>, <a class="el" href="say_8c-source.html#l05345">ast_say_date_with_format_tw()</a>, <a class="el" href="res__astum_8c-source.html#l00474">cli_aum_show_user()</a>, <a class="el" href="app__rpt_8c-source.html#l05575">do_scheduler()</a>, <a class="el" href="res__astum_8c-source.html#l00665">func_aumuser_read()</a>, <a class="el" href="app__minivm_8c-source.html#l02778">handle_minivm_show_stats()</a>, <a class="el" href="chan__iax2_8c-source.html#l02827">iax2_datetime()</a>, <a class="el" href="app__minivm_8c-source.html#l01501">leave_voicemail()</a>, <a class="el" href="test_8c-source.html#l00008">main()</a>, <a class="el" href="app__playback_8c-source.html#l00282">say_date_generic()</a>, <a class="el" href="app__minivm_8c-source.html#l00892">sendmail()</a>, <a class="el" href="chan__sip_8c-source.html#l11081">sip_show_registry()</a>, <a class="el" href="app__voicemail_8c-source.html#l01931">vmu_tm()</a>, and <a class="el" href="app__alarmreceiver_8c-source.html#l00308">write_metadata()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="1c2e206e8a7748e3c2a06e9e9fa4b146"></a><!-- doxytag: member="localtime.h::ast_mktime" ref="1c2e206e8a7748e3c2a06e9e9fa4b146" args="(struct tm *const tmp, const char *zone)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">time_t ast_mktime           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">struct tm *const &nbsp;</td>
          <td class="mdname" nowrap> <em>tmp</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>zone</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="localtime_8c-source.html#l01491">1491</a> of file <a class="el" href="localtime_8c-source.html">localtime.c</a>.
<p>
References <a class="el" href="lock_8h-source.html#l00530">ast_mutex_lock()</a>, <a class="el" href="lock_8h-source.html#l00520">ast_mutex_unlock()</a>, <a class="el" href="strings_8h-source.html#l00037">ast_strlen_zero()</a>, <a class="el" href="localtime_8h.html#580c2609c6d999710a47987538f07221">ast_tzset()</a>, <a class="el" href="localtime_8c-source.html#l00984">localsub()</a>, and <a class="el" href="localtime_8c-source.html#l01430">time1()</a>.
<p>
Referenced by <a class="el" href="func__strings_8c-source.html#l00629">acf_strptime()</a>.<div class="fragment"><pre class="fragment"><a name="l01494"></a>01494 {
<a name="l01495"></a>01495    time_t mktime_return_value;
<a name="l01496"></a>01496 <span class="preprocessor">#ifdef   _THREAD_SAFE</span>
<a name="l01497"></a>01497 <span class="preprocessor"></span>   <a class="code" href="lock_8h.html#b3c5e3093b325167f88db93c8b4b2421">ast_mutex_lock</a>(&amp;lcl_mutex);
<a name="l01498"></a>01498 <span class="preprocessor">#endif</span>
<a name="l01499"></a>01499 <span class="preprocessor"></span>   <a class="code" href="localtime_8h.html#580c2609c6d999710a47987538f07221">ast_tzset</a>(!<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(zone) ? zone : <span class="stringliteral">"/etc/localtime"</span>);
<a name="l01500"></a>01500    mktime_return_value = <a class="code" href="localtime_8c.html#acc25b8a96451b7c84fecf3bd01773b7">time1</a>(tmp, <a class="code" href="localtime_8c.html#16f54e89fc8e1eb7993c3eb89a30bcf3">localsub</a>, 0L, !<a class="code" href="strings_8h.html#8ea6cd7603b8f588209bc49c9c29e968">ast_strlen_zero</a>(zone) ? zone : <span class="stringliteral">"/etc/localtime"</span>);
<a name="l01501"></a>01501 <span class="preprocessor">#ifdef   _THREAD_SAFE</span>
<a name="l01502"></a>01502 <span class="preprocessor"></span>   <a class="code" href="lock_8h.html#1d33e3caf152f0901c5ebdb69c2d4d26">ast_mutex_unlock</a>(&amp;lcl_mutex);
<a name="l01503"></a>01503 <span class="preprocessor">#endif</span>
<a name="l01504"></a>01504 <span class="preprocessor"></span>   <span class="keywordflow">return</span>(mktime_return_value);
<a name="l01505"></a>01505 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="580c2609c6d999710a47987538f07221"></a><!-- doxytag: member="localtime.h::ast_tzset" ref="580c2609c6d999710a47987538f07221" args="(const char *name)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ast_tzset           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>name</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="localtime_8c-source.html#l01051">ast_localtime()</a>, and <a class="el" href="localtime_8c-source.html#l01491">ast_mktime()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="22e6003ba587ce51691faff3aa2c5d4b"></a><!-- doxytag: member="localtime.h::ast_tzsetwall" ref="22e6003ba587ce51691faff3aa2c5d4b" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ast_tzsetwall           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="localtime_8c-source.html#l00984">localsub()</a>, and <a class="el" href="localtime_8c-source.html#l00906">P()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu May 24 22:27:35 2007 for Asterisk - the Open Source PBX by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.5 </small></address>
</body>
</html>
